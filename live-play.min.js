"object"==typeof navigator&&function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Plyr",t):e.Plyr=t()}(this,function(){"use strict";function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function e(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var t=function(e){return null!=e?e.constructor:null},n=function(e,t){return Boolean(e&&t&&e instanceof t)},i=function(e){return null==e},o=function(e){return t(e)===Object},s=function(e){return t(e)===String},l=function(e){return Array.isArray(e)},u=function(e){return n(e,NodeList)},c=function(e){return i(e)||(s(e)||l(e)||u(e))&&!e.length||o(e)&&!Object.keys(e).length},m={nullOrUndefined:i,object:o,number:function(e){return t(e)===Number&&!Number.isNaN(e)},string:s,boolean:function(e){return t(e)===Boolean},function:function(e){return t(e)===Function},array:l,weakMap:function(e){return n(e,WeakMap)},nodeList:u,element:function(e){return n(e,Element)},textNode:function(e){return t(e)===Text},event:function(e){return n(e,Event)},keyboardEvent:function(e){return n(e,KeyboardEvent)},cue:function(e){return n(e,window.TextTrackCue)||n(e,window.VTTCue)},track:function(e){return n(e,TextTrack)||!i(e)&&s(e.kind)},url:function(e){if(n(e,window.URL))return!0;if(!s(e))return!1;var t=e;e.startsWith("http://")&&e.startsWith("https://")||(t="http://".concat(e));try{return!c(new URL(t).hostname)}catch(e){return!1}},empty:c},f=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){return e=!0,null}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e}();function h(t,e,n){var r=this,i=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],o=5<arguments.length&&void 0!==arguments[5]&&arguments[5];if(t&&"addEventListener"in t&&!m.empty(e)&&m.function(n)){var s=e.split(" "),l=o;f&&(l={passive:a,capture:o}),s.forEach(function(e){r&&r.eventListeners&&i&&r.eventListeners.push({element:t,type:e,callback:n,options:l}),t[i?"addEventListener":"removeEventListener"](e,n,l)})}}function p(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length?arguments[2]:void 0,r=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],i=4<arguments.length&&void 0!==arguments[4]&&arguments[4];h.call(this,e,t,n,!0,r,i)}function v(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length?arguments[2]:void 0,r=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],i=4<arguments.length&&void 0!==arguments[4]&&arguments[4];h.call(this,e,t,n,!1,r,i)}function y(i){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",o=2<arguments.length?arguments[2]:void 0,s=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],l=4<arguments.length&&void 0!==arguments[4]&&arguments[4];h.call(this,i,a,function e(){v(i,a,e,s,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];o.apply(this,n)},!0,s,l)}function E(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(m.element(e)&&!m.empty(t)){var i=new CustomEvent(t,{bubbles:n,detail:Object.assign({},r,{plyr:this})});e.dispatchEvent(i)}}function _(e,a){var t=e.length?e:[e];Array.from(t).reverse().forEach(function(e,t){var n=0<t?a.cloneNode(!0):a,r=e.parentNode,i=e.nextSibling;n.appendChild(e),i?r.insertBefore(n,i):r.appendChild(n)})}function T(i,e){m.element(i)&&!m.empty(e)&&Object.entries(e).filter(function(e){var t=g(e,2)[1];return!m.nullOrUndefined(t)}).forEach(function(e){var t=g(e,2),n=t[0],r=t[1];return i.setAttribute(n,r)})}function b(e,t,n){var r=document.createElement(e);return m.object(t)&&T(r,t),m.string(n)&&(r.innerText=n),r}function S(e,t,n,r){m.element(t)&&t.appendChild(b(e,n,r))}function A(e){m.nodeList(e)||m.array(e)?Array.from(e).forEach(A):m.element(e)&&m.element(e.parentNode)&&e.parentNode.removeChild(e)}function R(e){if(m.element(e))for(var t=e.childNodes.length;0<t;)e.removeChild(e.lastChild),t-=1}function w(e,t){return m.element(t)&&m.element(t.parentNode)&&m.element(e)?(t.parentNode.replaceChild(e,t),e):null}function I(e,t){if(!m.string(e)||m.empty(e))return{};var o={},s=t;return e.split(",").forEach(function(e){var t=e.trim(),n=t.replace(".",""),r=t.replace(/[[\]]/g,"").split("="),i=r[0],a=1<r.length?r[1].replace(/["']/g,""):"";switch(t.charAt(0)){case".":m.object(s)&&m.string(s.class)&&(s.class+=" ".concat(n)),o.class=n;break;case"#":o.id=t.replace("#","");break;case"[":o[i]=a}}),o}function D(e,t){if(m.element(e)){var n=t;m.boolean(n)||(n=!e.hidden),n?e.setAttribute("hidden",""):e.removeAttribute("hidden")}}function M(e,t,n){if(m.nodeList(e))return Array.from(e).map(function(e){return M(e,t,n)});if(m.element(e)){var r="toggle";return void 0!==n&&(r=n?"add":"remove"),e.classList[r](t),e.classList.contains(t)}return!1}function C(e,t){return m.element(e)&&e.classList.contains(t)}function O(e,t){return function(){return Array.from(document.querySelectorAll(t)).includes(this)}.call(e,t)}function P(e){return this.elements.container.querySelectorAll(e)}function N(e){return this.elements.container.querySelector(e)}function L(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];m.element(e)&&(e.focus({preventScroll:!0}),t&&M(e,this.config.classNames.tabFocus))}var k,x,F,U=(k=document.createElement("span"),x={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},F=Object.keys(x).find(function(e){return void 0!==k.style[e]}),!!m.string(F)&&x[F]);function B(e){setTimeout(function(){try{D(e,!0),e.offsetHeight,D(e,!1)}catch(e){}},0)}var G,j={isIE:!!document.documentMode,isWebkit:"WebkitAppearance"in document.documentElement.style&&!/Edge/.test(navigator.userAgent),isIPhone:/(iPhone|iPod)/gi.test(navigator.platform),isIos:/(iPad|iPhone|iPod)/gi.test(navigator.platform)},K={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},Y={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check:function(e,t,n){var r=j.isIPhone&&n&&Y.playsinline,i=Y[e]||"html5"!==t;return{api:i,ui:i&&Y.rangeInput&&("video"!==e||!j.isIPhone||r)}},pip:!(j.isIPhone||!m.function(b("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||b("video").disablePictureInPicture)),airplay:m.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime:function(e){var t=g(e.split("/"),1)[0],n=e;if(!this.isHTML5||t!==this.type)return!1;Object.keys(K).includes(n)&&(n+='; codecs="'.concat(K[e],'"'));try{return Boolean(n&&this.media.canPlayType(n).replace(/no/,""))}catch(e){return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(G=document.createElement("input"),G.type="range","range"===G.type),touch:"ontouchstart"in document.documentElement,transitions:!1!==U,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},H={getSources:function(){var t=this;return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter(function(e){return Y.mime.call(t,e.getAttribute("type"))}):[]},getQualityOptions:function(){return H.getSources.call(this).map(function(e){return Number(e.getAttribute("size"))}).filter(Boolean)},extend:function(){if(this.isHTML5){var s=this;Object.defineProperty(s.media,"quality",{get:function(){var e=H.getSources.call(s).find(function(e){return e.getAttribute("src")===s.source});return e&&Number(e.getAttribute("size"))},set:function(t){var e=H.getSources.call(s).find(function(e){return Number(e.getAttribute("size"))===t});if(e){var n=s.media,r=n.currentTime,i=n.paused,a=n.preload,o=n.readyState;s.media.src=e.getAttribute("src"),("none"!==a||o)&&(s.once("loadedmetadata",function(){s.currentTime=r,i||s.play()}),s.media.load()),E.call(s,s.media,"qualitychange",!1,{quality:t})}}})}},cancelRequests:function(){this.isHTML5&&(A(H.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function q(n){return m.array(n)?n.filter(function(e,t){return n.indexOf(e)===t}):n}function V(e,t){return t.split(".").reduce(function(e,t){return e&&e[t]},e)}function W(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(!n.length)return t;var i=n.shift();return m.object(i)?(Object.keys(i).forEach(function(e){m.object(i[e])?(Object.keys(t).includes(e)||Object.assign(t,a({},e,{})),W(t[e],i[e])):Object.assign(t,a({},e,i[e]))}),W.apply(void 0,[t].concat(n))):t}function z(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return m.empty(e)?e:e.toString().replace(/{(\d+)}/g,function(e,t){return n[t].toString()})}function X(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";return e.replace(new RegExp(t.toString().replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1"),"g"),n.toString())}function Q(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").toString().replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}function Z(e){var t=document.createElement("div");return t.appendChild(e),t.innerHTML}var J={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},$=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(m.empty(e)||m.empty(t))return"";var i=V(t.i18n,e);if(m.empty(i))return Object.keys(J).includes(e)?J[e]:"";var n={"{seektime}":t.seekTime,"{title}":t.title};return Object.entries(n).forEach(function(e){var t=g(e,2),n=t[0],r=t[1];i=X(i,n,r)}),i},ee=function(){function r(e){d(this,r),this.enabled=e.config.storage.enabled,this.key=e.config.storage.key}return e(r,[{key:"get",value:function(e){if(!r.supported||!this.enabled)return null;var t=window.localStorage.getItem(this.key);if(m.empty(t))return null;var n=JSON.parse(t);return m.string(e)&&e.length?n[e]:n}},{key:"set",value:function(e){if(r.supported&&this.enabled&&m.object(e)){var t=this.get();m.empty(t)&&(t={}),W(t,e),window.localStorage.setItem(this.key,JSON.stringify(t))}}}],[{key:"supported",get:function(){try{return"localStorage"in window&&(window.localStorage.setItem("___test","___test"),window.localStorage.removeItem("___test"),!0)}catch(e){return!1}}}]),r}();function te(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"text";return new Promise(function(t,n){try{var r=new XMLHttpRequest;if(!("withCredentials"in r))return;r.addEventListener("load",function(){if("text"===i)try{t(JSON.parse(r.responseText))}catch(e){t(r.responseText)}else t(r.response)}),r.addEventListener("error",function(){throw new Error(r.status)}),r.open("GET",e,!0),r.responseType=i,r.send()}catch(e){n(e)}})}function ne(e,t){if(m.string(e)){var n=m.string(t),r=function(){return null!==document.getElementById(t)},i=function(e,t){e.innerHTML=t,n&&r()||document.body.insertAdjacentElement("afterbegin",e)};if(!n||!r()){var a=ee.supported,o=document.createElement("div");if(o.setAttribute("hidden",""),n&&o.setAttribute("id",t),a){var s=window.localStorage.getItem("".concat("cache","-").concat(t));if(null!==s){var l=JSON.parse(s);i(o,l.content)}}te(e).then(function(e){m.empty(e)||(a&&window.localStorage.setItem("".concat("cache","-").concat(t),JSON.stringify({content:e})),i(o,e))}).catch(function(){})}}}var re=function(e){return parseInt(e/60/60%60,10)},ie=function(e){return parseInt(e/60%60,10)},ae=function(e){return parseInt(e%60,10)};function oe(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(!m.number(e))return oe(null,t,n);var r=function(e){return"0".concat(e).slice(-2)},i=re(e),a=ie(e),o=ae(e);return i=t||0<i?"".concat(i,":"):"","".concat(n&&0<e?"-":"").concat(i).concat(r(a),":").concat(r(o))}var se={getIconUrl:function(){var e=new URL(this.config.iconUrl,window.location).host!==window.location.host||j.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:e}},findElements:function(){try{return this.elements.controls=N.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:P.call(this,this.config.selectors.buttons.play),pause:N.call(this,this.config.selectors.buttons.pause),restart:N.call(this,this.config.selectors.buttons.restart),rewind:N.call(this,this.config.selectors.buttons.rewind),fastForward:N.call(this,this.config.selectors.buttons.fastForward),mute:N.call(this,this.config.selectors.buttons.mute),pip:N.call(this,this.config.selectors.buttons.pip),airplay:N.call(this,this.config.selectors.buttons.airplay),settings:N.call(this,this.config.selectors.buttons.settings),captions:N.call(this,this.config.selectors.buttons.captions),fullscreen:N.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=N.call(this,this.config.selectors.progress),this.elements.inputs={seek:N.call(this,this.config.selectors.inputs.seek),volume:N.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:N.call(this,this.config.selectors.display.buffer),currentTime:N.call(this,this.config.selectors.display.currentTime),duration:N.call(this,this.config.selectors.display.duration)},m.element(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(".".concat(this.config.classNames.tooltip))),!0}catch(e){return this.debug.warn("It looks like there is a problem with your custom controls HTML",e),this.toggleNativeControls(!0),!1}},createIcon:function(e,t){var n=se.getIconUrl.call(this),r="".concat(n.cors?"":n.url,"#").concat(this.config.iconPrefix),i=document.createElementNS("http://www.w3.org/2000/svg","svg");T(i,W(t,{role:"presentation",focusable:"false"}));var a=document.createElementNS("http://www.w3.org/2000/svg","use"),o="".concat(r,"-").concat(e);return"href"in a&&a.setAttributeNS("http://www.w3.org/1999/xlink","href",o),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o),i.appendChild(a),i},createLabel:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=$(e,this.config);return b("span",Object.assign({},t,{class:[t.class,this.config.classNames.hidden].filter(Boolean).join(" ")}),n)},createBadge:function(e){if(m.empty(e))return null;var t=b("span",{class:this.config.classNames.menu.value});return t.appendChild(b("span",{class:this.config.classNames.menu.badge},e)),t},createButton:function(e,t){var n=Object.assign({},t),r=function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").toString();return(e=function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").toString();return X(e=Q(e=X(e=X(e,"-"," "),"_"," "))," ","")}(e)).charAt(0).toLowerCase()+e.slice(1)}(e),i={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach(function(e){Object.keys(n).includes(e)&&(i[e]=n[e],delete n[e])}),"button"!==i.element||Object.keys(n).includes("type")||(n.type="button"),Object.keys(n).includes("class")?n.class.includes(this.config.classNames.control)||(n.class+=" ".concat(this.config.classNames.control)):n.class=this.config.classNames.control,e){case"play":i.toggle=!0,i.label="play",i.labelPressed="pause",i.icon="play",i.iconPressed="pause";break;case"mute":i.toggle=!0,i.label="mute",i.labelPressed="unmute",i.icon="volume",i.iconPressed="muted";break;case"captions":i.toggle=!0,i.label="enableCaptions",i.labelPressed="disableCaptions",i.icon="captions-off",i.iconPressed="captions-on";break;case"fullscreen":i.toggle=!0,i.label="enterFullscreen",i.labelPressed="exitFullscreen",i.icon="enter-fullscreen",i.iconPressed="exit-fullscreen";break;case"play-large":n.class+=" ".concat(this.config.classNames.control,"--overlaid"),r="play",i.label="play",i.icon="play";break;default:m.empty(i.label)&&(i.label=r),m.empty(i.icon)&&(i.icon=e)}var a=b(i.element);return i.toggle?(a.appendChild(se.createIcon.call(this,i.iconPressed,{class:"icon--pressed"})),a.appendChild(se.createIcon.call(this,i.icon,{class:"icon--not-pressed"})),a.appendChild(se.createLabel.call(this,i.labelPressed,{class:"label--pressed"})),a.appendChild(se.createLabel.call(this,i.label,{class:"label--not-pressed"}))):(a.appendChild(se.createIcon.call(this,i.icon)),a.appendChild(se.createLabel.call(this,i.label))),W(n,I(this.config.selectors.buttons[r],n)),T(a,n),"play"===r?(m.array(this.elements.buttons[r])||(this.elements.buttons[r]=[]),this.elements.buttons[r].push(a)):this.elements.buttons[r]=a,a},createRange:function(e,t){var n=b("input",W(I(this.config.selectors.inputs[e]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":$(e,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},t));return this.elements.inputs[e]=n,se.updateRangeFill.call(this,n),n},createProgress:function(e,t){var n=b("progress",W(I(this.config.selectors.display[e]),{min:0,max:100,value:0,role:"presentation","aria-hidden":!0},t));if("volume"!==e){n.appendChild(b("span",null,"0"));var r={played:"played",buffer:"buffered"}[e],i=r?$(r,this.config):"";n.innerText="% ".concat(i.toLowerCase())}return this.elements.display[e]=n},createTime:function(e){var t=I(this.config.selectors.display[e]),n=b("div",W(t,{class:"".concat(this.config.classNames.display.time," ").concat(t.class?t.class:"").trim(),"aria-label":$(e,this.config)}),"00:00");return this.elements.display[e]=n},bindMenuItemShortcuts:function(r,i){var a=this;p(r,"keydown keyup",function(e){if([32,38,39,40].includes(e.which)&&(e.preventDefault(),e.stopPropagation(),"keydown"!==e.type)){var t,n=O(r,'[role="menuitemradio"]');!n&&[32,39].includes(e.which)?se.showMenuPanel.call(a,i,!0):32!==e.which&&(40===e.which||n&&39===e.which?(t=r.nextElementSibling,m.element(t)||(t=r.parentNode.firstElementChild)):(t=r.previousElementSibling,m.element(t)||(t=r.parentNode.lastElementChild)),L.call(a,t,!0))}},!1),p(r,"keyup",function(e){13===e.which&&se.focusFirstMenuItem.call(a,null,!0)})},createMenuItem:function(e){var t=this,n=e.value,r=e.list,i=e.type,a=e.title,o=e.badge,s=void 0===o?null:o,l=e.checked,u=void 0!==l&&l,d=I(this.config.selectors.inputs[i]),c=b("button",W(d,{type:"button",role:"menuitemradio",class:"".concat(this.config.classNames.control," ").concat(d.class?d.class:"").trim(),"aria-checked":u,value:n})),f=b("span");f.innerHTML=a,m.element(s)&&f.appendChild(s),c.appendChild(f),Object.defineProperty(c,"checked",{enumerable:!0,get:function(){return"true"===c.getAttribute("aria-checked")},set:function(e){e&&Array.from(c.parentNode.children).filter(function(e){return O(e,'[role="menuitemradio"]')}).forEach(function(e){return e.setAttribute("aria-checked","false")}),c.setAttribute("aria-checked",e?"true":"false")}}),this.listeners.bind(c,"click keyup",function(e){if(!m.keyboardEvent(e)||32===e.which){switch(e.preventDefault(),e.stopPropagation(),c.checked=!0,i){case"language":t.currentTrack=Number(n);break;case"quality":t.quality=n;break;case"speed":t.speed=parseFloat(n)}se.showMenuPanel.call(t,"home",m.keyboardEvent(e))}},i,!1),se.bindMenuItemShortcuts.call(this,c,i),r.appendChild(c)},formatTime:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return m.number(e)?oe(e,0<re(this.duration),t):e},updateTimeDisplay:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];m.element(e)&&m.number(t)&&(e.innerText=se.formatTime(t,n))},updateVolume:function(){this.supported.ui&&(m.element(this.elements.inputs.volume)&&se.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),m.element(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||0===this.volume))},setRange:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;m.element(e)&&(e.value=t,se.updateRangeFill.call(this,e))},updateProgress:function(e){var a=this;if(this.supported.ui&&m.event(e)){var t,n,r=0;if(e)switch(e.type){case"timeupdate":case"seeking":case"seeked":t=this.currentTime,n=this.duration,r=0===t||0===n||Number.isNaN(t)||Number.isNaN(n)?0:(t/n*100).toFixed(2),"timeupdate"===e.type&&se.setRange.call(this,this.elements.inputs.seek,r);break;case"playing":case"progress":!function(e,t){var n=m.number(t)?t:0,r=m.element(e)?e:a.elements.display.buffer;if(m.element(r)){r.value=n;var i=r.getElementsByTagName("span")[0];m.element(i)&&(i.childNodes[0].nodeValue=n)}}(this.elements.display.buffer,100*this.buffered)}}},updateRangeFill:function(e){var t=m.event(e)?e.target:e;if(m.element(t)&&"range"===t.getAttribute("type")){if(O(t,this.config.selectors.inputs.seek)){t.setAttribute("aria-valuenow",this.currentTime);var n=se.formatTime(this.currentTime),r=se.formatTime(this.duration),i=$("seekLabel",this.config);t.setAttribute("aria-valuetext",i.replace("{currentTime}",n).replace("{duration}",r))}else if(O(t,this.config.selectors.inputs.volume)){var a=100*t.value;t.setAttribute("aria-valuenow",a),t.setAttribute("aria-valuetext","".concat(a.toFixed(1),"%"))}else t.setAttribute("aria-valuenow",t.value);j.isWebkit&&t.style.setProperty("--value","".concat(t.value/t.max*100,"%"))}},updateSeekTooltip:function(e){var t=this;if(this.config.tooltips.seek&&m.element(this.elements.inputs.seek)&&m.element(this.elements.display.seekTooltip)&&0!==this.duration){var n=0,r=this.elements.progress.getBoundingClientRect(),i="".concat(this.config.classNames.tooltip,"--visible"),a=function(e){M(t.elements.display.seekTooltip,i,e)};if(this.touch)a(!1);else{if(m.event(e))n=100/r.width*(e.pageX-r.left);else{if(!C(this.elements.display.seekTooltip,i))return;n=parseFloat(this.elements.display.seekTooltip.style.left,10)}n<0?n=0:100<n&&(n=100),se.updateTimeDisplay.call(this,this.elements.display.seekTooltip,this.duration/100*n),this.elements.display.seekTooltip.style.left="".concat(n,"%"),m.event(e)&&["mouseenter","mouseleave"].includes(e.type)&&a("mouseenter"===e.type)}}},timeUpdate:function(e){var t=!m.element(this.elements.display.duration)&&this.config.invertTime;se.updateTimeDisplay.call(this,this.elements.display.currentTime,t?this.duration-this.currentTime:this.currentTime,t),e&&"timeupdate"===e.type&&this.media.seeking||se.updateProgress.call(this,e)},durationUpdate:function(){if(this.supported.ui&&(this.config.invertTime||!this.currentTime)){if(this.duration>=Math.pow(2,32))return D(this.elements.display.currentTime,!0),void D(this.elements.progress,!0);m.element(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);var e=m.element(this.elements.display.duration);!e&&this.config.displayDuration&&this.paused&&se.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),e&&se.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),se.updateSeekTooltip.call(this)}},toggleMenuButton:function(e,t){D(this.elements.settings.buttons[e],!t)},updateSetting:function(e,t,n){var r=this.elements.settings.panels[e],i=null,a=t;if("captions"===e)i=this.currentTrack;else{if(i=m.empty(n)?this[e]:n,m.empty(i)&&(i=this.config[e].default),!m.empty(this.options[e])&&!this.options[e].includes(i))return void this.debug.warn("Unsupported value of '".concat(i,"' for ").concat(e));if(!this.config[e].options.includes(i))return void this.debug.warn("Disabled value of '".concat(i,"' for ").concat(e))}if(m.element(a)||(a=r&&r.querySelector('[role="menu"]')),m.element(a)){this.elements.settings.buttons[e].querySelector(".".concat(this.config.classNames.menu.value)).innerHTML=se.getLabel.call(this,e,i);var o=a&&a.querySelector('[value="'.concat(i,'"]'));m.element(o)&&(o.checked=!0)}},getLabel:function(e,t){switch(e){case"speed":return 1===t?$("normal",this.config):"".concat(t,"&times;");case"quality":if(m.number(t)){var n=$("qualityLabel.".concat(t),this.config);return n.length?n:"".concat(t,"p")}return Q(t);case"captions":return de.getLabel.call(this);default:return null}},setQualityMenu:function(e){var r=this;if(m.element(this.elements.settings.panels.quality)){var i=this.elements.settings.panels.quality.querySelector('[role="menu"]');m.array(e)&&(this.options.quality=q(e).filter(function(e){return r.config.quality.options.includes(e)}));var t=!m.empty(this.options.quality)&&1<this.options.quality.length;if(se.toggleMenuButton.call(this,"quality",t),R(i),se.checkMenu.call(this),t){this.options.quality.sort(function(e,t){var n=r.config.quality.options;return n.indexOf(e)>n.indexOf(t)?1:-1}).forEach(function(e){var t,n;se.createMenuItem.call(r,{value:e,list:i,type:"quality",title:se.getLabel.call(r,"quality",e),badge:(t=e,n=$("qualityBadge.".concat(t),r.config),n.length?se.createBadge.call(r,n):null)})}),se.updateSetting.call(this,"quality",i)}}},setCaptionsMenu:function(){var n=this;if(m.element(this.elements.settings.panels.captions)){var r=this.elements.settings.panels.captions.querySelector('[role="menu"]'),e=de.getTracks.call(this),t=Boolean(e.length);if(se.toggleMenuButton.call(this,"captions",t),R(r),se.checkMenu.call(this),t){var i=e.map(function(e,t){return{value:t,checked:n.captions.toggled&&n.currentTrack===t,title:de.getLabel.call(n,e),badge:e.language&&se.createBadge.call(n,e.language.toUpperCase()),list:r,type:"language"}});i.unshift({value:-1,checked:!this.captions.toggled,title:$("disabled",this.config),list:r,type:"language"}),i.forEach(se.createMenuItem.bind(this)),se.updateSetting.call(this,"captions",r)}}},setSpeedMenu:function(e){var t=this;if(m.element(this.elements.settings.panels.speed)){var n=this.elements.settings.panels.speed.querySelector('[role="menu"]');m.array(e)?this.options.speed=e:(this.isHTML5||this.isVimeo)&&(this.options.speed=[.5,.75,1,1.25,1.5,1.75,2]),this.options.speed=this.options.speed.filter(function(e){return t.config.speed.options.includes(e)});var r=!m.empty(this.options.speed)&&1<this.options.speed.length;se.toggleMenuButton.call(this,"speed",r),R(n),se.checkMenu.call(this),r&&(this.options.speed.forEach(function(e){se.createMenuItem.call(t,{value:e,list:n,type:"speed",title:se.getLabel.call(t,"speed",e)})}),se.updateSetting.call(this,"speed",n))}},checkMenu:function(){var e=this.elements.settings.buttons,t=!m.empty(e)&&Object.values(e).some(function(e){return!e.hidden});D(this.elements.settings.menu,!t)},focusFirstMenuItem:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!this.elements.settings.popup.hidden){var n=e;m.element(n)||(n=Object.values(this.elements.settings.panels).find(function(e){return!e.hidden}));var r=n.querySelector('[role^="menuitem"]');L.call(this,r,t)}},toggleMenu:function(e){var t=this.elements.settings.popup,n=this.elements.buttons.settings;if(m.element(t)&&m.element(n)){var r=t.hidden,i=r;if(m.boolean(e))i=e;else if(m.keyboardEvent(e)&&27===e.which)i=!1;else if(m.event(e)){var a=t.contains(e.target);if(a||!a&&e.target!==n&&i)return}n.setAttribute("aria-expanded",i),D(t,!i),M(this.elements.container,this.config.classNames.menu.open,i),i&&m.keyboardEvent(e)?se.focusFirstMenuItem.call(this,null,!0):i||r||L.call(this,n,m.keyboardEvent(e))}},getMenuSize:function(e){var t=e.cloneNode(!0);t.style.position="absolute",t.style.opacity=0,t.removeAttribute("hidden"),e.parentNode.appendChild(t);var n=t.scrollWidth,r=t.scrollHeight;return A(t),{width:n,height:r}},showMenuPanel:function(){var n=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=document.getElementById("plyr-settings-".concat(this.id,"-").concat(e));if(m.element(r)){var i=r.parentNode,a=Array.from(i.children).find(function(e){return!e.hidden});if(Y.transitions&&!Y.reducedMotion){i.style.width="".concat(a.scrollWidth,"px"),i.style.height="".concat(a.scrollHeight,"px");var o=se.getMenuSize.call(this,r);p.call(this,i,U,function e(t){t.target===i&&["width","height"].includes(t.propertyName)&&(i.style.width="",i.style.height="",v.call(n,i,U,e))}),i.style.width="".concat(o.width,"px"),i.style.height="".concat(o.height,"px")}D(a,!0),D(r,!1),se.focusFirstMenuItem.call(this,r,t)}},setDownloadLink:function(){var e=this.elements.buttons.download;m.element(e)&&e.setAttribute("href",this.download)},create:function(o){var s=this,e=b("div",I(this.config.selectors.controls.wrapper));if(this.config.controls.includes("restart")&&e.appendChild(se.createButton.call(this,"restart")),this.config.controls.includes("rewind")&&e.appendChild(se.createButton.call(this,"rewind")),this.config.controls.includes("play")&&e.appendChild(se.createButton.call(this,"play")),this.config.controls.includes("fast-forward")&&e.appendChild(se.createButton.call(this,"fast-forward")),this.config.controls.includes("progress")){var t=b("div",I(this.config.selectors.progress));if(t.appendChild(se.createRange.call(this,"seek",{id:"plyr-seek-".concat(o.id)})),t.appendChild(se.createProgress.call(this,"buffer")),this.config.tooltips.seek){var n=b("span",{class:this.config.classNames.tooltip},"00:00");t.appendChild(n),this.elements.display.seekTooltip=n}this.elements.progress=t,e.appendChild(this.elements.progress)}if(this.config.controls.includes("current-time")&&e.appendChild(se.createTime.call(this,"currentTime")),this.config.controls.includes("duration")&&e.appendChild(se.createTime.call(this,"duration")),this.config.controls.includes("mute")||this.config.controls.includes("volume")){var r=b("div",{class:"plyr__volume"});if(this.config.controls.includes("mute")&&r.appendChild(se.createButton.call(this,"mute")),this.config.controls.includes("volume")){var i={max:1,step:.05,value:this.config.volume};r.appendChild(se.createRange.call(this,"volume",W(i,{id:"plyr-volume-".concat(o.id)}))),this.elements.volume=r}e.appendChild(r)}if(this.config.controls.includes("captions")&&e.appendChild(se.createButton.call(this,"captions")),this.config.controls.includes("settings")&&!m.empty(this.config.settings)){var a=b("div",{class:"plyr__menu",hidden:""});a.appendChild(se.createButton.call(this,"settings",{"aria-haspopup":!0,"aria-controls":"plyr-settings-".concat(o.id),"aria-expanded":!1}));var l=b("div",{class:"plyr__menu__container",id:"plyr-settings-".concat(o.id),hidden:""}),u=b("div"),d=b("div",{id:"plyr-settings-".concat(o.id,"-home")}),c=b("div",{role:"menu"});d.appendChild(c),u.appendChild(d),this.elements.settings.panels.home=d,this.config.settings.forEach(function(e){var t=b("button",W(I(s.config.selectors.buttons.settings),{type:"button",class:"".concat(s.config.classNames.control," ").concat(s.config.classNames.control,"--forward"),role:"menuitem","aria-haspopup":!0,hidden:""}));se.bindMenuItemShortcuts.call(s,t,e),p(t,"click",function(){se.showMenuPanel.call(s,e,!1)});var n=b("span",null,$(e,s.config)),r=b("span",{class:s.config.classNames.menu.value});r.innerHTML=o[e],n.appendChild(r),t.appendChild(n),c.appendChild(t);var i=b("div",{id:"plyr-settings-".concat(o.id,"-").concat(e),hidden:""}),a=b("button",{type:"button",class:"".concat(s.config.classNames.control," ").concat(s.config.classNames.control,"--back")});a.appendChild(b("span",{"aria-hidden":!0},$(e,s.config))),a.appendChild(b("span",{class:s.config.classNames.hidden},$("menuBack",s.config))),p(i,"keydown",function(e){37===e.which&&(e.preventDefault(),e.stopPropagation(),se.showMenuPanel.call(s,"home",!0))},!1),p(a,"click",function(){se.showMenuPanel.call(s,"home",!1)}),i.appendChild(a),i.appendChild(b("div",{role:"menu"})),u.appendChild(i),s.elements.settings.buttons[e]=t,s.elements.settings.panels[e]=i}),l.appendChild(u),a.appendChild(l),e.appendChild(a),this.elements.settings.popup=l,this.elements.settings.menu=a}if(this.config.controls.includes("pip")&&Y.pip&&e.appendChild(se.createButton.call(this,"pip")),this.config.controls.includes("airplay")&&Y.airplay&&e.appendChild(se.createButton.call(this,"airplay")),this.config.controls.includes("download")){var f={element:"a",href:this.download,target:"_blank"},h=this.config.urls.download;!m.url(h)&&this.isEmbed&&W(f,{icon:"logo-".concat(this.provider),label:this.provider}),e.appendChild(se.createButton.call(this,"download",f))}return this.config.controls.includes("fullscreen")&&e.appendChild(se.createButton.call(this,"fullscreen")),this.config.controls.includes("play-large")&&this.elements.container.appendChild(se.createButton.call(this,"play-large")),this.elements.controls=e,this.isHTML5&&se.setQualityMenu.call(this,H.getQualityOptions.call(this)),se.setSpeedMenu.call(this),e},inject:function(){var r=this;if(this.config.loadSprite){var e=se.getIconUrl.call(this);e.cors&&ne(e.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());var t=null;this.elements.controls=null;var n={id:this.id,seektime:this.config.seekTime,title:this.config.title},i=!0;m.function(this.config.controls)&&(this.config.controls=this.config.controls.call(this,n)),this.config.controls||(this.config.controls=[]),m.element(this.config.controls)||m.string(this.config.controls)?t=this.config.controls:(t=se.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:de.getLabel.call(this)}),i=!1);var a,o=function(e){var i=e;return Object.entries(n).forEach(function(e){var t=g(e,2),n=t[0],r=t[1];i=X(i,"{".concat(n,"}"),r)}),i};if(i&&(m.string(this.config.controls)?t=o(t):m.element(t)&&(t.innerHTML=o(t.innerHTML))),m.string(this.config.selectors.controls.container)&&(a=document.querySelector(this.config.selectors.controls.container)),m.element(a)||(a=this.elements.container),a[m.element(t)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",t),m.element(this.elements.controls)||se.findElements.call(this),!m.empty(this.elements.buttons)){var s=function(t){var n=r.config.classNames.controlPressed;Object.defineProperty(t,"pressed",{enumerable:!0,get:function(){return C(t,n)},set:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];M(t,n,e)}})};Object.values(this.elements.buttons).filter(Boolean).forEach(function(e){m.array(e)||m.nodeList(e)?Array.from(e).filter(Boolean).forEach(s):s(e)})}if(window.navigator.userAgent.includes("Edge")&&B(a),this.config.tooltips.controls){var l=this.config,u=l.classNames,d=l.selectors,c="".concat(d.controls.wrapper," ").concat(d.labels," .").concat(u.hidden),f=P.call(this,c);Array.from(f).forEach(function(e){M(e,r.config.classNames.hidden,!1),M(e,r.config.classNames.tooltip,!0)})}}};function le(e){var t=e;if(!(1<arguments.length&&void 0!==arguments[1])||arguments[1]){var n=document.createElement("a");n.href=t,t=n.href}try{return new URL(t)}catch(e){return null}}function ue(e){var i=new URLSearchParams;return m.object(e)&&Object.entries(e).forEach(function(e){var t=g(e,2),n=t[0],r=t[1];i.set(n,r)}),i}var de={setup:function(){if(this.supported.ui)if(!this.isVideo||this.isYouTube||this.isHTML5&&!Y.textTracks)m.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&se.setCaptionsMenu.call(this);else{var e,t;if(m.element(this.elements.captions)||(this.elements.captions=b("div",I(this.config.selectors.captions)),e=this.elements.captions,t=this.elements.wrapper,m.element(e)&&m.element(t)&&t.parentNode.insertBefore(e,t.nextSibling)),j.isIE&&window.URL){var n=this.media.querySelectorAll("track");Array.from(n).forEach(function(t){var e=t.getAttribute("src"),n=le(e);null!==n&&n.hostname!==window.location.href.hostname&&["http:","https:"].includes(n.protocol)&&te(e,"blob").then(function(e){t.setAttribute("src",window.URL.createObjectURL(e))}).catch(function(){A(t)})})}var r=q((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map(function(e){return e.split("-")[0]})),i=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();"auto"===i&&(i=g(r,1)[0]);var a=this.storage.get("captions");if(m.boolean(a)||(a=this.config.captions.active),Object.assign(this.captions,{toggled:!1,active:a,language:i,languages:r}),this.isHTML5){var o=this.config.captions.update?"addtrack removetrack":"removetrack";p.call(this,this.media.textTracks,o,de.update.bind(this))}setTimeout(de.update.bind(this),0)}},update:function(){var t=this,e=de.getTracks.call(this,!0),n=this.captions,r=n.active,i=n.language,a=n.meta,o=n.currentTrackNode,s=Boolean(e.find(function(e){return e.language===i}));this.isHTML5&&this.isVideo&&e.filter(function(e){return!a.get(e)}).forEach(function(e){t.debug.log("Track added",e),a.set(e,{default:"showing"===e.mode}),e.mode="hidden",p.call(t,e,"cuechange",function(){return de.updateCues.call(t)})}),(s&&this.language!==i||!e.includes(o))&&(de.setLanguage.call(this,i),de.toggle.call(this,r&&s)),M(this.elements.container,this.config.classNames.captions.enabled,!m.empty(e)),(this.config.controls||[]).includes("settings")&&this.config.settings.includes("captions")&&se.setCaptionsMenu.call(this)},toggle:function(e){var t,n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(this.supported.ui){var r=this.captions.toggled,i=this.config.classNames.captions.active,a=m.nullOrUndefined(e)?!r:e;if(a!==r){if(n||(this.captions.active=a,this.storage.set({captions:a})),!this.language&&a&&!n){var o=de.getTracks.call(this),s=de.findTrack.call(this,[this.captions.language].concat(function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(t=this.captions.languages)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()),!0);return this.captions.language=s.language,void de.set.call(this,o.indexOf(s))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=a),M(this.elements.container,i,a),this.captions.toggled=a,se.updateSetting.call(this,"captions"),E.call(this,this.media,a?"captionsenabled":"captionsdisabled")}}},set:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=de.getTracks.call(this);if(-1!==e)if(m.number(e))if(e in n){if(this.captions.currentTrack!==e){var r=n[this.captions.currentTrack=e],i=(r||{}).language;this.captions.currentTrackNode=r,se.updateSetting.call(this,"captions"),t||(this.captions.language=i,this.storage.set({language:i})),this.isVimeo&&this.embed.enableTextTrack(i),E.call(this,this.media,"languagechange")}de.toggle.call(this,!0,t),this.isHTML5&&this.isVideo&&de.updateCues.call(this)}else this.debug.warn("Track not found",e);else this.debug.warn("Invalid caption argument",e);else de.toggle.call(this,!1,t)},setLanguage:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(m.string(e)){var n=e.toLowerCase();this.captions.language=n;var r=de.getTracks.call(this),i=de.findTrack.call(this,[n]);de.set.call(this,r.indexOf(i),t)}else this.debug.warn("Invalid language argument",e)},getTracks:function(){var t=this,n=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return Array.from((this.media||{}).textTracks||[]).filter(function(e){return!t.isHTML5||n||t.captions.meta.has(e)}).filter(function(e){return["captions","subtitles"].includes(e.kind)})},findTrack:function(e){var n,t=this,r=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=de.getTracks.call(this),a=function(e){return Number((t.captions.meta.get(e)||{}).default)},o=Array.from(i).sort(function(e,t){return a(t)-a(e)});return e.every(function(t){return!(n=o.find(function(e){return e.language===t}))}),n||(r?o[0]:void 0)},getCurrentTrack:function(){return de.getTracks.call(this)[this.currentTrack]},getLabel:function(e){var t=e;return!m.track(t)&&Y.textTracks&&this.captions.toggled&&(t=de.getCurrentTrack.call(this)),m.track(t)?m.empty(t.label)?m.empty(t.language)?$("enabled",this.config):e.language.toUpperCase():t.label:$("disabled",this.config)},updateCues:function(e){if(this.supported.ui)if(m.element(this.elements.captions))if(m.nullOrUndefined(e)||Array.isArray(e)){var t=e;if(!t){var n=de.getCurrentTrack.call(this);t=Array.from((n||{}).activeCues||[]).map(function(e){return e.getCueAsHTML()}).map(Z)}var r=t.map(function(e){return e.trim()}).join("\n");if(r!==this.elements.captions.innerHTML){R(this.elements.captions);var i=b("span",I(this.config.selectors.caption));i.innerHTML=r,this.elements.captions.appendChild(i),E.call(this,this.media,"cuechange")}}else this.debug.warn("updateCues: Invalid input",e);else this.debug.warn("No captions element to render to")}},ce={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:"16:9",clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.4.8/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240]},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/v2/video/{0}.json"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://www.googleapis.com/youtube/v3/videos?id={0}&key={1}&fields=items(snippet(title))&part=snippet"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption",menu:{quality:".js-plyr__menu__list--quality"}},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isIos:"plyr--is-ios",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},tabFocus:"plyr__tab-focus"},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id"}},keys:{google:null},ads:{enabled:!1,publisherId:""}},fe="picture-in-picture",he={html5:"html5",youtube:"youtube",vimeo:"vimeo"},pe="audio",ge="video",me=function(){},ve=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];d(this,t),this.enabled=window.console&&e,this.enabled&&this.log("Debugging enabled")}return e(t,[{key:"log",get:function(){return this.enabled?Function.prototype.bind.call(console.log,console):me}},{key:"warn",get:function(){return this.enabled?Function.prototype.bind.call(console.warn,console):me}},{key:"error",get:function(){return this.enabled?Function.prototype.bind.call(console.error,console):me}}]),t}();function ye(){if(this.enabled){var e=this.player.elements.buttons.fullscreen;m.element(e)&&(e.pressed=this.active),E.call(this.player,this.target,this.active?"enterfullscreen":"exitfullscreen",!0),j.isIos||function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(m.element(e)){var n=P.call(this,"button:not(:disabled), input:not(:disabled), [tabindex]"),r=n[0],i=n[n.length-1];h.call(this,this.elements.container,"keydown",function(e){if("Tab"===e.key&&9===e.keyCode){var t=document.activeElement;t!==i||e.shiftKey?t===r&&e.shiftKey&&(i.focus(),e.preventDefault()):(r.focus(),e.preventDefault())}},t,!1)}}.call(this.player,this.target,this.active)}}function Ee(){var e=this,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(t?this.scrollPosition={x:window.scrollX||0,y:window.scrollY||0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=t?"hidden":"",M(this.target,this.player.config.classNames.fullscreen.fallback,t),j.isIos){var n=document.head.querySelector('meta[name="viewport"]'),r="viewport-fit=cover";n||(n=document.createElement("meta")).setAttribute("name","viewport");var i=m.string(n.content)&&n.content.includes(r);t?(this.cleanupViewport=!i,i||(n.content+=",".concat(r))):this.cleanupViewport&&(n.content=n.content.split(",").filter(function(e){return e.trim()!==r}).join(",")),setTimeout(function(){return B(e.target)},100)}ye.call(this)}var _e=function(){function n(e){var t=this;d(this,n),this.player=e,this.prefix=n.prefix,this.property=n.property,this.scrollPosition={x:0,y:0},p.call(this.player,document,"ms"===this.prefix?"MSFullscreenChange":"".concat(this.prefix,"fullscreenchange"),function(){ye.call(t)}),p.call(this.player,this.player.elements.container,"dblclick",function(e){m.element(t.player.elements.controls)&&t.player.elements.controls.contains(e.target)||t.toggle()}),this.update()}return e(n,[{key:"update",value:function(){this.enabled?this.player.debug.log("".concat(n.native?"Native":"Fallback"," fullscreen enabled")):this.player.debug.log("Fullscreen not supported and fallback disabled"),M(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.enabled)}},{key:"enter",value:function(){this.enabled&&(j.isIos&&this.player.config.fullscreen.iosNative?this.target.webkitEnterFullscreen():n.native?this.prefix?m.empty(this.prefix)||this.target["".concat(this.prefix,"Request").concat(this.property)]():this.target.requestFullscreen():Ee.call(this,!0))}},{key:"exit",value:function(){if(this.enabled)if(j.isIos&&this.player.config.fullscreen.iosNative)this.target.webkitExitFullscreen(),this.player.play();else if(n.native)if(this.prefix){if(!m.empty(this.prefix)){var e="moz"===this.prefix?"Cancel":"Exit";document["".concat(this.prefix).concat(e).concat(this.property)]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document);else Ee.call(this,!1)}},{key:"toggle",value:function(){this.active?this.exit():this.enter()}},{key:"enabled",get:function(){return(n.native||this.player.config.fullscreen.fallback)&&this.player.config.fullscreen.enabled&&this.player.supported.ui&&this.player.isVideo}},{key:"active",get:function(){return!!this.enabled&&(n.native?(this.prefix?document["".concat(this.prefix).concat(this.property,"Element")]:document.fullscreenElement)===this.target:C(this.target,this.player.config.classNames.fullscreen.fallback))}},{key:"target",get:function(){return j.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.container}}],[{key:"native",get:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},{key:"prefix",get:function(){if(m.function(document.exitFullscreen))return"";var t="";return["webkit","moz","ms"].some(function(e){return!(!m.function(document["".concat(e,"ExitFullscreen")])&&!m.function(document["".concat(e,"CancelFullScreen")])||(t=e,0))}),t}},{key:"property",get:function(){return"moz"===this.prefix?"FullScreen":"Fullscreen"}}]),n}();function Te(i){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return new Promise(function(e,t){var n=new Image,r=function(){delete n.onload,delete n.onerror,(n.naturalWidth>=a?e:t)(n)};Object.assign(n,{onload:r,onerror:r,src:i})})}var be={addStyleHook:function(){M(this.elements.container,this.config.selectors.container.replace(".",""),!0),M(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls:function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0]&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build:function(){var e=this;if(this.listeners.media(),!this.supported.ui)return this.debug.warn("Basic support only for ".concat(this.provider," ").concat(this.type)),void be.toggleNativeControls.call(this,!0);m.element(this.elements.controls)||(se.inject.call(this),this.listeners.controls()),be.toggleNativeControls.call(this),this.isHTML5&&de.setup.call(this),this.volume=null,this.muted=null,this.speed=null,this.loop=null,this.quality=null,se.updateVolume.call(this),se.timeUpdate.call(this),be.checkPlaying.call(this),M(this.elements.container,this.config.classNames.pip.supported,Y.pip&&this.isHTML5&&this.isVideo),M(this.elements.container,this.config.classNames.airplay.supported,Y.airplay&&this.isHTML5),M(this.elements.container,this.config.classNames.isIos,j.isIos),M(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(function(){E.call(e,e.media,"ready")},0),be.setTitle.call(this),this.poster&&be.setPoster.call(this,this.poster,!1).catch(function(){}),this.config.duration&&se.durationUpdate.call(this)},setTitle:function(){var t=$("play",this.config);if(m.string(this.config.title)&&!m.empty(this.config.title)&&(t+=", ".concat(this.config.title)),Array.from(this.elements.buttons.play||[]).forEach(function(e){e.setAttribute("aria-label",t)}),this.isEmbed){var e=N.call(this,"iframe");if(!m.element(e))return;var n=m.empty(this.config.title)?"video":this.config.title,r=$("frameTitle",this.config);e.setAttribute("title",r.replace("{title}",n))}},togglePoster:function(e){M(this.elements.container,this.config.classNames.posterEnabled,e)},setPoster:function(t){var n=this;return 1<arguments.length&&void 0!==arguments[1]&&!arguments[1]||!this.poster?(this.media.setAttribute("poster",t),function(){var t=this;return new Promise(function(e){return t.ready?setTimeout(e,0):p.call(t,t.elements.container,"ready",e)}).then(function(){})}.call(this).then(function(){return Te(t)}).catch(function(e){throw t===n.poster&&be.togglePoster.call(n,!1),e}).then(function(){if(t!==n.poster)throw new Error("setPoster cancelled by later call to setPoster")}).then(function(){return Object.assign(n.elements.poster.style,{backgroundImage:"url('".concat(t,"')"),backgroundSize:""}),be.togglePoster.call(n,!0),t})):Promise.reject(new Error("Poster already set"))},checkPlaying:function(e){var t=this;M(this.elements.container,this.config.classNames.playing,this.playing),M(this.elements.container,this.config.classNames.paused,this.paused),M(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(function(e){e.pressed=t.playing}),m.event(e)&&"timeupdate"===e.type||be.toggleControls.call(this)},checkLoading:function(e){var t=this;this.loading=["stalled","waiting"].includes(e.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(function(){M(t.elements.container,t.config.classNames.loading,t.loading),be.toggleControls.call(t)},this.loading?250:0)},toggleControls:function(e){var t=this.elements.controls;if(t&&this.config.hideControls){var n=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(Boolean(e||this.loading||this.paused||t.pressed||t.hover||n))}}},Se=function(){function t(e){d(this,t),this.player=e,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.setTabFocus=this.setTabFocus.bind(this),this.firstTouch=this.firstTouch.bind(this)}return e(t,[{key:"handleKey",value:function(e){var t=this.player,n=t.elements,r=e.keyCode?e.keyCode:e.which,i="keydown"===e.type,a=i&&r===this.lastKey;if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)&&m.number(r))if(i){var o=document.activeElement;if(m.element(o)){var s=t.config.selectors.editable;if(o!==n.inputs.seek&&O(o,s))return;if(32===e.which&&O(o,'button, [role^="menuitem"]'))return}switch([32,37,38,39,40,48,49,50,51,52,53,54,56,57,67,70,73,75,76,77,79].includes(r)&&(e.preventDefault(),e.stopPropagation()),r){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:a||(t.currentTime=t.duration/10*(r-48));break;case 32:case 75:a||t.togglePlay();break;case 38:t.increaseVolume(.1);break;case 40:t.decreaseVolume(.1);break;case 77:a||(t.muted=!t.muted);break;case 39:t.forward();break;case 37:t.rewind();break;case 70:t.fullscreen.toggle();break;case 67:a||t.toggleCaptions();break;case 76:t.loop=!t.loop}!t.fullscreen.enabled&&t.fullscreen.active&&27===r&&t.fullscreen.toggle(),this.lastKey=r}else this.lastKey=null}},{key:"toggleMenu",value:function(e){se.toggleMenu.call(this.player,e)}},{key:"firstTouch",value:function(){var e=this.player,t=e.elements;e.touch=!0,M(t.container,e.config.classNames.isTouch,!0)}},{key:"setTabFocus",value:function(e){var t=this.player,n=t.elements;if(clearTimeout(this.focusTimer),"keydown"!==e.type||9===e.which){"keydown"===e.type&&(this.lastKeyDown=e.timeStamp);var r,i=e.timeStamp-this.lastKeyDown<=20;("focus"!==e.type||i)&&(r=t.config.classNames.tabFocus,M(P.call(t,".".concat(r)),r,!1),this.focusTimer=setTimeout(function(){var e=document.activeElement;n.container.contains(e)&&M(document.activeElement,t.config.classNames.tabFocus,!0)},10))}}},{key:"global",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=this.player;t.config.keyboard.global&&h.call(t,window,"keydown keyup",this.handleKey,e,!1),h.call(t,document.body,"click",this.toggleMenu,e),y.call(t,document.body,"touchstart",this.firstTouch),h.call(t,document.body,"keydown focus blur",this.setTabFocus,e,!1,!0)}},{key:"container",value:function(){var r=this.player,i=r.elements;!r.config.keyboard.global&&r.config.keyboard.focused&&p.call(r,i.container,"keydown keyup",this.handleKey,!1),p.call(r,i.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",function(e){var t=i.controls;t&&"enterfullscreen"===e.type&&(t.pressed=!1,t.hover=!1);var n=0;["touchstart","touchmove","mousemove"].includes(e.type)&&(be.toggleControls.call(r,!0),n=r.touch?3e3:2e3),clearTimeout(r.timers.controls),r.timers.controls=setTimeout(function(){return be.toggleControls.call(r,!1)},n)})}},{key:"media",value:function(){var r=this.player,i=r.elements;if(p.call(r,r.media,"timeupdate seeking seeked",function(e){return se.timeUpdate.call(r,e)}),p.call(r,r.media,"durationchange loadeddata loadedmetadata",function(e){return se.durationUpdate.call(r,e)}),p.call(r,r.media,"canplay loadeddata",function(){D(i.volume,!r.hasAudio),D(i.buttons.mute,!r.hasAudio)}),p.call(r,r.media,"ended",function(){r.isHTML5&&r.isVideo&&r.config.resetOnEnd&&r.restart()}),p.call(r,r.media,"progress playing seeking seeked",function(e){return se.updateProgress.call(r,e)}),p.call(r,r.media,"volumechange",function(e){return se.updateVolume.call(r,e)}),p.call(r,r.media,"playing play pause ended emptied timeupdate",function(e){return be.checkPlaying.call(r,e)}),p.call(r,r.media,"waiting canplay seeked playing",function(e){return be.checkLoading.call(r,e)}),p.call(r,r.media,"playing",function(){r.ads&&r.ads.enabled&&!r.ads.initialized&&r.ads.managerPromise.then(function(){return r.ads.play()}).catch(function(){return r.play()})}),r.supported.ui&&r.config.clickToPlay&&!r.isAudio){var t=N.call(r,".".concat(r.config.classNames.video));if(!m.element(t))return;p.call(r,i.container,"click",function(e){([i.container,t].includes(e.target)||t.contains(e.target))&&(r.touch&&r.config.hideControls||(r.ended?(r.restart(),r.play()):r.togglePlay()))})}r.supported.ui&&r.config.disableContextMenu&&p.call(r,i.wrapper,"contextmenu",function(e){e.preventDefault()},!1),p.call(r,r.media,"volumechange",function(){r.storage.set({volume:r.volume,muted:r.muted})}),p.call(r,r.media,"ratechange",function(){se.updateSetting.call(r,"speed"),r.storage.set({speed:r.speed})}),p.call(r,r.media,"qualitychange",function(e){se.updateSetting.call(r,"quality",null,e.detail.quality)}),p.call(r,r.media,"ready qualitychange",function(){se.setDownloadLink.call(r)});var e=r.config.events.concat(["keyup","keydown"]).join(" ");p.call(r,r.media,e,function(e){var t=e.detail,n=void 0===t?{}:t;"error"===e.type&&(n=r.media.error),E.call(r,i.container,e.type,!0,n)})}},{key:"proxy",value:function(e,t,n){var r=this.player,i=r.config.listeners[n],a=!0;m.function(i)&&(a=i.call(r,e)),a&&m.function(t)&&t.call(r,e)}},{key:"bind",value:function(e,t,n,r){var i=this,a=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],o=this.player,s=o.config.listeners[r],l=m.function(s);p.call(o,e,t,function(e){return i.proxy(e,n,r)},a&&!l)}},{key:"controls",value:function(){var i=this,s=this.player,r=s.elements,t=j.isIE?"change":"input";if(r.buttons.play&&Array.from(r.buttons.play).forEach(function(e){i.bind(e,"click",s.togglePlay,"play")}),this.bind(r.buttons.restart,"click",s.restart,"restart"),this.bind(r.buttons.rewind,"click",s.rewind,"rewind"),this.bind(r.buttons.fastForward,"click",s.forward,"fastForward"),this.bind(r.buttons.mute,"click",function(){s.muted=!s.muted},"mute"),this.bind(r.buttons.captions,"click",function(){return s.toggleCaptions()}),this.bind(r.buttons.download,"click",function(){E.call(s,s.media,"download")},"download"),this.bind(r.buttons.fullscreen,"click",function(){s.fullscreen.toggle()},"fullscreen"),this.bind(r.buttons.pip,"click",function(){s.pip="toggle"},"pip"),this.bind(r.buttons.airplay,"click",s.airplay,"airplay"),this.bind(r.buttons.settings,"click",function(e){e.stopPropagation(),se.toggleMenu.call(s,e)}),this.bind(r.buttons.settings,"keyup",function(e){var t=e.which;[13,32].includes(t)&&(13!==t?(e.preventDefault(),e.stopPropagation(),se.toggleMenu.call(s,e)):se.focusFirstMenuItem.call(s,null,!0))},null,!1),this.bind(r.settings.menu,"keydown",function(e){27===e.which&&se.toggleMenu.call(s,e)}),this.bind(r.inputs.seek,"mousedown mousemove",function(e){var t=r.progress.getBoundingClientRect(),n=100/t.width*(e.pageX-t.left);e.currentTarget.setAttribute("seek-value",n)}),this.bind(r.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",function(e){var t=e.currentTarget,n=e.keyCode?e.keyCode:e.which;if(!m.keyboardEvent(e)||39===n||37===n){s.lastSeekTime=Date.now();var r=t.hasAttribute("play-on-seeked"),i=["mouseup","touchend","keyup"].includes(e.type);r&&i?(t.removeAttribute("play-on-seeked"),s.play()):!i&&s.playing&&(t.setAttribute("play-on-seeked",""),s.pause())}}),j.isIos){var e=P.call(s,'input[type="range"]');Array.from(e).forEach(function(e){return i.bind(e,t,function(e){return B(e.target)})})}this.bind(r.inputs.seek,t,function(e){var t=e.currentTarget,n=t.getAttribute("seek-value");m.empty(n)&&(n=t.value),t.removeAttribute("seek-value"),s.currentTime=n/t.max*s.duration},"seek"),this.bind(r.progress,"mouseenter mouseleave mousemove",function(e){return se.updateSeekTooltip.call(s,e)}),j.isWebkit&&Array.from(P.call(s,'input[type="range"]')).forEach(function(e){i.bind(e,"input",function(e){return se.updateRangeFill.call(s,e.target)})}),s.config.toggleInvert&&!m.element(r.display.duration)&&this.bind(r.display.currentTime,"click",function(){0!==s.currentTime&&(s.config.invertTime=!s.config.invertTime,se.timeUpdate.call(s))}),this.bind(r.inputs.volume,t,function(e){s.volume=e.target.value},"volume"),this.bind(r.controls,"mouseenter mouseleave",function(e){r.controls.hover=!s.touch&&"mouseenter"===e.type}),this.bind(r.controls,"mousedown mouseup touchstart touchend touchcancel",function(e){r.controls.pressed=["mousedown","touchstart"].includes(e.type)}),this.bind(r.controls,"focusin",function(){var e=s.config,t=s.elements,n=s.timers;M(t.controls,e.classNames.noTransition,!0),be.toggleControls.call(s,!0),setTimeout(function(){M(t.controls,e.classNames.noTransition,!1)},0);var r=i.touch?3e3:4e3;clearTimeout(n.controls),n.controls=setTimeout(function(){return be.toggleControls.call(s,!1)},r)}),this.bind(r.inputs.volume,"wheel",function(e){var t=e.webkitDirectionInvertedFromDevice,n=g([e.deltaX,-e.deltaY].map(function(e){return t?-e:e}),2),r=n[0],i=n[1],a=Math.sign(Math.abs(r)>Math.abs(i)?r:i);s.increaseVolume(a/50);var o=s.media.volume;(1===a&&o<1||-1===a&&0<o)&&e.preventDefault()},"volume",!1)}}]),t}();"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var Ae,Re=((Ae={exports:{}}).exports=function(){var c=function(){},r={},u={},d={};function f(e,t){if(e){var n=d[e];if(u[e]=t,n)for(;n.length;)n[0](e,t),n.splice(0,1)}}function h(e,t){e.call&&(e={success:e}),t.length?(e.error||c)(t):(e.success||c)(e)}function p(n,r,i,a){var o,s,e=document,t=i.async,l=(i.numRetries||0)+1,u=i.before||c,d=n.replace(/^(css|img)!/,"");a=a||0,/(^css!|\.css$)/.test(n)?(o=!0,(s=e.createElement("link")).rel="stylesheet",s.href=d):/(^img!|\.(png|gif|jpg|svg)$)/.test(n)?(s=e.createElement("img")).src=d:((s=e.createElement("script")).src=n,s.async=void 0===t||t),!(s.onload=s.onerror=s.onbeforeload=function(e){var t=e.type[0];if(o&&"hideFocus"in s)try{s.sheet.cssText.length||(t="e")}catch(e){18!=e.code&&(t="e")}if("e"==t&&(a+=1)<l)return p(n,r,i,a);r(n,t,e.defaultPrevented)})!==u(n,s)&&e.head.appendChild(s)}function t(e,t,n){var l,u;if(t&&t.trim&&(l=t),u=(l?n:t)||{},l){if(l in r)throw"LoadJS";r[l]=!0}!function(e,t,n){var r,i,a=(e=e.push?e:[e]).length,o=a,s=[];for(r=function(e,t,n){if("e"==t&&s.push(e),"b"==t){if(!n)return;s.push(e)}var r;--a||(h(u,r=s),f(l,r))},i=0;i<o;i++)p(e[i],r,n)}(e,0,u)}return t.ready=function(e,l){return function(e,t){e=e.push?e:[e];var n,r,i,a=[],o=e.length,s=o;for(n=function(e,t){t.length&&a.push(e),--s||h(l,a)};o--;)r=e[o],(i=u[r])?n(r,i):(d[r]=d[r]||[]).push(n)}(e),t},t.done=function(e){f(e,[])},t.reset=function(){r={},u={},d={}},t.isDefined=function(e){return e in r},t}(),Ae.exports);function we(n){return new Promise(function(e,t){Re(n,{success:e,error:t})})}function Ie(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,E.call(this,this.media,e?"play":"pause"))}var De={setup:function(){var t=this;M(this.elements.wrapper,this.config.classNames.embed,!0),De.setAspectRatio.call(this),m.object(window.Vimeo)?De.ready.call(this):we(this.config.urls.vimeo.sdk).then(function(){De.ready.call(t)}).catch(function(e){t.debug.warn("Vimeo API failed to load",e)})},setAspectRatio:function(e){var t=g((m.string(e)?e:this.config.ratio).split(":").map(Number),2),n=100/t[0]*t[1];if(De.padding=n,this.elements.wrapper.style.paddingBottom="".concat(n,"%"),this.supported.ui){var r=(240-n)/4.8;this.media.style.transform="translateY(-".concat(r,"%)")}},ready:function(){var i=this,o=this,e=ue({loop:o.config.loop.active,autoplay:o.autoplay,byline:!1,portrait:!1,title:!1,speed:!0,transparent:0,gesture:"media",playsinline:!this.config.fullscreen.iosNative}),t=o.media.getAttribute("src");m.empty(t)&&(t=o.media.getAttribute(o.config.attributes.embed.id));var n,r=(n=t,m.empty(n)?null:m.number(Number(n))?n:n.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:n),a=b("iframe"),s=z(o.config.urls.vimeo.iframe,r,e);a.setAttribute("src",s),a.setAttribute("allowfullscreen",""),a.setAttribute("allowtransparency",""),a.setAttribute("allow","autoplay");var l=b("div",{poster:o.poster,class:o.config.classNames.embedContainer});l.appendChild(a),o.media=w(l,o.media),te(z(o.config.urls.vimeo.api,r),"json").then(function(e){if(!m.empty(e)){var t=new URL(e[0].thumbnail_large);t.pathname="".concat(t.pathname.split("_")[0],".jpg"),be.setPoster.call(o,t.href).catch(function(){})}}),o.embed=new window.Vimeo.Player(a,{autopause:o.config.autopause,muted:o.muted}),o.media.paused=!0,o.media.currentTime=0,o.supported.ui&&o.embed.disableTextTrack(),o.media.play=function(){return Ie.call(o,!0),o.embed.play()},o.media.pause=function(){return Ie.call(o,!1),o.embed.pause()},o.media.stop=function(){o.pause(),o.currentTime=0};var u=o.media.currentTime;Object.defineProperty(o.media,"currentTime",{get:function(){return u},set:function(e){var t=o.embed,n=o.media,r=o.paused,i=o.volume,a=r&&!t.hasPlayed;n.seeking=!0,E.call(o,n,"seeking"),Promise.resolve(a&&t.setVolume(0)).then(function(){return t.setCurrentTime(e)}).then(function(){return a&&t.pause()}).then(function(){return a&&t.setVolume(i)}).catch(function(){})}});var d=o.config.speed.selected;Object.defineProperty(o.media,"playbackRate",{get:function(){return d},set:function(e){o.embed.setPlaybackRate(e).then(function(){d=e,E.call(o,o.media,"ratechange")}).catch(function(e){"Error"===e.name&&se.setSpeedMenu.call(o,[])})}});var c=o.config.volume;Object.defineProperty(o.media,"volume",{get:function(){return c},set:function(e){o.embed.setVolume(e).then(function(){c=e,E.call(o,o.media,"volumechange")})}});var f=o.config.muted;Object.defineProperty(o.media,"muted",{get:function(){return f},set:function(e){var t=!!m.boolean(e)&&e;o.embed.setVolume(t?0:o.config.volume).then(function(){f=t,E.call(o,o.media,"volumechange")})}});var h,p=o.config.loop;Object.defineProperty(o.media,"loop",{get:function(){return p},set:function(e){var t=m.boolean(e)?e:o.config.loop.active;o.embed.setLoop(t).then(function(){p=t})}}),o.embed.getVideoUrl().then(function(e){h=e,se.setDownloadLink.call(o)}).catch(function(e){i.debug.warn(e)}),Object.defineProperty(o.media,"currentSrc",{get:function(){return h}}),Object.defineProperty(o.media,"ended",{get:function(){return o.currentTime===o.duration}}),Promise.all([o.embed.getVideoWidth(),o.embed.getVideoHeight()]).then(function(e){var t,n,r;De.ratio=(r=function e(t,n){return 0===n?t:e(n,t%n)}(t=e[0],n=e[1]),"".concat(t/r,":").concat(n/r)),De.setAspectRatio.call(i,De.ratio)}),o.embed.setAutopause(o.config.autopause).then(function(e){o.config.autopause=e}),o.embed.getVideoTitle().then(function(e){o.config.title=e,be.setTitle.call(i)}),o.embed.getCurrentTime().then(function(e){u=e,E.call(o,o.media,"timeupdate")}),o.embed.getDuration().then(function(e){o.media.duration=e,E.call(o,o.media,"durationchange")}),o.embed.getTextTracks().then(function(e){o.media.textTracks=e,de.setup.call(o)}),o.embed.on("cuechange",function(e){var t=e.cues,n=(void 0===t?[]:t).map(function(e){return t=e.text,n=document.createDocumentFragment(),r=document.createElement("div"),n.appendChild(r),r.innerHTML=t,n.firstChild.innerText;var t,n,r});de.updateCues.call(o,n)}),o.embed.on("loaded",function(){o.embed.getPaused().then(function(e){Ie.call(o,!e),e||E.call(o,o.media,"playing")}),m.element(o.embed.element)&&o.supported.ui&&o.embed.element.setAttribute("tabindex",-1)}),o.embed.on("play",function(){Ie.call(o,!0),E.call(o,o.media,"playing")}),o.embed.on("pause",function(){Ie.call(o,!1)}),o.embed.on("timeupdate",function(e){o.media.seeking=!1,u=e.seconds,E.call(o,o.media,"timeupdate")}),o.embed.on("progress",function(e){o.media.buffered=e.percent,E.call(o,o.media,"progress"),1===parseInt(e.percent,10)&&E.call(o,o.media,"canplaythrough"),o.embed.getDuration().then(function(e){e!==o.media.duration&&(o.media.duration=e,E.call(o,o.media,"durationchange"))})}),o.embed.on("seeked",function(){o.media.seeking=!1,E.call(o,o.media,"seeked")}),o.embed.on("ended",function(){o.media.paused=!0,E.call(o,o.media,"ended")}),o.embed.on("error",function(e){o.media.error=e,E.call(o,o.media,"error")}),o.on("enterfullscreen exitfullscreen",function(e){var t=o.fullscreen.target;if(t===o.elements.container){var n="enterfullscreen"===e.type,r=g(De.ratio.split(":").map(Number),2),i=r[0]>r[1]?"width":"height";t.style[i]=n?"".concat(De.padding,"%"):null}}),setTimeout(function(){return be.build.call(o)},0)}};function Me(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,E.call(this,this.media,e?"play":"pause"))}var Ce,Oe={setup:function(){var t=this;M(this.elements.wrapper,this.config.classNames.embed,!0),Oe.setAspectRatio.call(this),m.object(window.YT)&&m.function(window.YT.Player)?Oe.ready.call(this):(we(this.config.urls.youtube.sdk).catch(function(e){t.debug.warn("YouTube API failed to load",e)}),window.onYouTubeReadyCallbacks=window.onYouTubeReadyCallbacks||[],window.onYouTubeReadyCallbacks.push(function(){Oe.ready.call(t)}),window.onYouTubeIframeAPIReady=function(){window.onYouTubeReadyCallbacks.forEach(function(e){e()})})},getTitle:function(e){var t=this;if(m.function(this.embed.getVideoData)){var n=this.embed.getVideoData().title;if(m.empty(n))return this.config.title=n,void be.setTitle.call(this)}var r=this.config.keys.google;m.string(r)&&!m.empty(r)&&te(z(this.config.urls.youtube.api,e,r)).then(function(e){m.object(e)&&(t.config.title=e.items[0].snippet.title,be.setTitle.call(t))}).catch(function(){})},setAspectRatio:function(){var e=this.config.ratio.split(":");this.elements.wrapper.style.paddingBottom="".concat(100/e[0]*e[1],"%")},ready:function(){var i=this,e=i.media.getAttribute("id");if(m.empty(e)||!e.startsWith("youtube-")){var t=i.media.getAttribute("src");m.empty(t)&&(t=i.media.getAttribute(this.config.attributes.embed.id));var n,r,a=(n=t,m.empty(n)?null:n.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:n),o=(r=i.provider,"".concat(r,"-").concat(Math.floor(1e4*Math.random()))),s=b("div",{id:o,poster:i.poster});i.media=w(s,i.media);var l=function(e){return"https://img.youtube.com/vi/".concat(a,"/").concat(e,"default.jpg")};Te(l("maxres"),121).catch(function(){return Te(l("sd"),121)}).catch(function(){return Te(l("hq"))}).then(function(e){return be.setPoster.call(i,e.src)}).then(function(e){e.includes("maxres")||(i.elements.poster.style.backgroundSize="cover")}).catch(function(){}),i.embed=new window.YT.Player(o,{videoId:a,playerVars:{autoplay:i.config.autoplay?1:0,hl:i.config.hl,controls:i.supported.ui?0:1,rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,disablekb:1,playsinline:1,widget_referrer:window?window.location.href:null,cc_load_policy:i.captions.active?1:0,cc_lang_pref:i.config.captions.language},events:{onError:function(e){if(!i.media.error){var t=e.data,n={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[t]||"An unknown error occured";i.media.error={code:t,message:n},E.call(i,i.media,"error")}},onPlaybackRateChange:function(e){var t=e.target;i.media.playbackRate=t.getPlaybackRate(),E.call(i,i.media,"ratechange")},onReady:function(e){if(!m.function(i.media.play)){var n=e.target;Oe.getTitle.call(i,a),i.media.play=function(){Me.call(i,!0),n.playVideo()},i.media.pause=function(){Me.call(i,!1),n.pauseVideo()},i.media.stop=function(){n.stopVideo()},i.media.duration=n.getDuration(),i.media.paused=!0,i.media.currentTime=0,Object.defineProperty(i.media,"currentTime",{get:function(){return Number(n.getCurrentTime())},set:function(e){i.paused&&!i.embed.hasPlayed&&i.embed.mute(),i.media.seeking=!0,E.call(i,i.media,"seeking"),n.seekTo(e)}}),Object.defineProperty(i.media,"playbackRate",{get:function(){return n.getPlaybackRate()},set:function(e){n.setPlaybackRate(e)}});var t=i.config.volume;Object.defineProperty(i.media,"volume",{get:function(){return t},set:function(e){t=e,n.setVolume(100*t),E.call(i,i.media,"volumechange")}});var r=i.config.muted;Object.defineProperty(i.media,"muted",{get:function(){return r},set:function(e){var t=m.boolean(e)?e:r;n[(r=t)?"mute":"unMute"](),E.call(i,i.media,"volumechange")}}),Object.defineProperty(i.media,"currentSrc",{get:function(){return n.getVideoUrl()}}),Object.defineProperty(i.media,"ended",{get:function(){return i.currentTime===i.duration}}),i.options.speed=n.getAvailablePlaybackRates(),i.supported.ui&&i.media.setAttribute("tabindex",-1),E.call(i,i.media,"timeupdate"),E.call(i,i.media,"durationchange"),clearInterval(i.timers.buffering),i.timers.buffering=setInterval(function(){i.media.buffered=n.getVideoLoadedFraction(),(null===i.media.lastBuffered||i.media.lastBuffered<i.media.buffered)&&E.call(i,i.media,"progress"),i.media.lastBuffered=i.media.buffered,1===i.media.buffered&&(clearInterval(i.timers.buffering),E.call(i,i.media,"canplaythrough"))},200),setTimeout(function(){return be.build.call(i)},50)}},onStateChange:function(e){var t=e.target;switch(clearInterval(i.timers.playing),i.media.seeking&&[1,2].includes(e.data)&&(i.media.seeking=!1,E.call(i,i.media,"seeked")),e.data){case-1:E.call(i,i.media,"timeupdate"),i.media.buffered=t.getVideoLoadedFraction(),E.call(i,i.media,"progress");break;case 0:Me.call(i,!1),i.media.loop?(t.stopVideo(),t.playVideo()):E.call(i,i.media,"ended");break;case 1:i.media.paused&&!i.embed.hasPlayed?i.media.pause():(Me.call(i,!0),E.call(i,i.media,"playing"),i.timers.playing=setInterval(function(){E.call(i,i.media,"timeupdate")},50),i.media.duration!==t.getDuration()&&(i.media.duration=t.getDuration(),E.call(i,i.media,"durationchange")));break;case 2:i.muted||i.embed.unMute(),Me.call(i,!1)}E.call(i,i.elements.container,"statechange",!1,{code:e.data})}}})}}},Pe={setup:function(){this.media?(M(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),M(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&M(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=b("div",{class:this.config.classNames.video}),_(this.media,this.elements.wrapper),this.elements.poster=b("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?H.extend.call(this):this.isYouTube?Oe.setup.call(this):this.isVimeo&&De.setup.call(this)):this.debug.warn("No media element found!")}},Ne=function(){function t(e){var n=this;d(this,t),this.player=e,this.publisherId=e.config.ads.publisherId,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise(function(e,t){n.on("loaded",e),n.on("error",t)}),this.load()}return e(t,[{key:"load",value:function(){var e=this;this.enabled&&(m.object(window.google)&&m.object(window.google.ima)?this.ready():we(this.player.config.urls.googleIMA.sdk).then(function(){e.ready()}).catch(function(){e.trigger("error",new Error("Google IMA SDK failed to load"))}))}},{key:"ready",value:function(){var e=this;this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then(function(){e.clearSafetyTimer("onAdsManagerLoaded()")}),this.listeners(),this.setupIMA()}},{key:"setupIMA",value:function(){this.elements.container=b("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container),this.requestAds()}},{key:"requestAds",value:function(){var t=this,e=this.player.elements.container;try{this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(e){return t.onAdsManagerLoaded(e)},!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(e){return t.onAdError(e)},!1);var n=new google.ima.AdsRequest;n.adTagUrl=this.tagUrl,n.linearAdSlotWidth=e.offsetWidth,n.linearAdSlotHeight=e.offsetHeight,n.nonLinearAdSlotWidth=e.offsetWidth,n.nonLinearAdSlotHeight=e.offsetHeight,n.forceNonLinearFullSlot=!1,n.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(n)}catch(t){this.onAdError(t)}}},{key:"pollCountdown",value:function(){var n=this;if(!(0<arguments.length&&void 0!==arguments[0]&&arguments[0]))return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval(function(){var e=oe(Math.max(n.manager.getRemainingTime(),0)),t="".concat($("advertisement",n.player.config)," - ").concat(e);n.elements.container.setAttribute("data-badge-text",t)},100)}},{key:"onAdsManagerLoaded",value:function(e){var i=this;if(this.enabled){var t=new google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!0,t.enablePreloading=!0,this.manager=e.getAdsManager(this.player,t),this.cuePoints=this.manager.getCuePoints(),m.empty(this.cuePoints)||this.cuePoints.forEach(function(e){if(0!==e&&-1!==e&&e<i.player.duration){var t=i.player.elements.progress;if(m.element(t)){var n=100/i.player.duration*e,r=b("span",{class:i.player.config.classNames.cues});r.style.left="".concat(n.toString(),"%"),t.appendChild(r)}}}),this.manager.setVolume(this.player.volume),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(e){return i.onAdError(e)}),Object.keys(google.ima.AdEvent.Type).forEach(function(e){i.manager.addEventListener(google.ima.AdEvent.Type[e],function(e){return i.onAdEvent(e)})}),this.trigger("loaded")}}},{key:"onAdEvent",value:function(e){var n=this,t=this.player.elements.container,r=e.getAd(),i=function(e){var t="ads".concat(e.replace(/_/g,"").toLowerCase());E.call(n.player,n.player.media,t)};switch(e.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),i(e.type),this.pollCountdown(!0),r.isLinear()||(r.width=t.offsetWidth,r.height=t.offsetHeight);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:i(e.type),this.loadAds();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:i(e.type),this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:i(e.type),this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.STARTED:case google.ima.AdEvent.Type.MIDPOINT:case google.ima.AdEvent.Type.COMPLETE:case google.ima.AdEvent.Type.IMPRESSION:case google.ima.AdEvent.Type.CLICK:i(e.type)}}},{key:"onAdError",value:function(e){this.cancel(),this.player.debug.warn("Ads error",e)}},{key:"listeners",value:function(){var r,i=this,e=this.player.elements.container;this.player.on("ended",function(){i.loader.contentComplete()}),this.player.on("seeking",function(){return r=i.player.currentTime}),this.player.on("seeked",function(){var n=i.player.currentTime;m.empty(i.cuePoints)||i.cuePoints.forEach(function(e,t){r<e&&e<n&&(i.manager.discardAdBreak(),i.cuePoints.splice(t,1))})}),window.addEventListener("resize",function(){i.manager&&i.manager.resize(e.offsetWidth,e.offsetHeight,google.ima.ViewMode.NORMAL)})}},{key:"play",value:function(){var t=this,e=this.player.elements.container;this.managerPromise||this.resumeContent(),this.managerPromise.then(function(){t.elements.displayContainer.initialize();try{t.initialized||(t.manager.init(e.offsetWidth,e.offsetHeight,google.ima.ViewMode.NORMAL),t.manager.start()),t.initialized=!0}catch(e){t.onAdError(e)}}).catch(function(){})}},{key:"resumeContent",value:function(){this.elements.container.style.zIndex="",this.playing=!1,this.player.currentTime<this.player.duration&&this.player.play()}},{key:"pauseContent",value:function(){this.elements.container.style.zIndex=3,this.playing=!0,this.player.pause()}},{key:"cancel",value:function(){this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}},{key:"loadAds",value:function(){var t=this;this.managerPromise.then(function(){t.manager&&t.manager.destroy(),t.managerPromise=new Promise(function(e){t.on("loaded",e),t.player.debug.log(t.manager)}),t.requestAds()}).catch(function(){})}},{key:"trigger",value:function(e){for(var t=this,n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=this.events[e];m.array(a)&&a.forEach(function(e){m.function(e)&&e.apply(t,r)})}},{key:"on",value:function(e,t){return m.array(this.events[e])||(this.events[e]=[]),this.events[e].push(t),this}},{key:"startSafetyTimer",value:function(e,t){var n=this;this.player.debug.log("Safety timer invoked from: ".concat(t)),this.safetyTimer=setTimeout(function(){n.cancel(),n.clearSafetyTimer("startSafetyTimer()")},e)}},{key:"clearSafetyTimer",value:function(e){m.nullOrUndefined(this.safetyTimer)||(this.player.debug.log("Safety timer cleared from: ".concat(e)),clearTimeout(this.safetyTimer),this.safetyTimer=null)}},{key:"enabled",get:function(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.ads.enabled&&!m.empty(this.publisherId)}},{key:"tagUrl",get:function(){var e={AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:this.publisherId};return"".concat("https://go.aniview.com/api/adserver6/vast/","?").concat(ue(e))}}]),t}(),Le={insertElements:function(t,e){var n=this;m.string(e)?S(t,this.media,{src:e}):m.array(e)&&e.forEach(function(e){S(t,n.media,e)})},change:function(l){var u=this;V(l,"sources.length")?(H.cancelRequests.call(this),this.destroy.call(this,function(){u.options.quality=[],A(u.media),u.media=null,m.element(u.elements.container)&&u.elements.container.removeAttribute("class");var e=l.sources,t=l.type,n=g(e,1)[0],r=n.provider,i=void 0===r?he.html5:r,a=n.src,o="html5"===i?t:"div",s="html5"===i?{}:{src:a};Object.assign(u,{provider:i,type:t,supported:Y.check(t,i,u.config.playsinline),media:b(o,s)}),u.elements.container.appendChild(u.media),m.boolean(l.autoplay)&&(u.config.autoplay=l.autoplay),u.isHTML5&&(u.config.crossorigin&&u.media.setAttribute("crossorigin",""),u.config.autoplay&&u.media.setAttribute("autoplay",""),m.empty(l.poster)||(u.poster=l.poster),u.config.loop.active&&u.media.setAttribute("loop",""),u.config.muted&&u.media.setAttribute("muted",""),u.config.playsinline&&u.media.setAttribute("playsinline","")),be.addStyleHook.call(u),u.isHTML5&&Le.insertElements.call(u,"source",e),u.config.title=l.title,Pe.setup.call(u),u.isHTML5&&Object.keys(l).includes("tracks")&&Le.insertElements.call(u,"track",l.tracks),(u.isHTML5||u.isEmbed&&!u.supported.ui)&&be.build.call(u),u.isHTML5&&u.media.load(),u.fullscreen.update()},!0)):this.debug.warn("Invalid source format")}},ke=function(){function u(e,t){var n,r=this;if(d(this,u),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=Y.touch,this.media=e,m.string(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||m.nodeList(this.media)||m.array(this.media))&&(this.media=this.media[0]),this.config=W({},ce,u.defaults,t||{},function(){try{return JSON.parse(r.media.getAttribute("data-plyr-config"))}catch(e){return{}}}()),this.elements={container:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new ve(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",Y),!m.nullOrUndefined(this.media)&&m.element(this.media))if(this.media.plyr)this.debug.warn("Target already setup");else if(this.config.enabled)if(Y.check().api){var i=this.media.cloneNode(!0);i.autoplay=!1,this.elements.original=i;var a=this.media.tagName.toLowerCase(),o=null,s=null;switch(a){case"div":if(o=this.media.querySelector("iframe"),m.element(o)){if(s=le(o.getAttribute("src")),this.provider=(n=s.toString(),/^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.?be)\/.+$/.test(n)?he.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(n)?he.vimeo:null),this.elements.container=this.media,this.media=o,this.elements.container.className="",s.search.length){var l=["1","true"];l.includes(s.searchParams.get("autoplay"))&&(this.config.autoplay=!0),l.includes(s.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=l.includes(s.searchParams.get("playsinline")),this.config.hl=s.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(m.empty(this.provider)||!Object.keys(he).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=ge;break;case"video":case"audio":this.type=a,this.provider=he.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=Y.check(this.type,this.provider,this.config.playsinline),this.supported.api?(this.eventListeners=[],this.listeners=new Se(this),this.storage=new ee(this),this.media.plyr=this,m.element(this.elements.container)||(this.elements.container=b("div"),_(this.media,this.elements.container)),be.addStyleHook.call(this),Pe.setup.call(this),this.config.debug&&p.call(this,this.elements.container,this.config.events.join(" "),function(e){r.debug.log("event: ".concat(e.type))}),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&be.build.call(this),this.listeners.container(),this.listeners.global(),this.fullscreen=new _e(this),this.config.ads.enabled&&(this.ads=new Ne(this)),this.config.autoplay&&this.play(),this.lastSeekTime=0):this.debug.error("Setup failed: no support")}else this.debug.error("Setup failed: no support");else this.debug.error("Setup failed: disabled by config");else this.debug.error("Setup failed: no suitable element passed")}return e(u,[{key:"play",value:function(){return m.function(this.media.play)?this.media.play():null}},{key:"pause",value:function(){this.playing&&m.function(this.media.pause)&&this.media.pause()}},{key:"togglePlay",value:function(e){(m.boolean(e)?e:!this.playing)?this.play():this.pause()}},{key:"stop",value:function(){this.isHTML5?(this.pause(),this.restart()):m.function(this.media.stop)&&this.media.stop()}},{key:"restart",value:function(){this.currentTime=0}},{key:"rewind",value:function(e){this.currentTime=this.currentTime-(m.number(e)?e:this.config.seekTime)}},{key:"forward",value:function(e){this.currentTime=this.currentTime+(m.number(e)?e:this.config.seekTime)}},{key:"increaseVolume",value:function(e){var t=this.media.muted?0:this.volume;this.volume=t+(m.number(e)?e:0)}},{key:"decreaseVolume",value:function(e){this.increaseVolume(-e)}},{key:"toggleCaptions",value:function(e){de.toggle.call(this,e,!1)}},{key:"airplay",value:function(){Y.airplay&&this.media.webkitShowPlaybackTargetPicker()}},{key:"toggleControls",value:function(e){if(!this.supported.ui||this.isAudio)return!1;var t=C(this.elements.container,this.config.classNames.hideControls),n=void 0===e?void 0:!e,r=M(this.elements.container,this.config.classNames.hideControls,n);if(r&&this.config.controls.includes("settings")&&!m.empty(this.config.settings)&&se.toggleMenu.call(this,!1),r!==t){var i=r?"controlshidden":"controlsshown";E.call(this,this.media,i)}return!r}},{key:"on",value:function(e,t){p.call(this,this.elements.container,e,t)}},{key:"once",value:function(e,t){y.call(this,this.elements.container,e,t)}},{key:"off",value:function(e,t){v(this.elements.container,e,t)}},{key:"destroy",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(this.ready){var r=function(){document.body.style.overflow="",t.embed=null,n?(Object.keys(t.elements).length&&(A(t.elements.buttons.play),A(t.elements.captions),A(t.elements.controls),A(t.elements.wrapper),t.elements.buttons.play=null,t.elements.captions=null,t.elements.controls=null,t.elements.wrapper=null),m.function(e)&&e()):(function(){this&&this.eventListeners&&(this.eventListeners.forEach(function(e){var t=e.element,n=e.type,r=e.callback,i=e.options;t.removeEventListener(n,r,i)}),this.eventListeners=[])}.call(t),w(t.elements.original,t.elements.container),E.call(t,t.elements.original,"destroyed",!0),m.function(e)&&e.call(t.elements.original),t.ready=!1,setTimeout(function(){t.elements=null,t.media=null},200))};this.stop(),this.isHTML5?(clearTimeout(this.timers.loading),be.toggleNativeControls.call(this,!0),r()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),null!==this.embed&&m.function(this.embed.destroy)&&this.embed.destroy(),r()):this.isVimeo&&(null!==this.embed&&this.embed.unload().then(r),setTimeout(r,200))}}},{key:"supports",value:function(e){return Y.mime.call(this,e)}},{key:"isHTML5",get:function(){return Boolean(this.provider===he.html5)}},{key:"isEmbed",get:function(){return Boolean(this.isYouTube||this.isVimeo)}},{key:"isYouTube",get:function(){return Boolean(this.provider===he.youtube)}},{key:"isVimeo",get:function(){return Boolean(this.provider===he.vimeo)}},{key:"isVideo",get:function(){return Boolean(this.type===ge)}},{key:"isAudio",get:function(){return Boolean(this.type===pe)}},{key:"playing",get:function(){return Boolean(this.ready&&!this.paused&&!this.ended)}},{key:"paused",get:function(){return Boolean(this.media.paused)}},{key:"stopped",get:function(){return Boolean(this.paused&&0===this.currentTime)}},{key:"ended",get:function(){return Boolean(this.media.ended)}},{key:"currentTime",set:function(e){if(this.duration){var t=m.number(e)&&0<e;this.media.currentTime=t?Math.min(e,this.duration):0,this.debug.log("Seeking to ".concat(this.currentTime," seconds"))}},get:function(){return Number(this.media.currentTime)}},{key:"buffered",get:function(){var e=this.media.buffered;return m.number(e)?e:e&&e.length&&0<this.duration?e.end(0)/this.duration:0}},{key:"seeking",get:function(){return Boolean(this.media.seeking)}},{key:"duration",get:function(){var e=parseFloat(this.config.duration),t=(this.media||{}).duration,n=m.number(t)&&t!==1/0?t:0;return e||n}},{key:"volume",set:function(e){var t=e;m.string(t)&&(t=Number(t)),m.number(t)||(t=this.storage.get("volume")),m.number(t)||(t=this.config.volume),1<t&&(t=1),t<0&&(t=0),this.config.volume=t,this.media.volume=t,!m.empty(e)&&this.muted&&0<t&&(this.muted=!1)},get:function(){return Number(this.media.volume)}},{key:"muted",set:function(e){var t=e;m.boolean(t)||(t=this.storage.get("muted")),m.boolean(t)||(t=this.config.muted),this.config.muted=t,this.media.muted=t},get:function(){return Boolean(this.media.muted)}},{key:"hasAudio",get:function(){return!this.isHTML5||!!this.isAudio||Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length)}},{key:"speed",set:function(e){var t=null;m.number(e)&&(t=e),m.number(t)||(t=this.storage.get("speed")),m.number(t)||(t=this.config.speed.selected),t<.1&&(t=.1),2<t&&(t=2),this.config.speed.options.includes(t)?(this.config.speed.selected=t,this.media.playbackRate=t):this.debug.warn("Unsupported speed (".concat(t,")"))},get:function(){return Number(this.media.playbackRate)}},{key:"quality",set:function(e){var t,n,r=this.config.quality,i=this.options.quality;if(i.length){var a=[!m.empty(e)&&Number(e),this.storage.get("quality"),r.selected,r.default].find(m.number),o=!0;if(!i.includes(a)){var s=(t=i,n=a,m.array(t)&&t.length?t.reduce(function(e,t){return Math.abs(t-n)<Math.abs(e-n)?t:e}):null);this.debug.warn("Unsupported quality option: ".concat(a,", using ").concat(s," instead")),a=s,o=!1}r.selected=a,this.media.quality=a,o&&this.storage.set({quality:a})}},get:function(){return this.media.quality}},{key:"loop",set:function(e){var t=m.boolean(e)?e:this.config.loop.active;this.config.loop.active=t,this.media.loop=t},get:function(){return Boolean(this.media.loop)}},{key:"source",set:function(e){Le.change.call(this,e)},get:function(){return this.media.currentSrc}},{key:"download",get:function(){var e=this.config.urls.download;return m.url(e)?e:this.source}},{key:"poster",set:function(e){this.isVideo?be.setPoster.call(this,e,!1).catch(function(){}):this.debug.warn("Poster can only be set for video")},get:function(){return this.isVideo?this.media.getAttribute("poster"):null}},{key:"autoplay",set:function(e){var t=m.boolean(e)?e:this.config.autoplay;this.config.autoplay=t},get:function(){return Boolean(this.config.autoplay)}},{key:"currentTrack",set:function(e){de.set.call(this,e,!1)},get:function(){var e=this.captions,t=e.toggled,n=e.currentTrack;return t?n:-1}},{key:"language",set:function(e){de.setLanguage.call(this,e,!1)},get:function(){return(de.getCurrentTrack.call(this)||{}).language}},{key:"pip",set:function(e){if(Y.pip){var t=m.boolean(e)?e:!this.pip;m.function(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(t?fe:"inline"),m.function(this.media.requestPictureInPicture)&&(!this.pip&&t?this.media.requestPictureInPicture():this.pip&&!t&&document.exitPictureInPicture())}},get:function(){return Y.pip?m.empty(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===fe:null}}],[{key:"supported",value:function(e,t,n){return Y.check(e,t,n)}},{key:"loadSprite",value:function(e,t){return ne(e,t)}},{key:"setup",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=null;return m.string(e)?n=Array.from(document.querySelectorAll(e)):m.nodeList(e)?n=Array.from(e):m.array(e)&&(n=e.filter(m.element)),m.empty(n)?null:n.map(function(e){return new u(e,t)})}}]),u}();return ke.defaults=(Ce=ce,JSON.parse(JSON.stringify(Ce))),ke}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Hls=t():e.Hls=t()}(this,function(){return function(n){function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}var i={};return r.m=n,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s=27)}([function(e,t,n){"use strict";function i(){}function r(t){for(var e=arguments.length,n=Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];n.forEach(function(e){var a,o;s[e]=t[e]?t[e].bind(t):(a=e,(o=self.console[a])?function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i;t[0]&&(t[0]=(r=a,i=t[0],"["+r+"] > "+i)),o.apply(self.console,t)}:i)})}n.d(t,"a",function(){return l}),n.d(t,"b",function(){return u});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o={trace:i,debug:i,log:i,warn:i,info:i,error:i},s=o,l=function(e){if(!0===e||"object"===(void 0===e?"undefined":a(e))){r(e,"debug","log","info","warn","error");try{s.log()}catch(e){s=o}}else s=o},u=o},function(e,t,n){"use strict";t.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i});var r={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},i={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(e,t,n){"use strict";var r=n(0),a=n(2),o=n(1),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=new Set(["hlsEventGeneric","hlsHandlerDestroying","hlsHandlerDestroyed"]),i=function(){function i(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,i),this.hls=e,this.onEvent=this.onEvent.bind(this);for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}return i.prototype.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},i.prototype.onHandlerDestroying=function(){},i.prototype.onHandlerDestroyed=function(){},i.prototype.isEventHandler=function(){return"object"===s(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent},i.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if(l.has(e))throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)},this)},i.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)},i.prototype.onEvent=function(e,t){this.onEventGeneric(e,t)},i.prototype.onEventGeneric=function(e,t){try{(function(e,t){var n="on"+e.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,t)}).call(this,e,t).call()}catch(t){r.b.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.hls.trigger(o.a.ERROR,{type:a.b.OTHER_ERROR,details:a.a.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},i}();t.a=i},function(e,t,n){var r,d,i,a,c;r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,d=/^([^\/;?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,c={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=this.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");return r.path=c.normalizePath(r.path),c.buildURLFromParts(r)}var i=this.parseURL(t);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return n.alwaysNormalize?(i.path=c.normalizePath(i.path),c.buildURLFromParts(i)):t;var a=this.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var o=d.exec(a.path);a.netLoc=o[1],a.path=o[2]}a.netLoc&&!a.path&&(a.path="/");var s={scheme:a.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};if(!i.netLoc&&(s.netLoc=a.netLoc,"/"!==i.path[0]))if(i.path){var l=a.path,u=l.substring(0,l.lastIndexOf("/")+1)+i.path;s.path=c.normalizePath(u)}else s.path=a.path,i.params||(s.params=a.params,i.query||(s.query=a.query));return null===s.path&&(s.path=n.alwaysNormalize?c.normalizePath(i.path):i.path),c.buildURLFromParts(s)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=c},function(e,t,n){"use strict";n.d(t,"b",function(){return i});var r=function(){function s(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s)}return s.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},s.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},s.getID3Data=function(e,t){for(var n=t,r=0;s.isHeader(e,t);)r+=10,r+=s._readSize(e,t+6),s.isFooter(e,t+10)&&(r+=10),t+=r;if(0<r)return e.subarray(n,n+r)},s._readSize=function(e,t){var n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,(n|=(127&e[t+2])<<7)|127&e[t+3]},s.getTimeStamp=function(e){for(var t=s.getID3Frames(e),n=0;n<t.length;n++){var r=t[n];if(s.isTimeStampFrame(r))return s._readTimeStamp(r)}},s.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},s._getFrameData=function(e){var t=String.fromCharCode(e[0],e[1],e[2],e[3]),n=s._readSize(e,4);return{type:t,size:n,data:e.subarray(10,10+n)}},s.getID3Frames=function(e){for(var t=0,n=[];s.isHeader(e,t);){for(var r=s._readSize(e,t+6),i=(t+=10)+r;t+8<i;){var a=s._getFrameData(e.subarray(t)),o=s._decodeFrame(a);o&&n.push(o),t+=a.size+10}s.isFooter(e,t)&&(t+=10)}return n},s._decodeFrame=function(e){return"PRIV"===e.type?s._decodePrivFrame(e):"T"===e.type[0]?s._decodeTextFrame(e):"W"===e.type[0]?s._decodeURLFrame(e):void 0},s._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),n=1&t[3],r=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}},s._decodePrivFrame=function(e){if(!(e.size<2)){var t=s._utf8ArrayToStr(e.data,!0),n=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:n.buffer}}},s._decodeTextFrame=function(e){if(!(e.size<2)){if("TXXX"===e.type){var t=1,n=s._utf8ArrayToStr(e.data.subarray(t));t+=n.length+1;var r=s._utf8ArrayToStr(e.data.subarray(t));return{key:e.type,info:n,data:r}}var i=s._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:i}}},s._decodeURLFrame=function(e){if("WXXX"===e.type){if(e.size<2)return;var t=1,n=s._utf8ArrayToStr(e.data.subarray(t));t+=n.length+1;var r=s._utf8ArrayToStr(e.data.subarray(t));return{key:e.type,info:n,data:r}}var i=s._utf8ArrayToStr(e.data);return{key:e.type,data:i}},s._utf8ArrayToStr=function(e){for(var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=e.length,r=void 0,i=void 0,a=void 0,o="",s=0;s<n;){if(0===(r=e[s++])&&t)return o;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(r);break;case 12:case 13:i=e[s++],o+=String.fromCharCode((31&r)<<6|63&i);break;case 14:i=e[s++],a=e[s++],o+=String.fromCharCode((15&r)<<12|(63&i)<<6|(63&a)<<0)}}return o},s}(),i=r._utf8ArrayToStr;t.a=r},function(e,t,n){"use strict";var r=n(4),i=n.n(r),a=n(16),o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),s=function(){function t(){var e;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[],this._elementaryStreams=((e={})[t.ElementaryStreamTypes.AUDIO]=!1,e[t.ElementaryStreamTypes.VIDEO]=!1,e)}return t.prototype.addElementaryStream=function(e){this._elementaryStreams[e]=!0},t.prototype.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},t.prototype.createInitializationVector=function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t},t.prototype.fragmentDecryptdataFromLevelkey=function(e,t){var n=e;return e&&e.method&&e.uri&&!e.iv&&((n=new a.a).method=e.method,n.baseuri=e.baseuri,n.reluri=e.reluri,n.iv=this.createInitializationVector(t)),n},o(t,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=i.a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange&&!this.rawByteRange)return[];if(this._byteRange)return this._byteRange;var e=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var n=this.lastByteRangeEndOffset;e[0]=n||0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0],this._byteRange=e}return e}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}],[{key:"ElementaryStreamTypes",get:function(){return{AUDIO:"audio",VIDEO:"video"}}}]),t}();t.a=s},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return r});var i=n(3),a=n(1),o={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"},r=function(n){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this,e,a.a.BUFFER_APPENDED,a.a.FRAG_BUFFERED,a.a.FRAG_LOADED));return t.bufferPadding=.2,t.fragments=Object.create(null),t.timeRanges=Object.create(null),t.config=e.config,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r.prototype.destroy=function(){this.fragments=null,this.timeRanges=null,this.config=null,i.a.prototype.destroy.call(this),n.prototype.destroy.call(this)},r.prototype.getBufferedFrag=function(r,i){var a=this.fragments,e=Object.keys(a).filter(function(e){var t=a[e];if(t.body.type!==i)return!1;if(!t.buffered)return!1;var n=t.body;return n.startPTS<=r&&r<=n.endPTS});if(0===e.length)return null;var t=e.pop();return a[t].body},r.prototype.detectEvictedFragments=function(i,a){var o=this,s=void 0,l=void 0;Object.keys(this.fragments).forEach(function(e){var t=o.fragments[e];if(!0===t.buffered){var n=t.range[i];if(n){s=n.time;for(var r=0;r<s.length;r++)if(l=s[r],!1===o.isTimeBuffered(l.startPTS,l.endPTS,a)){o.removeFragment(t.body);break}}}})},r.prototype.detectPartialFragments=function(n){var r=this,e=this.getFragmentKey(n),i=this.fragments[e];i&&(i.buffered=!0,Object.keys(this.timeRanges).forEach(function(e){if(!0===n.hasElementaryStream(e)){var t=r.timeRanges[e];i.range[e]=r.getBufferedTimes(n.startPTS,n.endPTS,t)}}))},r.prototype.getBufferedTimes=function(e,t,n){for(var r=[],i=void 0,a=void 0,o=!1,s=0;s<n.length;s++){if(i=n.start(s)-this.bufferPadding,a=n.end(s)+this.bufferPadding,i<=e&&t<=a){r.push({startPTS:Math.max(e,n.start(s)),endPTS:Math.min(t,n.end(s))});break}if(e<a&&i<t)r.push({startPTS:Math.max(e,n.start(s)),endPTS:Math.min(t,n.end(s))}),o=!0;else if(t<=i)break}return{time:r,partial:o}},r.prototype.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.sn},r.prototype.getPartialFragment=function(n){var r=this,i=void 0,a=void 0,o=void 0,s=null,l=0;return Object.keys(this.fragments).forEach(function(e){var t=r.fragments[e];r.isPartial(t)&&(a=t.body.startPTS-r.bufferPadding,o=t.body.endPTS+r.bufferPadding,a<=n&&n<=o&&(i=Math.min(n-a,o-n),l<=i&&(s=t.body,l=i)))}),s},r.prototype.getState=function(e){var t=this.getFragmentKey(e),n=this.fragments[t],r=o.NOT_LOADED;return void 0!==n&&(r=n.buffered?!0===this.isPartial(n)?o.PARTIAL:o.OK:o.APPENDING),r},r.prototype.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},r.prototype.isTimeBuffered=function(e,t,n){for(var r=void 0,i=void 0,a=0;a<n.length;a++){if(r=n.start(a)-this.bufferPadding,i=n.end(a)+this.bufferPadding,r<=e&&t<=i)return!0;if(t<=r)return!1}return!1},r.prototype.onFragLoaded=function(e){var t=e.frag;if(!isNaN(t.sn)){var n=this.getFragmentKey(t),r={body:t,range:Object.create(null),buffered:!1};this.fragments[n]=r}},r.prototype.onBufferAppended=function(e){var n=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach(function(e){var t=n.timeRanges[e];n.detectEvictedFragments(e,t)})},r.prototype.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},r.prototype.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},r.prototype.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},r.prototype.removeAllFragments=function(){this.fragments=Object.create(null)},r}(i.a)},function(e,t,n){"use strict";t.a={search:function(e,t){for(var n=0,r=e.length-1,i=null,a=null;n<=r;){var o=t(a=e[i=(n+r)/2|0]);if(0<o)n=i+1;else{if(!(o<0))return a;r=i-1}}return null}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.isBuffered=function(e,t){try{if(e)for(var n=e.buffered,r=0;r<n.length;r++)if(t>=n.start(r)&&t<=n.end(r))return!0}catch(e){}return!1},e.bufferInfo=function(e,t,n){try{if(e){var r=e.buffered,i=[],a=void 0;for(a=0;a<r.length;a++)i.push({start:r.start(a),end:r.end(a)});return this.bufferedInfo(i,t,n)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},e.bufferedInfo=function(e,t,n){var r=[],i=void 0,a=void 0,o=void 0,s=void 0,l=void 0;for(e.sort(function(e,t){return e.start-t.start||t.end-e.end}),l=0;l<e.length;l++){var u=r.length;if(u){var d=r[u-1].end;e[l].start-d<n?e[l].end>d&&(r[u-1].end=e[l].end):r.push(e[l])}else r.push(e[l])}for(i=l=0,a=o=t;l<r.length;l++){var c=r[l].start,f=r[l].end;if(c<=t+n&&t<f)a=c,i=(o=f)-t;else if(t+n<c){s=c;break}}return{len:i,start:a,end:o,nextStart:s}},e}()},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function l(e){return"function"==typeof e}function u(e){return"object"==typeof e&&null!==e}function d(e){return void 0===e}((e.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,i,a,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||u(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var s=new Error('Uncaught, unspecified "error" event. ('+t+")");throw s.context=t,s}if(d(n=this._events[e]))return!1;if(l(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(u(n))for(i=Array.prototype.slice.call(arguments,1),r=(o=n.slice()).length,a=0;a<r;a++)o[a].apply(this,i);return!0},r.prototype.on=r.prototype.addListener=function(e,t){var n;if(!l(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,l(t.listener)?t.listener:t),this._events[e]?u(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,u(this._events[e])&&!this._events[e].warned&&(n=d(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&0<n&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!l(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,i,a;if(!l(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(n=this._events[e]).length,r=-1,n===t||l(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(u(n)){for(a=i;0<a--;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(l(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?l(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(l(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){"use strict";var s=n(34),l=n(35),u=n(36),o=n(2),d=n(0),r=function(){function a(e,t){var n=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).removePKCS7Padding,r=void 0===n||n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=r)try{var i=crypto||self.crypto;this.subtle=i.subtle||i.webkitSubtle}catch(e){}this.disableWebCrypto=!this.subtle}return a.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},a.prototype.decrypt=function(t,n,r,i){var a=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(d.b.log("JS AES decrypt"),this.logEnabled=!1);var e=this.decryptor;e||(this.decryptor=e=new u.a),e.expandKey(n),i(e.decrypt(t,0,r,this.removePKCS7Padding))}else{this.logEnabled&&(d.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var o=this.subtle;this.key!==n&&(this.key=n,this.fastAesKey=new l.a(o,n)),this.fastAesKey.expandKey().then(function(e){new s.a(o,r).decrypt(t,e).catch(function(e){a.onWebCryptoError(e,t,n,r,i)}).then(function(e){i(e)})}).catch(function(e){a.onWebCryptoError(e,t,n,r,i)})}},a.prototype.onWebCryptoError=function(e,t,n,r,i){this.config.enableSoftwareAES?(d.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,n,r,i)):(d.b.error("decrypting error : "+e.message),this.observer.trigger(Event.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},a.prototype.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},a}();t.a=r},function(e,t,n){"use strict";t.a=function(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}},function(e,t,n){"use strict";var r=function(a){function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,a.call.apply(a,[this,e].concat(n)));return i._tickInterval=null,i._tickTimer=null,i._tickCallCount=0,i._boundTick=i.tick.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,a),o.prototype.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},o.prototype.hasInterval=function(){return!!this._tickInterval},o.prototype.hasNextTick=function(){return!!this._tickTimer},o.prototype.setInterval=function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(e){return!this._tickInterval&&(this._tickInterval=setInterval(this._boundTick,e),!0)}),o.prototype.clearInterval=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return!!this._tickInterval&&(clearInterval(this._tickInterval),!(this._tickInterval=null))}),o.prototype.clearNextTick=function(){return!!this._tickTimer&&(clearTimeout(this._tickTimer),!(this._tickTimer=null))},o.prototype.tick=function(){1==++this._tickCallCount&&(this.doTick(),1<this._tickCallCount&&(this.clearNextTick(),this._tickTimer=setTimeout(this._boundTick,0)),this._tickCallCount=0)},o.prototype.doTick=function(){},o}(n(3).a);t.a=r},function(e,t,n){"use strict";var g=n(1),r=n(3),o=n(2),f=n(0),a=n(15),m=n(28),i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),v={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},s={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},l=function(n){function p(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this,e,g.a.MANIFEST_LOADING,g.a.LEVEL_LOADING,g.a.AUDIO_TRACK_LOADING,g.a.SUBTITLE_TRACK_LOADING));return t.loaders={},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(p,n),p.canHaveQualityLevels=function(e){return e!==v.AUDIO_TRACK&&e!==v.SUBTITLE_TRACK},p.mapContextToLevelType=function(e){switch(e.type){case v.AUDIO_TRACK:return s.AUDIO;case v.SUBTITLE_TRACK:return s.SUBTITLE;default:return s.MAIN}},p.getResponseUrl=function(e,t){var n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n},p.prototype.createInternalLoader=function(e){var t=this.hls.config,n=t.pLoader,r=t.loader,i=new(n||r)(t);return e.loader=i,this.loaders[e.type]=i},p.prototype.getInternalLoader=function(e){return this.loaders[e.type]},p.prototype.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},p.prototype.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},p.prototype.destroy=function(){this.destroyInternalLoaders(),n.prototype.destroy.call(this)},p.prototype.onManifestLoading=function(e){this.load(e.url,{type:v.MANIFEST})},p.prototype.onLevelLoading=function(e){this.load(e.url,{type:v.LEVEL,level:e.level,id:e.id})},p.prototype.onAudioTrackLoading=function(e){this.load(e.url,{type:v.AUDIO_TRACK,id:e.id})},p.prototype.onSubtitleTrackLoading=function(e){this.load(e.url,{type:v.SUBTITLE_TRACK,id:e.id})},p.prototype.load=function(e,t){var n=this.hls.config,r=this.getInternalLoader(t);if(r){var i=r.context;if(i&&i.url===e)return f.b.trace("playlist request ongoing"),!1;f.b.warn("aborting previous loader for type: "+t.type),r.abort()}var a=void 0,o=void 0,s=void 0,l=void 0;switch(t.type){case v.MANIFEST:a=n.manifestLoadingMaxRetry,o=n.manifestLoadingTimeOut,s=n.manifestLoadingRetryDelay,l=n.manifestLoadingMaxRetryTimeout;break;case v.LEVEL:a=0,o=n.levelLoadingTimeOut;break;default:a=n.levelLoadingMaxRetry,o=n.levelLoadingTimeOut,s=n.levelLoadingRetryDelay,l=n.levelLoadingMaxRetryTimeout,f.b.log("Playlist loader for "+t.type+" "+(t.level||t.id))}r=this.createInternalLoader(t),t.url=e,t.responseType=t.responseType||"";var u,d;return u={timeout:o,maxRetry:a,retryDelay:s,maxRetryDelay:l},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},r.load(t,u,d),!0},p.prototype.loadsuccess=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;if(n.isSidxRequest)return this._handleSidxRequest(e,n),void this._handlePlaylistLoaded(e,t,n,r);this.resetInternalLoader(n.type);var i=e.data;t.tload=performance.now(),0===i.indexOf("#EXTM3U")?0<i.indexOf("#EXTINF:")||0<i.indexOf("#EXT-X-TARGETDURATION:")?this._handleTrackOrLevelPlaylist(e,t,n,r):this._handleMasterPlaylist(e,t,n,r):this._handleManifestParsingError(e,n,"no EXTM3U delimiter",r)},p.prototype.loaderror=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;this._handleNetworkError(t,n)},p.prototype.loadtimeout=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;this._handleNetworkError(t,n,!0)},p.prototype._handleMasterPlaylist=function(e,t,n,r){var i=this.hls,a=e.data,o=p.getResponseUrl(e,n),s=m.a.parseMasterPlaylist(a,o);if(s.length){var l=s.map(function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}}),u=m.a.parseMasterPlaylistMedia(a,o,"AUDIO",l),d=m.a.parseMasterPlaylistMedia(a,o,"SUBTITLES");if(u.length){var c=!1;u.forEach(function(e){e.url||(c=!0)}),!1===c&&s[0].audioCodec&&!s[0].attrs.AUDIO&&(f.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),u.unshift({type:"main",name:"main"}))}i.trigger(g.a.MANIFEST_LOADED,{levels:s,audioTracks:u,subtitles:d,url:o,stats:t,networkDetails:r})}else this._handleManifestParsingError(e,n,"no level found in manifest",r)},p.prototype._handleTrackOrLevelPlaylist=function(e,t,n,r){var i=this.hls,a=n.id,o=n.level,s=n.type,l=p.getResponseUrl(e,n),u=isNaN(o)?isNaN(a)?0:a:o,d=p.mapContextToLevelType(n),c=m.a.parseLevelPlaylist(e.data,l,u,d);if(c.tload=t.tload,s===v.MANIFEST){var f={url:l,details:c};i.trigger(g.a.MANIFEST_LOADED,{levels:[f],audioTracks:[],url:l,stats:t,networkDetails:r})}if(t.tparsed=performance.now(),c.needSidxRanges){var h=c.initSegment.url;this.load(h,{isSidxRequest:!0,type:s,level:o,levelDetails:c,id:a,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else n.levelDetails=c,this._handlePlaylistLoaded(e,t,n,r)},p.prototype._handleSidxRequest=function(e,i){var t=a.a.parseSegmentIndex(new Uint8Array(e.data));t.references.forEach(function(e,t){var n=e.info,r=i.levelDetails.fragments[t];0===r.byteRange.length&&(r.rawByteRange=String(1+n.end-n.start)+"@"+String(n.start))}),i.levelDetails.initSegment.rawByteRange=String(t.moovEndOffset)+"@0"},p.prototype._handleManifestParsingError=function(e,t,n,r){this.hls.trigger(g.a.ERROR,{type:o.b.NETWORK_ERROR,details:o.a.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:n,networkDetails:r})},p.prototype._handleNetworkError=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=void 0,i=void 0,a=this.getInternalLoader(e);switch(e.type){case v.MANIFEST:r=n?o.a.MANIFEST_LOAD_TIMEOUT:o.a.MANIFEST_LOAD_ERROR,i=!0;break;case v.LEVEL:r=n?o.a.LEVEL_LOAD_TIMEOUT:o.a.LEVEL_LOAD_ERROR,i=!1;break;case v.AUDIO_TRACK:r=n?o.a.AUDIO_TRACK_LOAD_TIMEOUT:o.a.AUDIO_TRACK_LOAD_ERROR,i=!1;break;default:i=!1}a&&(a.abort(),this.resetInternalLoader(e.type)),this.hls.trigger(g.a.ERROR,{type:o.b.NETWORK_ERROR,details:r,fatal:i,url:a.url,loader:a,context:e,networkDetails:t})},p.prototype._handlePlaylistLoaded=function(e,t,n,r){var i=n.type,a=n.level,o=n.id,s=n.levelDetails;if(s.targetduration)if(p.canHaveQualityLevels(n.type))this.hls.trigger(g.a.LEVEL_LOADED,{details:s,level:a||0,id:o||0,stats:t,networkDetails:r});else switch(i){case v.AUDIO_TRACK:this.hls.trigger(g.a.AUDIO_TRACK_LOADED,{details:s,id:o,stats:t,networkDetails:r});break;case v.SUBTITLE_TRACK:this.hls.trigger(g.a.SUBTITLE_TRACK_LOADED,{details:s,id:o,stats:t,networkDetails:r})}else this._handleManifestParsingError(e,n,"invalid target duration",r)},i(p,null,[{key:"ContextType",get:function(){return v}},{key:"LevelType",get:function(){return s}}]),p}(r.a);t.a=l},function(e,t,n){"use strict";var f=n(0),l=n(1),s=Math.pow(2,32)-1,r=function(){function g(e,t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,g),this.observer=e,this.remuxer=t}return g.prototype.resetTimeStamp=function(e){this.initPTS=e},g.prototype.resetInitSegment=function(e,t,n,r){if(e&&e.byteLength){var i=this.initData=g.parseInitSegment(e);null==t&&(t="mp4a.40.5"),null==n&&(n="avc1.42e01e");var a={};i.audio&&i.video?a.audiovideo={container:"video/mp4",codec:t+","+n,initSegment:r?e:null}:(i.audio&&(a.audio={container:"audio/mp4",codec:t,initSegment:r?e:null}),i.video&&(a.video={container:"video/mp4",codec:n,initSegment:r?e:null})),this.observer.trigger(l.a.FRAG_PARSING_INIT_SEGMENT,{tracks:a})}else t&&(this.audioCodec=t),n&&(this.videoCodec=n)},g.probe=function(e){return 0<g.findBox({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length},g.bin2str=function(e){return String.fromCharCode.apply(null,e)},g.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<8|e[t+1];return n<0?65536+n:n},g.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return n<0?4294967296+n:n},g.writeUint32=function(e,t,n){e.data&&(t+=e.start,e=e.data),e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n},g.findBox=function(e,t){var n=[],r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,l=void 0;if(e.data?(s=e.start,a=e.end,e=e.data):(s=0,a=e.byteLength),!t.length)return null;for(r=s;r<a;)l=1<(i=g.readUint32(e,r))?r+i:a,g.bin2str(e.subarray(r+4,r+8))===t[0]&&(1===t.length?n.push({data:e,start:r+8,end:l}):(o=g.findBox({data:e,start:r+8,end:l},t.slice(1))).length&&(n=n.concat(o))),r=l;return n},g.parseSegmentIndex=function(e){var t=g.findBox(e,["moov"])[0],n=t?t.end:null,r=0,i=g.findBox(e,["sidx"]),a=void 0;if(!i||!i[0])return null;a=[];var o=(i=i[0]).data[0],s=g.readUint32(i,r=0===o?8:16);r+=4,r+=0===o?8:16,r+=2;var l=i.end+0,u=g.readUint16(i,r);r+=2;for(var d=0;d<u;d++){var c=r,f=g.readUint32(i,c);c+=4;var h=2147483647&f;if(1==(2147483648&f)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var p=g.readUint32(i,c);c+=4,a.push({referenceSize:h,subsegmentDuration:p,info:{duration:p/s,start:l,end:l+h-1}}),l+=h,r=c+=4}return{earliestPresentationTime:0,timescale:s,version:o,referencesCount:u,references:a,moovEndOffset:n}},g.parseInitSegment=function(e){var c=[];return g.findBox(e,["moov","trak"]).forEach(function(e){var t=g.findBox(e,["tkhd"])[0];if(t){var n=t.data[t.start],r=0===n?12:20,i=g.readUint32(t,r),a=g.findBox(e,["mdia","mdhd"])[0];if(a){n=a.data[a.start];var o=g.readUint32(a,r=0===n?12:20),s=g.findBox(e,["mdia","hdlr"])[0];if(s){var l={soun:"audio",vide:"video"}[g.bin2str(s.data.subarray(s.start+8,s.start+12))];if(l){var u=g.findBox(e,["mdia","minf","stbl","stsd"]);if(u.length){u=u[0];var d=g.bin2str(u.data.subarray(u.start+12,u.start+16));f.b.log("MP4Demuxer:"+l+":"+d+" found")}c[i]={timescale:o,type:l},c[l]={timescale:o,id:i}}}}}}),c},g.getStartDTS=function(i,e){var t,n,r=void 0;return r=g.findBox(e,["moof","traf"]),t=[].concat.apply([],r.map(function(r){return g.findBox(r,["tfhd"]).map(function(e){var t,n;return t=g.readUint32(e,4),n=i[t].timescale||9e4,g.findBox(r,["tfdt"]).map(function(e){var t,n=void 0;return t=e.data[e.start],n=g.readUint32(e,4),1===t&&(n*=Math.pow(2,32),n+=g.readUint32(e,8)),n})[0]/n})})),n=Math.min.apply(null,t),isFinite(n)?n:0},g.offsetStartDTS=function(r,e,o){g.findBox(e,["moof","traf"]).map(function(n){return g.findBox(n,["tfhd"]).map(function(e){var t=g.readUint32(e,4),a=r[t].timescale||9e4;g.findBox(n,["tfdt"]).map(function(e){var t=e.data[e.start],n=g.readUint32(e,4);if(0===t)g.writeUint32(e,4,n-o*a);else{n*=Math.pow(2,32),n+=g.readUint32(e,8),n-=o*a,n=Math.max(n,0);var r=Math.floor(n/(s+1)),i=Math.floor(n%(s+1));g.writeUint32(e,4,r),g.writeUint32(e,8,i)}})})})},g.prototype.append=function(e,t,n,r){var i=this.initData;i||(this.resetInitSegment(e,this.audioCodec,this.videoCodec,!1),i=this.initData);var a,o=this.initPTS;if(void 0===o){var s=g.getStartDTS(i,e);this.initPTS=o=s-t,this.observer.trigger(l.a.INIT_PTS_FOUND,{initPTS:o})}g.offsetStartDTS(i,e,o),a=g.getStartDTS(i,e),this.remuxer.remux(i.audio,i.video,null,null,a,n,r,e)},g.prototype.destroy=function(){},g}();t.a=r},function(e,t,n){"use strict";var r=n(4),i=n.n(r),a=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.method=null,this.key=null,this.iv=null,this._uri=null}return a(e,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=i.a.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),e}();t.a=o},function(e,t,n){"use strict";function r(e,t){var n=a[t];return!!n&&!0===n[e.slice(0,4)]}function i(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i});var a={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}}},function(e,t,n){"use strict";var r=n(10),u=n.n(r),i=n(33),d=n.n(i),c=n(1),f=n(19),v=n(0),h=n(2),a=n(12),p=Object(a.a)(),o=function(){function l(n,e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,l),this.hls=n,this.id=e;var i=this.observer=new u.a,t=n.config;i.trigger=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.emit.apply(i,[e,e].concat(n))},i.off=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.removeListener.apply(i,[e].concat(n))};var r=function(e,t){(t=t||{}).frag=this.frag,t.id=this.id,n.trigger(e,t)}.bind(this);i.on(c.a.FRAG_DECRYPTED,r),i.on(c.a.FRAG_PARSING_INIT_SEGMENT,r),i.on(c.a.FRAG_PARSING_DATA,r),i.on(c.a.FRAG_PARSED,r),i.on(c.a.ERROR,r),i.on(c.a.FRAG_PARSING_METADATA,r),i.on(c.a.FRAG_PARSING_USERDATA,r),i.on(c.a.INIT_PTS_FOUND,r);var a={mp4:p.isTypeSupported("video/mp4"),mpeg:p.isTypeSupported("audio/mpeg"),mp3:p.isTypeSupported('audio/mp4; codecs="mp3"')},o=navigator.vendor;if(t.enableWorker&&"undefined"!=typeof Worker){v.b.log("demuxing in webworker");var s=void 0;try{s=this.w=d()(46),this.onwmsg=this.onWorkerMessage.bind(this),s.addEventListener("message",this.onwmsg),s.onerror=function(e){n.trigger(c.a.ERROR,{type:h.b.OTHER_ERROR,details:h.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},s.postMessage({cmd:"init",typeSupported:a,vendor:o,id:e,config:JSON.stringify(t)})}catch(e){v.b.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),s&&URL.revokeObjectURL(s.objectURL),this.demuxer=new f.a(i,a,t,o),this.w=void 0}}else this.demuxer=new f.a(i,a,t,o)}return l.prototype.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)},l.prototype.push=function(e,t,n,r,i,a,o,s){var l=this.w,u=isNaN(i.startDTS)?i.start:i.startDTS,d=i.decryptdata,c=this.frag,f=!(c&&i.cc===c.cc),h=!(c&&i.level===c.level),p=c&&i.sn===c.sn+1,g=!h&&p;if(f&&v.b.log(this.id+":discontinuity detected"),h&&v.b.log(this.id+":switch detected"),this.frag=i,l)l.postMessage({cmd:"demux",data:e,decryptdata:d,initSegment:t,audioCodec:n,videoCodec:r,timeOffset:u,discontinuity:f,trackSwitch:h,contiguous:g,duration:a,accurateTimeOffset:o,defaultInitPTS:s},e instanceof ArrayBuffer?[e]:[]);else{var m=this.demuxer;m&&m.push(e,d,t,n,r,u,f,h,g,a,o,s)}},l.prototype.onWorkerMessage=function(e){var t=e.data,n=this.hls;switch(t.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case c.a.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}},l}();t.a=o},function(e,t,n){"use strict";var S=n(1),A=n(2),g=n(11),R=n(37),w=n(15),I=n(38),D=n(41),M=n(42),C=n(45),r=function(){function i(e,t,n,r){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,i),this.observer=e,this.typeSupported=t,this.config=n,this.vendor=r}return i.prototype.destroy=function(){var e=this.demuxer;e&&e.destroy()},i.prototype.push=function(e,n,r,i,a,o,s,l,u,d,c,f){if(0<e.byteLength&&null!=n&&null!=n.key&&"AES-128"===n.method){var t=this.decrypter;null==t&&(t=this.decrypter=new g.a(this.observer,this.config));var h=this,p=void 0;try{p=performance.now()}catch(e){p=Date.now()}t.decrypt(e,n.key.buffer,n.iv.buffer,function(e){var t=void 0;try{t=performance.now()}catch(e){t=Date.now()}h.observer.trigger(S.a.FRAG_DECRYPTED,{stats:{tstart:p,tdecrypt:t}}),h.pushDecrypted(new Uint8Array(e),n,new Uint8Array(r),i,a,o,s,l,u,d,c,f)})}else this.pushDecrypted(new Uint8Array(e),n,new Uint8Array(r),i,a,o,s,l,u,d,c,f)},i.prototype.pushDecrypted=function(e,t,n,r,i,a,o,s,l,u,d,c){var f=this.demuxer;if(!f||(o||s)&&!this.probe(e)){for(var h=this.observer,p=this.typeSupported,g=this.config,m=[{demux:I.a,remux:M.a},{demux:w.a,remux:C.a},{demux:R.a,remux:M.a},{demux:D.a,remux:M.a}],v=0,y=m.length;v<y;v++){var E=m[v],_=E.demux.probe;if(_(e)){var T=this.remuxer=new E.remux(h,g,p,this.vendor);f=new E.demux(h,T,g,p),this.probe=_;break}}if(!f)return void h.trigger(S.a.ERROR,{type:A.b.MEDIA_ERROR,details:A.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=f}var b=this.remuxer;(o||s)&&(f.resetInitSegment(n,r,i,u),b.resetInitSegment()),o&&(f.resetTimeStamp(c),b.resetTimeStamp(c)),"function"==typeof f.setDecryptData&&f.setDecryptData(t),f.append(e,a,l,d)},i}();t.a=r},function(e,t,n){"use strict";function i(e,t){return 255===e[t]&&240==(246&e[t+1])}function d(e,t){return 1&e[t+1]?7:9}function c(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function f(e){return 9216e4/e}t.d=function(e,t){return!!(t+1<e.length&&i(e,t))},t.e=function(e,t){if(t+1<e.length&&i(e,t)){var n=d(e,t);t+5<e.length&&(n=c(e,t));var r=t+n;if(r===e.length||r+1<e.length&&i(e,r))return!0}return!1},t.c=function(e,t,n,r,i){if(!e.samplerate){var a=(o=t,s=n,l=r,u=i,p=h=f=c=void 0,g=navigator.userAgent.toLowerCase(),m=u,v=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],c=1+((192&s[l+2])>>>6),(d=(60&s[l+2])>>>2)>v.length-1?void o.trigger(Event.ERROR,{type:E.b.MEDIA_ERROR,details:E.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+d}):(h=(1&s[l+2])<<2,h|=(192&s[l+3])>>>6,y.b.log("manifest codec:"+u+",ADTS data:type:"+c+",sampleingIndex:"+d+"["+v[d]+"Hz],channelConfig:"+h),f=/firefox/i.test(g)?6<=d?(c=5,p=new Array(4),d-3):(c=2,p=new Array(2),d):-1!==g.indexOf("android")?(c=2,p=new Array(2),d):(c=5,p=new Array(4),u&&(-1!==u.indexOf("mp4a.40.29")||-1!==u.indexOf("mp4a.40.5"))||!u&&6<=d?d-3:((u&&-1!==u.indexOf("mp4a.40.2")&&(6<=d&&1===h||/vivaldi/i.test(g))||!u&&1===h)&&(c=2,p=new Array(2)),d)),p[0]=c<<3,p[0]|=(14&d)>>1,p[1]|=(1&d)<<7,p[1]|=h<<3,5===c&&(p[1]|=(14&f)>>1,p[2]=(1&f)<<7,p[2]|=8,p[3]=0),{config:p,samplerate:v[d],channelCount:h,codec:"mp4a.40."+c,manifestCodec:m}));e.config=a.config,e.samplerate=a.samplerate,e.channelCount=a.channelCount,e.codec=a.codec,e.manifestCodec=a.manifestCodec,y.b.log("parsed codec:"+e.codec+",rate:"+a.samplerate+",nb channel:"+a.channelCount)}var o,s,l,u,d,c,f,h,p,g,m,v},t.b=f,t.a=function(e,t,n,r,i){var a=function(e,t,n,r,i){var a,o=void 0,s=e.length;if(a=d(e,t),o=c(e,t),0<(o-=a)&&t+a+o<=s)return{headerLength:a,frameLength:o,stamp:n+r*i}}(t,n,r,i,f(e.samplerate));if(a){var o=a.stamp,s=a.headerLength,l=a.frameLength,u={unit:t.subarray(n+s,n+s+l),pts:o,dts:o};return e.samples.push(u),e.len+=l,{sample:u,length:l+s}}};var y=n(0),E=n(2)},function(e,t,n){"use strict";var g={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,n,r,i){if(!(n+24>t.length)){var a=this.parseHeader(t,n);if(a&&n+a.frameLength<=t.length){var o=r+i*(9e4*a.samplesPerFrame/a.sampleRate),s={unit:t.subarray(n,n+a.frameLength),pts:o,dts:o};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(s),e.len+=a.frameLength,{sample:s,length:a.frameLength}}}},parseHeader:function(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,i=e[t+2]>>4&15,a=e[t+2]>>2&3,o=e[t+2]>>1&1;if(1!==n&&0!==i&&15!==i&&3!==a){var s=3===n?3-r:3===r?3:4,l=1e3*g.BitratesMap[14*s+i-1],u=3===n?0:2===n?1:2,d=g.SamplingRateMap[3*u+a],c=e[t+3]>>6==3?1:2,f=g.SamplesCoefficients[n][r],h=g.BytesInSlot[r],p=8*f*h;return{sampleRate:d,channelCount:c,frameLength:parseInt(f*l/d+o,10)*h,samplesPerFrame:p}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var n=this.parseHeader(e,t),r=4;n&&n.frameLength&&(r=n.frameLength);var i=t+r;if(i===e.length||i+1<e.length&&this.isHeaderPattern(e,i))return!0}return!1}};t.a=g},function(e,t,n){"use strict";function h(e,t,n){var r=e[t],i=e[n],a=i.startPTS;isNaN(a)?i.start=t<n?r.start+r.duration:Math.max(r.start-i.duration,0):t<n?(r.duration=a-r.start,r.duration<0&&g.b.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!")):(i.duration=r.start-a,i.duration<0&&g.b.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!"))}function p(e,t,n,r,i,a){var o=n;if(!isNaN(t.startPTS)){var s=Math.abs(t.startPTS-n);isNaN(t.deltaPTS)?t.deltaPTS=s:t.deltaPTS=Math.max(s,t.deltaPTS),o=Math.max(n,t.startPTS),n=Math.min(n,t.startPTS),r=Math.max(r,t.endPTS),i=Math.min(i,t.startDTS),a=Math.max(a,t.endDTS)}var l=n-t.start;t.start=t.startPTS=n,t.maxStartPTS=o,t.endPTS=r,t.startDTS=i,t.endDTS=a,t.duration=r-n;var u=t.sn;if(!e||u<e.startSN||u>e.endSN)return 0;var d,c=void 0,f=void 0;for(d=u-e.startSN,(c=e.fragments)[d]=t,f=d;0<f;f--)h(c,f,f-1);for(f=d;f<c.length-1;f++)h(c,f,f+1);return e.PTSKnown=!0,l}t.b=p,t.a=function(e,t){var n=Math.max(e.startSN,t.startSN)-t.startSN,r=Math.min(e.endSN,t.endSN)-t.startSN,i=t.startSN-e.startSN,a=e.fragments,o=t.fragments,s=0,l=void 0;if(t.initSegment&&e.initSegment&&(t.initSegment=e.initSegment),r<n)t.PTSKnown=!1;else{for(var u=n;u<=r;u++){var d=a[i+u],c=o[u];c&&d&&(s=d.cc-c.cc,isNaN(d.startPTS)||(c.start=c.startPTS=d.startPTS,c.endPTS=d.endPTS,c.duration=d.duration,c.backtracked=d.backtracked,c.dropped=d.dropped,l=c))}if(s)for(g.b.log("discontinuity sliding from playlist, take drift into account"),u=0;u<o.length;u++)o[u].cc+=s;if(l)p(t,l,l.startPTS,l.endPTS,l.startDTS,l.endDTS);else if(0<=i&&i<a.length){var f=a[i].start;for(u=0;u<o.length;u++)o[u].start+=f}t.PTSKnown=e.PTSKnown}};var g=n(0)},function(e,t,n){"use strict";t.a={toString:function(e){for(var t="",n=e.length,r=0;r<n;r++)t+="["+e.start(r).toFixed(3)+","+e.end(r).toFixed(3)+"]";return t}}},function(e,t,n){"use strict";function d(n,e){e.fragments.forEach(function(e){if(e){var t=e.start+n;e.start=e.startPTS=t,e.endPTS=t+e.duration}}),e.PTSKnown=!0}t.b=function(e,t){return r.a.search(e,function(e){return e.cc<t?1:e.cc>t?-1:0})},t.a=function(e,t,n){if(i=e,o=n,s=!1,(a=t)&&a.details&&o&&(o.endCC>o.startCC||i&&i.cc<o.startCC)&&(s=!0),s){var r=function(e,t){var n=e.fragments,r=t.fragments;if(r.length&&n.length){var i=function(e,t){for(var n=null,r=0;r<e.length;r+=1){var i=e[r];if(i&&i.cc===t){n=i;break}}return n}(n,r[0].cc);return!i||i&&!i.startPTS?void c.b.log("No frag in previous level to align on"):i}c.b.log("No fragments to align")}(t.details,n);r&&(c.b.log("Adjusting PTS using last level due to CC increase within current level"),d(r.start,n))}var i,a,o,s;if(!1===n.PTSKnown&&t&&t.details&&t.details.fragments&&t.details.fragments.length){var l=t.details.programDateTime,u=(n.programDateTime-l)/1e3+t.details.fragments[0].start;isNaN(u)||(c.b.log("adjusting PTS using programDateTime delta, sliding:"+u.toFixed(3)),d(u,n))}};var r=n(8),c=n(0)},function(e,t,n){"use strict";t.b=function(e,t){var n=null;try{n=new window.Event("addtrack")}catch(e){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)},t.a=function(e){if(e&&e.cues)for(;0<e.cues.length;)e.removeCue(e.cues[0])}},function(e,t,n){"use strict";function r(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new i,this.regionList=[]}function s(){this.values=Object.create(null)}function l(e,t,n,r){var i=r?e.split(r):[e];for(var a in i)if("string"==typeof i[a]){var o=i[a].split(n);if(2===o.length)t(o[0],o[1])}}function u(t,e,o){function n(){var e=function(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):59<n[1]?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}(t);if(null===e)throw new Error("Malformed timestamp: "+i);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function r(){t=t.replace(/^\s+/,"")}var i=t;if(r(),e.startTime=n(),r(),"--\x3e"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);t=t.substr(3),r(),e.endTime=n(),r(),function(e,t){var a=new s;l(e,function(e,t){switch(e){case"region":for(var n=o.length-1;0<=n;n--)if(o[n].id===t){a.set(e,o[n].region);break}break;case"vertical":a.alt(e,t,["rl","lr"]);break;case"line":var r=t.split(","),i=r[0];a.integer(e,i),a.percent(e,i)&&a.set("snapToLines",!1),a.alt(e,i,["auto"]),2===r.length&&a.alt("lineAlign",r[1],["start",h,"end"]);break;case"position":r=t.split(","),a.percent(e,r[0]),2===r.length&&a.alt("positionAlign",r[1],["start",h,"end","line-left","line-right","auto"]);break;case"size":a.percent(e,t);break;case"align":a.alt(e,t,["start",h,"end","left","right"])}},/:/,/\s/),t.region=a.get("region",null),t.vertical=a.get("vertical","");var n=a.get("line","auto");"auto"===n&&-1===f.line&&(n=-1),t.line=n,t.lineAlign=a.get("lineAlign","start"),t.snapToLines=a.get("snapToLines",!0),t.size=a.get("size",100),t.align=a.get("align",h);var r=a.get("position","auto");"auto"===r&&50===f.position&&(r="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=r}(t,e)}function d(e){return e.replace(/<br(?: \/)?>/gi,"\n")}n.d(t,"b",function(){return d});var c=n(61),i=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};s.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var f=new c.a(0,0,0),h="middle"===f.align?"middle":"center";r.prototype={parse:function(e){function t(){var e=r.buffer,t=0;for(e=d(e);t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var n=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,r.buffer=e.substr(t),n}var r=this;e&&(r.buffer+=r.decoder.decode(e,{stream:!0}));try{var n=void 0;if("INITIAL"===r.state){if(!/\r\n|\n/.test(r.buffer))return this;var i=(n=t()).match(/^(?)?WEBVTT([ \t].*)?$/);if(!i||!i[0])throw new Error("Malformed WebVTT signature.");r.state="HEADER"}for(var a=!1;r.buffer;){if(!/\r\n|\n/.test(r.buffer))return this;switch(a?a=!1:n=t(),r.state){case"HEADER":/:/.test(n)?l(n,function(e,t){switch(e){case"Region":console.log("parse region",t)}},/:/):n||(r.state="ID");continue;case"NOTE":n||(r.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){r.state="NOTE";break}if(!n)continue;if(r.cue=new c.a(0,0,""),r.state="CUE",-1===n.indexOf("--\x3e")){r.cue.id=n;continue}case"CUE":try{u(n,r.cue,r.regionList)}catch(e){r.cue=null,r.state="BADCUE";continue}r.state="CUETEXT";continue;case"CUETEXT":var o=-1!==n.indexOf("--\x3e");if(!n||o&&(a=!0)){r.oncue&&r.oncue(r.cue),r.cue=null,r.state="ID";continue}r.cue.text&&(r.cue.text+="\n"),r.cue.text+=n;continue;case"BADCUE":n||(r.state="ID");continue}}}catch(e){"CUETEXT"===r.state&&r.cue&&r.oncue&&r.oncue(r.cue),r.cue=null,r.state="INITIAL"===r.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return e.onflush&&e.onflush(),this}},t.a=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=n.n(r),a=n(2),b=n(14),S=n(30),A=n(31),R=n(7),w=n(32),I=n(47),D=n(48),o=n(49),M=n(0),s=n(50),l=n(1),u=n(10),C=n.n(u),d=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();n(70);var c=function(){function T(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,T);var n=T.DefaultConfig;if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var r in n)r in e||(e[r]=n[r]);if(void 0!==e.liveMaxLatencyDurationCount&&e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==e.liveMaxLatencyDuration&&(e.liveMaxLatencyDuration<=e.liveSyncDuration||void 0===e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(M.a)(e.debug),this.config=e,this._autoLevelCapping=-1;var i=this.observer=new C.a;i.trigger=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.emit.apply(i,[e,e].concat(n))},i.off=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.removeListener.apply(i,[e].concat(n))},this.on=i.on.bind(i),this.off=i.off.bind(i),this.trigger=i.trigger.bind(i);var a=this.abrController=new e.abrController(this),o=new e.bufferController(this),s=new e.capLevelController(this),l=new e.fpsController(this),u=new b.a(this),d=new S.a(this),c=new A.a(this),f=new D.a(this),h=this.levelController=new I.a(this),p=new R.b(this),g=[h,this.streamController=new w.a(this,p)],m=e.audioStreamController;m&&g.push(new m(this,p)),this.networkControllers=g;var v=[u,d,c,a,o,s,l,f,p];if(m=e.audioTrackController){var y=new m(this);this.audioTrackController=y,v.push(y)}if(m=e.subtitleTrackController){var E=new m(this);this.subtitleTrackController=E,v.push(E)}if(m=e.emeController){var _=new m(this);this.emeController=_,v.push(_)}[e.subtitleStreamController,e.timelineController].forEach(function(e){e&&v.push(new e(t))}),this.coreComponents=v}return T.isSupported=function(){return Object(o.a)()},d(T,null,[{key:"version",get:function(){return"0.9.1"}},{key:"Events",get:function(){return l.a}},{key:"ErrorTypes",get:function(){return a.b}},{key:"ErrorDetails",get:function(){return a.a}},{key:"DefaultConfig",get:function(){return T.defaultConfig?T.defaultConfig:s.a},set:function(e){T.defaultConfig=e}}]),T.prototype.destroy=function(){M.b.log("destroy"),this.trigger(l.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1},T.prototype.attachMedia=function(e){M.b.log("attachMedia"),this.media=e,this.trigger(l.a.MEDIA_ATTACHING,{media:e})},T.prototype.detachMedia=function(){M.b.log("detachMedia"),this.trigger(l.a.MEDIA_DETACHING),this.media=null},T.prototype.loadSource=function(e){e=i.a.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),M.b.log("loadSource:"+e),this.url=e,this.trigger(l.a.MANIFEST_LOADING,{url:e})},T.prototype.startLoad=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1;M.b.log("startLoad("+t+")"),this.networkControllers.forEach(function(e){e.startLoad(t)})},T.prototype.stopLoad=function(){M.b.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},T.prototype.swapAudioCodec=function(){M.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},T.prototype.recoverMediaError=function(){M.b.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)},d(T,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){M.b.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){M.b.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){M.b.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){M.b.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){M.b.log("set startLevel:"+e);-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){M.b.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,n=e?e.length:0,r=0;r<n;r++)if((e[r].realBitrate?Math.max(e[r].realBitrate,e[r].bitrate):e[r].bitrate)>t)return r;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}}]),T}();t.default=c},function(e,t,n){"use strict";var r=n(4),i=n.n(r),I=n(6),D=n(16),M=n(29),C=n(0),s=n(17),l=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,c=/#EXT-X-MEDIA:(.*)/g,O=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),P=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,a=function(){function d(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d)}return d.findGroup=function(e,t){if(!e)return null;for(var n=null,r=0;r<e.length;r++){var i=e[r];i.id===t&&(n=i)}return n},d.convertAVC1ToAVCOTI=function(e){var t=void 0,n=e.split(".");return 2<n.length?(t=n.shift()+".",t+=parseInt(n.shift()).toString(16),t+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):t=e,t},d.resolve=function(e,t){return i.a.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},d.parseMasterPlaylist=function(e,t){var n=[],r=void 0;for(l.lastIndex=0;null!=(r=l.exec(e));){var i={},a=i.attrs=new M.a(r[1]);i.url=d.resolve(r[2],t);var o=a.decimalResolution("RESOLUTION");o&&(i.width=o.width,i.height=o.height),i.bitrate=a.decimalInteger("AVERAGE-BANDWIDTH")||a.decimalInteger("BANDWIDTH"),i.name=a.NAME,function(r,i){["video","audio"].forEach(function(t){var n=r.filter(function(e){return Object(s.b)(e,t)});if(n.length){var e=n.filter(function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)});i[t+"Codec"]=0<e.length?e[0]:n[0],r=r.filter(function(e){return-1===n.indexOf(e)})}}),i.unknownCodecs=r}([].concat((a.CODECS||"").split(/[ ,]+/)),i),i.videoCodec&&-1!==i.videoCodec.indexOf("avc1")&&(i.videoCodec=d.convertAVC1ToAVCOTI(i.videoCodec)),n.push(i)}return n},d.parseMasterPlaylistMedia=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],i=void 0,a=[],o=0;for(c.lastIndex=0;null!==(i=c.exec(e));){var s={},l=new M.a(i[1]);if(l.TYPE===n){if(s.groupId=l["GROUP-ID"],s.name=l.NAME,s.type=n,s.default="YES"===l.DEFAULT,s.autoselect="YES"===l.AUTOSELECT,s.forced="YES"===l.FORCED,l.URI&&(s.url=d.resolve(l.URI,t)),s.lang=l.LANGUAGE,s.name||(s.name=s.lang),r.length){var u=d.findGroup(r,s.groupId);s.audioCodec=u?u.codec:r[0].codec}s.id=o++,a.push(s)}}return a},d.parseLevelPlaylist=function(e,t,n,r){var i=0,a=0,o={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},s=new D.a,l=0,u=null,d=new I.a,c=void 0,f=void 0;for(O.lastIndex=0;null!==(c=O.exec(e));){var h=c[1];if(h){d.duration=parseFloat(h);var p=(" "+c[2]).slice(1);d.title=p||null,d.tagList.push(p?["INF",h,p]:["INF",h])}else if(c[3]){if(!isNaN(d.duration)){var g=i++;d.type=r,d.start=a,d.levelkey=s,d.sn=g,d.level=n,d.cc=l,d.baseurl=t,d.relurl=(" "+c[3]).slice(1),o.programDateTime&&(u?d.rawProgramDateTime?d.pdt=Date.parse(d.rawProgramDateTime):d.pdt=u.pdt+1e3*u.duration:d.pdt=Date.parse(o.programDateTime),d.endPdt=d.pdt+1e3*d.duration),o.fragments.push(d),a+=(u=d).duration,d=new I.a}}else if(c[4]){if(d.rawByteRange=(" "+c[4]).slice(1),u){var m=u.byteRangeEndOffset;m&&(d.lastByteRangeEndOffset=m)}}else if(c[5])d.rawProgramDateTime=(" "+c[5]).slice(1),d.tagList.push(["PROGRAM-DATE-TIME",d.rawProgramDateTime]),void 0===o.programDateTime&&(o.programDateTime=new Date(new Date(Date.parse(c[5]))-1e3*a));else{for(c=c[0].match(P),f=1;f<c.length&&void 0===c[f];f++);var v=(" "+c[f+1]).slice(1),y=(" "+c[f+2]).slice(1);switch(c[f]){case"#":d.tagList.push(y?[v,y]:[v]);break;case"PLAYLIST-TYPE":o.type=v.toUpperCase();break;case"MEDIA-SEQUENCE":i=o.startSN=parseInt(v);break;case"TARGETDURATION":o.targetduration=parseFloat(v);break;case"VERSION":o.version=parseInt(v);break;case"EXTM3U":break;case"ENDLIST":o.live=!1;break;case"DIS":l++,d.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":l=parseInt(v);break;case"KEY":var E=v,_=new M.a(E),T=_.enumeratedString("METHOD"),b=_.URI,S=_.hexadecimalInteger("IV");T&&(s=new D.a,b&&0<=["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(T)&&(s.method=T,s.baseuri=t,s.reluri=b,s.key=null,s.iv=S));break;case"START":var A=v,R=new M.a(A).decimalFloatingPoint("TIME-OFFSET");isNaN(R)||(o.startTimeOffset=R);break;case"MAP":var w=new M.a(v);d.relurl=w.URI,d.rawByteRange=w.BYTERANGE,d.baseurl=t,d.level=n,d.type=r,d.sn="initSegment",o.initSegment=d,d=new I.a;break;default:C.b.warn("line parsed but not handled: "+c)}}}return(d=u)&&!d.relurl&&(o.fragments.pop(),a-=d.duration),o.totalduration=a,o.averagetargetduration=a/o.fragments.length,o.endSN=i-1,o.startCC=o.fragments[0]?o.fragments[0].cc:0,o.endCC=l,!o.initSegment&&o.fragments.length&&o.fragments.every(function(e){return e.relurl.endsWith(".mp4")})&&(C.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(d=new I.a).relurl=o.fragments[0].relurl,d.baseurl=t,d.level=n,d.type=r,d.sn="initSegment",o.initSegment=d,o.needSidxRanges=!0),o},d}();t.a=a},function(e,t,n){"use strict";var r=/^(\d+)x(\d+)$/,i=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,a=function(){function n(e){for(var t in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),"string"==typeof e&&(e=n.parseAttrList(e)),e)e.hasOwnProperty(t)&&(this[t]=e[t])}return n.prototype.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},n.prototype.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var n=new Uint8Array(t.length/2),r=0;r<t.length/2;r++)n[r]=parseInt(t.slice(2*r,2*r+2),16);return n}return null},n.prototype.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},n.prototype.decimalFloatingPoint=function(e){return parseFloat(this[e])},n.prototype.enumeratedString=function(e){return this[e]},n.prototype.decimalResolution=function(e){var t=r.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},n.parseAttrList=function(e){var t=void 0,n={};for(i.lastIndex=0;null!==(t=i.exec(e));){var r=t[2];0===r.indexOf('"')&&r.lastIndexOf('"')===r.length-1&&(r=r.slice(1,-1)),n[t[1]]=r}return n},n}();t.a=a},function(e,t,n){"use strict";var o=n(1),r=n(3),i=n(2),h=n(0),a=function(r){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,e,o.a.FRAG_LOADING));return t.loaders={},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r),n.prototype.destroy=function(){var e=this.loaders;for(var t in e){var n=e[t];n&&n.destroy()}this.loaders={},r.prototype.destroy.call(this)},n.prototype.onFragLoading=function(e){var t=e.frag,n=t.type,r=this.loaders,i=this.hls.config,a=i.fLoader,o=i.loader;t.loaded=0;var s=r[n];s&&(h.b.warn("abort previous fragment loader for type: "+n),s.abort()),s=r[n]=t.loader=i.fLoader?new a(i):new o(i);var l,u,d=void 0;d={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var c=t.byteRangeStartOffset,f=t.byteRangeEndOffset;isNaN(c)||isNaN(f)||(d.rangeStart=c,d.rangeEnd=f),l={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},s.load(d,l,u)},n.prototype.loadsuccess=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,i=e.data,a=n.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(o.a.FRAG_LOADED,{payload:i,frag:a,stats:t,networkDetails:r})},n.prototype.loaderror=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=t.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(o.a.ERROR,{type:i.b.NETWORK_ERROR,details:i.a.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:n})},n.prototype.loadtimeout=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=t.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(o.a.ERROR,{type:i.b.NETWORK_ERROR,details:i.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:n})},n.prototype.loadprogress=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,i=t.frag;i.loaded=e.loaded,this.hls.trigger(o.a.FRAG_LOAD_PROGRESS,{frag:i,stats:e,networkDetails:r})},n}(r.a);t.a=a},function(e,t,n){"use strict";var d=n(1),i=n(3),a=n(2),c=n(0),r=function(n){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this,e,d.a.KEY_LOADING));return t.loaders={},t.decryptkey=null,t.decrypturl=null,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},i.a.prototype.destroy.call(this)},r.prototype.onKeyLoading=function(e){var t=e.frag,n=t.type,r=this.loaders[n],i=t.decryptdata,a=i.uri;if(a!==this.decrypturl||null===this.decryptkey){var o=this.hls.config;r&&(c.b.warn("abort previous key loader for type:"+n),r.abort()),t.loader=this.loaders[n]=new o.loader(o),this.decrypturl=a,this.decryptkey=null;var s,l,u;s={url:a,frag:t,responseType:"arraybuffer"},l={timeout:o.fragLoadingTimeOut,maxRetry:o.fragLoadingMaxRetry,retryDelay:o.fragLoadingRetryDelay,maxRetryDelay:o.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(s,l,u)}else this.decryptkey&&(i.key=this.decryptkey,this.hls.trigger(d.a.KEY_LOADED,{frag:t}))},r.prototype.loadsuccess=function(e,t,n){var r=n.frag;this.decryptkey=r.decryptdata.key=new Uint8Array(e.data),r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(d.a.KEY_LOADED,{frag:r})},r.prototype.loaderror=function(e,t){var n=t.frag,r=n.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(d.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.KEY_LOAD_ERROR,fatal:!1,frag:n,response:e})},r.prototype.loadtimeout=function(e,t){var n=t.frag,r=n.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(d.a.ERROR,{type:a.b.NETWORK_ERROR,details:a.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},r}(i.a);t.a=r},function(e,t,n){"use strict";var p=n(8),h=n(9),g=n(18),m=n(1),o=n(7),u=n(6),a=n(14),d=n(22),s=n(23),l=n(2),v=n(0),c=n(24),r=n(13),f=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),y="STOPPED",E="IDLE",_="KEY_LOADING",T="FRAG_LOADING",b="FRAG_LOADING_WAITING_RETRY",S="WAITING_LEVEL",A="PARSING",R="PARSED",w="BUFFER_FLUSHING",I="ENDED",D="ERROR",i=function(r){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,e,m.a.MEDIA_ATTACHED,m.a.MEDIA_DETACHING,m.a.MANIFEST_LOADING,m.a.MANIFEST_PARSED,m.a.LEVEL_LOADED,m.a.KEY_LOADED,m.a.FRAG_LOADED,m.a.FRAG_LOAD_EMERGENCY_ABORTED,m.a.FRAG_PARSING_INIT_SEGMENT,m.a.FRAG_PARSING_DATA,m.a.FRAG_PARSED,m.a.ERROR,m.a.AUDIO_TRACK_SWITCHING,m.a.AUDIO_TRACK_SWITCHED,m.a.BUFFER_CREATED,m.a.BUFFER_APPENDED,m.a.BUFFER_FLUSHED));return n.fragmentTracker=t,n.config=e.config,n.audioCodecSwap=!1,n._state=y,n.stallReported=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,r),i.prototype.onHandlerDestroying=function(){this.stopLoad()},i.prototype.onHandlerDestroyed=function(){this.state=y,this.fragmentTracker=null},i.prototype.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var r=n.startLevel;-1===r&&(r=0,this.bitrateTest=!0),this.level=n.nextLoadLevel=r,this.loadedmetadata=!1}0<t&&-1===e&&(v.b.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=E,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=y},i.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.clearInterval(),this.state=y,this.forceStartLoad=!1},i.prototype.doTick=function(){switch(this.state){case w:this.fragLoadError=0;break;case E:this._doTickIdle();break;case S:var e=this.levels[this.level];e&&e.details&&(this.state=E);break;case b:var t=performance.now(),n=this.retryDate;(!n||n<=t||this.media&&this.media.seeking)&&(v.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=E)}this._checkBuffer(),this._checkFragmentChanged()},i.prototype._doTickIdle=function(){var e=this.hls,t=e.config,n=this.media;if(void 0!==this.levelLastLoaded&&(n||!this.startFragRequested&&t.startFragPrefetch)){var r;r=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var i=e.nextLoadLevel,a=this.levels[i];if(a){var o=a.bitrate,s=void 0;s=o?Math.max(8*t.maxBufferSize/o,t.maxBufferLength):t.maxBufferLength,s=Math.min(s,t.maxMaxBufferLength);var l=h.a.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,r,t.maxBufferHole),u=l.len;if(!(s<=u)){v.b.trace("buffer length of "+u.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;var d=a.details;if(void 0===d||!0===d.live&&this.levelLastLoaded!==i)return void(this.state=S);var c=this.fragPrevious;if(!d.live&&c&&!c.backtracked&&c.sn===d.endSN&&!l.nextStart&&Math.min(n.duration,c.start+c.duration)-Math.max(l.end,c.start)<=Math.max(.2,c.duration)){var f={};return this.altAudio&&(f.type="video"),this.hls.trigger(m.a.BUFFER_EOS,f),void(this.state=I)}this._fetchPayloadOrEos(r,l,d)}}}},i.prototype._fetchPayloadOrEos=function(e,t,n){var r=this.fragPrevious,i=this.level,a=n.fragments,o=a.length;if(0!==o){var s=a[0].start,l=a[o-1].start+a[o-1].duration,u=t.end,d=void 0;if(n.initSegment&&!n.initSegment.data)d=n.initSegment;else if(n.live){var c=this.config.initialLiveManifestSize;if(o<c)return void v.b.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+c);if(null===(d=this._ensureFragmentAtLivePoint(n,u,s,l,r,a,o)))return}else u<s&&(d=a[0]);d||(d=this._findFragment(s,r,o,a,u,l,n)),d&&this._loadFragmentOrKey(d,i,n,e,u)}},i.prototype._ensureFragmentAtLivePoint=function(e,t,n,r,i,a,o){var s=this.hls.config,l=this.media,u=void 0,d=void 0!==s.liveMaxLatencyDuration?s.liveMaxLatencyDuration:s.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(n-s.maxFragLookUpTolerance,r-d)){var c=this.liveSyncPosition=this.computeLivePosition(n,e);v.b.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+c.toFixed(3)),t=c,l&&l.readyState&&l.duration>c&&(l.currentTime=c),this.nextLoadPosition=c}if(e.PTSKnown&&r<t&&l&&l.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(i)if(e.programDateTime)u=this._findFragmentByPDT(a,i.endPdt+1);else{var f=i.sn+1;if(f>=e.startSN&&f<=e.endSN){var h=a[f-e.startSN];i.cc===h.cc&&(u=h,v.b.log("live playlist, switching playlist, load frag with next SN: "+u.sn))}u||(u=p.a.search(a,function(e){return i.cc-e.cc}))&&v.b.log("live playlist, switching playlist, load frag with same CC: "+u.sn)}u||(u=a[Math.min(o-1,Math.round(o/2))],v.b.log("live playlist, switching playlist, unknown, load middle frag : "+u.sn))}return u},i.prototype._findFragmentByPDT=function(e,t){if(!e||void 0===t)return null;if(t<e[0].pdt)return null;if(t>=e[e.length-1].endPdt)return null;for(var n=0;n<e.length;++n){var r=e[n];if(t<r.endPdt)return r}return null},i.prototype._findFragmentBySN=function(e,t,n,r){var i=void 0,a=this.hls.config.maxFragLookUpTolerance,o=e?t[e.sn-t[0].sn+1]:void 0,s=function(e){var t=Math.min(a,e.duration+(e.deltaPTS?e.deltaPTS:0));return e.start+e.duration-t<=n?1:e.start-t>n&&e.start?-1:0};return n<r&&(r-a<n&&(a=0),i=o&&!s(o)?o:p.a.search(t,s)),i},i.prototype._findFragment=function(e,t,n,r,i,a,o){var s,l=this.hls.config,u=void 0;if(s=i<a?o.programDateTime?this._findFragmentByPDT(r,1e3*i+(o.programDateTime?Date.parse(o.programDateTime):0)-1e3*e):this._findFragmentBySN(t,r,i,a):r[n-1]){var d=(u=s).sn-o.startSN,c=t&&u.level===t.level,f=r[d-1],h=r[d+1];if(t&&u.sn===t.sn)if(c&&!u.backtracked)if(u.sn<o.endSN){var p=t.deltaPTS;p&&p>l.maxBufferHole&&t.dropped&&d?(u=f,v.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(u=h,v.b.log("SN just loaded, load next one: "+u.sn))}else u=null;else u.backtracked&&(h&&h.backtracked?(v.b.warn("Already backtracked from fragment "+h.sn+", will not backtrack to fragment "+u.sn+". Loading fragment "+h.sn),u=h):(v.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),u.dropped=0,f?(u=f).backtracked=!0:d&&(u=null)))}return u},i.prototype._loadFragmentOrKey=function(e,t,n,r,i){if(e.decryptdata&&null!=e.decryptdata.uri&&null==e.decryptdata.key)v.b.log("Loading key for "+e.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+t),this.state=_,this.hls.trigger(m.a.KEY_LOADING,{frag:e});else{v.b.log("Loading "+e.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+t+", currentTime:"+r.toFixed(3)+",bufferEnd:"+i.toFixed(3));var a=this.fragmentTracker.getState(e);this.fragCurrent=e,this.startFragRequested=!0,isNaN(e.sn)||e.bitrateTest||(this.nextLoadPosition=e.start+e.duration),e.backtracked||a===o.a.NOT_LOADED?(e.autoLevel=this.hls.autoLevelEnabled,e.bitrateTest=this.bitrateTest,this.hls.trigger(m.a.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new g.a(this.hls,"main")),this.state=T):a===o.a.APPENDING&&this._reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e)}},i.prototype.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,a.a.LevelType.MAIN)},i.prototype.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},i.prototype._checkFragmentChanged=function(){var e=void 0,t=void 0,n=this.media;if(n&&n.readyState&&!1===n.seeking&&((t=n.currentTime)>n.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=t),h.a.isBuffered(n,t)?e=this.getBufferedFrag(t):h.a.isBuffered(n,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var r=e;if(r!==this.fragPlaying){this.hls.trigger(m.a.FRAG_CHANGED,{frag:r});var i=r.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(m.a.LEVEL_SWITCHED,{level:i}),this.fragPlaying=r}}},i.prototype.immediateLevelSwitch=function(){if(v.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e=this.media,t=void 0;e?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},i.prototype.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,h.a.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},i.prototype.nextLevelSwitch=function(){var e=this.media;if(e&&e.readyState){var t,n=void 0,r=void 0;if((t=this.getBufferedFrag(e.currentTime))&&1<t.startPTS&&this.flushMainBuffer(0,t.startPTS-1),e.paused)n=0;else{var i=this.hls.nextLoadLevel,a=this.levels[i],o=this.fragLastKbps;n=o&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*o)+1:0}if((r=this.getBufferedFrag(e.currentTime+n))&&(r=this.followingBufferedFrag(r))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(r.maxStartPTS,Number.POSITIVE_INFINITY)}}},i.prototype.flushMainBuffer=function(e,t){this.state=w;var n={startOffset:e,endOffset:t};this.altAudio&&(n.type="video"),this.hls.trigger(m.a.BUFFER_FLUSHING,n)},i.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition)},i.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(v.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},i.prototype.onMediaSeeking=function(){var e=this.media,t=e?e.currentTime:void 0,n=this.config;isNaN(t)||v.b.log("media seeking to "+t.toFixed(3));var r=this.mediaBuffer?this.mediaBuffer:e,i=h.a.bufferInfo(r,t,this.config.maxBufferHole);if(this.state===T){var a=this.fragCurrent;if(0===i.len&&a){var o=n.maxFragLookUpTolerance,s=a.start-o,l=a.start+a.duration+o;t<s||l<t?(a.loader&&(v.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),a.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=E):v.b.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===I&&(0===i.len&&(this.fragPrevious=0),this.state=E);e&&(this.lastCurrentTime=t),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=t),this.tick()},i.prototype.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:void 0;isNaN(t)||v.b.log("media seeked to "+t.toFixed(3)),this.tick()},i.prototype.onMediaEnded=function(){v.b.log("media ended"),this.startPosition=this.lastCurrentTime=0},i.prototype.onManifestLoading=function(){v.b.log("trigger BUFFER_RESET"),this.hls.trigger(m.a.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},i.prototype.onManifestParsed=function(e){var t=!1,n=!1,r=void 0;e.levels.forEach(function(e){(r=e.audioCodec)&&(-1!==r.indexOf("mp4a.40.2")&&(t=!0),-1!==r.indexOf("mp4a.40.5")&&(n=!0))}),this.audioCodecSwitch=t&&n,this.audioCodecSwitch&&v.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},i.prototype.onLevelLoaded=function(e){var t=e.details,n=e.level,r=this.levels[this.levelLastLoaded],i=this.levels[n],a=t.totalduration,o=0;if(v.b.log("level "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),t.live){var s=i.details;s&&0<t.fragments.length?(d.a(s,t),o=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,s),t.PTSKnown&&!isNaN(o)?v.b.log("live playlist sliding:"+o.toFixed(3)):(v.b.log("live playlist - outdated PTS, unknown sliding"),Object(c.a)(this.fragPrevious,r,t))):(v.b.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,Object(c.a)(this.fragPrevious,r,t))}else t.PTSKnown=!1;if(i.details=t,this.levelLastLoaded=n,this.hls.trigger(m.a.LEVEL_UPDATED,{details:t,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var l=t.startTimeOffset;isNaN(l)?t.live?(this.startPosition=this.computeLivePosition(o,t),v.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(l<0&&(v.b.log("negative start time offset "+l+", count from end of last fragment"),l=o+a+l),v.b.log("start time offset found in playlist, adjust startPosition to "+l),this.startPosition=l),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===S&&(this.state=E),this.tick()},i.prototype.onKeyLoaded=function(){this.state===_&&(this.state=E,this.tick())},i.prototype.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag;if(this.state===T&&t&&"main"===n.type&&n.level===t.level&&n.sn===t.sn){var r=e.stats,i=this.levels[t.level],a=i.details;if(v.b.log("Loaded  "+t.sn+" of ["+a.startSN+" ,"+a.endSN+"],level "+t.level),this.bitrateTest=!1,this.stats=r,!0===n.bitrateTest&&this.hls.nextLoadLevel)this.state=E,this.startFragRequested=!1,r.tparsed=r.tbuffered=performance.now(),this.hls.trigger(m.a.FRAG_BUFFERED,{stats:r,frag:t,id:"main"}),this.tick();else if("initSegment"===n.sn)this.state=E,r.tparsed=r.tbuffered=performance.now(),a.initSegment.data=e.payload,this.hls.trigger(m.a.FRAG_BUFFERED,{stats:r,frag:t,id:"main"}),this.tick();else{this.state=A;var o=a.totalduration,s=t.level,l=t.sn,u=this.config.defaultAudioCodec||i.audioCodec;this.audioCodecSwap&&(v.b.log("swapping playlist audio codec"),void 0===u&&(u=this.lastAudioCodec),u&&(u=-1!==u.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,v.b.log("Parsing "+l+" of ["+a.startSN+" ,"+a.endSN+"],level "+s+", cc "+t.cc);var d=this.demuxer;d||(d=this.demuxer=new g.a(this.hls,"main"));var c=this.media,f=!(c&&c.seeking)&&(a.PTSKnown||!a.live),h=a.initSegment?a.initSegment.data:[];d.push(e.payload,h,u,i.videoCodec,t,o,f,void 0)}}this.fragLoadError=0},i.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===A){var r=e.tracks,i=void 0,a=void 0;if(r.audio&&this.altAudio&&delete r.audio,a=r.audio){var o=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(v.b.log("swapping playlist audio codec"),o=-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==a.metadata.channelCount&&-1===s.indexOf("firefox")&&(o="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==a.container&&(o="mp4a.40.2",v.b.log("Android: force audio codec to "+o)),a.levelCodec=o,a.id=e.id}for(i in(a=r.video)&&(a.levelCodec=this.levels[this.level].videoCodec,a.id=e.id),this.hls.trigger(m.a.BUFFER_CODECS,r),r){a=r[i],v.b.log("main track:"+i+",container:"+a.container+",codecs[level/parsed]=["+a.levelCodec+"/"+a.codec+"]");var l=a.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(m.a.BUFFER_APPENDING,{type:i,data:l,parent:"main",content:"initSegment"}))}this.tick()}},i.prototype.onFragParsingData=function(t){var n=this,e=this.fragCurrent,r=t.frag;if(e&&"main"===t.id&&r.sn===e.sn&&r.level===e.level&&("audio"!==t.type||!this.altAudio)&&this.state===A){var i=this.levels[this.level],a=e;if(isNaN(t.endPTS)&&(t.endPTS=t.startPTS+e.duration,t.endDTS=t.startDTS+e.duration),!0===t.hasAudio&&a.addElementaryStream(u.a.ElementaryStreamTypes.AUDIO),!0===t.hasVideo&&a.addElementaryStream(u.a.ElementaryStreamTypes.VIDEO),v.b.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(a.dropped=t.dropped,a.dropped)if(a.backtracked)v.b.warn("Already backtracked on this fragment, appending with the gap");else{var o=i.details;if(!o||a.sn!==o.startSN)return v.b.warn("missing video frame(s), backtracking fragment"),this.fragmentTracker.removeFragment(a),a.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=E,this.fragPrevious=a,void this.tick();v.b.warn("missing video frame(s) on first frag, appending with gap")}else a.backtracked=!1;var s=d.b(i.details,a,t.startPTS,t.endPTS,t.startDTS,t.endDTS),l=this.hls;l.trigger(m.a.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:s,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(e){e&&e.length&&n.state===A&&(n.appended=!0,n.pendingBuffering=!0,l.trigger(m.a.BUFFER_APPENDING,{type:t.type,data:e,parent:"main",content:"data"}))}),this.tick()}},i.prototype.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===A&&(this.stats.tparsed=performance.now(),this.state=R,this._checkAppendedParsed())},i.prototype.onAudioTrackSwitching=function(e){var t=!!e.url,n=e.id;if(!t){if(this.mediaBuffer!==this.media){v.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var r=this.fragCurrent;r.loader&&(v.b.log("switching to main audio track, cancel main fragment load"),r.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=E}var i=this.hls;i.trigger(m.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),i.trigger(m.a.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}},i.prototype.onAudioTrackSwitched=function(e){var t=e.id,n=!!this.hls.audioTracks[t].url;if(n){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(v.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=n,this.tick()},i.prototype.onBufferCreated=function(e){var t=e.tracks,n=void 0,r=void 0,i=!1;for(var a in t){var o=t[a];"main"===o.id?(n=o,"video"===(r=a)&&(this.videoBuffer=t[a].buffer)):i=!0}this.mediaBuffer=i&&n?(v.b.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),n.buffer):this.media},i.prototype.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==A&&t!==R||(this.pendingBuffering=0<e.pending,this._checkAppendedParsed())}},i.prototype._checkAppendedParsed=function(){if(!(this.state!==R||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;v.b.log("main buffered : "+s.a.toString(t.buffered)),this.fragPrevious=e;var n=this.stats;n.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(m.a.FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.state=E}this.tick()}},i.prototype.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var n=!!this.media&&h.a.isBuffered(this.media,this.media.currentTime)&&h.a.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case l.a.FRAG_LOAD_ERROR:case l.a.FRAG_LOAD_TIMEOUT:case l.a.KEY_LOAD_ERROR:case l.a.KEY_LOAD_TIMEOUT:if(!e.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var r=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);v.b.warn("mediaController: frag loading failed, retry in "+r+" ms"),this.retryDate=performance.now()+r,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=b}else v.b.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=D;break;case l.a.LEVEL_LOAD_ERROR:case l.a.LEVEL_LOAD_TIMEOUT:this.state!==D&&(e.fatal?(this.state=D,v.b.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==S||(this.state=E));break;case l.a.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==A&&this.state!==R||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=E):(v.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},i.prototype._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,v.b.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},i.prototype._checkBuffer=function(){var e=this.config,t=this.media;if(t&&0!==t.readyState){var n=t.currentTime,r=(this.mediaBuffer?this.mediaBuffer:t).buffered;if(!this.loadedmetadata&&r.length)this.loadedmetadata=!0,this._seekToStartPos();else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var i=!(t.paused&&1<t.readyState||t.ended||0===t.buffered.length),a=performance.now();if(n!==this.lastCurrentTime)this.stallReported&&(v.b.warn("playback not stuck anymore @"+n+", after "+Math.round(a-this.stalled)+"ms"),this.stallReported=!1),this.stalled=null,this.nudgeRetry=0;else if(i){if(!this.stalled)return void(this.stalled=a);var o=h.a.bufferInfo(t,n,e.maxBufferHole),s=a-this.stalled;this._tryFixBufferStall(o,s)}}}},i.prototype.onFragLoadEmergencyAborted=function(){this.state=E,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},i.prototype.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;e&&this.fragmentTracker.detectEvictedFragments(u.a.ElementaryStreamTypes.VIDEO,e.buffered),this.state=E,this.fragPrevious=null},i.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},i.prototype.computeLivePosition=function(e,t){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-n)},i.prototype._tryFixBufferStall=function(e,t){var n=this.config,r=this.media.currentTime;this._reportStall(e.len);var i=this.fragmentTracker.getPartialFragment(r);i&&this._trySkipBufferHole(i),.5<e.len&&t>1e3*n.highBufferWatchdogPeriod&&(this.stalled=null,this._tryNudgeBuffer())},i.prototype._reportStall=function(e){var t=this.hls,n=this.media;this.stallReported||(this.stallReported=!0,v.b.warn("Playback stalling at @"+n.currentTime+" due to low buffer"),t.trigger(m.a.ERROR,{type:l.b.MEDIA_ERROR,details:l.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},i.prototype._trySkipBufferHole=function(e){for(var t=this.hls,n=this.media,r=n.currentTime,i=0,a=0;a<n.buffered.length;a++){var o=n.buffered.start(a);if(i<=r&&r<o)return n.currentTime=Math.max(o,n.currentTime+.1),v.b.warn("skipping hole, adjusting currentTime from "+r+" to "+n.currentTime),this.stalled=null,void t.trigger(m.a.ERROR,{type:l.b.MEDIA_ERROR,details:l.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+r+" to "+n.currentTime,frag:e});i=n.buffered.end(a)}},i.prototype._tryNudgeBuffer=function(){var e=this.config,t=this.hls,n=this.media,r=n.currentTime,i=(this.nudgeRetry||0)+1;if((this.nudgeRetry=i)<e.nudgeMaxRetry){var a=r+i*e.nudgeOffset;v.b.log("adjust currentTime from "+r+" to "+a),n.currentTime=a,t.trigger(m.a.ERROR,{type:l.b.MEDIA_ERROR,details:l.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else v.b.error("still stuck in high buffer @"+r+" after "+e.nudgeMaxRetry+", raise fatal error"),t.trigger(m.a.ERROR,{type:l.b.MEDIA_ERROR,details:l.a.BUFFER_STALLED_ERROR,fatal:!0})},i.prototype._seekToStartPos=function(){var e=this.media,t=e.currentTime,n=e.seeking?t:this.startPosition;t!==n&&(v.b.log("target start position not buffered, seek to buffered.start(0) "+n+" from current time "+t+" "),e.currentTime=n)},f(i,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,v.b.log("main stream:"+t+"->"+e),this.hls.trigger(m.a.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),i}(r.a);t.a=i},function(e,t,u){function l(n){function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}var i={};r.m=n,r.c=i,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var e=r(r.s=ENTRY_MODULE);return e.default||e}function d(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function f(e,t,n){var r={};r[n]=[];var i=t.toString(),a=i.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!a)return r;for(var o,s=a[1],l=new RegExp("(\\\\n|\\W)"+d(s)+p,"g");o=l.exec(i);)"dll-reference"!==o[3]&&r[n].push(o[3]);for(l=new RegExp("\\("+d(s)+'\\("(dll-reference\\s('+c+'))"\\)\\)'+p,"g");o=l.exec(i);)e[o[2]]||(r[n].push(o[1]),e[o[2]]=u(o[1]).m),r[o[2]]=r[o[2]]||[],r[o[2]].push(o[4]);return r}function h(n){return Object.keys(n).reduce(function(e,t){return e||0<n[t].length},!1)}var c="[\\.|\\-|\\+|\\w|/|@]+",p="\\((/\\*.*?\\*/)?s?.*?("+c+").*?\\)";e.exports=function(e,t){t=t||{};var n={main:u.m},r=t.all?{main:Object.keys(n)}:function(e,t){for(var n={main:[t]},r={main:[]},i={main:{}};h(n);)for(var a=Object.keys(n),o=0;o<a.length;o++){var s=a[o],l=n[s].pop();if(i[s]=i[s]||{},!i[s][l]&&e[s][l]){i[s][l]=!0,r[s]=r[s]||[],r[s].push(l);for(var u=f(e,e[s][l],s),d=Object.keys(u),c=0;c<d.length;c++)n[d[c]]=n[d[c]]||[],n[d[c]]=n[d[c]].concat(u[d[c]])}}return r}(n,e),i="";Object.keys(r).filter(function(e){return"main"!==e}).forEach(function(t){for(var e=0;r[t][e];)e++;r[t].push(e),n[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",i=i+"var "+t+" = ("+l.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+r[t].map(function(e){return JSON.stringify(e)+": "+n[t][e].toString()}).join(",")+"});\n"}),i=i+"("+l.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+r.main.map(function(e){return JSON.stringify(e)+": "+n.main[e].toString()}).join(",")+"})(self);";var a=new window.Blob([i],{type:"text/javascript"});if(t.bare)return a;var o=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(a),s=new window.Worker(o);return s.objectURL=o,s}},function(e,t,n){"use strict";var r=function(){function n(e,t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),this.subtle=e,this.aesIV=t}return n.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},n}();t.a=r},function(e,t,n){"use strict";var r=function(){function n(e,t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),this.subtle=e,this.key=t}return n.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},n}();t.a=r},function(e,t,n){"use strict";var r=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return e.prototype.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),n=new Uint32Array(4),r=0;r<4;r++)n[r]=t.getUint32(4*r);return n},e.prototype.initTable=function(){var e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],i=n[1],a=n[2],o=n[3],s=this.invSubMix,l=s[0],u=s[1],d=s[2],c=s[3],f=new Uint32Array(256),h=0,p=0,g=0;for(g=0;g<256;g++)f[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var m=p^p<<1^p<<2^p<<3^p<<4;m=m>>>8^255&m^99;var v=f[t[e[h]=m]=h],y=f[v],E=f[y],_=257*f[m]^16843008*m;r[h]=_<<24|_>>>8,i[h]=_<<16|_>>>16,a[h]=_<<8|_>>>24,o[h]=_,_=16843009*E^65537*y^257*v^16843008*h,l[m]=_<<24|_>>>8,u[m]=_<<16|_>>>16,d[m]=_<<8|_>>>24,c[m]=_,h?(h=v^f[f[f[E^v]]],p^=f[f[p]]):h=p=1}},e.prototype.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,r=0;r<t.length&&n;)n=t[r]===this.key[r],r++;if(!n){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var a=this.ksRows=4*(i+6+1),o=void 0,s=void 0,l=this.keySchedule=new Uint32Array(a),u=this.invKeySchedule=new Uint32Array(a),d=this.sBox,c=this.rcon,f=this.invSubMix,h=f[0],p=f[1],g=f[2],m=f[3],v=void 0,y=void 0;for(o=0;o<a;o++)o<i?v=l[o]=t[o]:(y=v,o%i==0?(y=d[(y=y<<8|y>>>24)>>>24]<<24|d[y>>>16&255]<<16|d[y>>>8&255]<<8|d[255&y],y^=c[o/i|0]<<24):6<i&&o%i==4&&(y=d[y>>>24]<<24|d[y>>>16&255]<<16|d[y>>>8&255]<<8|d[255&y]),l[o]=v=(l[o-i]^y)>>>0);for(s=0;s<a;s++)o=a-s,y=3&s?l[o]:l[o-4],u[s]=s<4||o<=4?y:h[d[y>>>24]]^p[d[y>>>16&255]]^g[d[y>>>8&255]]^m[d[255&y]],u[s]=u[s]>>>0}},e.prototype.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},e.prototype.decrypt=function(e,t,n,r){for(var i=this.keySize+6,a=this.invKeySchedule,o=this.invSBox,s=this.invSubMix,l=s[0],u=s[1],d=s[2],c=s[3],f=this.uint8ArrayToUint32Array_(n),h=f[0],p=f[1],g=f[2],m=f[3],v=new Int32Array(e),y=new Int32Array(v.length),E=void 0,_=void 0,T=void 0,b=void 0,S=void 0,A=void 0,R=void 0,w=void 0,I=void 0,D=void 0,M=void 0,C=void 0,O=void 0,P=void 0,N=this.networkToHostOrderSwap;t<v.length;){for(I=N(v[t]),D=N(v[t+1]),M=N(v[t+2]),C=N(v[t+3]),S=I^a[0],A=C^a[1],R=M^a[2],w=D^a[3],O=4,P=1;P<i;P++)E=l[S>>>24]^u[A>>16&255]^d[R>>8&255]^c[255&w]^a[O],_=l[A>>>24]^u[R>>16&255]^d[w>>8&255]^c[255&S]^a[O+1],T=l[R>>>24]^u[w>>16&255]^d[S>>8&255]^c[255&A]^a[O+2],b=l[w>>>24]^u[S>>16&255]^d[A>>8&255]^c[255&R]^a[O+3],S=E,A=_,R=T,w=b,O+=4;E=o[S>>>24]<<24^o[A>>16&255]<<16^o[R>>8&255]<<8^o[255&w]^a[O],_=o[A>>>24]<<24^o[R>>16&255]<<16^o[w>>8&255]<<8^o[255&S]^a[O+1],T=o[R>>>24]<<24^o[w>>16&255]<<16^o[S>>8&255]<<8^o[255&A]^a[O+2],b=o[w>>>24]<<24^o[S>>16&255]<<16^o[A>>8&255]<<8^o[255&R]^a[O+3],O+=3,y[t]=N(E^h),y[t+1]=N(b^p),y[t+2]=N(T^g),y[t+3]=N(_^m),h=I,p=D,g=M,m=C,t+=4}return r?(L=y.buffer,k=L.byteLength,(x=k&&new DataView(L).getUint8(k-1))?L.slice(0,k-x):L):y.buffer;var L,k,x},e.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}();t.a=r},function(e,t,n){"use strict";var p=n(20),g=n(0),m=n(5),r=function(){function r(e,t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,r),this.observer=e,this.config=n,this.remuxer=t}return r.prototype.resetInitSegment=function(e,t,n,r){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},r.prototype.resetTimeStamp=function(){},r.probe=function(e){if(!e)return!1;for(var t=(m.a.getID3Data(e,0)||[]).length,n=e.length;t<n;t++)if(p.e(e,t))return g.b.log("ADTS sync word found !"),!0;return!1},r.prototype.append=function(e,t,n,r){for(var i=this._audioTrack,a=m.a.getID3Data(e,0)||[],o=m.a.getTimeStamp(a),s=o?90*o:9e4*t,l=0,u=s,d=e.length,c=a.length,f=[{pts:u,dts:u,data:a}];c<d-1;)if(p.d(e,c)&&c+5<d){p.c(i,this.observer,e,c,i.manifestCodec);var h=p.a(i,e,c,s,l);if(!h){g.b.log("Unable to parse AAC frame");break}c+=h.length,u=h.sample.pts,l++}else m.a.isHeader(e,c)?(a=m.a.getID3Data(e,c),f.push({pts:u,dts:u,data:a}),c+=a.length):c++;this.remuxer.remux(i,{samples:[]},{samples:f,inputTimeScale:9e4},{samples:[]},t,n,r)},r.prototype.destroy=function(){},r}();t.a=r},function(e,t,n){"use strict";var m=n(20),s=n(21),P=n(1),A=n(39),r=n(40),N=n(0),L=n(2),i={video:0,audio:1,id3:2,text:3},a=function(){function O(e,t,n,r){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,O),this.observer=e,this.config=n,this.typeSupported=r,this.remuxer=t,this.sampleAes=null}return O.prototype.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new r.a(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},O.probe=function(e){var t=O._syncOffset(e);return!(t<0||(t&&N.b.warn("MPEG2-TS detected but first sync word found @ offset "+t+", junk ahead ?"),0))},O._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71===e[n]&&71===e[n+188]&&71===e[n+376])return n;n++}return-1},O.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:i[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},O.prototype.resetInitSegment=function(e,t,n,r){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=O.createTrack("video",r),this._audioTrack=O.createTrack("audio",r),this._id3Track=O.createTrack("id3",r),this._txtTrack=O.createTrack("text",r),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=t,this.videoCodec=n,this._duration=r},O.prototype.resetTimeStamp=function(){},O.prototype.append=function(e,t,n,r){var i=void 0,a=e.length,o=void 0,s=void 0,l=void 0,u=void 0,d=!1;this.contiguous=n;var c=this.pmtParsed,f=this._avcTrack,h=this._audioTrack,p=this._id3Track,g=f.pid,m=h.pid,v=p.pid,y=this._pmtId,E=f.pesData,_=h.pesData,T=p.pesData,b=this._parsePAT,S=this._parsePMT,A=this._parsePES,R=this._parseAVCPES.bind(this),w=this._parseAACPES.bind(this),I=this._parseMPEGPES.bind(this),D=this._parseID3PES.bind(this),M=O._syncOffset(e);for(a-=(a+M)%188,i=M;i<a;i+=188)if(71===e[i]){if(o=!!(64&e[i+1]),s=((31&e[i+1])<<8)+e[i+2],1<(48&e[i+3])>>4){if((l=i+5+e[i+4])===i+188)continue}else l=i+4;switch(s){case g:o&&(E&&(u=A(E))&&void 0!==u.pts&&R(u,!1),E={data:[],size:0}),E&&(E.data.push(e.subarray(l,i+188)),E.size+=i+188-l);break;case m:o&&(_&&(u=A(_))&&void 0!==u.pts&&(h.isAAC?w(u):I(u)),_={data:[],size:0}),_&&(_.data.push(e.subarray(l,i+188)),_.size+=i+188-l);break;case v:o&&(T&&(u=A(T))&&void 0!==u.pts&&D(u),T={data:[],size:0}),T&&(T.data.push(e.subarray(l,i+188)),T.size+=i+188-l);break;case 0:o&&(l+=e[l]+1),y=this._pmtId=b(e,l);break;case y:o&&(l+=e[l]+1);var C=S(e,l,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);0<(g=C.avc)&&(f.pid=g),0<(m=C.audio)&&(h.pid=m,h.isAAC=C.isAAC),0<(v=C.id3)&&(p.pid=v),d&&!c&&(N.b.log("reparse from beginning"),d=!1,i=M-188),c=this.pmtParsed=!0;break;case 17:case 8191:break;default:d=!0}}else this.observer.trigger(P.a.ERROR,{type:L.b.MEDIA_ERROR,details:L.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});E&&(u=A(E))&&void 0!==u.pts?(R(u,!0),f.pesData=null):f.pesData=E,_&&(u=A(_))&&void 0!==u.pts?(h.isAAC?w(u):I(u),h.pesData=null):(_&&_.size&&N.b.log("last AAC PES packet truncated,might overlap between fragments"),h.pesData=_),T&&(u=A(T))&&void 0!==u.pts?(D(u),p.pesData=null):p.pesData=T,null==this.sampleAes?this.remuxer.remux(h,f,p,this._txtTrack,t,n,r):this.decryptAndRemux(h,f,p,this._txtTrack,t,n,r)},O.prototype.decryptAndRemux=function(e,t,n,r,i,a,o){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,function(){s.decryptAndRemuxAvc(e,t,n,r,i,a,o)})}else this.decryptAndRemuxAvc(e,t,n,r,i,a,o)},O.prototype.decryptAndRemuxAvc=function(e,t,n,r,i,a,o){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,function(){s.remuxer.remux(e,t,n,r,i,a,o)})}else this.remuxer.remux(e,t,n,r,i,a,o)},O.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},O.prototype._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},O.prototype._parsePMT=function(e,t,n,r){var i,a=void 0,o={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<i;){switch(a=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!r){N.b.log("unkown stream type:"+e[t]);break}case 15:-1===o.audio&&(o.audio=a);break;case 21:-1===o.id3&&(o.id3=a);break;case 219:if(!r){N.b.log("unkown stream type:"+e[t]);break}case 27:-1===o.avc&&(o.avc=a);break;case 3:case 4:n?-1===o.audio&&(o.audio=a,o.isAAC=!1):N.b.log("MPEG audio found, not supported in this browser for now");break;case 36:N.b.warn("HEVC stream type found, not supported for now");break;default:N.b.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return o},O.prototype._parsePES=function(e){var t=0,n=void 0,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,l=void 0,u=void 0,d=e.data;if(!e||0===e.size)return null;for(;d[0].length<19&&1<d.length;){var c=new Uint8Array(d[0].length+d[1].length);c.set(d[0]),c.set(d[1],d[0].length),d[0]=c,d.splice(1,1)}if(1!==((n=d[0])[0]<<16)+(n[1]<<8)+n[2])return null;if((i=(n[4]<<8)+n[5])&&i>e.size-6)return null;192&(r=n[7])&&(4294967295<(s=536870912*(14&n[9])+4194304*(255&n[10])+16384*(254&n[11])+128*(255&n[12])+(254&n[13])/2)&&(s-=8589934592),64&r?(4294967295<(l=536870912*(14&n[14])+4194304*(255&n[15])+16384*(254&n[16])+128*(255&n[17])+(254&n[18])/2)&&(l-=8589934592),54e5<s-l&&(N.b.warn(Math.round((s-l)/9e4)+"s delta between PTS and DTS, align them"),s=l)):l=s),u=(a=n[8])+9,e.size-=u,o=new Uint8Array(e.size);for(var f=0,h=d.length;f<h;f++){var p=(n=d[f]).byteLength;if(u){if(p<u){u-=p;continue}n=n.subarray(u),p-=u,u=0}o.set(n,t),t+=p}return i&&(i-=a+3),{data:o,pts:s,dts:l,len:i}},O.prototype.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var n=t.samples,r=n.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(r||this.contiguous)?(e.id=r,n.push(e)):t.dropped++}e.debug.length&&N.b.log(e.pts+"/"+e.dts+":"+e.debug)},O.prototype._parseAVCPES=function(p,e){var g=this,m=this._avcTrack,t=this._parseAVCNALu(p.data),v=void 0,y=this.avcSample,E=void 0,_=!1,T=void 0,b=this.pushAccesUnit.bind(this),S=function(e,t,n,r){return{key:e,pts:t,dts:n,units:[],debug:r}};p.data=null,y&&t.length&&!m.audFound&&(b(y,m),y=this.avcSample=S(!1,p.pts,p.dts,"")),t.forEach(function(e){switch(e.type){case 1:E=!0,y||(y=g.avcSample=S(!0,p.pts,p.dts,"")),y.frame=!0;var t=e.data;if(_&&4<t.length){var n=new A.a(t).readSliceType();2!==n&&4!==n&&7!==n&&9!==n||(y.key=!0)}break;case 5:E=!0,y||(y=g.avcSample=S(!0,p.pts,p.dts,"")),y.key=!0,y.frame=!0;break;case 6:E=!0,(v=new A.a(g.discardEPB(e.data))).readUByte();for(var r=0,i=0,a=!1,o=0;!a&&1<v.bytesAvailable;){for(r=0;r+=o=v.readUByte(),255===o;);for(i=0;i+=o=v.readUByte(),255===o;);if(4===r&&0!==v.bytesAvailable){if(a=!0,181===v.readUByte()&&49===v.readUShort()&&1195456820===v.readUInt()&&3===v.readUByte()){var s=v.readUByte(),l=31&s,u=[s,v.readUByte()];for(T=0;T<l;T++)u.push(v.readUByte()),u.push(v.readUByte()),u.push(v.readUByte());g._insertSampleInOrder(g._txtTrack.samples,{type:3,pts:p.pts,bytes:u})}}else if(i<v.bytesAvailable)for(T=0;T<i;T++)v.readUByte()}break;case 7:if(_=E=!0,!m.sps){var d=(v=new A.a(e.data)).readSPS();m.width=d.width,m.height=d.height,m.pixelRatio=d.pixelRatio,m.sps=[e.data],m.duration=g._duration;var c=e.data.subarray(1,4),f="avc1.";for(T=0;T<3;T++){var h=c[T].toString(16);h.length<2&&(h="0"+h),f+=h}m.codec=f}break;case 8:E=!0,m.pps||(m.pps=[e.data]);break;case 9:E=!1,m.audFound=!0,y&&b(y,m),y=g.avcSample=S(!1,p.pts,p.dts,"");break;case 12:E=!1;break;default:E=!1,y&&(y.debug+="unknown NAL "+e.type+" ")}y&&E&&y.units.push(e)}),e&&y&&(b(y,m),this.avcSample=null)},O.prototype._insertSampleInOrder=function(e,t){var n=e.length;if(0<n){if(t.pts>=e[n-1].pts)e.push(t);else for(var r=n-1;0<=r;r--)if(t.pts<e[r].pts){e.splice(r,0,t);break}}else e.push(t)},O.prototype._getLastNalUnit=function(){var e=this.avcSample,t=void 0;if(!e||0===e.units.length){var n=this._avcTrack.samples;e=n[n.length-1]}if(e){var r=e.units;t=r[r.length-1]}return t},O.prototype._parseAVCNALu=function(e){var t=0,n=e.byteLength,r=void 0,i=void 0,a=this._avcTrack,o=a.naluState||0,s=o,l=[],u=void 0,d=-1,c=void 0;for(-1===o&&(c=31&e[d=0],o=0,t=1);t<n;)if(r=e[t++],o)if(1!==o)if(r)if(1===r){if(0<=d)u={data:e.subarray(d,t-o-1),type:c},l.push(u);else{var f=this._getLastNalUnit();if(f&&(s&&t<=4-s&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-s)),0<(i=t-o-1))){var h=new Uint8Array(f.data.byteLength+i);h.set(f.data,0),h.set(e.subarray(0,i),f.data.byteLength),f.data=h}}o=t<n?(c=31&e[d=t],0):-1}else o=0;else o=3;else o=r?0:2;else o=r?0:1;if(0<=d&&0<=o&&(u={data:e.subarray(d,n),type:c,state:o},l.push(u)),0===l.length){var p=this._getLastNalUnit();if(p){var g=new Uint8Array(p.data.byteLength+e.byteLength);g.set(p.data,0),g.set(e,p.data.byteLength),p.data=g}}return a.naluState=o,l},O.prototype.discardEPB=function(e){for(var t,n=e.byteLength,r=[],i=1,a=void 0;i<n-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(r.push(i+2),i+=2):i++;if(0===r.length)return e;t=n-r.length,a=new Uint8Array(t);var o=0;for(i=0;i<t;o++,i++)o===r[0]&&(o++,r.shift()),a[i]=e[o];return a},O.prototype._parseAACPES=function(e){var t,n,r=this._audioTrack,i=e.data,a=e.pts,o=this.aacOverFlow,s=this.aacLastPTS,l=void 0,u=void 0,d=void 0;if(o){var c=new Uint8Array(o.byteLength+i.byteLength);c.set(o,0),c.set(i,o.byteLength),i=c}for(u=0,n=i.length;u<n-1&&!m.d(i,u);u++);if(u){var f=void 0,h=void 0;if(h=u<n-1?(f="AAC PES did not start with ADTS header,offset:"+u,!1):(f="no ADTS header found in AAC PES",!0),N.b.warn("parsing error:"+f),this.observer.trigger(P.a.ERROR,{type:L.b.MEDIA_ERROR,details:L.a.FRAG_PARSING_ERROR,fatal:h,reason:f}),h)return}if(m.c(r,this.observer,i,u,this.audioCodec),l=0,t=m.b(r.samplerate),o&&s){var p=s+t;1<Math.abs(p-a)&&(N.b.log("AAC: align PTS for overlapping frames by "+Math.round((p-a)/90)),a=p)}for(;u<n;)if(m.d(i,u)&&u+5<n){var g=m.a(r,i,u,a,l);if(!g)break;u+=g.length,d=g.sample.pts,l++}else u++;o=u<n?i.subarray(u,n):null,this.aacOverFlow=o,this.aacLastPTS=d},O.prototype._parseMPEGPES=function(e){for(var t=e.data,n=t.length,r=0,i=0,a=e.pts;i<n;)if(s.a.isHeader(t,i)){var o=s.a.appendFrame(this._audioTrack,t,i,a,r);if(!o)break;i+=o.length,r++}else i++},O.prototype._parseID3PES=function(e){this._id3Track.samples.push(e)},O}();t.a=a},function(e,t,n){"use strict";var r=n(0),i=function(){function t(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}return t.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");r.set(e.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},t.prototype.skipBits=function(e){var t=void 0;this.bitsAvailable>e||(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord()),this.word<<=e,this.bitsAvailable-=e},t.prototype.readBits=function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return 32<e&&r.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,0<this.bitsAvailable?this.word<<=t:0<this.bytesAvailable&&this.loadWord(),0<(t=e-t)&&this.bitsAvailable?n<<t|this.readBits(t):n},t.prototype.skipLZ=function(){var e=void 0;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},t.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.prototype.readBoolean=function(){return 1===this.readBits(1)},t.prototype.readUByte=function(){return this.readBits(8)},t.prototype.readUShort=function(){return this.readBits(16)},t.prototype.readUInt=function(){return this.readBits(32)},t.prototype.skipScalingList=function(e){var t=8,n=8,r=void 0;for(r=0;r<e;r++)0!==n&&(n=(t+this.readEG()+256)%256),t=0===n?t:n},t.prototype.readSPS=function(){var e,t,n,r,i=0,a=0,o=0,s=0,l=void 0,u=void 0,d=void 0,c=this.readUByte.bind(this),f=this.readBits.bind(this),h=this.readUEG.bind(this),p=this.readBoolean.bind(this),g=this.skipBits.bind(this),m=this.skipEG.bind(this),v=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(c(),e=c(),f(5),g(3),c(),v(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var E=h();if(3===E&&g(1),v(),v(),g(1),p())for(u=3!==E?8:12,d=0;d<u;d++)p()&&y(d<6?16:64)}v();var _=h();if(0===_)h();else if(1===_)for(g(1),m(),m(),l=h(),d=0;d<l;d++)m();v(),g(1),t=h(),n=h(),0===(r=f(1))&&g(1),g(1),p()&&(i=h(),a=h(),o=h(),s=h());var T=[1,1];if(p()&&p())switch(c()){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:T=[c()<<8|c(),c()<<8|c()]}return{width:Math.ceil(16*(t+1)-2*i-2*a),height:(2-r)*(n+1)*16-(r?2:4)*(o+s),pixelRatio:T}},t.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}();t.a=i},function(e,t,n){"use strict";var a=n(11),r=function(){function i(e,t,n,r){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,i),this.decryptdata=n,this.discardEPB=r,this.decrypter=new a.a(e,t,{removePKCS7Padding:!1})}return i.prototype.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},i.prototype.decryptAacSample=function(t,n,r,i){var a=t[n].unit,e=a.subarray(16,a.length-a.length%16),o=e.buffer.slice(e.byteOffset,e.byteOffset+e.length),s=this;this.decryptBuffer(o,function(e){e=new Uint8Array(e),a.set(e,16),i||s.decryptAacSamples(t,n+1,r)})},i.prototype.decryptAacSamples=function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)){var r=this.decrypter.isSync();if(this.decryptAacSample(e,t,n,r),!r)return}}},i.prototype.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),r=0,i=32;i<=e.length-16;i+=160,r+=16)n.set(e.subarray(i,i+16),r);return n},i.prototype.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var n=0,r=32;r<=e.length-16;r+=160,n+=16)e.set(t.subarray(n,n+16),r);return e},i.prototype.decryptAvcSample=function(t,n,r,i,a,o){var s=this.discardEPB(a.data),e=this.getAvcEncryptedData(s),l=this;this.decryptBuffer(e.buffer,function(e){a.data=l.getAvcDecryptedUnit(s,e),o||l.decryptAvcSamples(t,n,r+1,i)})},i.prototype.decryptAvcSamples=function(e,t,n,r){for(;;t++,n=0){if(t>=e.length)return void r();for(var i=e[t].units;!(n>=i.length);n++){var a=i[n];if(!(a.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,n,r,a,o),!o)return}}}},i}();t.a=r},function(e,t,n){"use strict";var p=n(5),i=n(0),g=n(21),r=function(){function r(e,t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,r),this.observer=e,this.config=n,this.remuxer=t}return r.prototype.resetInitSegment=function(e,t,n,r){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},r.prototype.resetTimeStamp=function(){},r.probe=function(e){var t=void 0,n=void 0,r=p.a.getID3Data(e,0);if(r&&void 0!==p.a.getTimeStamp(r))for(t=r.length,n=Math.min(e.length-1,t+100);t<n;t++)if(g.a.probe(e,t))return i.b.log("MPEG Audio sync word found !"),!0;return!1},r.prototype.append=function(e,t,n,r){for(var i=p.a.getID3Data(e,0),a=p.a.getTimeStamp(i),o=a?90*a:9e4*t,s=i.length,l=e.length,u=0,d=0,c=this._audioTrack,f=[{pts:o,dts:o,data:i}];s<l;)if(g.a.isHeader(e,s)){var h=g.a.appendFrame(c,e,s,o,u);if(!h)break;s+=h.length,d=h.sample.pts,u++}else p.a.isHeader(e,s)?(i=p.a.getID3Data(e,s),f.push({pts:d,dts:d,data:i}),s+=i.length):s++;this.remuxer.remux(c,{samples:[]},{samples:f,inputTimeScale:9e4},{samples:[]},t,n,r)},r.prototype.destroy=function(){},r}();t.a=r},function(e,t,n){"use strict";var q=n(43),$=n(44),ee=n(1),te=n(2),ne=n(0),r=function(){function a(e,t,n,r){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,a),this.observer=e,this.config=t,this.typeSupported=n;var i=navigator.userAgent;this.isSafari=r&&-1<r.indexOf("Apple")&&i&&!i.match("CriOS"),this.ISGenerated=!1}return a.prototype.destroy=function(){},a.prototype.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},a.prototype.resetInitSegment=function(){this.ISGenerated=!1},a.prototype.remux=function(e,t,n,r,i,a,o){if(this.ISGenerated||this.generateIS(e,t,i),this.ISGenerated){var s=e.samples.length,l=t.samples.length,u=i,d=i;if(s&&l){var c=(e.samples[0].dts-t.samples[0].dts)/t.inputTimeScale;u+=Math.max(0,c),d+=Math.max(0,-c)}if(s){e.timescale||(ne.b.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,i));var f=this.remuxAudio(e,u,a,o);if(l){var h=void 0;f&&(h=f.endPTS-f.startPTS),t.timescale||(ne.b.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,i)),this.remuxVideo(t,d,a,h,o)}}else if(l){var p=this.remuxVideo(t,d,a,0,o);p&&e.codec&&this.remuxEmptyAudio(e,u,a,p)}}n.samples.length&&this.remuxID3(n,i),r.samples.length&&this.remuxText(r,i),this.observer.trigger(ee.a.FRAG_PARSED)},a.prototype.generateIS=function(e,t,n){var r=this.observer,i=e.samples,a=t.samples,o=this.typeSupported,s="audio/mp4",l={},u={tracks:l},d=void 0===this._initPTS,c=void 0,f=void 0;if(d&&(c=f=1/0),e.config&&i.length&&(e.timescale=e.samplerate,ne.b.log("audio sampling rate : "+e.samplerate),e.isAAC||(o.mpeg?(s="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3")),l.audio={container:s,codec:e.codec,initSegment:!e.isAAC&&o.mpeg?new Uint8Array:$.a.initSegment([e]),metadata:{channelCount:e.channelCount}},d&&(c=f=i[0].pts-e.inputTimeScale*n)),t.sps&&t.pps&&a.length){var h=t.inputTimeScale;t.timescale=h,l.video={container:"video/mp4",codec:t.codec,initSegment:$.a.initSegment([t]),metadata:{width:t.width,height:t.height}},d&&(c=Math.min(c,a[0].pts-h*n),f=Math.min(f,a[0].dts-h*n),this.observer.trigger(ee.a.INIT_PTS_FOUND,{initPTS:c}))}Object.keys(l).length?(r.trigger(ee.a.FRAG_PARSING_INIT_SEGMENT,u),this.ISGenerated=!0,d&&(this._initPTS=c,this._initDTS=f)):r.trigger(ee.a.ERROR,{type:te.b.MEDIA_ERROR,details:te.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},a.prototype.remuxVideo=function(e,t,n,r,i){var a=8,o=e.timescale,s=void 0,l=void 0,u=void 0,d=void 0,c=void 0,f=void 0,h=void 0,p=e.samples,g=[],m=p.length,v=this._PTSNormalize,y=this._initDTS,E=this.nextAvcDts,_=this.isSafari;if(0!==m){_&&(n|=p.length&&E&&(i&&Math.abs(t-E/o)<.1||Math.abs(p[0].pts-E-y)<o/5)),n||(E=t*o),p.forEach(function(e){e.pts=v(e.pts-y,E),e.dts=v(e.dts-y,E)}),p.sort(function(e,t){var n=e.dts-t.dts,r=e.pts-t.pts;return n||r||e.id-t.id});var T=p.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(T<0){ne.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(T/90)+" ms to overcome this issue");for(var b=0;b<p.length;b++)p[b].dts+=T}var S=p[0];c=Math.max(S.dts,0),d=Math.max(S.pts,0);var A=Math.round((c-E)/90);n&&A&&(1<A?ne.b.log("AVC:"+A+" ms hole between fragments detected,filling it"):A<-1&&ne.b.log("AVC:"+-A+" ms overlapping between fragments detected"),c=E,p[0].dts=c,d=Math.max(d-A,E),p[0].pts=d,ne.b.log("Video/PTS/DTS adjusted: "+Math.round(d/90)+"/"+Math.round(c/90)+",delta:"+A+" ms")),S=p[p.length-1],h=Math.max(S.dts,0),f=Math.max(S.pts,0,h),_&&(s=Math.round((h-c)/(p.length-1)));for(var R=0,w=0,I=0;I<m;I++){for(var D=p[I],M=D.units,C=M.length,O=0,P=0;P<C;P++)O+=M[P].data.length;w+=O,R+=C,D.length=O,D.dts=_?c+I*s:Math.max(D.dts,c),D.pts=Math.max(D.pts,D.dts)}var N=w+4*R+8;try{l=new Uint8Array(N)}catch(e){return void this.observer.trigger(ee.a.ERROR,{type:te.b.MUX_ERROR,details:te.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:N,reason:"fail allocating video mdat "+N})}var L=new DataView(l.buffer);L.setUint32(0,N),l.set($.a.types.mdat,4);for(var k=0;k<m;k++){for(var x=p[k],F=x.units,U=0,B=void 0,G=0,j=F.length;G<j;G++){var K=F[G],Y=K.data,H=K.data.byteLength;L.setUint32(a,H),a+=4,l.set(Y,a),a+=H,U+=4+H}if(_)B=Math.max(0,s*Math.round((x.pts-x.dts)/s));else{if(k<m-1)s=p[k+1].dts-x.dts;else{var q=this.config,V=x.dts-p[0<k?k-1:k].dts;if(q.stretchShortVideoTrack){var W=q.maxBufferHole,z=Math.floor(W*o),X=(r?d+r*o:this.nextAudioPts)-x.pts;z<X?((s=X-V)<0&&(s=V),ne.b.log("It is approximately "+X/90+" ms to the next segment; using duration "+s/90+" ms for the last video frame.")):s=V}else s=V}B=Math.round(x.pts-x.dts)}g.push({size:U,duration:s,cts:B,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:x.key?2:1,isNonSync:x.key?0:1}})}this.nextAvcDts=h+s;var Q=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,g.length&&-1<navigator.userAgent.toLowerCase().indexOf("chrome")){var Z=g[0].flags;Z.dependsOn=2,Z.isNonSync=0}e.samples=g,u=$.a.moof(e.sequenceNumber++,c,e),e.samples=[];var J={data1:u,data2:l,startPTS:d/o,endPTS:(f+s)/o,startDTS:c/o,endDTS:this.nextAvcDts/o,type:"video",hasAudio:!1,hasVideo:!0,nb:g.length,dropped:Q};return this.observer.trigger(ee.a.FRAG_PARSING_DATA,J),J}},a.prototype.remuxAudio=function(e,t,n,r){var i=e.inputTimeScale,a=e.timescale,o=i/a,s=(e.isAAC?1024:1152)*o,l=this._PTSNormalize,u=this._initDTS,d=!e.isAAC&&this.typeSupported.mpeg,c=void 0,f=void 0,h=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=e.samples,E=[],_=this.nextAudioPts;if(n|=y.length&&_&&(r&&Math.abs(t-_/i)<.1||Math.abs(y[0].pts-_-u)<20*s),y.forEach(function(e){e.pts=e.dts=l(e.pts-u,t*i)}),0!==(y=y.filter(function(e){return 0<=e.pts})).length){if(n||(_=r?t*i:y[0].pts),e.isAAC)for(var T=this.config.maxAudioFramesDrift,b=0,S=_;b<y.length;){var A,R=y[b];A=R.pts-S;var w=Math.abs(1e3*A/i);if(A<=-T*s)ne.b.warn("Dropping 1 audio frame @ "+(S/i).toFixed(3)+"s due to "+Math.round(w)+" ms overlap."),y.splice(b,1),e.len-=R.unit.length;else if(T*s<=A&&w<1e4&&S){var I=Math.round(A/s);ne.b.warn("Injecting "+I+" audio frame @ "+(S/i).toFixed(3)+"s due to "+Math.round(1e3*A/i)+" ms gap.");for(var D=0;D<I;D++){var M=Math.max(S,0);(h=q.a.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(ne.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),h=R.unit.subarray()),y.splice(b,0,{unit:h,pts:M,dts:M}),e.len+=h.length,S+=s,b++}R.pts=R.dts=S,S+=s,b++}else Math.abs(A),R.pts=R.dts=S,S+=s,b++}for(var C=0,O=y.length;C<O;C++){var P=y[C],N=P.unit,L=P.pts;if(void 0!==v)f.duration=Math.round((L-v)/o);else{var k=Math.round(1e3*(L-_)/i),x=0;if(n&&e.isAAC&&k){if(0<k&&k<1e4)x=Math.round((L-_)/s),ne.b.log(k+" ms hole between AAC samples detected,filling it"),0<x&&((h=q.a.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(h=N.subarray()),e.len+=x*h.length);else if(k<-12){ne.b.log("drop overlapping AAC sample, expected/parsed/delta:"+(_/i).toFixed(3)+"s/"+(L/i).toFixed(3)+"s/"+-k+"ms"),e.len-=N.byteLength;continue}L=_}if(m=L,!(0<e.len))return;var F=d?e.len:e.len+8;c=d?0:8;try{p=new Uint8Array(F)}catch(e){return void this.observer.trigger(ee.a.ERROR,{type:te.b.MUX_ERROR,details:te.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:F,reason:"fail allocating audio mdat "+F})}d||(new DataView(p.buffer).setUint32(0,F),p.set($.a.types.mdat,4));for(var U=0;U<x;U++)(h=q.a.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(ne.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),h=N.subarray()),p.set(h,c),c+=h.byteLength,f={size:h.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},E.push(f)}p.set(N,c);var B=N.byteLength;c+=B,f={size:B,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},E.push(f),v=L}var G=0,j=E.length;if(2<=j&&(G=E[j-2].duration,f.duration=G),j){this.nextAudioPts=_=v+o*G,e.len=0,e.samples=E,g=d?new Uint8Array:$.a.moof(e.sequenceNumber++,m/o,e),e.samples=[];var K=m/i,Y=_/i,H={data1:g,data2:p,startPTS:K,endPTS:Y,startDTS:K,endDTS:Y,type:"audio",hasAudio:!0,hasVideo:!1,nb:j};return this.observer.trigger(ee.a.FRAG_PARSING_DATA,H),H}return null}},a.prototype.remuxEmptyAudio=function(e,t,n,r){var i=e.inputTimeScale,a=i/(e.samplerate?e.samplerate:i),o=this.nextAudioPts,s=(void 0!==o?o:r.startDTS*i)+this._initDTS,l=r.endDTS*i+this._initDTS,u=1024*a,d=Math.ceil((l-s)/u),c=q.a.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(ne.b.warn("remux empty Audio"),c){for(var f=[],h=0;h<d;h++){var p=s+h*u;f.push({unit:c,pts:p,dts:p}),e.len+=c.length}e.samples=f,this.remuxAudio(e,t,n)}else ne.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},a.prototype.remuxID3=function(e,t){var n=e.samples.length,r=void 0,i=e.inputTimeScale,a=this._initPTS,o=this._initDTS;if(n){for(var s=0;s<n;s++)(r=e.samples[s]).pts=(r.pts-a)/i,r.dts=(r.dts-o)/i;this.observer.trigger(ee.a.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[],t=t},a.prototype.remuxText=function(e,t){e.samples.sort(function(e,t){return e.pts-t.pts});var n=e.samples.length,r=void 0,i=e.inputTimeScale,a=this._initPTS;if(n){for(var o=0;o<n;o++)(r=e.samples[o]).pts=(r.pts-a)/i;this.observer.trigger(ee.a.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[],t=t},a.prototype._PTSNormalize=function(e,t){var n;if(void 0===t)return e;for(n=t<e?-8589934592:8589934592;4294967296<Math.abs(e-t);)e+=n;return e},a}();t.a=r},function(e,t,n){"use strict";var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}();t.a=r},function(e,t,n){"use strict";var s=Math.pow(2,32)-1,r=function(){function f(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f)}return f.init=function(){f.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var e=void 0;for(e in f.types)f.types.hasOwnProperty(e)&&(f.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);f.HDLR_TYPES={video:t,audio:n};var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);f.STTS=f.STSC=f.STCO=i,f.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),f.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),f.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),f.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),s=new Uint8Array([0,0,0,1]);f.FTYP=f.box(f.types.ftyp,a,s,a,o),f.DINF=f.box(f.types.dinf,f.box(f.types.dref,r))},f.box=function(e){for(var t=Array.prototype.slice.call(arguments,1),n=8,r=t.length,i=r,a=void 0;r--;)n+=t[r].byteLength;for((a=new Uint8Array(n))[0]=n>>24&255,a[1]=n>>16&255,a[2]=n>>8&255,a[3]=255&n,a.set(e,4),r=0,n=8;r<i;r++)a.set(t[r],n),n+=t[r].byteLength;return a},f.hdlr=function(e){return f.box(f.types.hdlr,f.HDLR_TYPES[e])},f.mdat=function(e){return f.box(f.types.mdat,e)},f.mdhd=function(e,t){t*=e;var n=Math.floor(t/(s+1)),r=Math.floor(t%(s+1));return f.box(f.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))},f.mdia=function(e){return f.box(f.types.mdia,f.mdhd(e.timescale,e.duration),f.hdlr(e.type),f.minf(e))},f.mfhd=function(e){return f.box(f.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},f.minf=function(e){return"audio"===e.type?f.box(f.types.minf,f.box(f.types.smhd,f.SMHD),f.DINF,f.stbl(e)):f.box(f.types.minf,f.box(f.types.vmhd,f.VMHD),f.DINF,f.stbl(e))},f.moof=function(e,t,n){return f.box(f.types.moof,f.mfhd(e),f.traf(n,t))},f.moov=function(e){for(var t=e.length,n=[];t--;)n[t]=f.trak(e[t]);return f.box.apply(null,[f.types.moov,f.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(f.mvex(e)))},f.mvex=function(e){for(var t=e.length,n=[];t--;)n[t]=f.trex(e[t]);return f.box.apply(null,[f.types.mvex].concat(n))},f.mvhd=function(e,t){t*=e;var n=Math.floor(t/(s+1)),r=Math.floor(t%(s+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return f.box(f.types.mvhd,i)},f.sdtp=function(e){var t=e.samples||[],n=new Uint8Array(4+t.length),r=void 0,i=void 0;for(i=0;i<t.length;i++)r=t[i].flags,n[i+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return f.box(f.types.sdtp,n)},f.stbl=function(e){return f.box(f.types.stbl,f.stsd(e),f.box(f.types.stts,f.STTS),f.box(f.types.stsc,f.STSC),f.box(f.types.stsz,f.STSZ),f.box(f.types.stco,f.STCO))},f.avc1=function(e){var t=[],n=[],r=void 0,i=void 0,a=void 0;for(r=0;r<e.sps.length;r++)a=(i=e.sps[r]).byteLength,t.push(a>>>8&255),t.push(255&a),t=t.concat(Array.prototype.slice.call(i));for(r=0;r<e.pps.length;r++)a=(i=e.pps[r]).byteLength,n.push(a>>>8&255),n.push(255&a),n=n.concat(Array.prototype.slice.call(i));var o=f.box(f.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(n))),s=e.width,l=e.height,u=e.pixelRatio[0],d=e.pixelRatio[1];return f.box(f.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,s>>8&255,255&s,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,f.box(f.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),f.box(f.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,d>>24,d>>16&255,d>>8&255,255&d])))},f.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},f.mp4a=function(e){var t=e.samplerate;return f.box(f.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]),f.box(f.types.esds,f.esds(e)))},f.mp3=function(e){var t=e.samplerate;return f.box(f.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]))},f.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?f.box(f.types.stsd,f.STSD,f.mp4a(e)):f.box(f.types.stsd,f.STSD,f.mp3(e)):f.box(f.types.stsd,f.STSD,f.avc1(e))},f.tkhd=function(e){var t=e.id,n=e.duration*e.timescale,r=e.width,i=e.height,a=Math.floor(n/(s+1)),o=Math.floor(n%(s+1));return f.box(f.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,i>>8&255,255&i,0,0]))},f.traf=function(e,t){var n=f.sdtp(e),r=e.id,i=Math.floor(t/(s+1)),a=Math.floor(t%(s+1));return f.box(f.types.traf,f.box(f.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),f.box(f.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a])),f.trun(e,n.length+16+20+8+16+8+8),n)},f.trak=function(e){return e.duration=e.duration||4294967295,f.box(f.types.trak,f.tkhd(e),f.mdia(e))},f.trex=function(e){var t=e.id;return f.box(f.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},f.trun=function(e,t){var n=e.samples||[],r=n.length,i=12+16*r,a=new Uint8Array(i),o=void 0,s=void 0,l=void 0,u=void 0,d=void 0,c=void 0;for(t+=8+i,a.set([0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,255&r,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0),o=0;o<r;o++)l=(s=n[o]).duration,u=s.size,d=s.flags,c=s.cts,a.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,u>>>24&255,u>>>16&255,u>>>8&255,255&u,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,61440&d.degradPrio,15&d.degradPrio,c>>>24&255,c>>>16&255,c>>>8&255,255&c],12+16*o);return f.box(f.types.trun,a)},f.initSegment=function(e){f.types||f.init();var t=f.moov(e),n=void 0;return(n=new Uint8Array(f.FTYP.byteLength+t.byteLength)).set(f.FTYP),n.set(t,f.FTYP.byteLength),n},f}();t.a=r},function(e,t,n){"use strict";var d=n(1),r=function(){function t(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),this.observer=e}return t.prototype.destroy=function(){},t.prototype.resetTimeStamp=function(){},t.prototype.resetInitSegment=function(){},t.prototype.remux=function(e,t,n,r,i,a,o,s){var l=this.observer,u="";e&&(u+="audio"),t&&(u+="video"),l.trigger(d.a.FRAG_PARSING_DATA,{data1:s,startPTS:i,startDTS:i,type:u,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),l.trigger(d.a.FRAG_PARSED)},t}();t.a=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(19),s=n(1),l=n(0),r=n(10),u=n.n(r);t.default=function(i){var a=new u.a;a.trigger=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.emit.apply(a,[e,e].concat(n))},a.off=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.removeListener.apply(a,[e].concat(n))};var r=function(e,t){i.postMessage({event:e,data:t})};i.addEventListener("message",function(e){var t=e.data;switch(t.cmd){case"init":var n=JSON.parse(t.config);i.demuxer=new o.a(a,t.typeSupported,n,t.vendor);try{Object(l.a)(!0===n.debug)}catch(e){console.warn("demuxerWorker: unable to enable logs")}r("init",null);break;case"demux":i.demuxer.push(t.data,t.decryptdata,t.initSegment,t.audioCodec,t.videoCodec,t.timeOffset,t.discontinuity,t.trackSwitch,t.contiguous,t.duration,t.accurateTimeOffset,t.defaultInitPTS)}}),a.on(s.a.FRAG_DECRYPTED,r),a.on(s.a.FRAG_PARSING_INIT_SEGMENT,r),a.on(s.a.FRAG_PARSED,r),a.on(s.a.ERROR,r),a.on(s.a.FRAG_PARSING_METADATA,r),a.on(s.a.FRAG_PARSING_USERDATA,r),a.on(s.a.INIT_PTS_FOUND,r),a.on(s.a.FRAG_PARSING_DATA,function(e,t){var n=[],r={event:e,data:t};t.data1&&(r.data1=t.data1.buffer,n.push(t.data1.buffer),delete t.data1),t.data2&&(r.data2=t.data2.buffer,n.push(t.data2.buffer),delete t.data2),i.postMessage(r,n)})}},function(e,t,n){"use strict";var d=n(1),r=n(3),c=n(0),f=n(2),h=n(17),i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=function(n){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this,e,d.a.MANIFEST_LOADED,d.a.LEVEL_LOADED,d.a.FRAG_LOADED,d.a.ERROR));return t.canload=!1,t.currentLevelIndex=null,t.manualLevelIndex=-1,t.timer=null,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r.prototype.onHandlerDestroying=function(){this.cleanTimer(),this.manualLevelIndex=-1},r.prototype.cleanTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},r.prototype.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),null!==this.timer&&this.loadLevel()},r.prototype.stopLoad=function(){this.canload=!1},r.prototype.onManifestLoaded=function(e){var t=[],n=void 0,r={},i=null,a=!1,o=!1,s=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),l=[];if(e.levels.forEach(function(e){e.loadError=0,e.fragmentError=!1,a=a||!!e.videoCodec,o=o||!!e.audioCodec||!(!e.attrs||!e.attrs.AUDIO),!0===s&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),void 0===(i=r[e.bitrate])?(e.url=[e.url],e.urlId=0,r[e.bitrate]=e,t.push(e)):i.url.push(e.url)}),!0===a&&!0===o&&(t=t.filter(function(e){return!!e.videoCodec})),t=t.filter(function(e){var t=e.audioCodec,n=e.videoCodec;return(!t||Object(h.a)(t))&&(!n||Object(h.a)(n))}),e.audioTracks&&(l=e.audioTracks.filter(function(e){return!e.audioCodec||Object(h.a)(e.audioCodec,"audio")})),0<t.length){n=t[0].bitrate,t.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=t;for(var u=0;u<t.length;u++)if(t[u].bitrate===n){this._firstLevel=u,c.b.log("manifest loaded,"+t.length+" level(s) found, first bitrate:"+n);break}this.hls.trigger(d.a.MANIFEST_PARSED,{levels:t,audioTracks:l,firstLevel:this._firstLevel,stats:e.stats,audio:o,video:a,altAudio:0<l.length&&a})}else this.hls.trigger(d.a.ERROR,{type:f.b.MEDIA_ERROR,details:f.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},r.prototype.setLevelInternal=function(e){var t=this._levels,n=this.hls;if(0<=e&&e<t.length){if(this.cleanTimer(),this.currentLevelIndex!==e){c.b.log("switching to level "+e);var r=t[this.currentLevelIndex=e];r.level=e,n.trigger(d.a.LEVEL_SWITCHING,r)}var i=t[e],a=i.details;if(!a||!0===a.live){var o=i.urlId;n.trigger(d.a.LEVEL_LOADING,{url:i.url[o],level:e,id:o})}}else n.trigger(d.a.ERROR,{type:f.b.OTHER_ERROR,details:f.a.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},r.prototype.onError=function(e){if(!0!==e.fatal){var t=!1,n=!1,r=void 0;switch(e.details){case f.a.FRAG_LOAD_ERROR:case f.a.FRAG_LOAD_TIMEOUT:case f.a.KEY_LOAD_ERROR:case f.a.KEY_LOAD_TIMEOUT:r=e.frag.level,n=!0;break;case f.a.LEVEL_LOAD_ERROR:case f.a.LEVEL_LOAD_TIMEOUT:r=e.context.level,t=!0;break;case f.a.REMUX_ALLOC_ERROR:r=e.level,t=!0}void 0!==r&&this.recoverLevel(e,r,t,n)}else e.type===f.b.NETWORK_ERROR&&this.cleanTimer()},r.prototype.recoverLevel=function(e,t,n,r){var i=this,a=this.hls.config,o=e.details,s=this._levels[t],l=void 0,u=void 0,d=void 0;if(s.loadError++,s.fragmentError=r,!0===n){if(!(this.levelRetryCount+1<=a.levelLoadingMaxRetry))return c.b.error("level controller, cannot recover from "+o+" error"),this.currentLevelIndex=null,this.cleanTimer(),void(e.fatal=!0);u=Math.min(Math.pow(2,this.levelRetryCount)*a.levelLoadingRetryDelay,a.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return i.loadLevel()},u),e.levelRetry=!0,this.levelRetryCount++,c.b.warn("level controller, "+o+", retry in "+u+" ms, current retry count is "+this.levelRetryCount)}!0!==n&&!0!==r||(1<(l=s.url.length)&&s.loadError<l?(c.b.warn("level controller, "+o+" for level "+t+": switching to redundant stream id "+s.urlId),s.urlId=(s.urlId+1)%l,s.details=void 0):-1===this.manualLevelIndex?(d=0===t?this._levels.length-1:t-1,c.b.warn("level controller, "+o+": switch to "+d),this.hls.nextAutoLevel=this.currentLevelIndex=d):!0===r&&(c.b.warn("level controller, "+o+": reload a fragment"),this.currentLevelIndex=null))},r.prototype.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var n=this._levels[t.level];void 0!==n&&(n.fragmentError=!1,n.loadError=0,this.levelRetryCount=0)}},r.prototype.onLevelLoaded=function(e){var t=this,n=e.level;if(n===this.currentLevelIndex){var r=this._levels[n];!1===r.fragmentError&&(r.loadError=0,this.levelRetryCount=0);var i=e.details;if(i.live){var a=1e3*(i.averagetargetduration?i.averagetargetduration:i.targetduration),o=a,s=r.details;s&&i.endSN===s.endSN&&(o/=2,c.b.log("same live playlist, reload twice faster")),o-=performance.now()-e.stats.trequest,o=Math.max(a/2,Math.round(o)),c.b.log("live playlist, reload in "+Math.round(o)+" ms"),this.timer=setTimeout(function(){return t.loadLevel()},o)}else this.cleanTimer()}},r.prototype.loadLevel=function(){var e=void 0,t=void 0;null!==this.currentLevelIndex&&!0===this.canload&&void 0!==(e=this._levels[this.currentLevelIndex])&&0<e.url.length&&(t=e.urlId,this.hls.trigger(d.a.LEVEL_LOADING,{url:e.url[t],level:this.currentLevelIndex,id:t}))},i(r,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&void 0!==t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0!==this._startLevel)return this._startLevel;var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}]),r}(r.a);t.a=a},function(e,t,n){"use strict";var i=n(1),a=n(3),c=n(5),o=n(25),r=function(n){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this,e,i.a.MEDIA_ATTACHED,i.a.MEDIA_DETACHING,i.a.FRAG_PARSING_METADATA));return t.id3Track=void 0,t.media=void 0,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r.prototype.destroy=function(){a.a.prototype.destroy.call(this)},r.prototype.onMediaAttached=function(e){this.media=e.media,this.media},r.prototype.onMediaDetaching=function(){Object(o.a)(this.id3Track),this.id3Track=void 0,this.media=void 0},r.prototype.getID3Track=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("metadata"===n.kind&&"id3"===n.label)return Object(o.b)(n,this.media),n}return this.media.addTextTrack("metadata","id3")},r.prototype.onFragParsingMetadata=function(e){var t=e.frag,n=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var r=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<n.length;i++){var a=c.a.getID3Frames(n[i].data);if(a){var o=n[i].pts,s=i<n.length-1?n[i+1].pts:t.endPTS;o===s&&(s+=1e-4);for(var l=0;l<a.length;l++){var u=a[l];if(!c.a.isTimeStampFrame(u)){var d=new r(o,s,"");d.value=u,this.id3Track.addCue(d)}}}}},r}(a.a);t.a=r},function(e,t,n){"use strict";t.a=function(){var e=Object(i.a)(),t=window.SourceBuffer||window.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!n&&!!r};var i=n(12)},function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(51),i=n(54),a=n(55),o=n(56),s=n(57),l=n(58),u=n(59),d=n(60),c=n(62),f=n(66),h=n(67),p=n(68),g=n(69),m={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:s.a,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:r.a,bufferController:i.a,capLevelController:a.a,fpsController:o.a,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:g.a};m.subtitleStreamController=h.a,m.subtitleTrackController=f.a,m.timelineController=c.a,m.cueHandler=d,m.enableCEA708Captions=!0,m.enableWebVTT=!0,m.captionsTextTrack1Label="English",m.captionsTextTrack1LanguageCode="en",m.captionsTextTrack2Label="Spanish",m.captionsTextTrack2LanguageCode="es",m.audioStreamController=u.a,m.audioTrackController=l.a,m.emeController=p.a},function(e,t,n){"use strict";var E=n(1),i=n(3),_=n(9),a=n(2),T=n(0),l=n(52),o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),r=function(n){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this,e,E.a.FRAG_LOADING,E.a.FRAG_LOADED,E.a.FRAG_BUFFERED,E.a.ERROR));return t.lastLoadedFragLevel=0,t._nextAutoLevel=-1,t.hls=e,t.timer=null,t._bwEstimator=null,t.onCheck=t._abandonRulesCheck.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r.prototype.destroy=function(){this.clearTimer(),i.a.prototype.destroy.call(this)},r.prototype.onFragLoading=function(e){var t=e.frag;if("main"===t.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var n=this.hls,r=e.frag.level,i=n.levels[r].details.live,a=n.config,o=void 0,s=void 0;s=i?(o=a.abrEwmaFastLive,a.abrEwmaSlowLive):(o=a.abrEwmaFastVoD,a.abrEwmaSlowVoD),this._bwEstimator=new l.a(n,s,o,a.abrEwmaDefaultEstimate)}this.fragCurrent=t}},r.prototype._abandonRulesCheck=function(){var e=this.hls,t=e.media,n=this.fragCurrent,r=n.loader,i=e.minAutoLevel;if(!r||r.stats&&r.stats.aborted)return T.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var a=r.stats;if(t&&a&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&n.autoLevel&&n.level){var o=performance.now()-a.trequest,s=Math.abs(t.playbackRate);if(o>500*n.duration/s){var l=e.levels,u=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/o),d=l[n.level],c=d.realBitrate?Math.max(d.realBitrate,d.bitrate):d.bitrate,f=a.total?a.total:Math.max(a.loaded,Math.round(n.duration*c/8)),h=t.currentTime,p=(f-a.loaded)/u,g=(_.a.bufferInfo(t,h,e.config.maxBufferHole).end-h)/s;if(g<2*n.duration/s&&g<p){var m=void 0,v=void 0;for(v=n.level-1;i<v;v--){var y=l[v].realBitrate?Math.max(l[v].realBitrate,l[v].bitrate):l[v].bitrate;if((m=n.duration*y/(6.4*u))<g)break}m<p&&(T.b.warn("loading too slow, abort fragment loading and switch to level "+v+":fragLoadedDelay["+v+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+m.toFixed(1)+"<"+p.toFixed(1)+":"+g.toFixed(1)),e.nextLoadLevel=v,this._bwEstimator.sample(o,a.loaded),r.abort(),this.clearTimer(),e.trigger(E.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:a}))}}}},r.prototype.onFragLoaded=function(e){var t=e.frag;if("main"===t.type&&!isNaN(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[t.level],r=(n.loaded?n.loaded.bytes:0)+e.stats.loaded,i=(n.loaded?n.loaded.duration:0)+e.frag.duration;n.loaded={bytes:r,duration:i},n.realBitrate=Math.round(8*r/i)}if(e.frag.bitrateTest){var a=e.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(e)}}},r.prototype.onFragBuffered=function(e){var t=e.stats,n=e.frag;if(!(!0===t.aborted||"main"!==n.type||isNaN(n.sn)||n.bitrateTest&&t.tload!==t.tbuffered)){var r=t.tparsed-t.trequest;T.b.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(r,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=r/1e3:this.bitrateTestDelay=0}},r.prototype.onError=function(e){switch(e.details){case a.a.FRAG_LOAD_ERROR:case a.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},r.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},r.prototype._findBestLevel=function(e,t,n,r,i,a,o,s,l){for(var u=i;r<=u;u--){var d,c=l[u].details,f=c?c.totalduration/c.fragments.length:t,h=!!c&&c.live;d=u<=e?o*n:s*n;var p=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,g=p*f/d;if(T.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(d)+"/"+p+"/"+f+"/"+a+"/"+g),p<d&&(!g||h&&!this.bitrateTestDelay||g<a))return u}return-1},o(r,[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var n=this._nextABRAutoLevel;return-1!==e&&(n=Math.min(e,n)),n},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,n=e.levels,r=e.config,i=e.minAutoLevel,a=e.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,l=a?a.currentTime:0,u=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,d=this._bwEstimator?this._bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,c=(_.a.bufferInfo(a,l,r.maxBufferHole).end-l)/u,f=this._findBestLevel(o,s,d,i,t,c,r.abrBandWidthFactor,r.abrBandWidthUpFactor,n);if(0<=f)return f;T.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var h=s?Math.min(s,r.maxStarvationDelay):r.maxStarvationDelay,p=r.abrBandWidthFactor,g=r.abrBandWidthUpFactor;if(0===c){var m=this.bitrateTestDelay;m&&(h=(s?Math.min(s,r.maxLoadingDelay):r.maxLoadingDelay)-m,T.b.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*h)+" ms"),p=g=1)}return f=this._findBestLevel(o,s,d,i,t,c+h,p,g,n),Math.max(f,0)}}]),r}(i.a);t.a=r},function(e,t,n){"use strict";var a=n(53),r=function(){function i(e,t,n,r){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,i),this.hls=e,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new a.a(t),this.fast_=new a.a(n)}return i.prototype.sample=function(e,t){var n=8e3*t/(e=Math.max(e,this.minDelayMs_)),r=e/1e3;this.fast_.sample(r,n),this.slow_.sample(r,n)},i.prototype.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},i.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},i.prototype.destroy=function(){},i}();t.a=r},function(e,t,n){"use strict";var r=function(){function t(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}return t.prototype.sample=function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e},t.prototype.getTotalWeight=function(){return this.totalWeight_},t.prototype.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},t}();t.a=r},function(e,t,n){"use strict";var l=n(1),i=n(3),c=n(0),u=n(2),r=n(12),a=Object(r.a)(),o=function(n){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this,e,l.a.MEDIA_ATTACHING,l.a.MEDIA_DETACHING,l.a.MANIFEST_PARSED,l.a.BUFFER_RESET,l.a.BUFFER_APPENDING,l.a.BUFFER_CODECS,l.a.BUFFER_EOS,l.a.BUFFER_FLUSHING,l.a.LEVEL_PTS_UPDATED,l.a.LEVEL_UPDATED));return t._msDuration=null,t._levelDuration=null,t._live=null,t._objectUrl=null,t.onsbue=t.onSBUpdateEnd.bind(t),t.onsbe=t.onSBUpdateError.bind(t),t.pendingTracks={},t.tracks={},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r.prototype.destroy=function(){i.a.prototype.destroy.call(this)},r.prototype.onLevelPtsUpdated=function(e){var t=e.type,n=this.tracks.audio;if("audio"===t&&n&&"audio/mpeg"===n.container){var r=this.sourceBuffer.audio;if(.1<Math.abs(r.timestampOffset-e.start)){var i=r.updating;try{r.abort()}catch(e){i=!0,c.b.warn("can not abort audio buffer: "+e)}i?this.audioTimestampOffset=e.start:(c.b.warn("change mpeg audio timestamp offset from "+r.timestampOffset+" to "+e.start),r.timestampOffset=e.start)}}},r.prototype.onManifestParsed=function(e){var t=e.audio,n=e.video||e.levels.length&&e.altAudio,r=0;e.altAudio&&(t||n)&&(r=(t?1:0)+(n?1:0),c.b.log(r+" sourceBuffer(s) expected")),this.sourceBufferNb=r},r.prototype.onMediaAttaching=function(e){var t=this.media=e.media;if(t){var n=this.mediaSource=new a;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),n.addEventListener("sourceopen",this.onmso),n.addEventListener("sourceended",this.onmse),n.addEventListener("sourceclose",this.onmsc),t.src=URL.createObjectURL(n),this._objectUrl=t.src}},r.prototype.onMediaDetaching=function(){c.b.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){c.b.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):c.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(l.a.MEDIA_DETACHED)},r.prototype.onMediaSourceOpen=function(){c.b.log("media source opened"),this.hls.trigger(l.a.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},r.prototype.checkPendingTracks=function(){var e=this.pendingTracks,t=Object.keys(e).length;t&&(this.sourceBufferNb<=t||0===this.sourceBufferNb)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())},r.prototype.onMediaSourceClose=function(){c.b.log("media source closed")},r.prototype.onMediaSourceEnded=function(){c.b.log("media source ended")},r.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;c.b.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var n=this.parent,t=this.segments.reduce(function(e,t){return t.parent===n?e+1:e},0),r={},i=this.sourceBuffer;for(var a in i)r[a]=i[a].buffered;this.hls.trigger(l.a.BUFFER_APPENDED,{parent:n,pending:t,timeRanges:r}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()},r.prototype.onSBUpdateError=function(e){c.b.error("sourceBuffer error:",e),this.hls.trigger(l.a.ERROR,{type:u.b.MEDIA_ERROR,details:u.a.BUFFER_APPENDING_ERROR,fatal:!1})},r.prototype.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var n=e[t];try{this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this.onsbue),n.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},r.prototype.onBufferCodecs=function(e){if(0===Object.keys(this.sourceBuffer).length){for(var t in e)this.pendingTracks[t]=e[t];var n=this.mediaSource;n&&"open"===n.readyState&&this.checkPendingTracks()}},r.prototype.createSourceBuffers=function(e){var t=this.sourceBuffer,n=this.mediaSource;for(var r in e)if(!t[r]){var i=e[r],a=i.levelCodec||i.codec,o=i.container+";codecs="+a;c.b.log("creating sourceBuffer("+o+")");try{var s=t[r]=n.addSourceBuffer(o);s.addEventListener("updateend",this.onsbue),s.addEventListener("error",this.onsbe),this.tracks[r]={codec:a,container:i.container},i.buffer=s}catch(e){c.b.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(l.a.ERROR,{type:u.b.MEDIA_ERROR,details:u.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:o})}}this.hls.trigger(l.a.BUFFER_CREATED,{tracks:e})},r.prototype.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},r.prototype.onBufferAppendFail=function(e){c.b.error("sourceBuffer error:",e.event),this.hls.trigger(l.a.ERROR,{type:u.b.MEDIA_ERROR,details:u.a.BUFFER_APPENDING_ERROR,fatal:!1})},r.prototype.onBufferEos=function(e){var t=this.sourceBuffer,n=e.type;for(var r in t)n&&r!==n||t[r].ended||(t[r].ended=!0,c.b.log(r+" sourceBuffer now EOS"));this.checkEos()},r.prototype.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var n in e){var r=e[n];if(!r.ended)return;if(r.updating)return void(this._needsEos=!0)}c.b.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){c.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},r.prototype.onBufferFlushing=function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()},r.prototype.onLevelUpdated=function(e){var t=e.details;0<t.fragments.length&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._live=t.live,this.updateMediaElementDuration())},r.prototype.updateMediaElementDuration=function(){var e=this.hls.config,t=void 0;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer)if(!0===this.sourceBuffer[n].updating)return;t=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===e.liveDurationInfinity?(c.b.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>t||t===1/0||isNaN(t))&&(c.b.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},r.prototype.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,n=this.sourceBuffer;try{for(var r in n)t+=n[r].buffered.length}catch(e){c.b.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(l.a.BUFFER_FLUSHED)}},r.prototype.doAppending=function(){var e=this.hls,t=this.sourceBuffer,n=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void c.b.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(n&&n.length){var r=n.shift();try{var i=t[r.type];i?i.updating?n.unshift(r):(i.ended=!1,this.parent=r.parent,i.appendBuffer(r.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(t){c.b.error("error while trying to append buffer:"+t.message),n.unshift(r);var a={type:u.b.MEDIA_ERROR,parent:r.parent};22!==t.code?(this.appendError?this.appendError++:this.appendError=1,a.details=u.a.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry?(c.b.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),n=[],a.fatal=!0):a.fatal=!1):(this.segments=[],a.details=u.a.BUFFER_FULL_ERROR,a.fatal=!1),e.trigger(l.a.ERROR,a)}}}},r.prototype.flushBuffer=function(e,t,n){var r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,l=void 0,u=this.sourceBuffer;if(Object.keys(u).length){if(c.b.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var d in u)if(!n||d===n){if((r=u[d]).ended=!1,r.updating)return c.b.warn("cannot flush, sb updating in progress"),!1;try{for(i=0;i<r.buffered.length;i++)if(a=r.buffered.start(i),o=r.buffered.end(i),l=-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&t===Number.POSITIVE_INFINITY?(s=e,t):(s=Math.max(a,e),Math.min(o,t)),.5<Math.min(l,o)-s)return this.flushBufferCounter++,c.b.log("flush "+d+" ["+s+","+l+"], of ["+a+","+o+"], pos:"+this.media.currentTime),r.remove(s,l),!1}catch(e){c.b.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else c.b.warn("abort flushing too many retries");c.b.log("buffer flushed")}return!0},r}(i.a);t.a=o},function(e,t,n){"use strict";var r=n(1),i=n(3),a=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=function(t){function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.call(this,e,r.a.FPS_DROP_LEVEL_CAPPING,r.a.MEDIA_ATTACHING,r.a.MANIFEST_PARSED))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,t),i.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))},i.prototype.onFpsDropLevelCapping=function(e){i.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},i.prototype.onMediaAttaching=function(e){this.media=e.media instanceof HTMLVideoElement?e.media:null},i.prototype.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],t.config.capLevelToPlayerSize&&(e.video||e.levels.length&&e.altAudio)&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=e.levels,t.firstLevel=this.getMaxLevel(e.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},i.prototype.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},i.prototype.getMaxLevel=function(n){var r=this;if(!this.levels)return-1;var e=this.levels.filter(function(e,t){return i.isLevelAllowed(t,r.restrictedLevels)&&t<=n});return i.getMaxLevelByMediaSize(e,this.mediaWidth,this.mediaHeight)},i.isLevelAllowed=function(e){return-1===(1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]).indexOf(e)},i.getMaxLevelByMediaSize=function(e,t,n){if(!e||e&&!e.length)return-1;for(var r=e.length-1,i=0;i<e.length;i+=1){var a=e[i];if((a.width>=t||a.height>=n)&&(o=a,!(s=e[i+1])||o.width!==s.width||o.height!==s.height)){r=i;break}}var o,s;return r},a(i,[{key:"mediaWidth",get:function(){var e=void 0,t=this.media;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=i.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e=void 0,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=i.contentScaleFactor),e}}],[{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}]),i}(i.a);t.a=o},function(e,t,n){"use strict";var d=n(1),r=n(3),c=n(0),i=function(t){function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.call(this,e,d.a.MEDIA_ATTACHING))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),n.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},n.prototype.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},n.prototype.checkFPS=function(e,t,n){var r=performance.now();if(t){if(this.lastTime){var i=r-this.lastTime,a=n-this.lastDroppedFrames,o=t-this.lastDecodedFrames,s=1e3*a/i,l=this.hls;if(l.trigger(d.a.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:n}),0<s&&a>l.config.fpsDroppedMonitoringThreshold*o){var u=l.currentLevel;c.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),0<u&&(-1===l.autoLevelCapping||l.autoLevelCapping>=u)&&(u-=1,l.trigger(d.a.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:l.currentLevel}),l.autoLevelCapping=u,l.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=t}},n.prototype.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},n}(r.a);t.a=i},function(e,t,n){"use strict";var d=n(0),r=function(){function t(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}return t.prototype.destroy=function(){this.abort(),this.loader=null},t.prototype.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.prototype.load=function(e,t,n){this.context=e,this.config=t,this.callbacks=n,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},t.prototype.loadInternal=function(){var e=void 0,t=this.context;e=this.loader=new XMLHttpRequest;var n=this.stats;n.tfirst=0,n.loaded=0;var r=this.xhrSetup;try{if(r)try{r(e,t.url)}catch(n){e.open("GET",t.url,!0),r(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(n){return void this.callbacks.onError({code:e.status,text:n.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},t.prototype.readystatechange=function(e){var t=e.currentTarget,n=t.readyState,r=this.stats,i=this.context,a=this.config;if(!r.aborted&&2<=n)if(window.clearTimeout(this.requestTimeout),0===r.tfirst&&(r.tfirst=Math.max(performance.now(),r.trequest)),4===n){var o=t.status;if(200<=o&&o<300){r.tload=Math.max(r.tfirst,performance.now());var s=void 0,l=void 0;l="arraybuffer"===i.responseType?(s=t.response).byteLength:(s=t.responseText).length,r.loaded=r.total=l;var u={url:t.responseURL,data:s};this.callbacks.onSuccess(u,r,i,t)}else r.retry>=a.maxRetry||400<=o&&o<499?(d.b.error(o+" while loading "+i.url),this.callbacks.onError({code:o,text:t.statusText},i,t)):(d.b.warn(o+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),r.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)},t.prototype.loadtimeout=function(){d.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.prototype.loadprogress=function(e){var t=e.currentTarget,n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total);var r=this.callbacks.onProgress;r&&r(n,this.context,null,t)},t}();t.a=r},function(e,t,n){"use strict";var s=n(1),i=n(3),l=n(0),a=n(2),o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),r=function(n){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this,e,s.a.MANIFEST_LOADING,s.a.MANIFEST_PARSED,s.a.AUDIO_TRACK_LOADED,s.a.ERROR));return t.ticks=0,t.ontick=t.tick.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r.prototype.destroy=function(){this.cleanTimer(),i.a.prototype.destroy.call(this)},r.prototype.cleanTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},r.prototype.tick=function(){1==++this.ticks&&(this.doTick(),1<this.ticks&&setTimeout(this.tick,1),this.ticks=0)},r.prototype.doTick=function(){this.updateTrack(this.trackId)},r.prototype.onError=function(e){e.fatal&&e.type===a.b.NETWORK_ERROR&&this.cleanTimer()},r.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},r.prototype.onManifestParsed=function(e){var t=this,n=e.audioTracks||[],r=!1;this.tracks=n,this.hls.trigger(s.a.AUDIO_TRACKS_UPDATED,{audioTracks:n});var i=0;n.forEach(function(e){if(e.default&&!r)return t.audioTrack=i,void(r=!0);i++}),!1===r&&n.length&&(l.b.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)},r.prototype.onAudioTrackLoaded=function(e){e.id<this.tracks.length&&(l.b.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*e.details.targetduration)),!e.details.live&&this.timer&&this.cleanTimer())},r.prototype.setAudioTrackInternal=function(e){if(0<=e&&e<this.tracks.length){this.cleanTimer(),this.trackId=e,l.b.log("switching to audioTrack "+e);var t=this.tracks[e],n=this.hls,r=t.type,i=t.url,a={id:e,type:r,url:i};n.trigger(s.a.AUDIO_TRACK_SWITCHING,a);var o=t.details;!i||void 0!==o&&!0!==o.live||(l.b.log("(re)loading playlist for audioTrack "+e),n.trigger(s.a.AUDIO_TRACK_LOADING,{url:i,id:e}))}},r.prototype.updateTrack=function(e){if(0<=e&&e<this.tracks.length){this.cleanTimer(),this.trackId=e,l.b.log("updating audioTrack "+e);var t=this.tracks[e],n=t.url,r=t.details;!n||void 0!==r&&!0!==r.live||(l.b.log("(re)loading playlist for audioTrack "+e),this.hls.trigger(s.a.AUDIO_TRACK_LOADING,{url:n,id:e}))}},o(r,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.trackId===e&&void 0!==this.tracks[e].details||this.setAudioTrackInternal(e)}}]),r}(i.a);t.a=r},function(e,t,n){"use strict";var N=n(8),L=n(9),h=n(18),k=n(1),f=n(22),a=n(23),p=n(2),x=n(0),F=n(24),r=n(13),U=n(7),g=n(6),o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),s="STOPPED",B="STARTING",G="IDLE",j="PAUSED",K="KEY_LOADING",Y="FRAG_LOADING",H="FRAG_LOADING_WAITING_RETRY",q="WAITING_TRACK",m="PARSING",l="PARSED",V="BUFFER_FLUSHING",W="ENDED",z="ERROR",X="WAITING_INIT_PTS",i=function(r){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,e,k.a.MEDIA_ATTACHED,k.a.MEDIA_DETACHING,k.a.AUDIO_TRACKS_UPDATED,k.a.AUDIO_TRACK_SWITCHING,k.a.AUDIO_TRACK_LOADED,k.a.KEY_LOADED,k.a.FRAG_LOADED,k.a.FRAG_PARSING_INIT_SEGMENT,k.a.FRAG_PARSING_DATA,k.a.FRAG_PARSED,k.a.ERROR,k.a.BUFFER_RESET,k.a.BUFFER_CREATED,k.a.BUFFER_APPENDED,k.a.BUFFER_FLUSHED,k.a.INIT_PTS_FOUND));return n.fragmentTracker=t,n.config=e.config,n.audioCodecSwap=!1,n._state=s,n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,r),i.prototype.onHandlerDestroying=function(){this.stopLoad()},i.prototype.onHandlerDestroyed=function(){this.state=s,this.fragmentTracker=null},i.prototype.onInitPtsFound=function(e){var t=e.id,n=e.frag.cc,r=e.initPTS;"main"===t&&(this.initPTS[n]=r,this.videoTrackCC=n,x.b.log("InitPTS for cc: "+n+" found from video track: "+r),this.state===X&&this.tick())},i.prototype.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,this.state=0<t&&-1===e?(x.b.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),G):(this.lastCurrentTime=this.startPosition?this.startPosition:e,B),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=s},i.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=s},i.prototype.doTick=function(){var e=void 0,t=void 0,n=void 0,r=this.hls,i=r.config;switch(this.state){case z:case j:case V:break;case B:this.state=q,this.loadedmetadata=!1;break;case G:var a=this.tracks;if(!a)break;if(!this.media&&(this.startFragRequested||!i.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var o=this.mediaBuffer?this.mediaBuffer:this.media,s=this.videoBuffer?this.videoBuffer:this.media,l=L.a.bufferInfo(o,e,i.maxBufferHole),u=L.a.bufferInfo(s,e,i.maxBufferHole),d=l.len,c=l.end,f=this.fragPrevious,h=Math.min(i.maxBufferLength,i.maxMaxBufferLength),p=Math.max(h,u.len),g=this.audioSwitch,m=this.trackId;if((d<p||g)&&m<a.length){if(void 0===(n=a[m].details)){this.state=q;break}if(!g&&!n.live&&f&&f.sn===n.endSN&&!l.nextStart&&(!this.media.seeking||this.media.duration-c<f.duration/2)){this.hls.trigger(k.a.BUFFER_EOS,{type:"audio"}),this.state=W;break}var v=n.fragments,y=v.length,E=v[0].start,_=v[y-1].start+v[y-1].duration,T=void 0;if(g)if(n.live&&!n.PTSKnown)x.b.log("switching audiotrack, live stream, unknown PTS,load first fragment"),c=0;else if(c=e,n.PTSKnown&&e<E){if(!(l.end>E||l.nextStart))return;x.b.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=E+.05}if(n.initSegment&&!n.initSegment.data)T=n.initSegment;else if(c<=E){if(T=v[0],null!==this.videoTrackCC&&T.cc!==this.videoTrackCC&&(T=Object(F.b)(v,this.videoTrackCC)),n.live&&T.loadIdx&&T.loadIdx===this.fragLoadIdx){var b=l.nextStart?l.nextStart:E;return x.b.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(b+.05)),void(this.media.currentTime=b+.05)}}else{var S=void 0,A=i.maxFragLookUpTolerance,R=f?v[f.sn-v[0].sn+1]:void 0,w=function(e){var t=Math.min(A,e.duration);return e.start+e.duration-t<=c?1:e.start-t>c&&e.start?-1:0};(S=c<_?(_-A<c&&(A=0),R&&!w(R)?R:N.a.search(v,w)):v[y-1])&&(E=(T=S).start,f&&T.level===f.level&&T.sn===f.sn&&(T.sn<n.endSN?(T=v[T.sn+1-n.startSN],x.b.log("SN just loaded, load next one: "+T.sn)):T=null))}T&&(T.decryptdata&&null!=T.decryptdata.uri&&null==T.decryptdata.key?(x.b.log("Loading key for "+T.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+m),this.state=K,r.trigger(k.a.KEY_LOADING,{frag:T})):(x.b.log("Loading "+T.sn+", cc: "+T.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+m+", currentTime:"+e+",bufferEnd:"+c.toFixed(3)),(g||this.fragmentTracker.getState(T)===U.a.NOT_LOADED)&&(this.fragCurrent=T,this.startFragRequested=!0,isNaN(T.sn)||(this.nextLoadPosition=T.start+T.duration),r.trigger(k.a.FRAG_LOADING,{frag:T}),this.state=Y)))}break;case q:(t=this.tracks[this.trackId])&&t.details&&(this.state=G);break;case H:var I=performance.now(),D=this.retryDate,M=(o=this.media)&&o.seeking;(!D||D<=I||M)&&(x.b.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=G);break;case X:var C=this.videoTrackCC;if(void 0===this.initPTS[C])break;var O=this.waitingFragment;if(O){var P=O.frag.cc;C!==P?(t=this.tracks[this.trackId]).details&&t.details.live&&(x.b.warn("Waiting fragment CC ("+P+") does not match video track CC ("+C+")"),this.waitingFragment=null,this.state=G):(this.state=Y,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=G}},i.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)},i.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(x.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},i.prototype.onMediaSeeking=function(){this.state===W&&(this.state=G),this.media&&(this.lastCurrentTime=this.media.currentTime),this.tick()},i.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},i.prototype.onAudioTracksUpdated=function(e){x.b.log("audio tracks updated"),this.tracks=e.audioTracks},i.prototype.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=j,this.waitingFragment=null,t?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=G),this.tick()},i.prototype.onAudioTrackLoaded=function(e){var t=e.details,n=e.id,r=this.tracks[n],i=t.totalduration,a=0;if(x.b.log("track "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+i),t.live){var o=r.details;o&&0<t.fragments.length?(f.a(o,t),a=t.fragments[0].start,t.PTSKnown?x.b.log("live audio playlist sliding:"+a.toFixed(3)):x.b.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,x.b.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(r.details=t,!this.startFragRequested){if(-1===this.startPosition){var s=t.startTimeOffset;isNaN(s)?this.startPosition=0:(x.b.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s)}this.nextLoadPosition=this.startPosition}this.state===q&&(this.state=G),this.tick()},i.prototype.onKeyLoaded=function(){this.state===K&&(this.state=G,this.tick())},i.prototype.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag;if(this.state===Y&&t&&"audio"===n.type&&n.level===t.level&&n.sn===t.sn){var r=this.tracks[this.trackId],i=r.details,a=i.totalduration,o=t.level,s=t.sn,l=t.cc,u=this.config.defaultAudioCodec||r.audioCodec||"mp4a.40.2",d=this.stats=e.stats;if("initSegment"===s)this.state=G,d.tparsed=d.tbuffered=performance.now(),i.initSegment.data=e.payload,this.hls.trigger(k.a.FRAG_BUFFERED,{stats:d,frag:t,id:"audio"}),this.tick();else{this.state=m,this.appended=!1,this.demuxer||(this.demuxer=new h.a(this.hls,"audio"));var c=this.initPTS[l],f=i.initSegment?i.initSegment.data:[];i.initSegment||void 0!==c?(this.pendingBuffering=!0,x.b.log("Demuxing "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+o),this.demuxer.push(e.payload,f,u,null,t,a,!1,c)):(x.b.log("unknown video PTS for continuity counter "+l+", waiting for video PTS before demuxing audio frag "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+o),this.waitingFragment=e,this.state=X)}}this.fragLoadError=0},i.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===m){var r=e.tracks,i=void 0;if(r.video&&delete r.video,i=r.audio){i.levelCodec=i.codec,i.id=e.id,this.hls.trigger(k.a.BUFFER_CODECS,r),x.b.log("audio track:audio,container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var a=i.initSegment;if(a){var o={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(k.a.BUFFER_APPENDING,o))}this.tick()}}},i.prototype.onFragParsingData=function(t){var n=this,e=this.fragCurrent,r=t.frag;if(e&&"audio"===t.id&&"audio"===t.type&&r.sn===e.sn&&r.level===e.level&&this.state===m){var i=this.trackId,a=this.tracks[i],o=this.hls;isNaN(t.endPTS)&&(t.endPTS=t.startPTS+e.duration,t.endDTS=t.startDTS+e.duration),e.addElementaryStream(g.a.ElementaryStreamTypes.AUDIO),x.b.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),f.b(a.details,e,t.startPTS,t.endPTS);var s=this.audioSwitch,l=this.media,u=!1;if(s&&l)if(l.readyState){var d=l.currentTime;x.b.log("switching audio track : currentTime:"+d),d>=t.startPTS&&(x.b.log("switching audio track : flushing all audio"),this.state=V,o.trigger(k.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),u=!0,this.audioSwitch=!1,o.trigger(k.a.AUDIO_TRACK_SWITCHED,{id:i}))}else this.audioSwitch=!1,o.trigger(k.a.AUDIO_TRACK_SWITCHED,{id:i});var c=this.pendingData;if(!c)return console.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void o.trigger(k.a.ERROR,{type:p.b.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([t.data1,t.data2].forEach(function(e){e&&e.length&&c.push({type:t.type,data:e,parent:"audio",content:"data"})}),!u&&c.length&&(c.forEach(function(e){n.state===m&&(n.pendingBuffering=!0,n.hls.trigger(k.a.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick()}},i.prototype.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===m&&(this.stats.tparsed=performance.now(),this.state=l,this._checkAppendedParsed())},i.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},i.prototype.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},i.prototype.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;t!==m&&t!==l||(this.pendingBuffering=0<e.pending,this._checkAppendedParsed())}},i.prototype._checkAppendedParsed=function(){if(!(this.state!==l||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,n=this.hls;if(e){this.fragPrevious=e,t.tbuffered=performance.now(),n.trigger(k.a.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var r=this.mediaBuffer?this.mediaBuffer:this.media;x.b.log("audio buffered : "+a.a.toString(r.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(k.a.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=G}this.tick()}},i.prototype.onError=function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case p.a.FRAG_LOAD_ERROR:case p.a.FRAG_LOAD_TIMEOUT:if(!e.fatal){var n=this.fragLoadError;n?n++:n=1;var r=this.config;if(n<=r.fragLoadingMaxRetry){this.fragLoadError=n;var i=Math.min(Math.pow(2,n-1)*r.fragLoadingRetryDelay,r.fragLoadingMaxRetryTimeout);x.b.warn("audioStreamController: frag loading failed, retry in "+i+" ms"),this.retryDate=performance.now()+i,this.state=H}else x.b.error("audioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=z}break;case p.a.AUDIO_TRACK_LOAD_ERROR:case p.a.AUDIO_TRACK_LOAD_TIMEOUT:case p.a.KEY_LOAD_ERROR:case p.a.KEY_LOAD_TIMEOUT:this.state!==z&&(this.state=e.fatal?z:G,x.b.warn("audioStreamController: "+e.details+" while loading frag,switch to "+this.state+" state ..."));break;case p.a.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===m||this.state===l)){var a=this.mediaBuffer,o=this.media.currentTime;if(a&&L.a.isBuffered(a,o)&&L.a.isBuffered(a,o+.5)){var s=this.config;s.maxMaxBufferLength>=s.maxBufferLength&&(s.maxMaxBufferLength/=2,x.b.warn("audio:reduce max buffer length to "+s.maxMaxBufferLength+"s")),this.state=G}else x.b.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=V,this.hls.trigger(k.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},i.prototype.onBufferFlushed=function(){var t=this,e=this.pendingData;e&&e.length?(x.b.log("appending pending audio data on Buffer Flushed"),e.forEach(function(e){t.hls.trigger(k.a.BUFFER_APPENDING,e)}),this.appended=!0,this.pendingData=[],this.state=l):(this.state=G,this.fragPrevious=null,this.tick())},o(i,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,x.b.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}]),i}(r.a);t.a=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newCue=function(e,t,n,r){for(var i=void 0,a=void 0,o=void 0,s=void 0,l=void 0,u=window.VTTCue||window.TextTrackCue,d=0;d<r.rows.length;d++)if(o=!0,s=0,l="",!(i=r.rows[d]).isEmpty()){for(var c=0;c<i.chars.length;c++)i.chars[c].uchar.match(/\s/)&&o?s++:(l+=i.chars[c].uchar,o=!1);(i.cueStartTime=t)===n&&(n+=1e-4),a=new u(t,n,Object(f.b)(l.trim())),16<=s?s--:s++,navigator.userAgent.match(/Firefox\//)?a.line=d+1:a.line=7<d?d-2:d+1,a.align="left",a.position=Math.max(0,Math.min(100,s/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(a)}};var f=n(26)},function(e,t,n){"use strict";t.a=function(){function _(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}function T(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function e(e,t,n){var r=this,i=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),a={};i?r=document.createElement("custom"):a.enumerable=!0,r.hasBeenReset=!1;var o="",s=!1,l=e,u=t,d=n,c=null,f="",h=!0,p="auto",g="start",m=50,v="middle",y=50,E="middle";if(Object.defineProperty(r,"id",T({},a,{get:function(){return o},set:function(e){o=""+e}})),Object.defineProperty(r,"pauseOnExit",T({},a,{get:function(){return s},set:function(e){s=!!e}})),Object.defineProperty(r,"startTime",T({},a,{get:function(){return l},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");l=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"endTime",T({},a,{get:function(){return u},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");u=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"text",T({},a,{get:function(){return d},set:function(e){d=""+e,this.hasBeenReset=!0}})),Object.defineProperty(r,"region",T({},a,{get:function(){return c},set:function(e){c=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"vertical",T({},a,{get:function(){return f},set:function(e){var t,n="string"==typeof(t=e)&&!!b[t.toLowerCase()]&&t.toLowerCase();if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");f=n,this.hasBeenReset=!0}})),Object.defineProperty(r,"snapToLines",T({},a,{get:function(){return h},set:function(e){h=!!e,this.hasBeenReset=!0}})),Object.defineProperty(r,"line",T({},a,{get:function(){return p},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");p=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"lineAlign",T({},a,{get:function(){return g},set:function(e){var t=_(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");g=t,this.hasBeenReset=!0}})),Object.defineProperty(r,"position",T({},a,{get:function(){return m},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"positionAlign",T({},a,{get:function(){return v},set:function(e){var t=_(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(r,"size",T({},a,{get:function(){return y},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"align",T({},a,{get:function(){return E},set:function(e){var t=_(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),r.displayState=void 0,i)return r}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var b={"":!0,lr:!0,rl:!0},t={start:!0,middle:!0,end:!0,left:!0,right:!0};return e.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},e}()},function(e,t,n){"use strict";var o=n(1),r=n(3),s=n(63),l=n(64),u=n(65),d=n(0),c=n(25),i=function(i){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,i.call(this,e,o.a.MEDIA_ATTACHING,o.a.MEDIA_DETACHING,o.a.FRAG_PARSING_USERDATA,o.a.FRAG_DECRYPTED,o.a.MANIFEST_LOADING,o.a.MANIFEST_LOADED,o.a.FRAG_LOADED,o.a.LEVEL_SWITCHING,o.a.INIT_PTS_FOUND));if(t.hls=e,t.config=e.config,t.enabled=!0,t.Cues=e.config.cueHandler,t.textTracks=[],t.tracks=[],t.unparsedVttFrags=[],t.initPTS=void 0,t.cueRanges=[],t.captionsTracks={},t.captionsProperties={textTrack1:{label:t.config.captionsTextTrack1Label,languageCode:t.config.captionsTextTrack1LanguageCode},textTrack2:{label:t.config.captionsTextTrack2Label,languageCode:t.config.captionsTextTrack2LanguageCode}},t.config.enableCEA708Captions){var n=new l.a(t,"textTrack1"),r=new l.a(t,"textTrack2");t.cea608Parser=new s.a(0,n,r)}return t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i),a.prototype.addCues=function(e,t,n,r){for(var i=this.cueRanges,a=!1,o=i.length;o--;){var s=i[o],l=(u=s[0],d=s[1],c=t,f=n,Math.min(d,f)-Math.max(u,c));if(0<=l&&(s[0]=Math.min(s[0],t),s[1]=Math.max(s[1],n),a=!0,.5<l/(n-t)))return}var u,d,c,f;a||i.push([t,n]),this.Cues.newCue(this.captionsTracks[e],t,n,r)},a.prototype.onInitPtsFound=function(e){var t=this;void 0===this.initPTS&&(this.initPTS=e.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(e){t.onFragLoaded(e)}),this.unparsedVttFrags=[])},a.prototype.getExistingTrack=function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var r=t.textTracks[n];if(r[e])return r}return null},a.prototype.createCaptionsTrack=function(e){var t=this.captionsProperties[e],n=t.label,r=t.languageCode,i=this.captionsTracks;if(!i[e]){var a=this.getExistingTrack(e);if(a)i[e]=a,Object(c.a)(i[e]),Object(c.b)(i[e],this.media);else{var o=this.createTextTrack("captions",n,r);o&&(o[e]=!0,i[e]=o)}}},a.prototype.createTextTrack=function(e,t,n){var r=this.media;if(r)return r.addTextTrack(e,t,n)},a.prototype.destroy=function(){r.a.prototype.destroy.call(this)},a.prototype.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},a.prototype.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach(function(e){Object(c.a)(t[e]),delete t[e]})},a.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0},this._cleanTracks()},a.prototype._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)Object(c.a)(t[n])}},a.prototype.onManifestLoaded=function(e){var o=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var s=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,t){var n,r,i=void 0;if(t<s.length){var a=s[t];r=e,(n=a)&&n.label===r.name&&!n.textTrack1&&!n.textTrack2&&(i=a)}i||(i=o.createTextTrack("subtitles",e.name,e.lang)),e.default?i.mode=o.hls.subtitleDisplay?"showing":"hidden":i.mode="disabled",o.textTracks.push(i)})}},a.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},a.prototype.onFragLoaded=function(e){var t=e.frag,n=e.payload;if("main"===t.type){var r=t.sn;if(r!==this.lastSn+1){var i=this.cea608Parser;i&&i.reset()}this.lastSn=r}else if("subtitle"===t.type)if(n.byteLength){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(e);var a=t.decryptdata;null!=a&&null!=a.key&&"AES-128"===a.method||this._parseVTTs(t,n)}else this.hls.trigger(o.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},a.prototype._parseVTTs=function(t,e){var n=this.vttCCs;n[t.cc]||(n[t.cc]={start:t.start,prevCC:this.prevCC,new:!0},this.prevCC=t.cc);var i=this.textTracks,a=this.hls;u.a.parse(e,this.initPTS,n,t.cc,function(e){var r=i[t.trackId];"disabled"!==r.mode?(e.forEach(function(t){if(!r.cues.getCueById(t.id))try{r.addCue(t)}catch(e){var n=new window.TextTrackCue(t.startTime,t.endTime,t.text);n.id=t.id,r.addCue(n)}}),a.trigger(o.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})):a.trigger(o.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},function(e){d.b.log("Failed to parse VTT cue: "+e),a.trigger(o.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})})},a.prototype.onFragDecrypted=function(e){var t=e.payload,n=e.frag;if("subtitle"===n.type){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(e);this._parseVTTs(n,t)}},a.prototype.onFragParsingUserdata=function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var n=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,n)}},a.prototype.extractCea608Data=function(e){for(var t=31&e[0],n=2,r=void 0,i=void 0,a=void 0,o=[],s=0;s<t;s++)r=e[n++],i=127&e[n++],a=127&e[n++],0===i&&0===a||0!=(4&r)&&0===(3&r)&&(o.push(i),o.push(a));return o},a}(r.a);t.a=i},function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},l=function(e){var t=e;return r.hasOwnProperty(e)&&(t=r[e]),String.fromCharCode(t)},a={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},o={17:2,18:4,21:6,22:8,23:10,19:13,20:15},u={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},d={25:2,26:4,29:6,30:8,31:10,27:13,28:15},c=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],f={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}},h=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},p=function(){function a(e,t,n,r,i){s(this,a),this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1}return a.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},a.prototype.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},a.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},a.prototype.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},a.prototype.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},a.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},a}(),i=function(){function o(e,t,n,r,i,a){s(this,o),this.uchar=e||" ",this.penState=new p(t,n,r,i,a)}return o.prototype.reset=function(){this.uchar=" ",this.penState.reset()},o.prototype.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},o.prototype.setPenState=function(e){this.penState.copy(e)},o.prototype.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},o.prototype.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},o.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},o}(),g=function(){function t(){s(this,t),this.chars=[];for(var e=0;e<100;e++)this.chars.push(new i);this.pos=0,this.currPenState=new p}return t.prototype.equals=function(e){for(var t=!0,n=0;n<100;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},t.prototype.copy=function(e){for(var t=0;t<100;t++)this.chars[t].copy(e.chars[t])},t.prototype.isEmpty=function(){for(var e=!0,t=0;t<100;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.prototype.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(f.log("ERROR","Negative cursor position "+this.pos),this.pos=0):100<this.pos&&(f.log("ERROR","Too large cursor position "+this.pos),this.pos=100)},t.prototype.moveCursor=function(e){var t=this.pos+e;if(1<e)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},t.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.prototype.insertChar=function(e){144<=e&&this.backSpace();var t=l(e);100<=this.pos?f.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},t.prototype.clearFromPos=function(e){var t=void 0;for(t=e;t<100;t++)this.chars[t].reset()},t.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.prototype.getTextString=function(){for(var e=[],t=!0,n=0;n<100;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},t.prototype.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},t}(),m=function(){function t(){s(this,t),this.rows=[];for(var e=0;e<15;e++)this.rows.push(new g);this.currRow=14,this.nrRollUpRows=null,this.reset()}return t.prototype.reset=function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},t.prototype.equals=function(e){for(var t=!0,n=0;n<15;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},t.prototype.copy=function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},t.prototype.isEmpty=function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},t.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.prototype.insertChar=function(e){this.rows[this.currRow].insertChar(e)},t.prototype.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},t.prototype.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},t.prototype.setCursor=function(e){f.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},t.prototype.setPAC=function(e){f.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;n<15;n++)this.rows[n].clear();var r=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var a=i.rows[r].cueStartTime;if(a&&a<f.time)for(var o=0;o<this.nrRollUpRows;o++)this.rows[t-this.nrRollUpRows+o+1].copy(i.rows[r+o])}}this.currRow=t;var s=this.rows[this.currRow];if(null!==e.indent){var l=e.indent,u=Math.max(l-1,0);s.setCursor(e.indent),e.color=s.chars[u].penState.foreground}var d={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(d)},t.prototype.setBkgData=function(e){f.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},t.prototype.setRollUpRows=function(e){this.nrRollUpRows=e},t.prototype.rollUp=function(){if(null!==this.nrRollUpRows){f.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),f.log("INFO","Rolling up")}else f.log("DEBUG","roll_up but nrRollUpRows not set yet")},t.prototype.getDisplayText=function(e){e=e||!1;for(var t=[],n="",r=-1,i=0;i<15;i++){var a=this.rows[i].getTextString();a&&(r=i+1,e?t.push("Row "+r+": '"+a+"'"):t.push(a.trim()))}return 0<t.length&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},t.prototype.getTextAndFormat=function(){return this.rows},t}(),v=function(){function n(e,t){s(this,n),this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new m,this.nonDisplayedMemory=new m,this.lastOutputScreen=new m,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return n.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},n.prototype.getHandler=function(){return this.outputFilter},n.prototype.setHandler=function(e){this.outputFilter=e},n.prototype.setPAC=function(e){this.writeScreen.setPAC(e)},n.prototype.setBkgData=function(e){this.writeScreen.setBkgData(e)},n.prototype.setMode=function(e){e!==this.mode&&(this.mode=e,f.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},n.prototype.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";f.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(f.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},n.prototype.ccRCL=function(){f.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},n.prototype.ccBS=function(){f.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},n.prototype.ccAOF=function(){},n.prototype.ccAON=function(){},n.prototype.ccDER=function(){f.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},n.prototype.ccRU=function(e){f.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},n.prototype.ccFON=function(){f.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},n.prototype.ccRDC=function(){f.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},n.prototype.ccTR=function(){f.log("INFO","TR"),this.setMode("MODE_TEXT")},n.prototype.ccRTD=function(){f.log("INFO","RTD"),this.setMode("MODE_TEXT")},n.prototype.ccEDM=function(){f.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},n.prototype.ccCR=function(){f.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},n.prototype.ccENM=function(){f.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},n.prototype.ccEOC=function(){if(f.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,f.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},n.prototype.ccTO=function(e){f.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},n.prototype.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=46<=e,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}f.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},n.prototype.outputDataUpdate=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=f.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),!0===e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},n.prototype.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},n}(),y=function(){function r(e,t,n){s(this,r),this.field=e||1,this.outputs=[t,n],this.channels=[new v(1,t),new v(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return r.prototype.getHandler=function(e){return this.channels[e].getHandler()},r.prototype.setHandler=function(e,t){this.channels[e].setHandler(t)},r.prototype.addData=function(e,t){var n=void 0,r=void 0,i=void 0,a=!1;this.lastTime=e,f.setTime(e);for(var o=0;o<t.length;o+=2)if(r=127&t[o],i=127&t[o+1],0!==r||0!==i){if(f.log("DATA","["+h([t[o],t[o+1]])+"] -> ("+h([r,i])+")"),(n=this.parseCmd(r,i))||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),!n&&(a=this.parseChars(r,i)))if(this.currChNr&&0<=this.currChNr){this.channels[this.currChNr-1].insertChars(a)}else f.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,f.log("WARNING","Couldn't parse cleaned data "+h([r,i])+" orig: "+h([t[o],t[o+1]])))}else this.dataCounters.padding+=2},r.prototype.parseCmd=function(e,t){var n;if(!((20===e||28===e)&&32<=t&&t<=47)&&!((23===e||31===e)&&33<=t&&t<=35))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,f.log("DEBUG","Repeated command ("+h([e,t])+") is dropped"),!0;n=20===e||23===e?1:2;var r=this.channels[n-1];return 20===e||28===e?32===t?r.ccRCL():33===t?r.ccBS():34===t?r.ccAOF():35===t?r.ccAON():36===t?r.ccDER():37===t?r.ccRU(2):38===t?r.ccRU(3):39===t?r.ccRU(4):40===t?r.ccFON():41===t?r.ccRDC():42===t?r.ccTR():43===t?r.ccRTD():44===t?r.ccEDM():45===t?r.ccCR():46===t?r.ccENM():47===t&&r.ccEOC():r.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},r.prototype.parseMidrow=function(e,t){var n=null;return(17===e||25===e)&&32<=t&&t<=47&&((n=17===e?1:2)!==this.currChNr?(f.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[n-1].ccMIDROW(t),f.log("DEBUG","MIDROW ("+h([e,t])+")"),!0))},r.prototype.parsePAC=function(e,t){var n,r;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127)&&!((16===e||24===e)&&64<=t&&t<=95))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,!(this.lastCmdB=null);n=e<=23?1:2,r=64<=t&&t<=95?1===n?a[e]:u[e]:1===n?o[e]:d[e];var i=this.interpretPAC(r,t);return this.channels[n-1].setPAC(i),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},r.prototype.interpretPAC=function(e,t){var n,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=95<t?t-96:t-64,r.underline=1==(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},r.prototype.parseChars=function(e,t){var n=null,r=null,i=null;if(17<=(i=25<=e?(n=2,e-8):(n=1,e))&&i<=19){var a;a=17===i?t+80:18===i?t+112:t+144,f.log("INFO","Special char '"+l(a)+"' in channel "+n),r=[a]}else 32<=e&&e<=127&&(r=0===t?[e]:[e,t]);if(r){var o=h(r);f.log("DEBUG","Char codes =  "+o.join(",")),this.lastCmdA=null,this.lastCmdB=null}return r},r.prototype.parseBackgroundAttributes=function(e,t){var n=void 0,r=void 0,i=void 0;return!(!((16===e||24===e)&&32<=t&&t<=47)&&!((23===e||31===e)&&45<=t&&t<=47)||(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=c[r],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),i=e<24?1:2,this.channels[i-1].setBkgData(n),this.lastCmdA=null,this.lastCmdB=null))},r.prototype.reset=function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},r.prototype.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)},r}();t.a=y},function(e,t,n){"use strict";var r=function(){function n(e,t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),this.timelineController=e,this.trackName=t,this.startTime=null,this.endTime=null,this.screen=null}return n.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},n.prototype.newCue=function(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},n}();t.a=r},function(e,t,n){"use strict";var g=n(26),m=n(5),v=function(e,t,n){return e.substr(n||0,t.length)===t},y=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()},r={parse:function(e,o,r,i,t,n){var a=Object(m.b)(new Uint8Array(e)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),s="00:00.000",l=0,u=0,d=0,c=[],f=void 0,h=!0,p=new g.a;p.oncue=function(e){var t=r[i],n=r.ccOffset;t&&t.new&&(void 0!==u?n=r.ccOffset=t.start:function(e,t,n){var r=e[t],i=e[r.prevCC];if(!i||!i.new&&r.new)return e.ccOffset=e.presentationOffset=r.start,r.new=!1;for(;i&&i.new;)e.ccOffset+=r.start-i.start,r.new=!1,i=e[(r=i).prevCC];e.presentationOffset=n}(r,i,d)),d&&(n=d+r.ccOffset-r.presentationOffset),e.startTime+=n-u,e.endTime+=n-u,e.id=y(e.startTime.toString())+y(e.endTime.toString())+y(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),0<e.endTime&&c.push(e)},p.onparsingerror=function(e){f=e},p.onflush=function(){f&&n?n(f):t(c)},a.forEach(function(t){if(h){if(v(t,"X-TIMESTAMP-MAP=")){h=!1,t.substr(16).split(",").forEach(function(e){v(e,"LOCAL:")?s=e.substr(6):v(e,"MPEGTS:")&&(l=parseInt(e.substr(7)))});try{l-=o=o<0?o+8589934592:o,e=s,n=parseInt(e.substr(-3)),r=parseInt(e.substr(-6,2)),i=parseInt(e.substr(-9,2)),a=9<e.length?parseInt(e.substr(0,e.indexOf(":"))):0,u=(isNaN(n)||isNaN(r)||isNaN(i)||isNaN(a)?-1:(n+=1e3*r,n+=6e4*i,n+=36e5*a))/1e3,d=l/9e4,-1===u&&(f=new Error("Malformed X-TIMESTAMP-MAP: "+t))}catch(e){f=new Error("Malformed X-TIMESTAMP-MAP: "+t)}return}""===t&&(h=!1)}var e,n,r,i,a;p.parse(t+"\n")}),p.flush()}};t.a=r},function(e,t,n){"use strict";function i(e){for(var t=[],n=0;n<e.length;n++)"subtitles"===e[n].kind&&t.push(e[n]);return t}var a=n(1),o=n(3),s=n(0),l=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),r=function(n){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this,e,a.a.MEDIA_ATTACHED,a.a.MEDIA_DETACHING,a.a.MANIFEST_LOADING,a.a.MANIFEST_LOADED,a.a.SUBTITLE_TRACK_LOADED));return t.tracks=[],t.trackId=-1,t.media=void 0,t.subtitleDisplay=!1,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r.prototype._onTextTracksChanged=function(){if(this.media){for(var e=-1,t=i(this.media.textTracks),n=0;n<t.length;n++)if("hidden"===t[n].mode)e=n;else if("showing"===t[n].mode){e=n;break}this.subtitleTrack=e}},r.prototype.destroy=function(){o.a.prototype.destroy.call(this)},r.prototype.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(void 0!==this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){t.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},r.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=void 0)},r.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},r.prototype.onManifestLoaded=function(e){var t=this,n=e.subtitles||[];this.tracks=n,this.trackId=-1,this.hls.trigger(a.a.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach(function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)})},r.prototype.onTick=function(){var e=this.trackId,t=this.tracks[e];if(t){var n=t.details;void 0!==n&&!0!==n.live||(s.b.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(a.a.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}},r.prototype.onSubtitleTrackLoaded=function(e){var t=this;e.id<this.tracks.length&&(s.b.log("subtitle track "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(function(){t.onTick()},1e3*e.details.targetduration,this)),!e.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))},r.prototype.setSubtitleTrackInternal=function(e){if(!(e<-1||e>=this.tracks.length)){this.timer&&(clearInterval(this.timer),this.timer=null);var t=i(this.media.textTracks);if(-1!==this.trackId&&(t[this.trackId].mode="disabled"),this.trackId=e,s.b.log("switching to subtitle track "+e),this.hls.trigger(a.a.SUBTITLE_TRACK_SWITCH,{id:e}),-1!==e){var n=this.tracks[e];e<t.length&&(t[e].mode=this.subtitleDisplay?"showing":"hidden");var r=n.details;void 0!==r&&!0!==r.live||(s.b.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(a.a.SUBTITLE_TRACK_LOADING,{url:n.url,id:e}))}}},l(r,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&this.setSubtitleTrackInternal(e)}}]),r}(o.a);t.a=r},function(e,t,n){"use strict";var l=n(1),u=n(0),i=n(11),r=n(13),a="STOPPED",d="IDLE",c="KEY_LOADING",o="FRAG_LOADING",s=function(n){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this,e,l.a.MEDIA_ATTACHED,l.a.ERROR,l.a.KEY_LOADED,l.a.FRAG_LOADED,l.a.SUBTITLE_TRACKS_UPDATED,l.a.SUBTITLE_TRACK_SWITCH,l.a.SUBTITLE_TRACK_LOADED,l.a.SUBTITLE_FRAG_PROCESSED));return t.config=e.config,t.vttFragSNsProcessed={},t.vttFragQueues=void 0,t.currentlyProcessing=null,t.state=a,t.currentTrackId=-1,t.decrypter=new i.a(e.observer,e.config),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r.prototype.onHandlerDestroyed=function(){this.state=a},r.prototype.clearVttFragQueues=function(){var t=this;this.vttFragQueues={},this.tracks.forEach(function(e){t.vttFragQueues[e.id]=[]})},r.prototype.nextFrag=function(){if(null===this.currentlyProcessing&&-1<this.currentTrackId&&this.vttFragQueues[this.currentTrackId].length){var e=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.fragCurrent=e,this.hls.trigger(l.a.FRAG_LOADING,{frag:e}),this.state=o}},r.prototype.onSubtitleFragProcessed=function(e){e.success&&this.vttFragSNsProcessed[e.frag.trackId].push(e.frag.sn),this.currentlyProcessing=null,this.state=d,this.nextFrag()},r.prototype.onMediaAttached=function(){this.state=d},r.prototype.onError=function(e){var t=e.frag;t&&"subtitle"!==t.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())},r.prototype.doTick=function(){var r=this;switch(this.state){case d:var e,t=this.tracks,i=this.currentTrackId,a=this.vttFragSNsProcessed[i],o=this.vttFragQueues[i],s=this.currentlyProcessing?this.currentlyProcessing.sn:-1;if(!t)break;if(i<t.length&&(e=t[i].details),void 0===e)break;e.fragments.forEach(function(e){var t,n;n=e,-1<a.indexOf(n.sn)||e.sn===s||(t=e,o.some(function(e){return e.sn===t.sn}))||(e.decryptdata&&null!=e.decryptdata.uri&&null==e.decryptdata.key?(u.b.log("Loading key for "+e.sn),r.state=c,r.hls.trigger(l.a.KEY_LOADING,{frag:e})):(e.trackId=i,o.push(e),r.nextFrag()))})}},r.prototype.onSubtitleTracksUpdated=function(e){var t=this;u.b.log("subtitle tracks updated"),this.tracks=e.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(e){t.vttFragSNsProcessed[e.id]=[]})},r.prototype.onSubtitleTrackSwitch=function(e){this.currentTrackId=e.id,-1!==this.currentTrackId&&void 0!==this.tracks[this.currentTrackId].details&&this.tick()},r.prototype.onSubtitleTrackLoaded=function(){this.tick()},r.prototype.onKeyLoaded=function(){this.state===c&&(this.state=d,this.tick())},r.prototype.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag.decryptdata,r=e.frag,i=this.hls;if(this.state===o&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&0<e.payload.byteLength&&null!=n&&null!=n.key&&"AES-128"===n.method){var a=void 0;try{a=performance.now()}catch(e){a=Date.now()}this.decrypter.decrypt(e.payload,n.key.buffer,n.iv.buffer,function(e){var t=void 0;try{t=performance.now()}catch(e){t=Date.now()}i.trigger(l.a.FRAG_DECRYPTED,{frag:r,payload:e,stats:{tstart:a,tdecrypt:t}})})}},r}(r.a);t.a=s},function(e,t,n){"use strict";var r=n(3),a=n(1),o=n(2),s=n(0),i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),l="com.widevine.alpha",u="com.microsoft.playready",d=function(n){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this,e,a.a.MEDIA_ATTACHED,a.a.MANIFEST_PARSED));return t._widevineLicenseUrl=e.config.widevineLicenseUrl,t._licenseXhrSetup=e.config.licenseXhrSetup,t._emeEnabled=e.config.emeEnabled,t._requestMediaKeySystemAccess=e.config.requestMediaKeySystemAccessFunc,t._mediaKeysList=[],t._media=null,t._hasSetMediaKeys=!1,t._isMediaEncrypted=!1,t._requestLicenseFailureCount=0,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r.prototype.getLicenseServerUrl=function(e){var t=void 0;switch(e){case l:t=this._widevineLicenseUrl;break;default:t=null}return t||(s.b.error('No license server URL configured for key-system "'+e+'"'),this.hls.trigger(a.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})),t},r.prototype._attemptKeySystemAccess=function(t,e,n){var r=this,i=function(e,t,n){switch(e){case l:return r={videoCapabilities:[]},n.forEach(function(e){r.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"'})}),[r];default:throw Error("Unknown key-system: "+e)}var r}(t,0,n);i?(s.b.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(t,i).then(function(e){r._onMediaKeySystemAccessObtained(t,e)}).catch(function(e){s.b.error('Failed to obtain key-system "'+t+'" access:',e)})):s.b.warn("Can not create config for key-system (maybe because platform is not supported):",t)},r.prototype._onMediaKeySystemAccessObtained=function(t,e){var n=this;s.b.log('Access for key-system "'+t+'" obtained');var r={mediaKeys:null,mediaKeysSession:null,mediaKeysSessionInitialized:!1,mediaKeySystemAccess:e,mediaKeySystemDomain:t};this._mediaKeysList.push(r),e.createMediaKeys().then(function(e){r.mediaKeys=e,s.b.log('Media-keys created for key-system "'+t+'"'),n._onMediaKeysCreated()}).catch(function(e){s.b.error("Failed to create media-keys:",e)})},r.prototype._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach(function(e){e.mediaKeysSession||(e.mediaKeysSession=e.mediaKeys.createSession(),t._onNewMediaKeySession(e.mediaKeysSession))})},r.prototype._onNewMediaKeySession=function(t){var n=this;s.b.log("New key-system session "+t.sessionId),t.addEventListener("message",function(e){n._onKeySessionMessage(t,e.message)},!1)},r.prototype._onKeySessionMessage=function(t,e){s.b.log("Got EME message event, creating license request"),this._requestLicense(e,function(e){s.b.log("Received license data, updating key-session"),t.update(e)})},r.prototype._onMediaEncrypted=function(e,t){s.b.log('Media is encrypted using "'+e+'" init data type'),this._isMediaEncrypted=!0,this._mediaEncryptionInitDataType=e,this._mediaEncryptionInitData=t,this._attemptSetMediaKeys(),this._generateRequestWithPreferredKeySession()},r.prototype._attemptSetMediaKeys=function(){if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return s.b.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(a.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_KEYS,fatal:!0});s.b.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},r.prototype._generateRequestWithPreferredKeySession=function(){var t=this,e=this._mediaKeysList[0];if(!e)return s.b.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(a.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(e.mediaKeysSessionInitialized)s.b.warn("Key-Session already initialized but requested again");else{var n=e.mediaKeysSession;n||(s.b.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(a.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_SESSION,fatal:!0}));var r=this._mediaEncryptionInitDataType,i=this._mediaEncryptionInitData;s.b.log('Generating key-session request for "'+r+'" init data type'),e.mediaKeysSessionInitialized=!0,n.generateRequest(r,i).then(function(){s.b.debug("Key-session generation succeeded")}).catch(function(e){s.b.error("Error generating key-session request:",e),t.hls.trigger(a.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_SESSION,fatal:!1})})}},r.prototype._createLicenseXhr=function(e,t,n){var r=new XMLHttpRequest,i=this._licenseXhrSetup;try{if(i)try{i(r,e)}catch(t){r.open("POST",e,!0),i(r,e)}r.readyState||r.open("POST",e,!0)}catch(e){return s.b.error("Error setting up key-system license XHR",e),void this.hls.trigger(a.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}return r.responseType="arraybuffer",r.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,r,e,t,n),r},r.prototype._onLicenseRequestReadyStageChange=function(e,t,n,r){switch(e.readyState){case 4:if(200===e.status)this._requestLicenseFailureCount=0,s.b.log("License request succeeded"),r(e.response);else{if(s.b.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),++this._requestLicenseFailureCount<=3){var i=3-this._requestLicenseFailureCount+1;return s.b.warn("Retrying license request, "+i+" attempts left"),void this._requestLicense(n,r)}this.hls.trigger(a.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}}},r.prototype._generateLicenseRequestChallenge=function(e,t){var n=void 0;return e.mediaKeySystemDomain===u?s.b.error("PlayReady is not supported (yet)"):e.mediaKeySystemDomain===l?n=t:s.b.error("Unsupported key-system:",e.mediaKeySystemDomain),n},r.prototype._requestLicense=function(e,t){s.b.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(!n)return s.b.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(a.a.ERROR,{type:o.b.KEY_SYSTEM_ERROR,details:o.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});var r=this.getLicenseServerUrl(n.mediaKeySystemDomain),i=this._createLicenseXhr(r,e,t);s.b.log("Sending license request to URL: "+r),i.send(this._generateLicenseRequestChallenge(n,e))},r.prototype.onMediaAttached=function(e){var t=this;if(this._emeEnabled){var n=e.media;(this._media=n).addEventListener("encrypted",function(e){t._onMediaEncrypted(e.initDataType,e.initData)})}},r.prototype.onManifestParsed=function(e){if(this._emeEnabled){var t=e.levels.map(function(e){return e.audioCodec}),n=e.levels.map(function(e){return e.videoCodec});this._attemptKeySystemAccess(l,t,n)}},i(r,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),r}(r.a);t.a=d},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null},function(e,t){String.prototype.endsWith||function(){"use strict";var e=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(e){}return n}(),u={}.toString,t=function(e){if(null==this)throw TypeError();var t=String(this);if(e&&"[object RegExp]"==u.call(e))throw TypeError();var n=t.length,r=String(e),i=r.length,a=n;if(1<arguments.length){var o=arguments[1];void 0!==o&&(a=o?Number(o):0)!=a&&(a=0)}var s=Math.min(Math.max(a,0),n)-i;if(s<0)return!1;for(var l=-1;++l<i;)if(t.charCodeAt(s+l)!=r.charCodeAt(l))return!1;return!0};e?e(String.prototype,"endsWith",{value:t,configurable:!0,writable:!0}):String.prototype.endsWith=t}()}]).default}),function a(o,s,l){function u(t,e){if(!s[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(d)return d(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[t]={exports:{}};o[t][0].call(i.exports,function(e){return u(o[t][1][e]||e)},i,i.exports,a,o,s,l)}return s[t].exports}for(var d="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,t,n){"use strict";var o,r,l,i,u,d={encode:function(e){for(var t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):(r<2048?t.push(192|r>>6):(r<65536?t.push(224|r>>12):(t.push(240|r>>18),t.push(128|63&r>>12)),t.push(128|63&r>>6)),t.push(128|63&r))}return t},decode:function(e){for(var t=[],n=0;n<e.length;){var r=e[n++];r<128||(r<224?r=(31&r)<<6:(r<240?r=(15&r)<<12:(r=(7&r)<<18,r|=(63&e[n++])<<12),r|=(63&e[n++])<<6),r|=63&e[n++]),t.push(String.fromCharCode(r))}return t.join("")}},c={};o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=function(e){for(var t=0,n=[],r=0|e.length/3;0<r--;){var i=(e[t]<<16)+(e[t+1]<<8)+e[t+2];t+=3,n.push(o.charAt(63&i>>18)),n.push(o.charAt(63&i>>12)),n.push(o.charAt(63&i>>6)),n.push(o.charAt(63&i))}if(2==e.length-t){i=(e[t]<<16)+(e[t+1]<<8);n.push(o.charAt(63&i>>18)),n.push(o.charAt(63&i>>12)),n.push(o.charAt(63&i>>6)),n.push("=")}else if(1==e.length-t){i=e[t]<<16;n.push(o.charAt(63&i>>18)),n.push(o.charAt(63&i>>12)),n.push("==")}return n.join("")},l=function(){for(var e=[],t=0;t<o.length;++t)e[o.charCodeAt(t)]=t;return e["=".charCodeAt(0)]=0,e}(),i=function(e){for(var t=0,n=[],r=0|e.length/4;0<r--;){var i=(l[e.charCodeAt(t)]<<18)+(l[e.charCodeAt(t+1)]<<12)+(l[e.charCodeAt(t+2)]<<6)+l[e.charCodeAt(t+3)];n.push(255&i>>16),n.push(255&i>>8),n.push(255&i),t+=4}return n&&("="==e.charAt(t-2)?(n.pop(),n.pop()):"="==e.charAt(t-1)&&n.pop()),n},u={encode:function(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t},decode:function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")}},c.decodeArray=function(e){var t=i(e);return new Uint8Array(t)},c.encodeASCII=function(e){var t=u.encode(e);return r(t)},c.decodeASCII=function(e){var t=i(e);return u.decode(t)},c.encode=function(e){var t=d.encode(e);return r(t)},c.decode=function(e){var t=i(e);return d.decode(t)},void 0!==n&&(n.decode=c.decode,n.decodeArray=c.decodeArray,n.encode=c.encode,n.encodeASCII=c.encodeASCII)},{}],2:[function(e,t,n){"use strict";!function(e){var n={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},s=function(e){var t=e;return n.hasOwnProperty(e)&&(t=n[e]),String.fromCharCode(t)},a={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},o={17:2,18:4,21:6,22:8,23:10,19:13,20:15},l={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},u={25:2,26:4,29:6,30:8,31:10,27:13,28:15},d=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],c={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}},f=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},h=function(e,t,n,r,i){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1};h.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var t=function(e,t,n,r,i,a){this.uchar=e||" ",this.penState=new h(t,n,r,i,a)};t.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var r=function(){this.chars=[];for(var e=0;e<32;e++)this.chars.push(new t);this.pos=0,this.currPenState=new h};r.prototype={equals:function(e){for(var t=!0,n=0;n<32;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<32;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;t<32;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(c.log("ERROR","Negative cursor position "+this.pos),this.pos=0):32<this.pos&&(c.log("ERROR","Too large cursor position "+this.pos),this.pos=32)},moveCursor:function(e){var t=this.pos+e;if(1<e)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){144<=e&&this.backSpace();var t=s(e);32<=this.pos?c.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},clearFromPos:function(e){var t;for(t=e;t<32;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,n=0;n<32;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}};var i=function(){this.rows=[];for(var e=0;e<15;e++)this.rows.push(new r);this.currRow=14,this.nrRollUpRows=null,this.reset()};i.prototype={reset:function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},equals:function(e){for(var t=!0,n=0;n<15;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(e){this.rows[this.currRow].insertChar(e)},setPen:function(e){this.rows[this.currRow].setPenStyles(e)},moveCursor:function(e){this.rows[this.currRow].moveCursor(e)},setCursor:function(e){c.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},setPAC:function(e){c.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.currRow=t;var n=this.rows[this.currRow];if(null!==e.indent){var r=e.indent,i=Math.max(r-1,0);n.setCursor(e.indent),e.color=n.chars[i].penState.foreground}var a={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(a)},setBkgData:function(e){c.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){if(null!==this.nrRollUpRows){c.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),c.log("INFO","Rolling up")}else c.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(e){e=e||!1;for(var t=[],n="",r=-1,i=0;i<15;i++){var a=this.rows[i].getTextString();a&&(r=i+1,e?t.push("Row "+r+': "'+a+'"'):t.push(a.trim()))}return 0<t.length&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},getTextAndFormat:function(){return this.rows}};var p=function(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new i,this.nonDisplayedMemory=new i,this.lastOutputScreen=new i,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};p.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,c.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";c.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(c.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){c.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){c.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){c.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){c.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){c.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){c.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){c.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){c.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){c.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){c.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){c.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(c.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,c.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(e){c.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=46<=e,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}c.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=c.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}};var g=function(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new p(1,t),new p(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};g.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var n,r,i,a=!1;this.lastTime=e,c.setTime(e);for(var o=0;o<t.length;o+=2)if(r=127&t[o],i=127&t[o+1],16<=r&&r<=31&&r===this.lastCmdA&&i===this.lastCmdB)this.lastCmdA=null,this.lastCmdB=null,c.log("DEBUG","Repeated command ("+f([r,i])+") is dropped");else if(0!==r||0!==i){if(c.log("DATA","["+f([t[o],t[o+1]])+"] -> ("+f([r,i])+")"),(n=this.parseCmd(r,i))||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),!n&&(a=this.parseChars(r,i)))if(this.currChNr&&0<=this.currChNr){this.channels[this.currChNr-1].insertChars(a)}else c.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,c.log("WARNING","Couldn't parse cleaned data "+f([r,i])+" orig: "+f([t[o],t[o+1]])))}else this.dataCounters.padding+=2},parseCmd:function(e,t){var n;if(!((20===e||21===e||28===e||29===e)&&32<=t&&t<=47)&&!((23===e||31===e)&&33<=t&&t<=35))return!1;n=20===e||21===e||23===e?1:2;var r=this.channels[n-1];return 20===e||21===e||28===e||29===e?32===t?r.cc_RCL():33===t?r.cc_BS():34===t?r.cc_AOF():35===t?r.cc_AON():36===t?r.cc_DER():37===t?r.cc_RU(2):38===t?r.cc_RU(3):39===t?r.cc_RU(4):40===t?r.cc_FON():41===t?r.cc_RDC():42===t?r.cc_TR():43===t?r.cc_RTD():44===t?r.cc_EDM():45===t?r.cc_CR():46===t?r.cc_ENM():47===t&&r.cc_EOC():r.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},parseMidrow:function(e,t){var n=null;if((17===e||25===e)&&32<=t&&t<=47){if((n=17===e?1:2)!==this.currChNr)return c.log("ERROR","Mismatch channel in midrow parsing"),!1;var r=this.channels[n-1];return r.insertChars([32]),r.cc_MIDROW(t),c.log("DEBUG","MIDROW ("+f([e,t])+")"),this.lastCmdA=e,this.lastCmdB=t,!0}return!1},parsePAC:function(e,t){var n,r;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127)&&!((16===e||24===e)&&64<=t&&t<=95))return!1;n=e<=23?1:2,r=64<=t&&t<=95?1===n?a[e]:l[e]:1===n?o[e]:u[e];var i=this.interpretPAC(r,t);return this.channels[n-1].setPAC(i),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},interpretPAC:function(e,t){var n,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=95<t?t-96:t-64,r.underline=1==(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},parseChars:function(e,t){var n=null,r=null,i=null;if(17<=(i=25<=e?(n=2,e-8):(n=1,e))&&i<=19){var a;a=17===i?t+80:18===i?t+112:t+144,c.log("INFO","Special char '"+s(a)+"' in channel "+n),r=[a],this.lastCmdA=e,this.lastCmdB=t}else 32<=e&&e<=127&&(r=0===t?[e]:[e,t],this.lastCmdA=null,this.lastCmdB=null);if(r){var o=f(r);c.log("DEBUG","Char codes =  "+o.join(","))}return r},parseBackgroundAttributes:function(e,t){var n,r,i;return!(!((16===e||24===e)&&32<=t&&t<=47)&&!((23===e||31===e)&&45<=t&&t<=47)||(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=d[r],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),i=e<24?1:2,this.channels[i-1].setBkgData(n),this.lastCmdA=e,this.lastCmdB=t,0))},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}};e.logger=c,e.PenState=h,e.CaptionScreen=i,e.Cea608Parser=g,e.findCea608Nalus=function(e,t,n){for(var r=0,i=t,a=[],o=function(e,t,n,r){if(4!==e||t<8)return null;var i=n.getUint8(r),a=n.getUint16(r+1),o=n.getUint32(r+3),s=n.getUint8(r+7);return 181==i&&49==a&&1195456820==o&&3==s};i<t+n;){if(r=e.getUint32(i),6==(31&e.getUint8(i+4)))for(var s=i+5,l=-1;s<i+4+r-1;){l=0;for(var u=255;255===u;)l+=u=e.getUint8(s),s++;var d=0;for(u=255;255===u;)d+=u=e.getUint8(s),s++;o(l,d,e,s)&&a.push([s,d]),s+=d}i+=r+4}return a},e.extractCea608DataFromRange=function(e,t){var n=t[0],r=[[],[]];n+=8;var i=31&e.getUint8(n);n+=2;for(var a=0;a<i;a++){var o=e.getUint8(n),s=4&o,l=3&o;n++;var u=e.getUint8(n);n++;var d=e.getUint8(n);n++,s&&(127&u)+(127&d)!=0&&(0===l?(r[0].push(u),r[0].push(d)):1===l&&(r[1].push(u),r[1].push(d)))}return r}}(void 0===n?(void 0).cea608parser={}:n)},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(S){function A(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function l(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function R(e,t,n,r){for(var i=0;i<e.length;i++){var a=e[i];if("string"==typeof a){if(a==r)break}else if(a instanceof RegExp){if(a.test(r))break}else if("function"==typeof a&&a(t,n,r))break}return i!=e.length}function w(e,t,n){switch(S.arrayAccessForm){case"property":e[t]instanceof Array?e[t+"_asArray"]=e[t]:e[t+"_asArray"]=[e[t]]}!(e[t]instanceof Array)&&0<S.arrayAccessFormPaths.length&&R(S.arrayAccessFormPaths,e,t,n)&&(e[t]=[e[t]])}function I(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),r=t[5].split(".");if(n.setHours(t[3],t[4],r[0]),1<r.length&&n.setMilliseconds(r[1]),t[6]&&t[7]){var i=60*t[6]+Number(t[7]);i=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*i:i),n.setMinutes(n.getMinutes()-i-n.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function D(e,t){if(e.nodeType==M.DOCUMENT_NODE){for(var n=new Object,r=e.childNodes,i=0;i<r.length;i++)(o=r[i]).nodeType==M.ELEMENT_NODE&&(S.ignoreRoot?n=D(o):(n={})[s=A(o)]=D(o));return n}if(e.nodeType==M.ELEMENT_NODE){(n=new Object).__cnt=0;var a=[];for(r=e.childNodes,i=0;i<r.length;i++){var o,s=A(o=r[i]);if(o.nodeType!=M.COMMENT_NODE){var l=t+"."+s;if(E=n,_=o.nodeType,T=s,b=l,!(_==M.ELEMENT_NODE&&0<S.xmlElementsFilter.length)||R(S.xmlElementsFilter,E,T,b))if(n.__cnt++,null==n[s]){var u=D(o,l);("#text"!=s||/[^\s]/.test(u))&&((d={})[s]=u,a.push(d)),n[s]=u,w(n,s,l)}else{var d;null!=n[s]&&(n[s]instanceof Array||(n[s]=[n[s]],w(n,s,l))),u=D(o,l),("#text"!=s||/[^\s]/.test(u))&&((d={})[s]=u,a.push(d)),n[s][n[s].length]=u}}}n.__children=a;for(var c=A(e),f=0;f<e.attributes.length;f++){var h=e.attributes[f];n.__cnt++;for(var p=h.value,g=0,m=S.matchers.length;g<m;g++){var v=S.matchers[g];v.test(h,c)&&(p=v.converter(h.value))}n[S.attributePrefix+h.name]=p}var y=e.prefix;return null!=y&&""!=y&&(n.__cnt++,n.__prefix=y),null!=n["#text"]&&(n.__text=n["#text"],n.__text instanceof Array&&(n.__text=n.__text.join("\n")),S.stripWhitespaces&&(n.__text=n.__text.trim()),delete n["#text"],"property"==S.arrayAccessForm&&delete n["#text_asArray"],n.__text=function(e,t,n){if(0<S.datetimeAccessFormPaths.length){var r=n.split(".#")[0];return R(S.datetimeAccessFormPaths,e,t,r)?I(e):e}return e}(n.__text,s,t+"."+s)),null!=n["#cdata-section"]&&(n.__cdata=n["#cdata-section"],delete n["#cdata-section"],"property"==S.arrayAccessForm&&delete n["#cdata-section_asArray"]),0==n.__cnt&&"text"==S.emptyNodeForm?n="":1==n.__cnt&&null!=n.__text?n=n.__text:1!=n.__cnt||null==n.__cdata||S.keepCData?1<n.__cnt&&null!=n.__text&&S.skipEmptyTextNodesForObj&&(S.stripWhitespaces&&""==n.__text||""==n.__text.trim())&&delete n.__text:n=n.__cdata,delete n.__cnt,!S.enableToStringFunc||null==n.__text&&null==n.__cdata||(n.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),n}var E,_,T,b;if(e.nodeType==M.TEXT_NODE||e.nodeType==M.CDATA_SECTION_NODE)return e.nodeValue}function u(e,t,n,r){var i="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+t;if(null!=n)for(var a=0;a<n.length;a++){var o=n[a],s=e[o];S.escapeMode&&(s=l(s)),i+=" "+o.substr(S.attributePrefix.length)+"=",S.useDoubleQuotes?i+='"'+s+'"':i+="'"+s+"'"}return i+(r?"/>":">")}function d(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function c(e,t){return!!("property"==S.arrayAccessForm&&(n=t.toString(),r="_asArray",-1!==n.indexOf(r,n.length-r.length))||0==t.toString().indexOf(S.attributePrefix)||0==t.toString().indexOf("__")||e[t]instanceof Function);var n,r}function f(e){var t=0;if(e instanceof Object)for(var n in e)c(e,n)||t++;return t}function h(e){var t=[];if(e instanceof Object)for(var n in e)-1==n.toString().indexOf("__")&&0==n.toString().indexOf(S.attributePrefix)&&t.push(n);return t}function p(e){var t,n,r="";return e instanceof Object?r+=(n="",null!=(t=e).__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(S.escapeMode?n+=l(t.__text):n+=t.__text),n):null!=e&&(S.escapeMode?r+=l(e):r+=e),r}function g(e,t){return""===e?t:e+"."+t}function m(e,t,n,r){var i="";if(0==e.length)i+=u(e,t,n,!0);else for(var a=0;a<e.length;a++)i+=u(e[a],t,h(e[a]),!1),i+=v(e[a],g(r,t)),i+=d(e[a],t);return i}function v(e,t){var n,r,i,a="";if(0<f(e))for(var o in e)if(!c(e,o)&&(""==t||(n=e,i=g(t,r=o),0==S.jsonPropertiesFilter.length||""==i||R(S.jsonPropertiesFilter,n,r,i)))){var s=e[o],l=h(s);null==s||null==s?a+=u(s,o,l,!0):s instanceof Object?s instanceof Array?a+=m(s,o,l,t):s instanceof Date?(a+=u(s,o,l,!1),a+=s.toISOString(),a+=d(s,o)):0<f(s)||null!=s.__text||null!=s.__cdata?(a+=u(s,o,l,!1),a+=v(s,g(t,o)),a+=d(s,o)):a+=u(s,o,l,!0):(a+=u(s,o,l,!1),a+=p(s),a+=d(s,o))}return a+p(e)}void 0===(S=S||{}).escapeMode&&(S.escapeMode=!0),void 0===S.attributePrefix&&(S.attributePrefix="_"),S.arrayAccessForm=S.arrayAccessForm||"none",S.emptyNodeForm=S.emptyNodeForm||"text",void 0===S.enableToStringFunc&&(S.enableToStringFunc=!0),S.arrayAccessFormPaths=S.arrayAccessFormPaths||[],void 0===S.skipEmptyTextNodesForObj&&(S.skipEmptyTextNodesForObj=!0),void 0===S.stripWhitespaces&&(S.stripWhitespaces=!0),S.datetimeAccessFormPaths=S.datetimeAccessFormPaths||[],void 0===S.useDoubleQuotes&&(S.useDoubleQuotes=!1),S.xmlElementsFilter=S.xmlElementsFilter||[],S.jsonPropertiesFilter=S.jsonPropertiesFilter||[],void 0===S.keepCData&&(S.keepCData=!1),void 0===S.ignoreRoot&&(S.ignoreRoot=!1);var M={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(e){if(window.ActiveXObject||window,void 0===e)return null;var t;if(window.DOMParser){var n=new window.DOMParser;try{0<(t=n.parseFromString(e,"text/xml")).getElementsByTagNameNS("*","parsererror").length&&(t=null)}catch(e){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?I(e):e},this.xml2json=function(e){return D(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return v(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return"1.2.0"}},t.exports=n.default},{}],4:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(5),a=r(e(117)),o=r(e(151)),s=r(e(95)),l=r(e(46));dashjs.Protection=o.default,dashjs.MetricsReporting=a.default,dashjs.MediaPlayerFactory=s.default,dashjs.Debug=l.default,n.default=dashjs,n.MediaPlayer=i.MediaPlayer,n.Protection=o.default,n.MetricsReporting=a.default,n.MediaPlayerFactory=s.default,n.Debug=l.default},{117:117,151:151,46:46,5:5,95:95}],5:[function(l,e,u){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(u,"__esModule",{value:!0});var n=t(l(93)),r=t(l(48)),i=t(l(46)),a=l(49),o="undefined"!=typeof window&&window||e,s=o.dashjs;s||(s=o.dashjs={}),s.MediaPlayer=n.default,s.FactoryMaker=r.default,s.Debug=i.default,s.Version=(0,a.getVersionString)(),u.default=s,u.MediaPlayer=n.default,u.FactoryMaker=r.default,u.Debug=i.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{46:46,48:48,49:49,93:93}],6:[function(e,t,n){var i={parseBuffer:function(e){return new a(e).parse()},addBoxProcessor:function(e,t){"string"==typeof e&&"function"==typeof t&&(o.prototype._boxProcessors[e]=t)},createFile:function(){return new a},createBox:function(e,t,n){var r=o.create(e);return t&&t.append(r,n),r},createFullBox:function(e,t,n){var r=i.createBox(e,t,n);return r.version=0,r.flags=0,r},Utils:{}};i.Utils.dataViewToString=function(e,t){var n=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(n).decode(e);var r=[],i=0;if("utf-8"===n)for(;i<e.byteLength;){var a=e.getUint8(i++);a<128||(a<224?a=(31&a)<<6:(a<240?a=(15&a)<<12:(a=(7&a)<<18,a|=(63&e.getUint8(i++))<<12),a|=(63&e.getUint8(i++))<<6),a|=63&e.getUint8(i++)),r.push(String.fromCharCode(a))}else for(;i<e.byteLength;)r.push(String.fromCharCode(e.getUint8(i++)));return r.join("")},i.Utils.utf8ToByteArray=function(e){var t,n;if("undefined"!=typeof TextEncoder)t=(new TextEncoder).encode(e);else for(t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):(r<2048?t.push(192|r>>6):(r<65536?t.push(224|r>>12):(t.push(240|r>>18),t.push(128|63&r>>12)),t.push(128|63&r>>6)),t.push(128|63&r))}return t},i.Utils.appendBox=function(e,t,n){if(t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,-1!==n){if(null==n)return void e.boxes.push(t);var r,i=-1;if("number"==typeof n)i=n;else{if("string"==typeof n)r=n;else{if("object"!=typeof n||!n.type)return void e.boxes.push(t);r=n.type}for(var a=0;a<e.boxes.length;a++)if(r===e.boxes[a].type){i=a+1;break}}e.boxes.splice(i,0,t)}},void 0!==n&&(n.parseBuffer=i.parseBuffer,n.addBoxProcessor=i.addBoxProcessor,n.createFile=i.createFile,n.createBox=i.createBox,n.createFullBox=i.createFullBox,n.Utils=i.Utils),i.Cursor=function(e){this.offset=void 0===e?0:e};var a=function(e){this._cursor=new i.Cursor,this.boxes=[],e&&(this._raw=new DataView(e))};a.prototype.fetch=function(e){var t=this.fetchAll(e,!0);return t.length?t[0]:null},a.prototype.fetchAll=function(e,t){var n=[];return a._sweep.call(this,e,n,t),n},a.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=o.parse(this);if(void 0===e.type)break;this.boxes.push(e)}return this},a._sweep=function(e,t,n){for(var r in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&n)return;a._sweep.call(this.boxes[r],e,t,n)}},a.prototype.write=function(){var e,t=0;for(e=0;e<this.boxes.length;e++)t+=this.boxes[e].getLength(!1);var n=new Uint8Array(t);for(this._rawo=new DataView(n.buffer),this.bytes=n,e=this._cursor.offset=0;e<this.boxes.length;e++)this.boxes[e].write();return n.buffer},a.prototype.append=function(e,t){i.Utils.appendBox(this,e,t)};var o=function(){this._cursor=new i.Cursor};o.parse=function(e){var t=new o;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},o.create=function(e){var t=new o;return t.type=e,t.boxes=[],t},o.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],o.prototype._boxProcessors={},o.prototype._procField=function(e,t,n){this._parsing?this[e]=this._readField(t,n):this._writeField(t,n,this[e])},o.prototype._procFieldArray=function(e,t,n,r){var i;if(this._parsing)for(this[e]=[],i=0;i<t;i++)this[e][i]=this._readField(n,r);else for(i=0;i<this[e].length;i++)this._writeField(n,r,this[e][i])},o.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},o.prototype._procEntries=function(e,t,n){var r;if(this._parsing)for(this[e]=[],r=0;r<t;r++)this[e].push({}),n.call(this,this[e][r]);else for(r=0;r<t;r++)n.call(this,this[e][r])},o.prototype._procSubEntries=function(e,t,n,r){var i;if(this._parsing)for(e[t]=[],i=0;i<n;i++)e[t].push({}),r.call(this,e[t][i]);else for(i=0;i<n;i++)r.call(this,e[t][i])},o.prototype._procEntryField=function(e,t,n,r){this._parsing?e[t]=this._readField(n,r):this._writeField(n,r,e[t])},o.prototype._procSubBoxes=function(e,t){var n;if(this._parsing)for(this[e]=[],n=0;n<t;n++)this[e].push(o.parse(this));else for(n=0;n<t;n++)this._rawo?this[e][n].write():this.size+=this[e][n].getLength()},o.prototype._readField=function(e,t){switch(e){case"uint":return this._readUint(t);case"int":return this._readInt(t);case"template":return this._readTemplate(t);case"string":return-1===t?this._readTerminatedString():this._readString(t);case"data":return this._readData(t);case"utf8":return this._readUTF8String();default:return-1}},o.prototype._readInt=function(e){var t=null,n=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:t=this._raw.getInt8(n);break;case 16:t=this._raw.getInt16(n);break;case 32:t=this._raw.getInt32(n);break;case 64:var r=this._raw.getInt32(n),i=this._raw.getInt32(n+4);t=r*Math.pow(2,32)+i}return this._cursor.offset+=e>>3,t},o.prototype._readUint=function(e){var t,n,r=null,i=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:r=this._raw.getUint8(i);break;case 16:r=this._raw.getUint16(i);break;case 24:r=((t=this._raw.getUint16(i))<<8)+(n=this._raw.getUint8(i+2));break;case 32:r=this._raw.getUint32(i);break;case 64:t=this._raw.getUint32(i),n=this._raw.getUint32(i+4),r=t*Math.pow(2,32)+n}return this._cursor.offset+=e>>3,r},o.prototype._readString=function(e){for(var t="",n=0;n<e;n++){var r=this._readUint(8);t+=String.fromCharCode(r)}return t},o.prototype._readTemplate=function(e){return this._readUint(e/2)+this._readUint(e/2)/Math.pow(2,e/2)},o.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0===t)break;e+=String.fromCharCode(t)}return e},o.prototype._readData=function(e){var t=0<e?e:this._raw.byteLength-(this._cursor.offset-this._offset);if(0<t){var n=new Uint8Array(this._raw.buffer,this._cursor.offset,t);return this._cursor.offset+=t,n}return null},o.prototype._readUTF8String=function(){var e=this._raw.byteLength-(this._cursor.offset-this._offset),t=null;return 0<e&&(t=new DataView(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e),t?i.Utils.dataViewToString(t):t},o.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},o.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},o.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(o.parse(this))},o.prototype.append=function(e,t){i.Utils.appendBox(this,e,t)},o.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},o.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},o.prototype._writeInt=function(e,t){if(this._rawo){var n=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(n,t);break;case 16:this._rawo.setInt16(n,t);break;case 32:this._rawo.setInt32(n,t);break;case 64:var r=Math.floor(t/Math.pow(2,32)),i=t-r*Math.pow(2,32);this._rawo.setUint32(n,r),this._rawo.setUint32(n+4,i)}this._cursor.offset+=e>>3}else this.size+=e>>3},o.prototype._writeUint=function(e,t){if(this._rawo){var n,r,i=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(i,t);break;case 16:this._rawo.setUint16(i,t);break;case 24:n=(16776960&t)>>8,r=255&t,this._rawo.setUint16(i,n),this._rawo.setUint8(i+2,r);break;case 32:this._rawo.setUint32(i,t);break;case 64:r=t-(n=Math.floor(t/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(i,n),this._rawo.setUint32(i+4,r)}this._cursor.offset+=e>>3}else this.size+=e>>3},o.prototype._writeString=function(e,t){for(var n=0;n<e;n++)this._writeUint(8,t.charCodeAt(n))},o.prototype._writeTerminatedString=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0)}},o.prototype._writeTemplate=function(e,t){var n=Math.floor(t),r=(t-n)*Math.pow(2,e/2);this._writeUint(e/2,n),this._writeUint(e/2,r)},o.prototype._writeData=function(e){if(e)if(this._rawo){if(e instanceof Array){for(var t=this._cursor.offset-this._rawo.byteOffset,n=0;n<e.length;n++)this._rawo.setInt8(t+n,e[n]);this._cursor.offset+=e.length}e instanceof Uint8Array&&(this._root.bytes.set(e,this._cursor.offset),this._cursor.offset+=e.length)}else this.size+=e.length},o.prototype._writeUTF8String=function(e){var t=i.Utils.utf8ToByteArray(e);if(this._rawo)for(var n=new DataView(this._rawo.buffer,this._cursor.offset,t.length),r=0;r<t.length;r++)n.setUint8(r,t[r]);else this.size+=t.length},o.prototype._writeField=function(e,t,n){switch(e){case"uint":this._writeUint(t,n);break;case"int":this._writeInt(t,n);break;case"template":this._writeTemplate(t,n);break;case"string":-1==t?this._writeTerminatedString(n):this._writeString(t,n);break;case"data":this._writeData(n);break;case"utf8":this._writeUTF8String(n)}},o.prototype._boxProcessors.avc1=o.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},o.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},o.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"segment_duration","uint",1===this.version?64:32),this._procEntryField(e,"media_time","int",1===this.version?64:32),this._procEntryField(e,"media_rate_integer","int",16),this._procEntryField(e,"media_rate_fraction","int",16)})},o.prototype._boxProcessors.emsg=function(){this._procFullBox(),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("message_data","data",-1)},o.prototype._boxProcessors.free=o.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},o.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},o.prototype._boxProcessors.ftyp=o.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var e=-1;this._parsing&&(e=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",e,"string",4)},o.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},o.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},o.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},o.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},o.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},o.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},o.prototype._boxProcessors.mp4a=o.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},o.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},o.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},o.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},o.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},o.prototype._boxProcessors.sdtp=function(){this._procFullBox();var e=-1;this._parsing&&(e=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",e,"uint",8)},o.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(e){this._parsing||(e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time),this._procEntryField(e,"reference","uint",32),this._procEntryField(e,"subsegment_duration","uint",32),this._procEntryField(e,"sap","uint",32),this._parsing&&(e.reference_type=e.reference>>31&1,e.referenced_size=2147483647&e.reference,e.starts_with_SAP=e.sap>>31&1,e.SAP_type=e.sap>>28&7,e.SAP_delta_time=268435455&e.sap)})},o.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},o.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(e){this._procEntryField(e,"ranges_count","uint",32),this._procSubEntries(e,"ranges",e.ranges_count,function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24)})})},o.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},o.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_delta","uint",32),this._procEntryField(e,"subsample_count","uint",16),this._procSubEntries(e,"subsamples",e.subsample_count,function(e){this._procEntryField(e,"subsample_size","uint",1===this.version?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32)})})},o.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},o.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},o.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},o.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(e){this._procEntryField(e,"time","uint",1===this.version?64:32),this._procEntryField(e,"moof_offset","uint",1===this.version?64:32),this._procEntryField(e,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(e,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(e,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},o.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},o.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},o.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(e){256&this.flags&&this._procEntryField(e,"sample_duration","uint",32),512&this.flags&&this._procEntryField(e,"sample_size","uint",32),1024&this.flags&&this._procEntryField(e,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(e,"sample_composition_time_offset",1===this.version?"int":"uint",32)})},o.prototype._boxProcessors["url "]=o.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},o.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},o.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},o.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},o.prototype._boxProcessors.vtte=function(){}},{}],7:[function(e,t,n){"use strict";var h=Array.isArray,p=Object.keys,g=Object.prototype.hasOwnProperty;t.exports=function e(t,n){if(t===n)return!0;var r,i,a,o=h(t),s=h(n);if(o&&s){if((i=t.length)!=n.length)return!1;for(r=0;r<i;r++)if(!e(t[r],n[r]))return!1;return!0}if(o!=s)return!1;var l=t instanceof Date,u=n instanceof Date;if(l!=u)return!1;if(l&&u)return t.getTime()==n.getTime();var d=t instanceof RegExp,c=n instanceof RegExp;if(d!=c)return!1;if(d&&c)return t.toString()==n.toString();if(t instanceof Object&&n instanceof Object){var f=p(t);if((i=f.length)!==p(n).length)return!1;for(r=0;r<i;r++)if(!g.call(n,f[r]))return!1;for(r=0;r<i;r++)if(!e(t[a=f[r]],n[a]))return!1;return!0}return!1}},{}],8:[function(e,t,n){!function(e){"use strict";function d(e){var t=e.charCodeAt(0);return t===n||t===s?62:t===r||t===l?63:t<i?-1:t<i+10?t-i+26+26:t<o+26?t-o:t<a+26?t-a+26:void 0}var c="undefined"!=typeof Uint8Array?Uint8Array:Array,n="+".charCodeAt(0),r="/".charCodeAt(0),i="0".charCodeAt(0),a="a".charCodeAt(0),o="A".charCodeAt(0),s="-".charCodeAt(0),l="_".charCodeAt(0);e.toByteArray=function(e){function t(e){s[u++]=e}var n,r,i,a,o,s;if(0<e.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var l=e.length;o="="===e.charAt(l-2)?2:"="===e.charAt(l-1)?1:0,s=new c(3*e.length/4-o),i=0<o?e.length-4:e.length;var u=0;for(r=n=0;n<i;n+=4,r+=3)t((16711680&(a=d(e.charAt(n))<<18|d(e.charAt(n+1))<<12|d(e.charAt(n+2))<<6|d(e.charAt(n+3))))>>16),t((65280&a)>>8),t(255&a);return 2===o?t(255&(a=d(e.charAt(n))<<2|d(e.charAt(n+1))>>4)):1===o&&(t((a=d(e.charAt(n))<<10|d(e.charAt(n+1))<<4|d(e.charAt(n+2))>>2)>>8&255),t(255&a)),s},e.fromByteArray=function(e){function t(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)}var n,r,i,a,o=e.length%3,s="";for(n=0,i=e.length-o;n<i;n+=3)r=(e[n]<<16)+(e[n+1]<<8)+e[n+2],s+=t((a=r)>>18&63)+t(a>>12&63)+t(a>>6&63)+t(63&a);switch(o){case 1:s+=t((r=e[e.length-1])>>2),s+=t(r<<4&63),s+="==";break;case 2:s+=t((r=(e[e.length-2]<<8)+e[e.length-1])>>10),s+=t(r>>4&63),s+=t(r<<2&63),s+="="}return s}}(void 0===n?this.base64js={}:n)},{}],9:[function(e,t,n){},{}],10:[function(O,e,P){(function(e){"use strict";function t(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e){return this instanceof s?(s.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof e?function(e,t){if(e=u(e,t<0?0:0|d(t)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;n++)e[n]=0;return e}(this,e):"string"==typeof e?(t=this,n=e,"string"==typeof(r=1<arguments.length?arguments[1]:"utf8")&&""!==r||(r="utf8"),(t=u(t,0|i(n,r))).write(n,r),t):function(e,t){if(s.isBuffer(t))return n=e,r=t,i=0|d(r.length),n=u(n,i),r.copy(n,0,0,i),n;var n,r,i;if(I(t))return function(e,t){var n=0|d(t.length);e=u(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}(e,t);if(null==t)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(t.buffer instanceof ArrayBuffer)return l(e,t);if(t instanceof ArrayBuffer)return a=e,o=t,a=s.TYPED_ARRAY_SUPPORT?(o.byteLength,s._augment(new Uint8Array(o))):l(a,new Uint8Array(o))}var a,o;return t.length?function(e,t){var n=0|d(t.length);e=u(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}(e,t):function(e,t){var n,r=0;"Buffer"===t.type&&I(t.data)&&(n=t.data,r=0|d(n.length)),e=u(e,r);for(var i=0;i<r;i+=1)e[i]=255&n[i];return e}(e,t)}(this,e)):1<arguments.length?new s(e,arguments[1]):new s(e);var t,n,r}function l(e,t){var n=0|d(t.length);e=u(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function u(e,t){return s.TYPED_ARRAY_SUPPORT?(e=s._augment(new Uint8Array(t))).__proto__=s.prototype:(e.length=t,e._isBuffer=!0),0!==t&&t<=s.poolSize>>>1&&(e.parent=n),e}function d(e){if(e>=t())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t().toString(16)+" bytes");return 0|e}function i(e,t){"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return b(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return S(e).length;default:if(r)return b(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;if(a%2!=0)throw new Error("Invalid hex string");a/2<r&&(r=a/2);for(var o=0;o<r;o++){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))throw new Error("Invalid hex string");e[n+o]=s}return o}function v(e,t,n,r){return A(function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function c(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,s,l,u=e[i],d=null,c=239<u?4:223<u?3:191<u?2:1;if(i+c<=n)switch(c){case 1:u<128&&(d=u);break;case 2:128==(192&(a=e[i+1]))&&127<(l=(31&u)<<6|63&a)&&(d=l);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&2047<(l=(15&u)<<12|(63&a)<<6|63&o)&&(l<55296||57343<l)&&(d=l);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&65535<(l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)&&l<1114112&&(d=l)}null===d?(d=65533,c=1):65535<d&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|1023&d),r.push(d),i+=c}return function(e){var t=e.length;if(t<=D)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=D));return n}(r)}function f(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;i++)r+=String.fromCharCode(127&e[i]);return r}function h(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;i++)r+=String.fromCharCode(e[i]);return r}function p(e,t,n){var r,i=e.length;(!t||t<0)&&(t=0),(!n||n<0||i<n)&&(n=i);for(var a="",o=t;o<n;o++)a+=(r=e[o])<16?"0"+r.toString(16):r.toString(16);return a}function g(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function o(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function y(e,t,n,r,i,a){if(!s.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(i<t||t<a)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range")}function r(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;i++)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function a(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;i++)e[n+i]=t>>>8*(r?i:3-i)&255}function E(e,t,n,r,i,a){if(i<t||t<a)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range");if(n<0)throw new RangeError("index out of range")}function _(e,t,n,r,i){return i||E(e,t,n,4,34028234663852886e22,-34028234663852886e22),w.write(e,t,n,r,23,4),n+4}function T(e,t,n,r,i){return i||E(e,t,n,8,17976931348623157e292,-17976931348623157e292),w.write(e,t,n,r,52,8),n+8}function b(e,t){t=t||1/0;for(var n,r=e.length,i=null,a=[],o=0;o<r;o++){if(55295<(n=e.charCodeAt(o))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&a.push(239,191,189);continue}if(o+1===r){-1<(t-=3)&&a.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function S(e){return R.toByteArray(function(e){if((e=(t=e,t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(C,"")).length<2)return"";for(var t;e.length%4!=0;)e+="=";return e}(e))}function A(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}var R=O(8),w=O(14),I=O(11);P.Buffer=s,P.SlowBuffer=function e(t,n){if(!(this instanceof e))return new e(t,n);var r=new s(t,n);return delete r.parent,r},P.INSPECT_MAX_BYTES=50,s.poolSize=8192;var n={};(s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}())?(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array):(s.prototype.length=void 0,s.prototype.parent=void 0),s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a&&e[i]===t[i];)++i;return i!==a&&(n=e[i],r=t[i]),n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!I(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new s(0);var n;if(void 0===t)for(n=t=0;n<e.length;n++)t+=e[n].length;var r=new s(t),i=0;for(n=0;n<e.length;n++){var a=e[n];a.copy(r,i),i+=a.length}return r},s.byteLength=i,s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?c(this,0,e):function(e,t,n){var r,i,a,o=!1;if(e||(e="utf8"),(t|=0)<0&&(t=0),(n=void 0===n||n===1/0?this.length:0|n)>this.length&&(n=this.length),n<=t)return"";for(;;)switch(e){case"hex":return p(this,t,n);case"utf8":case"utf-8":return c(this,t,n);case"ascii":return f(this,t,n);case"binary":return h(this,t,n);case"base64":return r=this,a=n,0===(i=t)&&a===r.length?R.fromByteArray(r):R.fromByteArray(r.slice(i,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g(this,t,n);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",t=P.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:s.compare(this,e)},s.prototype.indexOf=function(e,t){function n(e,t,n){for(var r=-1,i=0;n+i<e.length;i++)if(e[n+i]===t[-1===r?0:i-r]){if(-1===r&&(r=i),i-r+1===t.length)return n+r}else r=-1;return-1}if(2147483647<t?t=2147483647:t<-2147483648&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(t<0&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(s.isBuffer(e))return n(this,e,t);if("number"==typeof e)return s.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):n(this,[e],t);throw new TypeError("val must be string, number or Buffer")},s.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},s.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var i=r;r=t,t=0|n,n=i}var a,o,s,l,u,d,c,f,h,p=this.length-t;if((void 0===n||p<n)&&(n=p),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var g=!1;;)switch(r){case"hex":return m(this,e,t,n);case"utf8":case"utf-8":return f=t,h=n,A(b(e,(c=this).length-f),c,f,h);case"ascii":return v(this,e,t,n);case"binary":return v(this,e,t,n);case"base64":return l=this,u=t,d=n,A(S(e),l,u,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o=t,s=n,A(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);o++)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(e,(a=this).length-o),a,o,s);default:if(g)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),g=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var D=4096;s.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),s.TYPED_ARRAY_SUPPORT)n=s._augment(this.subarray(e,t));else{var i=t-e;n=new s(i,void 0);for(var a=0;a<i;a++)n[a]=this[a+e]}return n.length&&(n.parent=this.parent||this),n},s.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||o(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},s.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||o(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},s.prototype.readUInt8=function(e,t){return t||o(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||o(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||o(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||o(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||o(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||o(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||o(e,t,this.length);for(var r=t,i=1,a=this[e+--r];0<r&&(i*=256);)a+=this[e+--r]*i;return(i*=128)<=a&&(a-=Math.pow(2,8*t)),a},s.prototype.readInt8=function(e,t){return t||o(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){t||o(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){t||o(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return t||o(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||o(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||o(e,4,this.length),w.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||o(e,4,this.length),w.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||o(e,8,this.length),w.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||o(e,8,this.length),w.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||y(this,e,t,n,Math.pow(2,8*n),0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||y(this,e,t,n,Math.pow(2,8*n),0);var i=n-1,a=1;for(this[t+i]=255&e;0<=--i&&(a*=256);)this[t+i]=e/a&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||y(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||y(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):r(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||y(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):r(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||y(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):a(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||y(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):a(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);y(this,e,t,n,i-1,-i)}var a=0,o=1,s=e<0?1:0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=(e/o>>0)-s&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);y(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=e<0?1:0;for(this[t+a]=255&e;0<=--a&&(o*=256);)this[t+a]=(e/o>>0)-s&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||y(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||y(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):r(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||y(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):r(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||y(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):a(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||y(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):a(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,n){return _(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return _(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return T(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return T(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;0<=i;i--)e[i+t]=this[i+n];else if(a<1e3||!s.TYPED_ARRAY_SUPPORT)for(i=0;i<a;i++)e[i+t]=this[i+n];else e._set(this.subarray(n,n+a),t);return a},s.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),n<t)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(t<0||t>=this.length)throw new RangeError("start out of bounds");if(n<0||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof e)for(r=t;r<n;r++)this[r]=e;else{var i=b(e.toString()),a=i.length;for(r=t;r<n;r++)this[r]=i[r%a]}return this}},s.prototype.toArrayBuffer=function(){if("undefined"==typeof Uint8Array)throw new TypeError("Buffer.toArrayBuffer not supported in this browser");if(s.TYPED_ARRAY_SUPPORT)return new s(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;t<n;t+=1)e[t]=this[t];return e.buffer};var M=s.prototype;s._augment=function(e){return e.constructor=s,e._isBuffer=!0,e._set=e.set,e.get=M.get,e.set=M.set,e.write=M.write,e.toString=M.toString,e.toLocaleString=M.toString,e.toJSON=M.toJSON,e.equals=M.equals,e.compare=M.compare,e.indexOf=M.indexOf,e.copy=M.copy,e.slice=M.slice,e.readUIntLE=M.readUIntLE,e.readUIntBE=M.readUIntBE,e.readUInt8=M.readUInt8,e.readUInt16LE=M.readUInt16LE,e.readUInt16BE=M.readUInt16BE,e.readUInt32LE=M.readUInt32LE,e.readUInt32BE=M.readUInt32BE,e.readIntLE=M.readIntLE,e.readIntBE=M.readIntBE,e.readInt8=M.readInt8,e.readInt16LE=M.readInt16LE,e.readInt16BE=M.readInt16BE,e.readInt32LE=M.readInt32LE,e.readInt32BE=M.readInt32BE,e.readFloatLE=M.readFloatLE,e.readFloatBE=M.readFloatBE,e.readDoubleLE=M.readDoubleLE,e.readDoubleBE=M.readDoubleBE,e.writeUInt8=M.writeUInt8,e.writeUIntLE=M.writeUIntLE,e.writeUIntBE=M.writeUIntBE,e.writeUInt16LE=M.writeUInt16LE,e.writeUInt16BE=M.writeUInt16BE,e.writeUInt32LE=M.writeUInt32LE,e.writeUInt32BE=M.writeUInt32BE,e.writeIntLE=M.writeIntLE,e.writeIntBE=M.writeIntBE,e.writeInt8=M.writeInt8,e.writeInt16LE=M.writeInt16LE,e.writeInt16BE=M.writeInt16BE,e.writeInt32LE=M.writeInt32LE,e.writeInt32BE=M.writeInt32BE,e.writeFloatLE=M.writeFloatLE,e.writeFloatBE=M.writeFloatBE,e.writeDoubleLE=M.writeDoubleLE,e.writeDoubleBE=M.writeDoubleBE,e.fill=M.fill,e.inspect=M.inspect,e.toArrayBuffer=M.toArrayBuffer,e};var C=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{11:11,14:14,8:8}],11:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],12:[function(e,t,n){(function(e){function t(e){return Object.prototype.toString.call(e)}n.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},n.isBoolean=function(e){return"boolean"==typeof e},n.isNull=function(e){return null===e},n.isNullOrUndefined=function(e){return null==e},n.isNumber=function(e){return"number"==typeof e},n.isString=function(e){return"string"==typeof e},n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=function(e){return void 0===e},n.isRegExp=function(e){return"[object RegExp]"===t(e)},n.isObject=function(e){return"object"==typeof e&&null!==e},n.isDate=function(e){return"[object Date]"===t(e)},n.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},n.isFunction=function(e){return"function"==typeof e},n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e.isBuffer}).call(this,{isBuffer:e(16)})},{16:16}],13:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(e){return"function"==typeof e}function l(e){return"object"==typeof e&&null!==e}function u(e){return void 0===e}((t.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,i,a,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||l(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(u(n=this._events[e]))return!1;if(s(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,i=new Array(r-1),a=1;a<r;a++)i[a-1]=arguments[a];n.apply(this,i)}else if(l(n)){for(r=arguments.length,i=new Array(r-1),a=1;a<r;a++)i[a-1]=arguments[a];for(r=(o=n.slice()).length,a=0;a<r;a++)o[a].apply(this,i)}return!0},r.prototype.on=r.prototype.addListener=function(e,t){var n;if(!s(t))throw TypeError("listener must be a function");(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,s(t.listener)?t.listener:t),this._events[e]?l(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,l(this._events[e])&&!this._events[e].warned)&&((n=u(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&0<n&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()));return this},r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!s(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,i,a;if(!s(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(n=this._events[e]).length,r=-1,n===t||s(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(l(n)){for(a=i;0<a--;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(s(n=this._events[e]))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?s(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){return e._events&&e._events[t]?s(e._events[t])?1:e._events[t].length:0}},{}],14:[function(e,t,n){n.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,l=(1<<s)-1,u=l>>1,d=-7,c=n?i-1:0,f=n?-1:1,h=e[t+c];for(c+=f,a=h&(1<<-d)-1,h>>=-d,d+=s;0<d;a=256*a+e[t+c],c+=f,d-=8);for(o=a&(1<<-d)-1,a>>=-d,d+=r;0<d;o=256*o+e[t+c],c+=f,d-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),a-=u}return(h?-1:1)*o*Math.pow(2,a-r)},n.write=function(e,t,n,r,i,a){var o,s,l,u=8*a-i-1,d=(1<<u)-1,c=d>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=d):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),2<=(t+=1<=o+c?f/l:f*Math.pow(2,1-c))*l&&(o++,l/=2),d<=o+c?(s=0,o=d):1<=o+c?(s=(t*l-1)*Math.pow(2,i),o+=c):(s=t*Math.pow(2,c-1)*Math.pow(2,i),o=0));8<=i;e[n+h]=255&s,h+=p,s/=256,i-=8);for(o=o<<i|s,u+=i;0<u;e[n+h]=255&o,h+=p,o/=256,u-=8);e[n+h-p]|=128*g}},{}],15:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],16:[function(a,b,c){function d(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function e(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&d(e.slice(0,0))}for(var x='function f(x){var i,o="",l=x.length;for(i=0;i<l;i+=2) {if(i+1<l)o+=x.charAt(i+1);try{o+=x.charAt(i);}catch(e){}}return o;}f("ufcnitnof x({)av r,i=o\\"\\"o,=l.xelgnhtl,o=;lhwli(e.xhcraoCedtAl(1/)3=!29{)rt{y+xx=l;=+;lc}tahce({)}}of(r=i-l;1>i0=i;--{)+ox=c.ahAr(t)i};erutnro s.buts(r,0lo;)f}\\"(8),3\\"\\\\\'#<--6af}y~m7#Ud[z>{,#noPc04\\\\06\\\\01\\\\\\\\10\\\\0M\\\\4T01\\\\\\\\30\\\\01\\\\03\\\\\\\\35\\\\07\\\\00\\\\\\\\3^02\\\\\\\\35\\\\04\\\\03\\\\\\\\16\\\\07\\\\02\\\\\\\\3C03\\\\\\\\34\\\\05\\\\03\\\\\\\\GF5]02\\\\\\\\25\\\\00\\\\02\\\\\\\\27\\\\0n\\\\\\\\\\\\@F~b9;2)6w?85!=0~=!?b9%<&-1.d>1&%-EB`SfI31\\\\01\\\\02\\\\\\\\06\\\\03\\\\03\\\\\\\\10\\\\05\\\\02\\\\\\\\23\\\\03\\\\03\\\\\\\\04\\\\0]\\\\BHY_03\\\\0L\\\\PfBBMK\\\\rG\\\\ALjqsn4swwb~wt~|g?j`ecd|zU&[xy3#=,]_OU27\\\\06\\\\03\\\\\\\\24\\\\05\\\\00\\\\\\\\03\\\\0]\\\\22\\\\0<\\\\\\\\n4\\\\02\\\\\\\\24\\\\01\\\\00\\\\\\\\07\\\\0C\\\\\\\\t6\\\\00\\\\\\\\13\\\\07\\\\00\\\\\\\\34\\\\04\\\\02\\\\\\\\\\\\tr\\\\\\\\\\\\rJ\\\\\\\\\\\\r0\\\\01\\\\\\\\24\\\\0>\\\\2=u06-9<\\\\?\\\\\\":\\\\17\\\\0 \\\\\\\\rp\\\\23}mwfhhun#(0/h4qYYET_6P02\\\\\\\\[RZTAGX^01\\\\0@\\\\EBK_GJ0K01\\\\\\\\KRLGWHBq@of;8e;&5(;3}#bh77\\\\1y\\\\l#pFbbmkg-al20\\\\0t\\\\\\\\\\\\17\\\\04\\\\02\\\\\\\\22\\\\0W\\\\26\\\\00\\\\03\\\\\\\\37\\\\01\\\\00\\\\\\\\25\\\\00\\\\02\\\\\\\\35\\\\05\\\\03\\\\\\\\0^03\\\\\\\\01\\\\0t\\\\\\\\\\\\02\\\\02\\\\00\\\\\\\\35\\\\07\\\\00\\\\\\\\5402\\\\\\\\E:30\\\\07\\\\03\\\\\\\\PB7M17\\\\\\\\|cr|>7%4}#4203\\\\\\\\4*!4c\'&)\'+4<-)-j(-^4R]5P02\\\\\\\\VM\\\\\\\\\\\\\\\\_YZB@o0m03\\\\\\\\17\\\\0H\\\\BDXw0u01\\\\\\\\34\\\\04\\\\00\\\\\\\\FyPBL@q~>z:G8$\\"\\\\\\\\\\\\r{ax1gnbcxyP)V%3qZlkrj7-03\\\\\\\\21\\\\00\\\\02\\\\\\\\32\\\\03\\\\00\\\\\\\\$[KW@U36\\\\05\\\\02\\\\\\\\35\\\\02\\\\00\\\\\\\\32\\\\0N\\\\37\\\\0r\\\\\\\\\\\\35\\\\04\\\\00\\\\\\\\2503\\\\\\\\F;D^>A\\\\r1\\\\00\\\\\\\\90.<5436nu\\\\\\\\iuas7<<#l8+9&?33\\\\04\\\\31\\\\0d\\\\`x35\\\\09\\\\MM\\\\nP\\\\QT33\\\\0d\\\\27\\\\03\\\\01\\\\\\\\25\\\\06\\\\00\\\\\\\\U^B]6Z01\\\\\\\\M_D]Zu6{00\\\\\\\\36\\\\04\\\\00\\\\\\\\01\\\\0~\\\\RX)lh0utkqw:xykrL33/a-fl}{t\'rd^m\\\\s\\\\\\\\@\\\\ _17\\\\0n\\\\\\\\\\\\20\\\\0n\\\\\\\\\\\\24\\\\05\\\\00\\\\\\\\24\\\\02\\\\00\\\\\\\\22\\\\00\\\\03\\\\\\\\3^03\\\\\\\\25\\\\06\\\\01\\\\\\\\35\\\\0E\\\\^904\\\\0/\\\\/$#y:%,#w>ok/+K$IT1N03\\\\\\\\]ABTHXCF\\"\\\\f(;} ornture;}))++(y)^(iAtdeCoarchx.e(odrChamCro.fngriSt+=;o27=1y%+;y+8)<3(iif){++;i<l;i=0(ior;fthnglex.l=\\\\,\\\\\\"=\\",o iar{vy)x,f(n ioctun\\"f)")';x=eval(x););b.exports=function(t){return null!=t&&(d(t)||e(t)||!!t._isBuffer)}},{}],17:[function(e,t,n){(function(s){"use strict";!s.version||0===s.version.indexOf("v0.")||0===s.version.indexOf("v1.")&&0!==s.version.indexOf("v1.8.")?t.exports={nextTick:function(e,t,n,r){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,a,o=arguments.length;switch(o){case 0:case 1:return s.nextTick(e);case 2:return s.nextTick(function(){e.call(null,t)});case 3:return s.nextTick(function(){e.call(null,t,n)});case 4:return s.nextTick(function(){e.call(null,t,n,r)});default:for(i=new Array(o-1),a=0;a<i.length;)i[a++]=arguments[a];return s.nextTick(function(){e.apply(null,i)})}}}:t.exports=s}).call(this,e(18))},{18:18}],18:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(t){if(d===setTimeout)return setTimeout(t,0);if((d===r||!d)&&setTimeout)return d=setTimeout,setTimeout(t,0);try{return d(t,0)}catch(e){try{return d.call(null,t,0)}catch(e){return d.call(this,t,0)}}}function o(){g&&h&&(g=!1,h.length?p=h.concat(p):m=-1,p.length&&s())}function s(){if(!g){var e=a(o);g=!0;for(var t=p.length;t;){for(h=p,p=[];++m<t;)h&&h[m].run();m=-1,t=p.length}h=null,g=!1,function(t){if(c===clearTimeout)return clearTimeout(t);if((c===i||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var d,c,f=t.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:r}catch(e){d=r}try{c="function"==typeof clearTimeout?clearTimeout:i}catch(e){c=i}}();var h,p=[],g=!1,m=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new l(e,t)),1!==p.length||g||a(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],19:[function(e,t,n){t.exports=e(20)},{20:20}],20:[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);u.call(this,e),d.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||o.nextTick(a,this)}function a(e){e.end()}var o=e(17),s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=r;var l=e(12);l.inherits=e(15);var u=e(22),d=e(24);l.inherits(r,u);for(var c=s(d.prototype),f=0;f<c.length;f++){var h=c[f];r.prototype[h]||(r.prototype[h]=d.prototype[h])}Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),r.prototype._destroy=function(e,t){this.push(null),this.end(),o.nextTick(t,e)}},{12:12,15:15,17:17,22:22,24:24}],21:[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);i.call(this,e)}t.exports=r;var i=e(23),a=e(12);a.inherits=e(15),a.inherits(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},{12:12,15:15,23:23}],22:[function(N,L,e){(function(m,e){"use strict";function t(e,t){e=e||{};var n=t instanceof(f=f||N(20));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,i=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(i||0===i)?i:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new M,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(D||(D=N(29).StringDecoder),this.decoder=new D(e.encoding),this.encoding=e.encoding)}function n(e){if(f=f||N(20),!(this instanceof n))return new n(e);this._readableState=new t(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),b.call(this)}function i(e,t,n,r,i){var a,o,s,l,u,d,c,f=e._readableState;null===t?(f.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,p(e)}}(e,f)):(i||(s=f,d=l=t,S.isBuffer(d)||d instanceof A||"string"==typeof l||void 0===l||s.objectMode||(u=new TypeError("Invalid non-string/buffer chunk")),a=u),a?e.emit("error",a):f.objectMode||t&&0<t.length?("string"==typeof t||f.objectMode||Object.getPrototypeOf(t)===S.prototype||(o=t,t=S.from(o)),r?f.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):h(e,f,t,!0):f.ended?e.emit("error",new Error("stream.push() after EOF")):(f.reading=!1,f.decoder&&!n?(t=f.decoder.write(t),f.objectMode||0!==t.length?h(e,f,t,!1):g(e,f)):h(e,f,t,!1))):r||(f.reading=!1));return!(c=f).ended&&(c.needReadable||c.length<c.highWaterMark||0===c.length)}function h(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&p(e)),g(e,t)}function a(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=(P<=(n=e)?n=P:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));var n}function p(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(I("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?E.nextTick(r,e):r(e))}function r(e){I("emit readable"),e.emit("readable"),v(e)}function g(e,t){t.readingMore||(t.readingMore=!0,E.nextTick(o,e,t))}function o(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(I("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function s(e){I("readable nexttick read 0"),e.read(0)}function l(e,t){t.reading||(I("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),v(e),t.flowing&&!t.reading&&e.read(0)}function v(e){var t=e._readableState;for(I("flow",t.flowing);t.flowing&&null!==e.read(););}function u(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):(r=e,i=t.buffer,a=t.decoder,r<i.head.data.length?(o=i.head.data.slice(0,r),i.head.data=i.head.data.slice(r)):o=r===i.head.data.length?i.shift():a?function(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var a=n.data,o=e>a.length?a.length:e;if(o===a.length?i+=a:i+=a.slice(0,e),0==(e-=o)){o===a.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n).data=a.slice(o);break}++r}return t.length-=r,i}(r,i):function(e,t){var n=S.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var a=r.data,o=e>a.length?a.length:e;if(a.copy(n,n.length-e,0,o),0==(e-=o)){o===a.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r).data=a.slice(o);break}++i}return t.length-=i,n}(r,i),n=o),n);var n,r,i,a,o}function d(e){var t=e._readableState;if(0<t.length)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,E.nextTick(c,t,e))}function c(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function y(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var E=N(17);L.exports=n;var f,_=N(28);n.ReadableState=t;var T=(N(13).EventEmitter,function(e,t){return e.listeners(t).length}),b=N(27),S=N(34).Buffer,A=e.Uint8Array||function(){},R=N(12);R.inherits=N(15);var w=N(9),I=void 0;I=w&&w.debuglog?w.debuglog("stream"):function(){};var D,M=N(25),C=N(26);R.inherits(n,b);var O=["error","close","destroy","pause","resume"];Object.defineProperty(n.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),n.prototype.destroy=C.destroy,n.prototype._undestroy=C.undestroy,n.prototype._destroy=function(e,t){this.push(null),t(e)},n.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=S.from(e,t),t=""),n=!0),i(this,e,t,!1,n)},n.prototype.unshift=function(e){return i(this,e,null,!0,!1)},n.prototype.isPaused=function(){return!1===this._readableState.flowing},n.prototype.setEncoding=function(e){return D||(D=N(29).StringDecoder),this._readableState.decoder=new D(e),this._readableState.encoding=e,this};var P=8388608;n.prototype.read=function(e){I("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return I("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?d(this):p(this),null;if(0===(e=a(e,t))&&t.ended)return 0===t.length&&d(this),null;var r,i=t.needReadable;return I("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&I("length less than watermark",i=!0),t.ended||t.reading?I("reading or ended",i=!1):i&&(I("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=a(n,t))),null===(r=0<e?u(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&d(this)),null!==r&&this.emit("data",r),r},n.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},n.prototype.pipe=function(n,e){function r(e,t){I("onunpipe"),e===d&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,I("cleanup"),n.removeListener("close",s),n.removeListener("finish",l),n.removeListener("drain",h),n.removeListener("error",o),n.removeListener("unpipe",r),d.removeListener("end",i),d.removeListener("end",u),d.removeListener("data",a),p=!0,!c.awaitDrain||n._writableState&&!n._writableState.needDrain||h())}function i(){I("onend"),n.end()}function a(e){I("ondata"),(g=!1)!==n.write(e)||g||((1===c.pipesCount&&c.pipes===n||1<c.pipesCount&&-1!==y(c.pipes,n))&&!p&&(I("false write response, pause",d._readableState.awaitDrain),d._readableState.awaitDrain++,g=!0),d.pause())}function o(e){I("onerror",e),u(),n.removeListener("error",o),0===T(n,"error")&&n.emit("error",e)}function s(){n.removeListener("finish",l),u()}function l(){I("onfinish"),n.removeListener("close",s),u()}function u(){I("unpipe"),d.unpipe(n)}var d=this,c=this._readableState;switch(c.pipesCount){case 0:c.pipes=n;break;case 1:c.pipes=[c.pipes,n];break;default:c.pipes.push(n)}c.pipesCount+=1,I("pipe count=%d opts=%j",c.pipesCount,e);var t=(!e||!1!==e.end)&&n!==m.stdout&&n!==m.stderr?i:u;c.endEmitted?E.nextTick(t):d.once("end",t),n.on("unpipe",r);var f,h=(f=d,function(){var e=f._readableState;I("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&T(f,"data")&&(e.flowing=!0,v(f))});n.on("drain",h);var p=!1,g=!1;return d.on("data",a),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?_(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(n,"error",o),n.once("close",s),n.once("finish",l),n.emit("pipe",d),c.flowing||(I("pipe resume"),d.resume()),n},n.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,n);return this}var o=y(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},n.prototype.addListener=n.prototype.on=function(e,t){var n=b.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&p(this):E.nextTick(s,this))}return n},n.prototype.resume=function(){var e,t,n=this._readableState;return n.flowing||(I("resume"),n.flowing=!0,e=this,(t=n).resumeScheduled||(t.resumeScheduled=!0,E.nextTick(l,e,t))),this},n.prototype.pause=function(){return I("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(I("pause"),this._readableState.flowing=!1,this.emit("pause")),this},n.prototype.wrap=function(t){var n=this,r=this._readableState,i=!1;for(var e in t.on("end",function(){if(I("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),t.on("data",function(e){I("wrapped data"),r.decoder&&(e=r.decoder.write(e)),r.objectMode&&null==e||!(r.objectMode||e&&e.length)||n.push(e)||(i=!0,t.pause())}),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));for(var a=0;a<O.length;a++)t.on(O[a],this.emit.bind(this,O[a]));return this._read=function(e){I("wrapped _read",e),i&&(i=!1,t.resume())},this},Object.defineProperty(n.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),n._fromList=u}).call(this,N(18),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{12:12,13:13,15:15,17:17,18:18,20:20,25:25,26:26,27:27,28:28,29:29,34:34,9:9}],23:[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);o.call(this,e),this._transformState={afterTransform:function(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,(n.writecb=null)!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",i)}function i(){var n=this;"function"==typeof this._flush?this._flush(function(e,t){a(n,e,t)}):a(this,null,null)}function a(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}t.exports=r;var o=e(20),s=e(12);s.inherits=e(15),s.inherits(r,o),r.prototype.push=function(e,t){return this._transformState.needTransform=!1,o.prototype.push.call(this,e,t)},r.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},r.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},r.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},r.prototype._destroy=function(e,t){var n=this;o.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},{12:12,15:15,20:20}],24:[function(S,A,e){(function(e,t){"use strict";function c(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}function v(){}function n(e,t){s=s||S(20),e=e||{};var n=t instanceof s;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,i=e.writableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(i||0===i)?i:a,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=(this.destroyed=!1)===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(c=n,c.writing=!1,c.writecb=null,c.length-=c.writelen,c.writelen=0,t)o=e,s=n,l=r,u=t,d=i,--s.pendingcb,l?(E.nextTick(d,u),E.nextTick(m,o,s),o._writableState.errorEmitted=!0,o.emit("error",u)):(d(u),o._writableState.errorEmitted=!0,o.emit("error",u),m(o,s));else{var a=g(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||p(e,n),r?_(f,e,n,a,i):f(e,n,a,i)}var o,s,l,u,d;var c}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new c(this)}function r(e){if(s=s||S(20),!(o.call(r,this)||this instanceof s))return new r(e);this._writableState=new n(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),u.call(this)}function y(e,t,n,r,i,a){if(!n){var o=(l=r,u=i,(s=t).objectMode||!1===s.decodeStrings||"string"!=typeof l||(l=T.from(l,u)),l);r!==o&&(n=!0,i="buffer",r=o)}var s,l,u,d=t.objectMode?1:r.length;t.length+=d;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var f=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:a,next:null},f?f.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else h(e,t,!1,d,r,i,a);return c}function h(e,t,n,r,i,a,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function f(e,t,n,r){var i,a;n||(i=e,0===(a=t).length&&a.needDrain&&(a.needDrain=!1,i.emit("drain"))),t.pendingcb--,r(),m(e,t)}function p(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var o=0,s=!0;n;)(i[o]=n).isBuf||(s=!1),n=n.next,o+=1;i.allBuffers=s,h(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new c(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,u=n.encoding,d=n.callback;if(h(e,t,!1,t.objectMode?1:l.length,l,u,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function g(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function a(t,n){t._final(function(e){n.pendingcb--,e&&t.emit("error",e),n.prefinished=!0,t.emit("prefinish"),m(t,n)})}function m(e,t){var n,r,i=g(t);return i&&(n=e,(r=t).prefinished||r.finalCalled||("function"==typeof n._final?(r.pendingcb++,r.finalCalled=!0,E.nextTick(a,n,r)):(r.prefinished=!0,n.emit("prefinish"))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),i}var E=S(17);A.exports=r;var s,_=!e.browser&&-1<["v0.10","v0.9."].indexOf(e.version.slice(0,5))?setImmediate:E.nextTick;r.WritableState=n;var i=S(12);i.inherits=S(15);var o,l={deprecate:S(37)},u=S(27),T=S(34).Buffer,b=t.Uint8Array||function(){},d=S(26);i.inherits(r,u),n.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(n.prototype,"buffer",{get:l.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(r,Symbol.hasInstance,{value:function(e){return!!o.call(this,e)||this===r&&e&&e._writableState instanceof n}})):o=function(e){return e instanceof this},r.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},r.prototype.write=function(e,t,n){var r,i,a,o,s,l,u,d,c,f,h,p=this._writableState,g=!1,m=!p.objectMode&&(r=e,T.isBuffer(r)||r instanceof b);return m&&!T.isBuffer(e)&&(h=e,e=T.from(h)),"function"==typeof t&&(n=t,t=null),m?t="buffer":t||(t=p.defaultEncoding),"function"!=typeof n&&(n=v),p.ended?(d=this,c=n,f=new Error("write after end"),d.emit("error",f),E.nextTick(c,f)):(m||(i=this,a=p,s=n,u=!(l=!0),null===(o=e)?u=new TypeError("May not write null values to stream"):"string"==typeof o||void 0===o||a.objectMode||(u=new TypeError("Invalid non-string/buffer chunk")),u&&(i.emit("error",u),E.nextTick(s,u),l=!1),l))&&(p.pendingcb++,g=y(this,p,m,e,t,n)),g},r.prototype.cork=function(){this._writableState.corked++},r.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||p(this,e))},r.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),r.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},r.prototype._writev=null,r.prototype.end=function(e,t,n){var r,i,a,o=this._writableState;"function"==typeof e?(n=e,t=e=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),o.corked&&(o.corked=1,this.uncork()),o.ending||o.finished||(r=this,a=n,(i=o).ending=!0,m(r,i),a&&(i.finished?E.nextTick(a):r.once("finish",a)),i.ended=!0,r.writable=!1)},Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),r.prototype.destroy=d.destroy,r.prototype._undestroy=d.undestroy,r.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,S(18),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{12:12,15:15,17:17,18:18,20:20,26:26,27:27,34:34,37:37}],25:[function(e,t,n){"use strict";var s=e(34).Buffer,r=e(9);t.exports=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return s.alloc(0);if(1===this.length)return this.head.data;for(var t=s.allocUnsafe(e>>>0),n=this.head,r=0;n;)i=n.data,a=t,o=r,i.copy(a,o),r+=n.data.length,n=n.next;var i,a,o;return t},e}(),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var e=r.inspect({length:this.length});return this.constructor.name+" "+e})},{34:34,9:9}],26:[function(e,t,n){"use strict";function a(e,t){e.emit("error",t)}var o=e(17);t.exports={destroy:function(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||o.nextTick(a,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(o.nextTick(a,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{17:17}],27:[function(e,t,n){t.exports=e(13).EventEmitter},{13:13}],28:[function(e,t,n){arguments[4][11][0].apply(n,arguments)},{11:11}],29:[function(e,t,n){"use strict";function r(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(f.isEncoding===h||!h(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=o,this.end=s,t=4;break;case"utf8":this.fillLast=i,t=4;break;case"base64":this.text=l,this.end=u,t=3;break;default:return this.write=d,void(this.end=c)}this.lastNeed=0,this.lastTotal=0,this.lastChar=f.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function i(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"?";if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,"?";if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,"?"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function o(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(55296<=r&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}function s(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function l(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function u(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function c(e){return e&&e.length?this.write(e):""}var f=e(34).Buffer,h=f.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};(n.StringDecoder=r).prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},r.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"?":t},r.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=a(t[r]);return 0<=i?(0<i&&(e.lastNeed=i-1),i):--r<n||-2===i?0:0<=(i=a(t[r]))?(0<i&&(e.lastNeed=i-2),i):--r<n||-2===i?0:0<=(i=a(t[r]))?(0<i&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},r.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{34:34}],30:[function(e,t,n){t.exports=e(31).PassThrough},{31:31}],31:[function(e,t,n){(((n=t.exports=e(22)).Stream=n).Readable=n).Writable=e(24),n.Duplex=e(20),n.Transform=e(23),n.PassThrough=e(21)},{20:20,21:21,22:22,23:23,24:24}],32:[function(e,t,n){t.exports=e(31).Transform},{31:31}],33:[function(e,t,n){t.exports=e(24)},{24:24}],34:[function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return o(e,t,n)}var a=e(10),o=a.Buffer;o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=a:(r(a,n),n.Buffer=i),r(o,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=o(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a.SlowBuffer(e)}},{10:10}],35:[function(e,t,n){function r(){d.call(this)}t.exports=r;var d=e(13).EventEmitter;e(15)(r,d),r.Readable=e(31),r.Writable=e(33),r.Duplex=e(19),r.Transform=e(32),r.PassThrough=e(30),(r.Stream=r).prototype.pipe=function(t,e){function n(e){t.writable&&!1===t.write(e)&&l.pause&&l.pause()}function r(){l.readable&&l.resume&&l.resume()}function i(){u||(u=!0,t.end())}function a(){u||(u=!0,"function"==typeof t.destroy&&t.destroy())}function o(e){if(s(),0===d.listenerCount(this,"error"))throw e}function s(){l.removeListener("data",n),t.removeListener("drain",r),l.removeListener("end",i),l.removeListener("close",a),l.removeListener("error",o),t.removeListener("error",o),l.removeListener("end",s),l.removeListener("close",s),t.removeListener("close",s)}var l=this;l.on("data",n),t.on("drain",r),t._isStdio||e&&!1===e.end||(l.on("end",i),l.on("close",a));var u=!1;return l.on("error",o),t.on("error",o),l.on("end",s),l.on("close",s),t.on("close",s),t.emit("pipe",l),t}},{13:13,15:15,19:19,30:30,31:31,32:32,33:33}],36:[function(e,t,n){function r(e){return e.toString(this.encoding)}function i(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function a(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var o=e(10).Buffer,s=o.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},l=n.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!s(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=i;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=r)}this.charBuffer=new o(6),this.charReceived=0,this.charLength=0};l.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(e=e.slice(n,e.length),!(55296<=(i=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))&&i<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var r=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,r),r-=this.charReceived);var i;r=(t+=e.toString(this.encoding,0,r)).length-1;if(55296<=(i=t.charCodeAt(r))&&i<=56319){var a=this.surrogateSize;return this.charLength+=a,this.charReceived+=a,this.charBuffer.copy(this.charBuffer,a,0,a),e.copy(this.charBuffer,0,0,a),t.substring(0,r)}return t},l.prototype.detectIncompleteChar=function(e){for(var t=3<=e.length?3:e.length;0<t;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},l.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t}},{10:10}],37:[function(e,t,n){(function(n){function r(e){try{if(!n.localStorage)return!1}catch(e){return!1}var t=n.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}t.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],38:[function(e,t,n){!function(e,a,_,s,o){function T(e){this.node=e}function b(){this.events=[],this.head=null,this.body=null}function S(){this.styling=null,this.layout=null}function A(){this.styles={}}function R(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function w(){this.regions={}}function l(e){this.kind=e,this.begin=null,this.end=null,this.styleAttrs=null,this.regionID=null,this.sets=null,this.timeContainer=null}function I(){l.call(this,"body")}function D(){l.call(this,"div")}function M(){l.call(this,"p")}function C(){l.call(this,"span"),this.space=null}function u(){l.call(this,"span"),this.space=null,this.text=null}function O(){l.call(this,"br")}function P(){this.id=null,this.begin=null,this.end=null,this.styleAttrs=null,this.sets=null}function N(){this.begin=null,this.end=null,this.qname=null,this.value=null}function i(e){return e&&"xml:id"in e.attributes&&e.attributes["xml:id"].value||null}function d(e){return e&&"style"in e.attributes?e.attributes.style.value.split(" "):[]}function c(e,t){var n={};if(null!==e)for(var r in e.attributes){var i=e.attributes[r].uri+" "+e.attributes[r].local,a=s.byQName[i];if(void 0!==a){var o=a.parse(e.attributes[r].value);null!==o?(n[i]=o,a===s.byName.zIndex&&m(t,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):x(t,"Cannot parse styling attribute "+i+" --\x3e "+e.attributes[r].value)}}return n}function f(e,t,n){for(var r in e.attributes)if(e.attributes[r].uri===t&&e.attributes[r].local===n)return e.attributes[r].value;return null}function h(e,t,n){var r,i=null;return null!==(r=/^(\d+(?:\.\d+)?)f$/.exec(n))?null!==t&&(i=parseFloat(r[1])/t):null!==(r=/^(\d+(?:\.\d+)?)t$/.exec(n))?null!==e&&(i=parseFloat(r[1])/e):null!==(r=/^(\d+(?:\.\d+)?)ms$/.exec(n))?i=parseFloat(r[1])/1e3:null!==(r=/^(\d+(?:\.\d+)?)s$/.exec(n))?i=parseFloat(r[1]):null!==(r=/^(\d+(?:\.\d+)?)h$/.exec(n))?i=3600*parseFloat(r[1]):null!==(r=/^(\d+(?:\.\d+)?)m$/.exec(n))?i=60*parseFloat(r[1]):null!==(r=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(n))?i=3600*parseInt(r[1])+60*parseInt(r[2])+parseFloat(r[3]):null!==(r=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(n))&&null!==t&&(i=3600*parseInt(r[1])+60*parseInt(r[2])+parseInt(r[3])+(null===r[4]?0:parseInt(r[4])/t)),i}function p(e,t,n,r){var i=t&&"seq"===t.timeContainer,a=0;n&&"begin"in n.attributes&&null===(a=h(e.tickRate,e.effectiveFrameRate,n.attributes.begin.value))&&(m(r,"Malformed begin value "+n.attributes.begin.value+" (using 0)"),a=0);var o=i?0:null;n&&"dur"in n.attributes&&null===(o=h(e.tickRate,e.effectiveFrameRate,n.attributes.dur.value))&&m(r,"Malformed dur value "+n.attributes.dur.value+" (ignoring)");var s=null;n&&"end"in n.attributes&&null===(s=h(e.tickRate,e.effectiveFrameRate,n.attributes.end.value))&&m(r,"Malformed end value (ignoring)");var l=0;if(t&&(l=i&&"contents"in t&&0<t.contents.length?t.contents[t.contents.length-1].end:t.begin||0),a+=l,null!==o)s=a+o;else{var u=t&&"end"in t?t.end:Number.POSITIVE_INFINITY;s=null!==s?s+l:u}return{begin:a,end:s}}function L(e,t,n){for(;0<t.styleRefs.length;){var r=t.styleRefs.pop();r in e.styles?(L(e,e.styles[r],n),k(e.styles[r].styleAttrs,t.styleAttrs)):x(n,"Non-existant style id referenced")}}function g(e,t,n,r){for(var i=t.length-1;0<=i;i--){var a=t[i];a in e.styles?k(e.styles[a].styleAttrs,n):x(r,"Non-existant style id referenced")}}function k(e,t){for(var n in e)n in t||(t[n]=e[n])}function m(e,t){if(e&&e.warn&&e.warn(t))throw t}function x(e,t){if(e&&e.error&&e.error(t))throw t}function F(e,t){throw e&&e.fatal&&e.fatal(t),t}function r(e,t){for(var n,r=0,i=e.length-1;r<=i;){var a=e[n=Math.floor((r+i)/2)];if(a<t)r=n+1;else{if(!(t<a))return{found:!0,index:n};i=n-1}}return{found:!1,index:r}}e.fromXML=function(e,h,p){var t=a.parser(!0,{xmlns:!0}),g=[],m=[],v=[],y=0,E=null;t.onclosetag=function(e){if(g[0]instanceof A)for(var t in g[0].styles)L(g[0],g[0].styles[t],h);else if(g[0]instanceof M||g[0]instanceof C){if(1<g[0].contents.length){var n,r=[g[0].contents[0]];for(n=1;n<g[0].contents.length;n++)g[0].contents[n]instanceof u&&r[r.length-1]instanceof u?r[r.length-1].text+=g[0].contents[n].text:r.push(g[0].contents[n]);g[0].contents=r}g[0]instanceof C&&1===g[0].contents.length&&g[0].contents[0]instanceof u&&null===g[0].text&&(g[0].text=g[0].contents[0].text,delete g[0].contents)}else g[0]instanceof T&&(g[0].node.uri===_.ns_tt&&"metadata"===g[0].node.local?y--:0<y&&p&&"onCloseTag"in p&&p.onCloseTag());v.shift(),m.shift(),g.shift()},t.ontext=function(e){if(void 0===g[0]);else if(g[0]instanceof C||g[0]instanceof M){var t=new u;t.initFromText(E,g[0],e,v[0],h),g[0].contents.push(t)}else g[0]instanceof T&&0<y&&p&&"onText"in p&&p.onText(e)},t.onopentag=function(e){var t=e.attributes["xml:space"];t?v.unshift(t.value):0===v.length?v.unshift("default"):v.unshift(v[0]);var n=e.attributes["xml:lang"];if(n?m.unshift(n.value):0===m.length?m.unshift(""):m.unshift(m[0]),e.uri===_.ns_tt)if("tt"===e.local)null!==E&&F("Two <tt> elements at ("+this.line+","+this.column+")"),(E=new b).initFromNode(e,h),g.unshift(E);else if("head"===e.local)g[0]instanceof b||F("Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),null!==E.head&&F("Second <head> element at ("+this.line+","+this.column+")"),E.head=new S,g.unshift(E.head);else if("styling"===e.local)g[0]instanceof S||F("Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),null!==E.head.styling&&F("Second <styling> element at ("+this.line+","+this.column+")"),E.head.styling=new A,g.unshift(E.head.styling);else if("style"===e.local){var r;g[0]instanceof A?((r=new R).initFromNode(e,h),r.id?E.head.styling.styles[r.id]=r:x("<style> element missing @id attribute"),g.unshift(r)):g[0]instanceof P?((r=new R).initFromNode(e,h),k(r.styleAttrs,g[0].styleAttrs),g.unshift(r)):F(h,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if("layout"===e.local)g[0]instanceof S||F(h,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),null!==E.head.layout&&F(h,"Second <layout> element at "+this.line+","+this.column+")"),E.head.layout=new w,g.unshift(E.head.layout);else if("region"===e.local){g[0]instanceof w||F(h,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var i=new P;i.initFromNode(E,e,h),!i.id||i.id in E.head.layout.regions?x(h,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):(E.head.layout.regions[i.id]=i,E._registerEvent(i)),g.unshift(i)}else if("body"===e.local){g[0]instanceof b||F(h,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==E.body&&F(h,"Second <body> element at "+this.line+","+this.column+")");var a=new I;a.initFromNode(E,e,h),E._registerEvent(a),E.body=a,g.unshift(a)}else if("div"===e.local){g[0]instanceof D||g[0]instanceof I||F(h,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var o=new D;o.initFromNode(E,g[0],e,h),E._registerEvent(o),g[0].contents.push(o),g.unshift(o)}else if("p"===e.local){g[0]instanceof D||F(h,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var s=new M;s.initFromNode(E,g[0],e,h),E._registerEvent(s),g[0].contents.push(s),g.unshift(s)}else if("span"===e.local){g[0]instanceof C||g[0]instanceof M||F(h,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var l=new C;l.initFromNode(E,g[0],e,v[0],h),E._registerEvent(l),g[0].contents.push(l),g.unshift(l)}else if("br"===e.local){g[0]instanceof C||g[0]instanceof M||F(h,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var u=new O;u.initFromNode(E,g[0],e,h),E._registerEvent(u),g[0].contents.push(u),g.unshift(u)}else if("set"===e.local){g[0]instanceof C||g[0]instanceof M||g[0]instanceof D||g[0]instanceof I||g[0]instanceof P||g[0]instanceof O||F(h,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var d=new N;d.initFromNode(E,g[0],e,h),E._registerEvent(d),g[0].sets.push(d),g.unshift(d)}else g.unshift(new T(e));else g.unshift(new T(e));if(g[0]instanceof T)if(e.uri===_.ns_tt&&"metadata"===e.local)y++;else if(0<y&&p&&"onOpenTag"in p){var c=[];for(var f in e.attributes)c[e.attributes[f].uri+" "+e.attributes[f].local]={uri:e.attributes[f].uri,local:e.attributes[f].local,value:e.attributes[f].value};p.onOpenTag(e.uri,e.local,c)}},t.write(e).close(),null!==E.head?delete E.head.styling:E.head=new S,null===E.head.layout&&(E.head.layout=new w);var n=!1;for(var r in E.head.layout.regions){n=!0;break}if(!n){var i=P.createDefaultRegion();E.head.layout.regions[i.id]=i}return E},b.prototype.initFromNode=function(e,t){this.cellResolution=function(e,t){var n=f(e,_.ns_ttp,"cellResolution"),r=15,i=32;if(null!==n){var a=/(\d+) (\d+)/.exec(n);null!==a?(i=parseInt(a[1]),r=parseInt(a[2])):m(t,"Malformed cellResolution value (using initial value instead)")}return{w:i,h:r}}(e,t);var n=function(e,t){var n,r=f(e,_.ns_ttp,"frameRate"),i=30;null!==r&&(null!==(n=/(\d+)/.exec(r))?i=parseInt(n[1]):m(t,"Malformed frame rate attribute (using initial value instead)"));var a=f(e,_.ns_ttp,"frameRateMultiplier"),o=1;null!==a&&(null!==(n=/(\d+) (\d+)/.exec(a))?o=parseInt(n[1])/parseInt(n[2]):m(t,"Malformed frame rate multiplier attribute (using initial value instead)"));var s=o*i,l=1,u=f(e,_.ns_ttp,"tickRate");return null===u?null!==r&&(l=s):null!==(n=/(\d+)/.exec(u))?l=parseInt(n[1]):m(t,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:s,tickRate:l}}(e,t);this.effectiveFrameRate=n.effectiveFrameRate,this.tickRate=n.tickRate,this.aspectRatio=function(e,t){var n=f(e,_.ns_ittp,"aspectRatio"),r=null;if(null!==n){var i=/(\d+) (\d+)/.exec(n);if(null!==i){var a=parseInt(i[1]),o=parseInt(i[2]);0!==a&&0!==o?r=a/o:x(t,"Illegal aspectRatio values (ignoring)")}else x(t,"Malformed aspectRatio attribute (ignoring)")}return r}(e,t);var r=f(e,_.ns_ttp,"timeBase");null!==r&&"media"!==r&&F(t,"Unsupported time base");var i=function(e,t){var n=f(e,_.ns_tts,"extent");if(null===n)return null;var r=n.split(" ");if(2!==r.length)return m(t,"Malformed extent (ignoring)"),null;var i=o.parseLength(r[0]),a=o.parseLength(r[1]);return a&&i?{h:a,w:i}:(m(t,"Malformed extent values (ignoring)"),null)}(e,t);this.pxDimensions=null===i?{h:480,w:640}:("px"===i.h.unit&&"px"===i.w.unit||F(t,"Extent on TT must be in px or absent"),{h:i.h.value,w:i.w.value})},b.prototype._registerEvent=function(e){if(!(e.end<=e.begin)){var t=r(this.events,e.begin);if(t.found||this.events.splice(t.index,0,e.begin),e.end!==Number.POSITIVE_INFINITY){var n=r(this.events,e.end);n.found||this.events.splice(n.index,0,e.end)}}},b.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},b.prototype.getMediaTimeEvents=function(){return this.events},R.prototype.initFromNode=function(e,t){this.id=i(e),this.styleAttrs=c(e,t),this.styleRefs=d(e)},l.prototype.initFromNode=function(e,t,n,r){var i,a,o,s,l=p(e,t,n,r);this.begin=l.begin,this.end=l.end,this.styleAttrs=c(n,r),null!==e.head&&null!==e.head.styling&&g(e.head.styling,d(n),this.styleAttrs,r),this.regionID=(s=n)&&"region"in s.attributes?s.attributes.region.value:"",this.sets=[],this.timeContainer=(a=r,(o=(i=n)&&"timeContainer"in i.attributes?i.attributes.timeContainer.value:null)&&"par"!==o?"seq"===o?"seq":(x(a,"Illegal value of timeContainer (assuming 'par')"),"par"):"par")},I.prototype.initFromNode=function(e,t,n){l.prototype.initFromNode.call(this,e,null,t,n),this.contents=[]},D.prototype.initFromNode=function(e,t,n,r){l.prototype.initFromNode.call(this,e,t,n,r),this.contents=[]},M.prototype.initFromNode=function(e,t,n,r){l.prototype.initFromNode.call(this,e,t,n,r),this.contents=[]},C.prototype.initFromNode=function(e,t,n,r,i){l.prototype.initFromNode.call(this,e,t,n,i),this.space=r,this.contents=[]},u.prototype.initFromText=function(e,t,n,r,i){l.prototype.initFromNode.call(this,e,t,null,i),this.text=n,this.space=r},O.prototype.initFromNode=function(e,t,n,r){l.prototype.initFromNode.call(this,e,t,n,r)},P.createDefaultRegion=function(){var e=new P;return e.id="",e.begin=0,e.end=Number.POSITIVE_INFINITY,e.styleAttrs={},e.sets=[],e},P.prototype.initFromNode=function(e,t,n){this.id=i(t);var r=p(e,null,t,n);this.begin=r.begin,this.end=r.end,this.styleAttrs=c(t,n),this.sets=[],null!==e.head&&null!==e.head.styling&&g(e.head.styling,d(t),this.styleAttrs,n)},N.prototype.initFromNode=function(e,t,n,r){var i=p(e,t,n,r);this.begin=i.begin,this.end=i.end;var a=c(n,r);for(var o in a){if(this.qname){x(r,"More than one style specified on set");break}this.qname=o,this.value=a[o]}}}(void 0===n?this.imscDoc={}:n,"undefined"==typeof sax?e(45):sax,"undefined"==typeof imscNames?e(42):imscNames,"undefined"==typeof imscStyles?e(43):imscStyles,"undefined"==typeof imscUtils?e(44):imscUtils)},{42:42,43:43,44:44,45:45}],39:[function(e,t,n){!function(e,t,E){function _(e,t,n){var r;if("region"===n.kind?(r=document.createElement("div")).style.position="absolute":"body"===n.kind?r=document.createElement("div"):"div"===n.kind?r=document.createElement("div"):"p"===n.kind?r=document.createElement("p"):"span"===n.kind?r=document.createElement("span"):"br"===n.kind&&(r=document.createElement("br")),r){for(var i in r.style.margin="0",S){var a=S[i],o=n.styleAttrs[a.qname];void 0!==o&&null!==a.map&&a.map(e,r,n,o)}var s=r,l=n.styleAttrs[E.byName.multiRowAlign.qname];if(l&&"auto"!==l){var u=document.createElement("span");u.style.display="inline-block",u.style.textAlign=l,r.appendChild(u),s=u,e.mra=l}var d=n.styleAttrs[E.byName.linePadding.qname];if(d&&0<d&&(e.lp=d),"span"===n.kind&&n.text)if(e.lp||e.mra)for(var c=0;c<n.text.length;c++){var f=document.createElement("span");f.textContent=n.text.charAt(c),r.appendChild(f)}else r.textContent=n.text;for(var h in t.appendChild(r),n.contents)_(e,s,n.contents[h]);if((e.lp||e.mra)&&"p"===n.kind){var p=[];(function e(t,n,r){if(0===t.childElementCount)n.push({element:t,bgcolor:r});else for(var i=t.style.backgroundColor||r,a=t.firstChild;a;)a.nodeType===Node.ELEMENT_NODE&&e(a,n,i),a=a.nextSibling})(s,p,"red"),function(e,t){for(var n=null,r=!0,i=!1,a=0;a<=e.length;a++)if(a===e.length||"br"!==e[a].element.localName){if(null===n||a===e.length||!b(e[a].element.getBoundingClientRect().top,e[a].element.getBoundingClientRect().height,e[n].element.getBoundingClientRect().top,e[n].element.getBoundingClientRect().height)){if(t&&!r){for(;0<=--a;)if(0!==e[a].element.getBoundingClientRect().width){if(d=e[a].element,c=e[a].color,f=t,d.style.paddingRight=f+"px",d.style.backgroundColor=c,0!==e[a].element.getBoundingClientRect().width&&b(e[a].element.getBoundingClientRect().top,e[a].element.getBoundingClientRect().height,e[n].element.getBoundingClientRect().top,e[n].element.getBoundingClientRect().height))break;e[a].element.style.paddingRight=null}r=!0;continue}if(a!==e.length&&null!==n&&!i){var o=document.createElement("br");e[a].element.parentElement.insertBefore(o,e[a].element),e.splice(a,0,{element:o}),i=!0;continue}if(a!==e.length&&t)for(;a<e.length;a++)if(0!==e[a].element.getBoundingClientRect().width){s=e[a].element,l=e[a].color,u=t,s.style.paddingLeft=u+"px",s.style.backgroundColor=l;break}i=r=!1,n=a}}else i=!0;var s,l,u;var d,c,f}(p,e.lp*e.h),e.lp&&delete e.lp,e.mra&&delete e.mra}if("region"===n.kind){var g=[];!function e(t,n){if(0===t.childElementCount&&"span"===t.localName){var r=t.getBoundingClientRect();0!==n.length&&b(r.top,r.height,n[n.length-1].top,n[n.length-1].height)?(r.top<n[n.length-1].top&&(n[n.length-1].top=r.top),r.height>n[n.length-1].height&&(n[n.length-1].height=r.height),n[n.length-1].text+=t.textContent):n.push({top:r.top,height:r.height,text:t.textContent})}else for(var i=t.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&e(i,n),i=i.nextSibling}(s,g);var m=n.styleAttrs[E.byName.writingMode.qname];if(("lrtb"===m||"lr"===m||"rltb"===m||"rl"===m)&&e.enableRollUp&&0<n.contents.length&&"after"===n.styleAttrs[E.byName.displayAlign.qname]){var v=new T(""===n.id?"_":n.id,g);if(e.currentISDState[v.id]=v,e.previousISDState&&v.id in e.previousISDState&&0<e.previousISDState[v.id].plist.length&&1<v.plist.length&&v.plist[v.plist.length-2].text===e.previousISDState[v.id].plist[e.previousISDState[v.id].plist.length-1].text){var y=r.firstElementChild;y.style.bottom="-"+v.plist[v.plist.length-1].height+"px",y.style.transition="transform 0.4s",y.style.position="relative",y.style.transform="translateY(-"+v.plist[v.plist.length-1].height+"px)"}}}}else!function(e,t){if(e&&e.error&&e.error(t))throw t}(e.errorHandler,"Error processing ISD element kind: "+n.kind)}function T(e,t){this.id=e,this.plist=t}function b(e,t,n,r){return e+t<n+r&&n<e||n+r<=e+t&&e<=n}function n(e,t){this.qname=e,this.map=t}e.render=function(e,t,n,r,i,a,o,s,l){var u=r||t.clientHeight,d=i||t.clientWidth;if(null!==e.aspectRatio){var c=u*e.aspectRatio;d<c?u=Math.round(d/e.aspectRatio):d=c}var f=document.createElement("div");f.style.position="relative",f.style.width=d+"px",f.style.height=u+"px",f.style.margin="auto",f.style.top=0,f.style.bottom=0,f.style.left=0,f.style.right=0,f.style.zIndex=0;var h={h:u,w:d,regionH:null,regionW:null,imgResolver:n,displayForcedOnlyMode:a||!1,isd:e,errorHandler:o,previousISDState:s,enableRollUp:l||!1,currentISDState:{}};for(var p in t.appendChild(f),e.contents)_(h,f,e.contents[p]);return h.currentISDState};var S=[new n("http://www.w3.org/ns/ttml#styling backgroundColor",function(e,t,n,r){t.style.backgroundColor="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")"}),new n("http://www.w3.org/ns/ttml#styling color",function(e,t,n,r){t.style.color="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")"}),new n("http://www.w3.org/ns/ttml#styling direction",function(e,t,n,r){t.style.direction=r}),new n("http://www.w3.org/ns/ttml#styling display",function(e,t,n,r){}),new n("http://www.w3.org/ns/ttml#styling displayAlign",function(e,t,n,r){t.style.display="flex",t.style.flexDirection="column","before"===r?t.style.justifyContent="flex-start":"center"===r?t.style.justifyContent="center":"after"===r&&(t.style.justifyContent="flex-end")}),new n("http://www.w3.org/ns/ttml#styling extent",function(e,t,n,r){e.regionH=r.h*e.h,e.regionW=r.w*e.w;var i=0,a=0,o=n.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];o&&(i=(o[0]+o[2])*e.h,a=(o[1]+o[3])*e.w),t.style.height=e.regionH-i+"px",t.style.width=e.regionW-a+"px"}),new n("http://www.w3.org/ns/ttml#styling fontFamily",function(e,t,n,r){var i=[];for(var a in r)"monospaceSerif"===r[a]?(i.push("Courier New"),i.push('"Liberation Mono"'),i.push("Courier"),i.push("monospace")):"proportionalSansSerif"===r[a]?(i.push("Arial"),i.push("Helvetica"),i.push('"Liberation Sans"'),i.push("sans-serif")):"monospace"===r[a]?i.push("monospace"):"sansSerif"===r[a]?i.push("sans-serif"):"serif"===r[a]?i.push("serif"):"monospaceSansSerif"===r[a]?(i.push("Consolas"),i.push("monospace")):"proportionalSerif"===r[a]?i.push("serif"):i.push(r[a]);t.style.fontFamily=i.join(",")}),new n("http://www.w3.org/ns/ttml#styling fontSize",function(e,t,n,r){t.style.fontSize=r*e.h+"px"}),new n("http://www.w3.org/ns/ttml#styling fontStyle",function(e,t,n,r){t.style.fontStyle=r}),new n("http://www.w3.org/ns/ttml#styling fontWeight",function(e,t,n,r){t.style.fontWeight=r}),new n("http://www.w3.org/ns/ttml#styling lineHeight",function(e,t,n,r){t.style.lineHeight="normal"===r?"normal":r*e.h+"px"}),new n("http://www.w3.org/ns/ttml#styling opacity",function(e,t,n,r){t.style.opacity=r}),new n("http://www.w3.org/ns/ttml#styling origin",function(e,t,n,r){t.style.top=r.h*e.h+"px",t.style.left=r.w*e.w+"px"}),new n("http://www.w3.org/ns/ttml#styling overflow",function(e,t,n,r){t.style.overflow=r}),new n("http://www.w3.org/ns/ttml#styling padding",function(e,t,n,r){var i=[];i[0]=r[0]*e.h+"px",i[1]=r[3]*e.w+"px",i[2]=r[2]*e.h+"px",i[3]=r[1]*e.w+"px",t.style.padding=i.join(" ")}),new n("http://www.w3.org/ns/ttml#styling showBackground",null),new n("http://www.w3.org/ns/ttml#styling textAlign",function(e,t,n,r){var i,a=n.styleAttrs[E.byName.direction.qname];i="start"===r?"rtl"===a?"right":"left":"end"===r?"rtl"===a?"left":"right":r,t.style.textAlign=i}),new n("http://www.w3.org/ns/ttml#styling textDecoration",function(e,t,n,r){t.style.textDecoration=r.join(" ").replace("lineThrough","line-through")}),new n("http://www.w3.org/ns/ttml#styling textOutline",function(e,t,n,r){t.style.textShadow="none"===r?"":"rgba("+r.color[0].toString()+","+r.color[1].toString()+","+r.color[2].toString()+","+(r.color[3]/255).toString()+") 0px 0px "+r.thickness*e.h+"px"}),new n("http://www.w3.org/ns/ttml#styling unicodeBidi",function(e,t,n,r){var i;i="bidiOverride"===r?"bidi-override":r,t.style.unicodeBidi=i}),new n("http://www.w3.org/ns/ttml#styling visibility",function(e,t,n,r){t.style.visibility=r}),new n("http://www.w3.org/ns/ttml#styling wrapOption",function(e,t,n,r){"wrap"===r?"preserve"===n.space?t.style.whiteSpace="pre-wrap":t.style.whiteSpace="normal":"preserve"===n.space?t.style.whiteSpace="pre":t.style.whiteSpace="noWrap"}),new n("http://www.w3.org/ns/ttml#styling writingMode",function(e,t,n,r){"lrtb"===r||"lr"===r?t.style.writingMode="horizontal-tb":"rltb"===r||"rl"===r?t.style.writingMode="horizontal-tb":"tblr"===r?t.style.writingMode="vertical-lr":"tbrl"!==r&&"tb"!==r||(t.style.writingMode="vertical-rl")}),new n("http://www.w3.org/ns/ttml#styling zIndex",function(e,t,n,r){t.style.zIndex=r}),new n("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt backgroundImage",function(e,t,n,r){if(null!==e.imgResolver&&null!==r){var i=document.createElement("img"),a=e.imgResolver(r,i);a&&(i.src=a),i.height=e.regionH,i.width=e.regionW,t.appendChild(i)}}),new n("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(e,t,n,r){e.displayForcedOnlyMode&&!1===r&&(t.style.visibility="hidden")})],r={};for(var i in S)r[S[i].qname]=S[i]}(void 0===n?this.imscHTML={}:n,"undefined"==typeof imscNames?e(42):imscNames,"undefined"==typeof imscStyles?e(43):imscStyles)},{42:42,43:43}],40:[function(e,t,n){!function(e,t,N){function L(e,t,n,r,i,a,o,s){if(t<o.begin||t>=o.end)return null;var l="regionID"in o&&""!==o.regionID?o.regionID:a;if(null!==i&&l!==n.id&&(!("contents"in o)||"contents"in o&&0===o.contents.length||""!==l))return null;var u=new k(o);for(var d in o.sets)t<o.sets[d].begin||t>=o.sets[d].end||(u.styleAttrs[o.sets[d].qname]=o.sets[d].value);var c,f={};for(var h in u.styleAttrs)if(f[h]=!0,h===N.byName.writingMode.qname&&!(N.byName.direction.qname in u.styleAttrs)){var p=u.styleAttrs[h];"lrtb"===p||"lr"===p?u.styleAttrs[N.byName.direction.qname]="ltr":"rltb"!==p&&"rl"!==p||(u.styleAttrs[N.byName.direction.qname]="rtl")}if(null!==i)for(var g in N.all){var m=N.all[g];if(m.qname===N.byName.textDecoration.qname){var v=i.styleAttrs[m.qname],y=u.styleAttrs[m.qname],E=[];void 0===y?E=v:-1===y.indexOf("none")?((-1===y.indexOf("noUnderline")&&-1!==v.indexOf("underline")||-1!==y.indexOf("underline"))&&E.push("underline"),(-1===y.indexOf("noLineThrough")&&-1!==v.indexOf("lineThrough")||-1!==y.indexOf("lineThrough"))&&E.push("lineThrough"),(-1===y.indexOf("noOverline")&&-1!==v.indexOf("overline")||-1!==y.indexOf("overline"))&&E.push("overline")):E.push("none"),u.styleAttrs[m.qname]=E}else m.inherit&&m.qname in i.styleAttrs&&!(m.qname in u.styleAttrs)&&(u.styleAttrs[m.qname]=i.styleAttrs[m.qname])}for(var _ in N.all){var T=N.all[_];T.qname in u.styleAttrs||("region"===u.kind||!1===T.inherit&&null!==T.initial)&&(u.styleAttrs[T.qname]=T.parse(T.initial),f[T.qname]=!0)}for(var b in N.all){var S=N.all[b];if(S.qname in f&&null!==S.compute){var A=S.compute(e,i,u,u.styleAttrs[S.qname]);null!==A?u.styleAttrs[S.qname]=A:x(s,"Style '"+S.qname+"' on element '"+u.kind+"' cannot be computed")}}if("none"===u.styleAttrs[N.byName.display.qname])return null;for(var R in null===i?c=null===r?[]:[r]:"contents"in o&&(c=o.contents),c){var w=L(e,t,n,r,u,l,c[R]);null!==w&&u.contents.push(w.element)}for(var I in u.styleAttrs)-1===N.byQName[I].applies.indexOf(u.kind)&&delete u.styleAttrs[I];if("span"===u.kind&&u.text&&"default"===u.space){var D=u.text.replace(/\s+/g," ");u.text=D}if("p"===u.kind){var M=[];!function e(t,n){if("contents"in t)for(var r in t.contents)e(t.contents[r],n);else n.push(t)}(u,M);for(var C=0,O="after_br",P=0;;)if("after_br"===O)C>=M.length||"br"===M[C].kind?(O="before_br",P=C,C--):("preserve"!==M[C].space&&(M[C].text=M[C].text.replace(/^\s+/g,"")),0<M[C].text.length?(O="looking_br",C++):M.splice(C,1));else if("before_br"===O)if(C<0||"br"===M[C].kind){if(O="after_br",(C=P+1)>=M.length)break}else if("preserve"!==M[C].space&&(M[C].text=M[C].text.replace(/\s+$/g,"")),0<M[C].text.length){if(O="after_br",(C=P+1)>=M.length)break}else M.splice(C,1),C--;else C>=M.length||"br"===M[C].kind?(O="before_br",P=C,C--):C++;!function e(t){if("br"===t.kind)return!1;if("text"in t)return 0===t.text.length;if("contents"in t){for(var n=t.contents.length;n--;)e(t.contents[n])&&t.contents.splice(n,1);return 0===t.contents.length}}(u)}return"div"===u.kind&&N.byName.backgroundImage.qname in u.styleAttrs||"br"===u.kind||"contents"in u&&0<u.contents.length||"span"===u.kind&&null!==u.text||"region"===u.kind&&"always"===u.styleAttrs[N.byName.showBackground.qname]?{region_id:l,element:u}:null}function o(e){this.contents=[],this.aspectRatio=e.aspectRatio}function k(e){for(var t in this.kind=e.kind||"region",e.id&&(this.id=e.id),this.styleAttrs={},e.styleAttrs)this.styleAttrs[t]=e.styleAttrs[t];"text"in e?this.text=e.text:"br"!==e.kind&&(this.contents=[]),"space"in e&&(this.space=e.space)}function x(e,t){if(e&&e.error&&e.error(t))throw t}e.generateISD=function(e,t,n){var r=new o(e);for(var i in e.head.layout.regions){var a=L(e,t,e.head.layout.regions[i],e.body,null,"",e.head.layout.regions[i],n);null!==a&&r.contents.push(a.element)}return r}}(void 0===n?this.imscISD={}:n,"undefined"==typeof imscNames?e(42):imscNames,"undefined"==typeof imscStyles?e(43):imscStyles)},{42:42,43:43}],41:[function(e,t,n){n.generateISD=e(40).generateISD,n.fromXML=e(38).fromXML,n.renderHTML=e(39).render},{38:38,39:39,40:40}],42:[function(e,t,n){var r;(r=void 0===n?this.imscNames={}:n).ns_tt="http://www.w3.org/ns/ttml",r.ns_tts="http://www.w3.org/ns/ttml#styling",r.ns_ttp="http://www.w3.org/ns/ttml#parameter",r.ns_xml="http://www.w3.org/XML/1998/namespace",r.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",r.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",r.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",r.ns_ebutts="urn:ebu:tt:style"},{}],43:[function(e,t,n){!function(l,e,a){function t(e,t,n,r,i,a,o,s){this.name=t,this.ns=e,this.qname=e+" "+t,this.inherit=i,this.animatable=a,this.initial=n,this.applies=r,this.parse=o,this.compute=s}for(var n in l.all=[new t(e.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,a.parseColor,null),new t(e.ns_tts,"color","white",["span"],!0,!0,a.parseColor,null),new t(e.ns_tts,"direction","ltr",["p","span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(e){return e},null),new t(e.ns_tts,"displayAlign","before",["region"],!1,!0,function(e){return e},null),new t(e.ns_tts,"extent","auto",["tt","region"],!1,!0,function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var n=a.parseLength(t[0]),r=a.parseLength(t[1]);return r&&n?{h:r,w:n}:null},function(e,t,n,r){var i,a;if("auto"===r)i=1;else if("%"===r.h.unit)i=r.h.value/100;else{if("px"!==r.h.unit)return null;i=r.h.value/e.pxDimensions.h}if("auto"===r)a=1;else if("%"===r.w.unit)a=r.w.value/100;else{if("px"!==r.w.unit)return null;a=r.w.value/e.pxDimensions.w}return{h:i,w:a}}),new t(e.ns_tts,"fontFamily","default",["span"],!0,!0,function(e){var t=e.split(","),n=[];for(var r in t)"'"!==t[r].charAt(0)&&'"'!==t[r].charAt(0)&&"default"===t[r]?n.push("monospaceSerif"):n.push(t[r]);return n},null),new t(e.ns_tts,"fontSize","1c",["span"],!0,!0,a.parseLength,function(e,t,n,r){var i;if("%"===r.unit)i=null!==t?t.styleAttrs[l.byName.fontSize.qname]*r.value/100:r.value/100/e.cellResolution.h;else if("em"===r.unit)i=null!==t?t.styleAttrs[l.byName.fontSize.qname]*r.value:r.value/e.cellResolution.h;else if("c"===r.unit)i=r.value/e.cellResolution.h;else{if("px"!==r.unit)return null;i=r.value/e.pxDimensions.h}return i}),new t(e.ns_tts,"fontStyle","normal",["span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"fontWeight","normal",["span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"lineHeight","normal",["p"],!0,!0,function(e){return"normal"===e?e:a.parseLength(e)},function(e,t,n,r){var i;if("normal"===r)i=r;else if("%"===r.unit)i=n.styleAttrs[l.byName.fontSize.qname]*r.value/100;else if("em"===r.unit)i=n.styleAttrs[l.byName.fontSize.qname]*r.value;else if("c"===r.unit)i=r.value/e.cellResolution.h;else{if("px"!==r.unit)return null;i=r.value/e.pxDimensions.h}return i}),new t(e.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new t(e.ns_tts,"origin","auto",["region"],!1,!0,function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var n=a.parseLength(t[0]),r=a.parseLength(t[1]);return r&&n?{h:r,w:n}:null},function(e,t,n,r){var i,a;if("auto"===r)i=0;else if("%"===r.h.unit)i=r.h.value/100;else{if("px"!==r.h.unit)return null;i=r.h.value/e.pxDimensions.h}if("auto"===r)a=0;else if("%"===r.w.unit)a=r.w.value/100;else{if("px"!==r.w.unit)return null;a=r.w.value/e.pxDimensions.w}return{h:i,w:a}}),new t(e.ns_tts,"overflow","hidden",["region"],!1,!0,function(e){return e},null),new t(e.ns_tts,"padding","0px",["region"],!1,!0,function(e){var t=e.split(" ");if(4<t.length)return null;var n=[];for(var r in t){var i=a.parseLength(t[r]);if(!i)return null;n.push(i)}return n},function(e,t,n,r){var i;if(1===r.length)i=[r[0],r[0],r[0],r[0]];else if(2===r.length)i=[r[0],r[1],r[0],r[1]];else if(3===r.length)i=[r[0],r[1],r[2],r[1]];else{if(4!==r.length)return null;i=[r[0],r[1],r[2],r[3]]}var a=n.styleAttrs[l.byName.writingMode.qname];if("lrtb"===a||"lr"===a)i=[i[0],i[3],i[2],i[1]];else if("rltb"===a||"rl"===a)i=[i[0],i[1],i[2],i[3]];else if("tblr"===a)i=[i[3],i[0],i[1],i[2]];else{if("tbrl"!==a&&"tb"!==a)return null;i=[i[3],i[2],i[1],i[0]]}var o=[];for(var s in i)if(0===i[s].value)o[s]=0;else if("%"===i[s].unit)o[s]="0"===s||"2"===s?n.styleAttrs[l.byName.extent.qname].h*i[s].value/100:n.styleAttrs[l.byName.extent.qname].w*i[s].value/100;else if("em"===i[s].unit)o[s]=n.styleAttrs[l.byName.fontSize.qname]*i[s].value;else if("c"===i[s].unit)o[s]=i[s].value/e.cellResolution.h;else{if("px"!==i[s].unit)return null;o[s]=i[s].value/e.pxDimensions.h}return o}),new t(e.ns_tts,"showBackground","always",["region"],!1,!0,function(e){return e},null),new t(e.ns_tts,"textAlign","start",["p"],!0,!0,function(e){return e},function(e,t,n,r){return"left"===r?"start":"right"===r?"end":r}),new t(e.ns_tts,"textDecoration","none",["span"],!0,!0,function(e){return e.split(" ")},null),new t(e.ns_tts,"textOutline","none",["span"],!0,!0,function(e){if("none"===e)return e;var t={},n=e.split(" ");if(0===n.length||2<n.length)return null;var r=a.parseColor(n[0]);if(null!==(t.color=r)&&n.shift(),1!==n.length)return null;var i=a.parseLength(n[0]);return i?(t.thickness=i,t):null},function(e,t,n,r){if("none"===r)return r;var i={};if(null===r.color?i.color=n.styleAttrs[l.byName.color.qname]:i.color=r.color,"%"===r.thickness.unit)i.thickness=n.styleAttrs[l.byName.fontSize.qname]*r.thickness.value/100;else if("em"===r.thickness.unit)i.thickness=n.styleAttrs[l.byName.fontSize.qname]*r.thickness.value;else if("c"===r.thickness.unit)i.thickness=r.thickness.value/e.cellResolution.h;else{if("px"!==r.thickness.unit)return null;i.thickness=r.thickness.value/e.pxDimensions.h}return i}),new t(e.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(e){return e},null),new t(e.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(e){return e},null),new t(e.ns_tts,"zIndex","auto",["region"],!1,!0,function(e){var t;return"auto"===e?t=e:(t=parseInt(e),isNaN(t)&&(t=null)),t},null),new t(e.ns_ebutts,"linePadding","0c",["p"],!0,!1,a.parseLength,function(e,t,n,r){return"c"===r.unit?r.value/e.cellResolution.h:null}),new t(e.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(e){return e},null),new t(e.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(e){return e},null),new t(e.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(e){return"true"===e},null)],l.byQName={},l.all)l.byQName[l.all[n].qname]=l.all[n];for(var r in l.byName={},l.all)l.byName[l.all[r].name]=l.all[r]}(void 0===n?this.imscStyles={}:n,"undefined"==typeof imscNames?e(42):imscNames,"undefined"==typeof imscUtils?e(44):imscUtils)},{42:42,44:44}],44:[function(e,t,n){!function(e){var r=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,i=/rgb\((\d+),(\d+),(\d+)\)/,a=/rgba\((\d+),(\d+),(\d+),(\d+)\)/,o={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};e.parseColor=function(e){var t,n=null;return e in o?n=o[e]:null!==(t=r.exec(e))?n=[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),void 0!==t[4]?parseInt(t[4],16):255]:null!==(t=i.exec(e))?n=[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),255]:null!==(t=a.exec(e))&&(n=[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseInt(t[4])]),n};var s=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%)$/;e.parseLength=function(e){var t,n=null;return null!==(t=s.exec(e))&&(n={value:parseFloat(t[1]),unit:t[2]}),n}}(void 0===n?this.imscUtils={}:n)},{}],45:[function(Y,e,t){(function(K){!function(h){function r(e,t){if(!(this instanceof r))return new r(e,t);var n=this;(function(e){for(var t=0,n=M.length;t<n;t++)e[M[t]]=""})(n),n.q=n.c="",n.bufferCheckPosition=h.MAX_BUFFER_LENGTH,n.opt=t||{},n.opt.lowercase=n.opt.lowercase||n.opt.lowercasetags,n.looseCase=n.opt.lowercase?"toLowerCase":"toUpperCase",n.tags=[],n.closed=n.closedRoot=n.sawRoot=!1,n.tag=n.error=null,n.strict=!!e,n.noscript=!(!e&&!n.opt.noscript),n.state=G.BEGIN,n.strictEntities=n.opt.strictEntities,n.ENTITIES=n.strictEntities?Object.create(h.XML_ENTITIES):Object.create(h.ENTITIES),n.attribList=[],n.opt.xmlns&&(n.ns=Object.create(d)),n.trackPosition=!1!==n.opt.position,n.trackPosition&&(n.position=n.line=n.column=0),a(n,"onready")}function i(e,t){if(!(this instanceof i))return new i(e,t);o.apply(this),this._parser=new r(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,s.forEach(function(t){Object.defineProperty(n,"on"+t,{get:function(){return n._parser["on"+t]},set:function(e){if(!e)return n.removeAllListeners(t),n._parser["on"+t]=e;n.on(t,e)},enumerable:!0,configurable:!1})})}function e(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}function p(e,t){return n=e,"[object RegExp]"===Object.prototype.toString.call(n)?!!t.match(e):e[t];var n}function g(e,t){return!p(e,t)}function a(e,t,n){e[t]&&e[t](n)}function m(e,t,n){e.textNode&&v(e),a(e,t,n)}function v(e){e.textNode=y(e.opt,e.textNode),e.textNode&&a(e,"ontext",e.textNode),e.textNode=""}function y(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function E(e,t){return v(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,a(e,"onerror",t),e}function _(e){return e.sawRoot&&!e.closedRoot&&T(e,"Unclosed root tag"),e.state!==G.BEGIN&&e.state!==G.BEGIN_WHITESPACE&&e.state!==G.TEXT&&E(e,"Unexpected end"),v(e),e.c="",e.closed=!0,a(e,"onend"),r.call(e,e.strict,e.opt),e}function T(e,t){if("object"!=typeof e||!(e instanceof r))throw new Error("bad call to strictFail");e.strict&&E(e,t)}function b(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,m(e,"onopentagstart",n)}function S(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),r=n[0],i=n[1];return t&&"xmlns"===e&&(r="xmlns",i=""),{prefix:r,local:i}}function A(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=S(e.attribName,!0),n=t.prefix,r=t.local;if("xmlns"===n)if("xml"===r&&e.attribValue!==l)T(e,"xml: prefix must be bound to "+l+"\nActual: "+e.attribValue);else if("xmlns"===r&&e.attribValue!==u)T(e,"xmlns: prefix must be bound to "+u+"\nActual: "+e.attribValue);else{var i=e.tag,a=e.tags[e.tags.length-1]||e;i.ns===a.ns&&(i.ns=Object.create(a.ns)),i.ns[r]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,m(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function R(t,e){if(t.opt.xmlns){var n=t.tag,r=S(t.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(T(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),n.uri=r.prefix);var i=t.tags[t.tags.length-1]||t;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach(function(e){m(t,"onopennamespace",{prefix:e,uri:n.ns[e]})});for(var a=0,o=t.attribList.length;a<o;a++){var s=t.attribList[a],l=s[0],u=s[1],d=S(l,!0),c=d.prefix,f=d.local,h=""===c?"":n.ns[c]||"",p={name:l,value:u,prefix:c,local:f,uri:h};c&&"xmlns"!==c&&!h&&(T(t,"Unbound namespace prefix: "+JSON.stringify(c)),p.uri=c),t.tag.attributes[l]=p,m(t,"onattribute",p)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),m(t,"onopentag",t.tag),e||(t.noscript||"script"!==t.tagName.toLowerCase()?t.state=G.TEXT:t.state=G.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function w(n){if(!n.tagName)return T(n,"Weird empty close tag."),n.textNode+="</>",void(n.state=G.TEXT);if(n.script){if("script"!==n.tagName)return n.script+="</"+n.tagName+">",n.tagName="",void(n.state=G.SCRIPT);m(n,"onscript",n.script),n.script=""}var e=n.tags.length,t=n.tagName;n.strict||(t=t[n.looseCase]());for(var r=t;e--&&n.tags[e].name!==r;)T(n,"Unexpected close tag");if(e<0)return T(n,"Unmatched closing tag: "+n.tagName),n.textNode+="</"+n.tagName+">",void(n.state=G.TEXT);n.tagName=t;for(var i=n.tags.length;i-- >e;){var a=n.tag=n.tags.pop();n.tagName=n.tag.name,m(n,"onclosetag",n.tagName);var o={};for(var s in a.ns)o[s]=a.ns[s];var l=n.tags[n.tags.length-1]||n;n.opt.xmlns&&a.ns!==l.ns&&Object.keys(a.ns).forEach(function(e){var t=a.ns[e];m(n,"onclosenamespace",{prefix:e,uri:t})})}0===e&&(n.closedRoot=!0),n.tagName=n.attribValue=n.attribName="",n.attribList.length=0,n.state=G.TEXT}function I(e,t){"<"===t?(e.state=G.OPEN_WAKA,e.startTagPosition=e.position):g(C,t)&&(T(e,"Non-whitespace before first tag."),e.textNode=t,e.state=G.TEXT)}function D(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}h.parser=function(e,t){return new r(e,t)},h.SAXParser=r,h.SAXStream=i,h.createStream=function(e,t){return new i(e,t)},h.MAX_BUFFER_LENGTH=65536;var o,M=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];h.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),r.prototype={end:function(){_(this)},write:function(e){var t,n,r,i,a,o=this;if(this.error)throw this.error;if(o.closed)return E(o,"Cannot write after close. Assign an onready handler.");if(null===e)return _(o);"object"==typeof e&&(e=e.toString());for(var s=0,l="";l=D(e,s++),o.c=l;)switch(o.trackPosition&&(o.position++,"\n"===l?(o.line++,o.column=0):o.column++),o.state){case G.BEGIN:if(o.state=G.BEGIN_WHITESPACE,"\ufeff"===l)continue;I(o,l);continue;case G.BEGIN_WHITESPACE:I(o,l);continue;case G.TEXT:if(o.sawRoot&&!o.closedRoot){for(var u=s-1;l&&"<"!==l&&"&"!==l;)(l=D(e,s++))&&o.trackPosition&&(o.position++,"\n"===l?(o.line++,o.column=0):o.column++);o.textNode+=e.substring(u,s-1)}"<"!==l||o.sawRoot&&o.closedRoot&&!o.strict?(!g(C,l)||o.sawRoot&&!o.closedRoot||T(o,"Text data outside of root node."),"&"===l?o.state=G.TEXT_ENTITY:o.textNode+=l):(o.state=G.OPEN_WAKA,o.startTagPosition=o.position);continue;case G.SCRIPT:"<"===l?o.state=G.SCRIPT_ENDING:o.script+=l;continue;case G.SCRIPT_ENDING:o.state="/"===l?G.CLOSE_TAG:(o.script+="<"+l,G.SCRIPT);continue;case G.OPEN_WAKA:if("!"===l)o.state=G.SGML_DECL,o.sgmlDecl="";else if(p(C,l));else if(p(k,l))o.state=G.OPEN_TAG,o.tagName=l;else if("/"===l)o.state=G.CLOSE_TAG,o.tagName="";else if("?"===l)o.state=G.PROC_INST,o.procInstName=o.procInstBody="";else{if(T(o,"Unencoded <"),o.startTagPosition+1<o.position){var d=o.position-o.startTagPosition;l=new Array(d).join(" ")+l}o.textNode+="<"+l,o.state=G.TEXT}continue;case G.SGML_DECL:(o.sgmlDecl+l).toUpperCase()===N?(m(o,"onopencdata"),o.state=G.CDATA,o.sgmlDecl="",o.cdata=""):o.sgmlDecl+l==="--"?(o.state=G.COMMENT,o.comment="",o.sgmlDecl=""):(o.sgmlDecl+l).toUpperCase()===L?(o.state=G.DOCTYPE,(o.doctype||o.sawRoot)&&T(o,"Inappropriately located doctype declaration"),o.doctype="",o.sgmlDecl=""):">"===l?(m(o,"onsgmldeclaration",o.sgmlDecl),o.sgmlDecl="",o.state=G.TEXT):(p(O,l)&&(o.state=G.SGML_DECL_QUOTED),o.sgmlDecl+=l);continue;case G.SGML_DECL_QUOTED:l===o.q&&(o.state=G.SGML_DECL,o.q=""),o.sgmlDecl+=l;continue;case G.DOCTYPE:">"===l?(o.state=G.TEXT,m(o,"ondoctype",o.doctype),o.doctype=!0):(o.doctype+=l,"["===l?o.state=G.DOCTYPE_DTD:p(O,l)&&(o.state=G.DOCTYPE_QUOTED,o.q=l));continue;case G.DOCTYPE_QUOTED:o.doctype+=l,l===o.q&&(o.q="",o.state=G.DOCTYPE);continue;case G.DOCTYPE_DTD:o.doctype+=l,"]"===l?o.state=G.DOCTYPE:p(O,l)&&(o.state=G.DOCTYPE_DTD_QUOTED,o.q=l);continue;case G.DOCTYPE_DTD_QUOTED:o.doctype+=l,l===o.q&&(o.state=G.DOCTYPE_DTD,o.q="");continue;case G.COMMENT:"-"===l?o.state=G.COMMENT_ENDING:o.comment+=l;continue;case G.COMMENT_ENDING:"-"===l?(o.state=G.COMMENT_ENDED,o.comment=y(o.opt,o.comment),o.comment&&m(o,"oncomment",o.comment),o.comment=""):(o.comment+="-"+l,o.state=G.COMMENT);continue;case G.COMMENT_ENDED:o.state=">"!==l?(T(o,"Malformed comment"),o.comment+="--"+l,G.COMMENT):G.TEXT;continue;case G.CDATA:"]"===l?o.state=G.CDATA_ENDING:o.cdata+=l;continue;case G.CDATA_ENDING:o.state="]"===l?G.CDATA_ENDING_2:(o.cdata+="]"+l,G.CDATA);continue;case G.CDATA_ENDING_2:">"===l?(o.cdata&&m(o,"oncdata",o.cdata),m(o,"onclosecdata"),o.cdata="",o.state=G.TEXT):"]"===l?o.cdata+="]":(o.cdata+="]]"+l,o.state=G.CDATA);continue;case G.PROC_INST:"?"===l?o.state=G.PROC_INST_ENDING:p(C,l)?o.state=G.PROC_INST_BODY:o.procInstName+=l;continue;case G.PROC_INST_BODY:if(!o.procInstBody&&p(C,l))continue;"?"===l?o.state=G.PROC_INST_ENDING:o.procInstBody+=l;continue;case G.PROC_INST_ENDING:o.state=">"===l?(m(o,"onprocessinginstruction",{name:o.procInstName,body:o.procInstBody}),o.procInstName=o.procInstBody="",G.TEXT):(o.procInstBody+="?"+l,G.PROC_INST_BODY);continue;case G.OPEN_TAG:p(x,l)?o.tagName+=l:(b(o),">"===l?R(o):o.state="/"===l?G.OPEN_TAG_SLASH:(g(C,l)&&T(o,"Invalid character in tag name"),G.ATTRIB));continue;case G.OPEN_TAG_SLASH:">"===l?(R(o,!0),w(o)):(T(o,"Forward-slash in opening tag not followed by >"),o.state=G.ATTRIB);continue;case G.ATTRIB:if(p(C,l))continue;">"===l?R(o):"/"===l?o.state=G.OPEN_TAG_SLASH:p(k,l)?(o.attribName=l,o.attribValue="",o.state=G.ATTRIB_NAME):T(o,"Invalid attribute name");continue;case G.ATTRIB_NAME:"="===l?o.state=G.ATTRIB_VALUE:">"===l?(T(o,"Attribute without value"),o.attribValue=o.attribName,A(o),R(o)):p(C,l)?o.state=G.ATTRIB_NAME_SAW_WHITE:p(x,l)?o.attribName+=l:T(o,"Invalid attribute name");continue;case G.ATTRIB_NAME_SAW_WHITE:if("="===l)o.state=G.ATTRIB_VALUE;else{if(p(C,l))continue;T(o,"Attribute without value"),o.tag.attributes[o.attribName]="",o.attribValue="",m(o,"onattribute",{name:o.attribName,value:""}),o.attribName="",">"===l?R(o):p(k,l)?(o.attribName=l,o.state=G.ATTRIB_NAME):(T(o,"Invalid attribute name"),o.state=G.ATTRIB)}continue;case G.ATTRIB_VALUE:if(p(C,l))continue;p(O,l)?(o.q=l,o.state=G.ATTRIB_VALUE_QUOTED):(T(o,"Unquoted attribute value"),o.state=G.ATTRIB_VALUE_UNQUOTED,o.attribValue=l);continue;case G.ATTRIB_VALUE_QUOTED:if(l!==o.q){"&"===l?o.state=G.ATTRIB_VALUE_ENTITY_Q:o.attribValue+=l;continue}A(o),o.q="",o.state=G.ATTRIB_VALUE_CLOSED;continue;case G.ATTRIB_VALUE_CLOSED:p(C,l)?o.state=G.ATTRIB:">"===l?R(o):"/"===l?o.state=G.OPEN_TAG_SLASH:p(k,l)?(T(o,"No whitespace between attributes"),o.attribName=l,o.attribValue="",o.state=G.ATTRIB_NAME):T(o,"Invalid attribute name");continue;case G.ATTRIB_VALUE_UNQUOTED:if(g(P,l)){"&"===l?o.state=G.ATTRIB_VALUE_ENTITY_U:o.attribValue+=l;continue}A(o),">"===l?R(o):o.state=G.ATTRIB;continue;case G.CLOSE_TAG:if(o.tagName)">"===l?w(o):p(x,l)?o.tagName+=l:o.script?(o.script+="</"+o.tagName,o.tagName="",o.state=G.SCRIPT):(g(C,l)&&T(o,"Invalid tagname in closing tag"),o.state=G.CLOSE_TAG_SAW_WHITE);else{if(p(C,l))continue;g(k,l)?o.script?(o.script+="</"+l,o.state=G.SCRIPT):T(o,"Invalid tagname in closing tag."):o.tagName=l}continue;case G.CLOSE_TAG_SAW_WHITE:if(p(C,l))continue;">"===l?w(o):T(o,"Invalid characters in closing tag");continue;case G.TEXT_ENTITY:case G.ATTRIB_VALUE_ENTITY_Q:case G.ATTRIB_VALUE_ENTITY_U:var c,f;switch(o.state){case G.TEXT_ENTITY:c=G.TEXT,f="textNode";break;case G.ATTRIB_VALUE_ENTITY_Q:c=G.ATTRIB_VALUE_QUOTED,f="attribValue";break;case G.ATTRIB_VALUE_ENTITY_U:c=G.ATTRIB_VALUE_UNQUOTED,f="attribValue"}";"===l?(o[f]+=(a=r=n=void 0,r=(t=o).entity,i=r.toLowerCase(),a="",t.ENTITIES[r]?t.ENTITIES[r]:t.ENTITIES[i]?t.ENTITIES[i]:("#"===(r=i).charAt(0)&&(a="x"===r.charAt(1)?(r=r.slice(2),(n=parseInt(r,16)).toString(16)):(r=r.slice(1),(n=parseInt(r,10)).toString(10))),r=r.replace(/^0+/,""),a.toLowerCase()!==r?(T(t,"Invalid character entity"),"&"+t.entity+";"):String.fromCodePoint(n))),o.entity="",o.state=c):p(o.entity.length?U:F,l)?o.entity+=l:(T(o,"Invalid character in entity name"),o[f]+="&"+o.entity+l,o.entity="",o.state=c);continue;default:throw new Error(o,"Unknown state: "+o.state)}return o.position>=o.bufferCheckPosition&&function(e){for(var t=Math.max(h.MAX_BUFFER_LENGTH,10),n=0,r=0,i=M.length;r<i;r++){var a=e[M[r]].length;if(t<a)switch(M[r]){case"textNode":v(e);break;case"cdata":m(e,"oncdata",e.cdata),e.cdata="";break;case"script":m(e,"onscript",e.script),e.script="";break;default:E(e,"Max buffer length exceeded: "+M[r])}n=Math.max(n,a)}var o=h.MAX_BUFFER_LENGTH-n;e.bufferCheckPosition=o+e.position}(o),o},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;v(e=this),""!==e.cdata&&(m(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(m(e,"onscript",e.script),e.script="")}};try{o=Y(35).Stream}catch(e){o=function(){}}var s=h.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});(i.prototype=Object.create(o.prototype,{constructor:{value:i}})).write=function(e){if("function"==typeof K&&"function"==typeof K.isBuffer&&K.isBuffer(e)){if(!this._decoder){var t=Y(36).StringDecoder;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},i.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},i.prototype.on=function(t,e){var n=this;return n._parser["on"+t]||-1===s.indexOf(t)||(n._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),n.emit.apply(n,e)}),o.prototype.on.call(n,t,e)};var C="\r\n\t ",t="0124356789",n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",O="'\"",P=C+">",N="[CDATA[",L="DOCTYPE",l="http://www.w3.org/XML/1998/namespace",u="http://www.w3.org/2000/xmlns/",d={xml:l,xmlns:u};C=e(C),t=e(t),n=e(n);var k=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,x=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,F=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,U=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;O=e(O),P=e(P);var c,f,B,G=0;for(var j in h.STATE={BEGIN:G++,BEGIN_WHITESPACE:G++,TEXT:G++,TEXT_ENTITY:G++,OPEN_WAKA:G++,SGML_DECL:G++,SGML_DECL_QUOTED:G++,DOCTYPE:G++,DOCTYPE_QUOTED:G++,DOCTYPE_DTD:G++,DOCTYPE_DTD_QUOTED:G++,COMMENT_STARTING:G++,COMMENT:G++,COMMENT_ENDING:G++,COMMENT_ENDED:G++,CDATA:G++,CDATA_ENDING:G++,CDATA_ENDING_2:G++,PROC_INST:G++,PROC_INST_BODY:G++,PROC_INST_ENDING:G++,OPEN_TAG:G++,OPEN_TAG_SLASH:G++,ATTRIB:G++,ATTRIB_NAME:G++,ATTRIB_NAME_SAW_WHITE:G++,ATTRIB_VALUE:G++,ATTRIB_VALUE_QUOTED:G++,ATTRIB_VALUE_CLOSED:G++,ATTRIB_VALUE_UNQUOTED:G++,ATTRIB_VALUE_ENTITY_Q:G++,ATTRIB_VALUE_ENTITY_U:G++,CLOSE_TAG:G++,CLOSE_TAG_SAW_WHITE:G++,SCRIPT:G++,SCRIPT_ENDING:G++},h.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},h.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(h.ENTITIES).forEach(function(e){var t=h.ENTITIES[e],n="number"==typeof t?String.fromCharCode(t):t;h.ENTITIES[e]=n}),h.STATE)h.STATE[h.STATE[j]]=j;G=h.STATE,String.fromCodePoint||(c=String.fromCharCode,f=Math.floor,B=function(){var e,t,n=[],r=-1,i=arguments.length;if(!i)return"";for(var a="";++r<i;){var o=Number(arguments[r]);if(!isFinite(o)||o<0||1114111<o||f(o)!==o)throw RangeError("Invalid code point: "+o);o<=65535?n.push(o):(e=55296+((o-=65536)>>10),t=o%1024+56320,n.push(e,t)),(r+1===i||16384<n.length)&&(a+=c.apply(null,n),n.length=0)}return a},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:B,configurable:!0,writable:!0}):String.fromCodePoint=B)}(void 0===t?this.sax={}:t)}).call(this,Y(10).Buffer)},{10:10,35:35,36:36}],46:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){return e&&e.bind?e.bind(window.console):window.console.log.bind(window.console)}function r(e,t){var n="",r=null;u&&(r=(new Date).getTime(),n+="["+(r-c)+"]"),d&&t&&t.getClassName&&(n+="["+t.getClassName()+"]",t.getType&&(n+="["+t.getType()+"]")),0<n.length&&(n+=" ");for(var i=arguments.length,a=Array(2<i?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];Array.apply(null,a).forEach(function(e){n+=e+" "}),l[e]&&e<=f&&l[e](n),s.trigger(h.default.LOG,{message:n,level:e})}var t,n=this.context,s=(0,a.default)(n).getInstance(),l=[],u=void 0,d=void 0,c=void 0,f=void 0;return t={getLogger:function(e){return{fatal:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,[p,this].concat(t))}.bind(e),error:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,[g,this].concat(t))}.bind(e),warn:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,[m,this].concat(t))}.bind(e),info:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,[v,this].concat(t))}.bind(e),debug:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,[y,this].concat(t))}.bind(e)}},setLogTimestampVisible:function(e){u=e},setCalleeNameVisible:function(e){d=e},setLogToBrowserConsole:function(e){f=e?y:0},getLogToBrowserConsole:function(){return 0!==f},setLogLevel:function(e){f=e},getLogLevel:function(){return f}},d=u=!0,f=m,c=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(l[p]=e(window.console.error),l[g]=e(window.console.error),l[m]=e(window.console.warn),l[v]=e(window.console.info),l[y]=e(window.console.debug)),t}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(47)),h=r(e(53)),o=r(e(48)),p=1,g=2,m=3,v=4,y=5;i.__dashjs_factory_name="Debug";var s=o.default.getSingletonFactory(i);s.LOG_LEVEL_NONE=0,s.LOG_LEVEL_FATAL=p,s.LOG_LEVEL_ERROR=g,s.LOG_LEVEL_WARNING=m,s.LOG_LEVEL_INFO=v,s.LOG_LEVEL_DEBUG=y,o.default.updateSingletonFactory(i.__dashjs_factory_name,s),n.default=s,t.exports=n.default},{47:47,48:48,53:53}],47:[function(e,t,n){"use strict";function r(){function a(e,n,r){var i=-1;return o[e]&&o[e].some(function(e,t){if(e&&e.callback===n&&(!r||r===e.scope))return i=t,!0}),i}var o={};return{on:function(n,e,t){var r=arguments.length<=3||void 0===arguments[3]?0:arguments[3];if(!n)throw new Error("event type cannot be null or undefined");if(!e||"function"!=typeof e)throw new Error("listener must be a function: "+e);if(!(0<=a(n,e,t))){o[n]=o[n]||[];var i={callback:e,scope:t,priority:r};o[n].some(function(e,t){if(e&&r>e.priority)return o[n].splice(t,0,i),!0})||o[n].push(i)}},off:function(e,t,n){if(e&&t&&o[e]){var r=a(e,t,n);r<0||(o[e][r]=null)}},trigger:function(e,t){if(e&&o[e]){if((t=t||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");t.type=e,o[e]=o[e].filter(function(e){return e}),o[e].forEach(function(e){return e&&e.callback.call(e.scope,t)})}},reset:function(){o={}}}}Object.defineProperty(n,"__esModule",{value:!0});var i,a=e(48),o=(i=a)&&i.__esModule?i:{default:i};r.__dashjs_factory_name="EventBus";var s=o.default.getSingletonFactory(r);s.EVENT_PRIORITY_LOW=0,s.EVENT_PRIORITY_HIGH=5e3,o.default.updateSingletonFactory(r.__dashjs_factory_name,s),n.default=s,t.exports=n.default},{48:48}],48:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n in o){var r=o[n];if(r.context===e&&r.name===t)return r.instance}return null}function i(e,t){return t[e]}function n(e,t,n){e in n&&(n[e]=t)}function a(e,t,n){var r=void 0,i=e.__dashjs_factory_name,a=t[i];if(a){var o=a.instance;if(!a.override)return o.apply({context:t,factory:l},n);for(var s in r=e.apply({context:t},n),o=o.apply({context:t,factory:l,parent:r},n))r.hasOwnProperty(s)&&(r[s]=o[s])}else r=e.apply({context:t},n);return r.getClassName=function(){return i},r}var l=void 0,o=[],s={},u={};return l={extend:function(e,t,n,r){!r[e]&&t&&(r[e]={instance:t,override:n})},getSingletonInstance:r,setSingletonInstance:function(e,t,n){for(var r in o){var i=o[r];if(i.context===e&&i.name===t)return void(o[r].instance=n)}o.push({name:t,context:e,instance:n})},getSingletonFactory:function(n){var e=i(n.__dashjs_factory_name,s);return e||(e=function(e){var t=void 0;return void 0===e&&(e={}),{getInstance:function(){return t||(t=r(e,n.__dashjs_factory_name)),t||(t=a(n,e,arguments),o.push({name:n.__dashjs_factory_name,context:e,instance:t})),t}}},s[n.__dashjs_factory_name]=e),e},getSingletonFactoryByName:function(e){return i(e,s)},updateSingletonFactory:function(e,t){n(e,t,s)},getClassFactory:function(t){var e=i(t.__dashjs_factory_name,u);return e||(e=function(e){return void 0===e&&(e={}),{create:function(){return a(t,e,arguments)}}},u[t.__dashjs_factory_name]=e),e},getClassFactoryByName:function(e){return i(e,u)},updateClassFactory:function(e,t){n(e,t,u)}}}();n.default=r,t.exports=n.default},{}],49:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getVersionString=function(){return r};var r="2.9.3"},{}],50:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(51),a=(r=i)&&r.__esModule?r:{default:r},o=new(function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=a,n=o,r=!0,s=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,this.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,this.SEGMENTS_UPDATE_FAILED_ERROR_CODE=13,this.SEGMENTS_UNAVAILABLE_ERROR_CODE=14,this.SEGMENT_BASE_LOADER_ERROR_CODE=15,this.TIME_SYNC_FAILED_ERROR_CODE=16,this.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,this.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,this.APPEND_ERROR_CODE=20,this.REMOVE_ERROR_CODE=21,this.DATA_UPDATE_FAILED_ERROR_CODE=22,this.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,this.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,this.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,this.DOWNLOAD_ERROR_ID_MANIFEST="manifest",this.DOWNLOAD_ERROR_ID_SIDX_CODE=26,this.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,this.DOWNLOAD_ERROR_ID_CONTENT="content",this.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,this.DOWNLOAD_ERROR_ID_INITIALIZATION="initialization",this.DOWNLOAD_ERROR_ID_XLINK_CODE=29,this.DOWNLOAD_ERROR_ID_XLINK="xlink",this.MANIFEST_ERROR_ID_CODEC_CODE=30,this.MANIFEST_ERROR_ID_PARSE_CODE=31,this.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,this.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,this.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,this.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",this.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",this.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",this.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",this.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segments",this.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize time",this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",this.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",this.APPEND_ERROR_MESSAGE="chunk is not defined",this.REMOVE_ERROR_MESSAGE="buffer is not defined",this.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",this.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",this.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",this.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",this.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : "}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),t}());n.default=o,t.exports=n.default},{51:51}],51:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,r=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!n||r&&-1===e[i].indexOf("public_")||(this[i]=e[i])}}}]),e}();n.default=i,t.exports=n.default},{}],52:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(54),a=(r=i)&&r.__esModule?r:{default:r},o=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=a,n=o,r=!0,s=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.BYTES_APPENDED="bytesAppended",this.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.DATA_UPDATE_STARTED="dataUpdateStarted",this.INITIALIZATION_LOADED="initializationLoaded",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_REQUESTED="initRequested",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.LOADING_DATA_PROGRESS="loadingDataProgress",this.LOADING_ABANDONED="loadingAborted",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.QUOTA_EXCEEDED="quotaExceeded",this.REPRESENTATION_UPDATED="representationUpdated",this.SEGMENTS_LOADED="segmentsLoaded",this.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",this.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_COMPLETED="streamCompleted",this.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",this.TIMED_TEXT_REQUESTED="timedTextRequested",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady"}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),t}();n.default=o,t.exports=n.default},{54:54}],53:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(52),a=(r=i)&&r.__esModule?r:{default:r},o=new(function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=a,n=o,r=!0,s=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),t}());n.default=o,t.exports=n.default},{52:52}],54:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,r=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!n||r&&-1===e[i].indexOf("public_")||(this[i]=e[i])}}}]),e}();n.default=i,t.exports=n.default},{}],55:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function s(e,t){return t&&e?t.getRepresentationForQuality(e.quality):null}function l(e){return e&&e.streamInfo&&void 0!==e.streamInfo.id&&R[e.streamInfo.id]?R[e.streamInfo.id][e.index]:null}function E(e,t){for(var n=t.length,r=0;r<n;r++){var i=t[r];if(e.id===i.id)return i}return null}function r(e){var t=new a.default,n=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],r=S.getRepresentationFor(e.index,n);return t.id=e.id,t.quality=e.index,t.bandwidth=S.getBandwidth(r),t.DVRWindow=e.segmentAvailabilityRange,t.fragmentDuration=e.segmentDuration||(e.segments&&0<e.segments.length?e.segments[0].duration:NaN),t.MSETimeOffset=e.MSETimeOffset,t.useCalculatedLiveEdgeTime=e.useCalculatedLiveEdgeTime,t.mediaInfo=_(e.adaptation),t}function _(e){var t,r=new p.default,n=e.period.mpd.manifest.Period_asArray[e.period.index].AdaptationSet_asArray[e.index];return r.id=e.id,r.index=e.index,r.type=e.type,r.streamInfo=o(e.period),r.representationCount=S.getRepresentationCount(n),r.labels=S.getLabelsForAdaptation(n),r.lang=S.getLanguageForAdaptation(n),t=S.getViewpointForAdaptation(n),r.viewpoint=t?t.value:void 0,r.accessibility=S.getAccessibilityForAdaptation(n).map(function(e){var t=e.value,n=t;return e.schemeIdUri&&0<=e.schemeIdUri.search("cea-608")&&void 0!==y.default&&(n=t?"cea-608:"+t:"cea-608",r.embeddedCaptions=!0),n}),r.audioChannelConfiguration=S.getAudioChannelConfigurationForAdaptation(n).map(function(e){return e.value}),r.roles=S.getRolesForAdaptation(n).map(function(e){return e.value}),r.codec=S.getCodec(n),r.mimeType=S.getMimeType(n),r.contentProtection=S.getContentProtectionData(n),r.bitrateList=S.getBitrateListForAdaptation(n),r.contentProtection&&r.contentProtection.forEach(function(e){e.KID=S.getKID(e)}),r.isText=S.getIsTextTrack(r.mimeType),r}function T(e,t,n){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type=w.default.EMBEDDED_TEXT,e.codec="cea-608-in-SEI",e.isText=!0,e.isEmbedded=!0,e.lang=n,e.roles=["caption"]}function o(e){var t,n,r=new g.default;return r.id=e.id,r.index=e.index,r.start=e.start,r.duration=e.duration,r.manifestInfo=(t=e.mpd,(n=new m.default).DVRWindowSize=t.timeShiftBufferDepth,n.loadedTime=t.manifest.loadedTime,n.availableFrom=t.availabilityStartTime,n.minBufferTime=t.manifest.minBufferTime,n.maxFragmentDuration=t.maxSegmentDuration,n.duration=S.getDuration(t.manifest),n.isDynamic=S.getIsDynamic(t.manifest),n),r.isLast=1===e.mpd.manifest.Period_asArray.length||Math.abs(r.start+r.duration-r.manifestInfo.duration)<1,r}function u(e,t,n,r){var i,a=S.getAdaptationsForType(e,t,n);if(!a||0===a.length)return null;if(1<a.length&&r){var o=d(r,n);if(f[r.id]&&f[r.id][n])for(var s=0,l=a.length;s<l;s++)if(f[r.id][n].isMediaInfoEqual(o[s]))return a[s];for(s=0,l=a.length;s<l;s++)if(i=a[s],S.getRolesForAdaptation(i).filter(function(e){return e.value===h.default.MAIN})[0])return a[s]}return a[0]}function d(e,t,n){var r,i=A,a=n,o=[],s=void 0,l=void 0,u=void 0,d=void 0,c=void 0;if(a){b();var f=S.getMpd(a);i=S.getRegularPeriods(f)}else{if(!(0<A.length))return o;a=A[0].mpd.manifest}var h=E(e,i),p=h.id,g=S.getAdaptationsForType(a,e.index,t!==w.default.EMBEDDED_TEXT?t:w.default.VIDEO);if(!g)return o;for(R[p]=R[p]||S.getAdaptationsForPeriod(h),d=0,r=g.length;d<r;d++)if(s=g[d],u=S.getIndexForAdaptation(s,a,e.index),l=_(R[p][u]),t===w.default.EMBEDDED_TEXT){var m=l.accessibility.length;for(c=0;c<m;c++)if(l){var v=l.accessibility[c];if(0===v.indexOf("cea-608:")){var y=v.substring(8).split(";");if("CC"===y[0].substring(0,2))for(c=0;c<y.length;c++)l||(l=_.call(this,R[p][u])),T(l,y[c].substring(0,3),y[c].substring(4)),o.push(l),l=null;else for(c=0;c<y.length;c++)l||(l=_.call(this,R[p][u])),T(l,"CC"+(c+1),y[c]),o.push(l),l=null}else 0===v.indexOf("cea-608")&&(T(l,w.default.CC1,"eng"),o.push(l),l=null)}}else t===w.default.IMAGE?(l.type=w.default.IMAGE,o.push(l),l=null):l&&o.push(l);return o}function b(){if(!S||!S.hasOwnProperty("getMpd")||!S.hasOwnProperty("getRegularPeriods"))throw new Error("setConfig function has to be called previously")}function c(e){if(!(e&&e.hasOwnProperty("getRepresentationController")&&e.hasOwnProperty("getIndexHandler")&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getType")&&e.hasOwnProperty("getStreamInfo")))throw new Error("streamProcessor parameter is missing or malformed!")}function e(){A=[],R={},f={}}var t,S=void 0,A=void 0,R=void 0,f=void 0;return t={convertDataToRepresentationInfo:r,getDataForMedia:l,getStreamsInfo:function(e,t){var n=[],r=A;if(e){b();var i=S.getMpd(e);r=S.getRegularPeriods(i)}t||(t=r.length);for(var a=0;a<t;a++)n.push(o(r[a]));return n},getMediaInfoForType:function(e,t){if(0===A.length)return null;var n=A[0].mpd.manifest,r=u(n,e.index,t,e);if(!r)return null;var i=E(e,A),a=i.id,o=S.getIndexForAdaptation(r,n,e.index);return R[a]=R[a]||S.getAdaptationsForPeriod(i),_(R[a][o])},getAllMediaInfoForType:d,getRepresentationInfo:function(e,t){!function(e){if(!e||!e.hasOwnProperty("getRepresentationForQuality")||!e.hasOwnProperty("getCurrentRepresentation"))throw new Error("representationController parameter is missing or malformed!")}(e);var n=void 0;return(n=void 0!==t?((0,I.checkInteger)(t),e.getRepresentationForQuality(t)):e.getCurrentRepresentation())?r(n):null},getAdaptationForType:u,updateData:function(e){c(e);var t,n=E(e.getStreamInfo(),A),r=e.getMediaInfo(),i=l(r),a=e.getType(),o=void 0;t=r?r.id:null,0<A.length&&(o=t?S.getAdaptationForId(t,A[0].mpd.manifest,n.index):S.getAdaptationForIndex(r.index,A[0].mpd.manifest,n.index),e.getRepresentationController().updateData(o,i,a))},getInitRequest:function(e,t){var n,r=void 0,i=void 0;return c(e),(0,I.checkInteger)(t),r=e.getRepresentationController(),i=e.getIndexHandler(),n=r?r.getRepresentationForQuality(t):null,i?i.getInitRequest(n):null},getFragmentRequest:function(e,t,n,r){var i,a=void 0,o=null;return c(e),i=s(t,e.getRepresentationController()),(a=e.getIndexHandler())&&(o=void 0!==n&&void 0!==r?a.getSegmentRequestForTime(i,n,r):a.getNextSegmentRequest(i)),o},getIndexHandlerTime:function(e){c(e);var t=e.getIndexHandler();return t?t.getCurrentTime():NaN},setIndexHandlerTime:function(e,t){c(e);var n=e.getIndexHandler();n&&n.setCurrentTime(t)},getEventsFor:function(e,t){var n=[];if(0===A.length)return n;var r=A[0].mpd.manifest;return e instanceof g.default?n=S.getEventsForPeriod(E(e,A)):e instanceof p.default?n=S.getEventStreamForAdaptationSet(r,l(e)):e instanceof a.default&&(n=S.getEventStreamForRepresentation(r,s(e,t.getRepresentationController()))),n},getEvent:function(e,t,n){if(!e||!t)return null;var r=new v.default,i=e.scheme_id_uri,a=e.value,o=e.timescale,s=e.presentation_time_delta,l=e.event_duration,u=e.id,d=e.message_data,c=n*o+s;return t[i+"/"+a]?(r.eventStream=t[i+"/"+a],r.eventStream.value=a,r.eventStream.timescale=o,r.duration=l,r.id=u,r.presentationTime=c,r.messageData=d,r.presentationTimeDelta=s,r):null},setConfig:function(e){e&&e.dashManifestModel&&(S=e.dashManifestModel)},updatePeriods:function(e){if(!e)return null;b();var t=S.getMpd(e);A=S.getRegularPeriods(t),R={}},reset:e,resetIndexHandler:function(e){c(e);var t=e.getIndexHandler();t&&t.resetIndex()},setCurrentMediaInfo:function(e,t,n){f[e]=f[e]||{},f[e][t]=f[e][t]||{},f[e][t]=n}},e(),t}Object.defineProperty(n,"__esModule",{value:!0});var w=r(e(101)),h=r(e(60)),a=r(e(224)),p=r(e(222)),g=r(e(225)),m=r(e(221)),v=r(e(83)),o=r(e(48)),y=r(e(2)),I=e(208);i.__dashjs_factory_name="DashAdapter",n.default=o.default.getSingletonFactory(i),t.exports=n.default},{101:101,2:2,208:208,221:221,222:222,224:224,225:225,48:48,60:60,83:83}],56:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(t){function u(){return O?O.getType():null}function d(){var e=O?O.getStreamInfo():null;return e?e.manifestInfo.isDynamic:null}function c(){return O?O.getMediaInfo():null}function a(){D=-1}function e(){a(),C=0,P=O=M=null}function o(e,t,n){var r=R.resolve(n.path),i=void 0,a=void 0;return r&&t!==r.url&&y.isRelative(t)?(i=r.url,a=r.serviceLocation,t&&(i=y.resolve(t,i))):i=t,!y.isRelative(i)&&(e.url=i,e.serviceLocation=a,!0)}function f(e){var t=!1,n=d();if(n||D!==e.availableSegmentsNumber){var r=(0,H.getSegmentByIndex)(D,e);if(r){var i=parseFloat((r.presentationStartTime-e.adaptation.period.start).toFixed(5)),a=e.adaptation.period.duration;I.debug(e.segmentInfoType+": "+i+" / "+a),t=(e.segmentInfoType!==L.default.SEGMENT_TIMELINE||!n)&&a<=i}else I.debug("isMediaFinished - no segment found")}else t=!0;return t}function h(e){P.getSegments(e,M,D,p)}function p(e,t){if((e.segments=t)&&0<t.length&&d()){var n=t[t.length-1].presentationStartTime,r=b.getMetricsFor(N.default.STREAM);_.setExpectedLiveEdge(n),b.updateManifestUpdateInfo(T.getCurrentManifestUpdate(r),{presentationStartTime:n})}}function s(e){if(!e)throw new Error("no representation");e.segments=null,h(e)}function g(e,t,n){var r=t.segments,i=r?r.length:null,a=-1,o=void 0,s=void 0,l=void 0,u=void 0,d=void 0;if(r&&0<i)for(n=null==n?S.getSegmentOverlapToleranceTime():n,d=0;d<i;d++)if(l=(s=r[d]).presentationStartTime,u=s.duration,l<=e+(o=null==n?u/2:n)&&e-o<l+u){a=s.availabilityIdx;break}return a}function m(e){if(null==e)return null;var t=new k.default,n=e.representation,r=n.adaptation.period.mpd.manifest.Period_asArray[n.adaptation.period.index].AdaptationSet_asArray[n.adaptation.index].Representation_asArray[n.index].bandwidth,i=e.media;return i=(0,H.replaceTokenForTemplate)(i,"Number",e.replacementNumber),i=(0,H.replaceTokenForTemplate)(i,"Time",e.replacementTime),i=(0,H.replaceTokenForTemplate)(i,"Bandwidth",r),i=(0,H.replaceIDForTemplate)(i,n.id),i=(0,H.unescapeDollarsInTemplate)(i),t.mediaType=u(),t.type=F.HTTPRequest.MEDIA_SEGMENT_TYPE,t.range=e.mediaRange,t.startTime=e.presentationStartTime,t.duration=e.duration,t.timescale=n.timescale,t.availabilityStartTime=e.availabilityStartTime,t.availabilityEndTime=e.availabilityEndTime,t.wallStartTime=e.wallStartTime,t.quality=n.index,t.index=e.availabilityIdx,t.mediaInfo=c(),t.adaptationIndex=n.adaptation.index,t.representationId=n.id,o(t,i,n)?t:void 0}function n(e){var t=e.representation;t.segments&&v.trigger(U.default.REPRESENTATION_UPDATED,{sender:this,representation:t})}function r(e){if(!e.error&&u()===e.mediaType){var t,n=e.segments,r=e.representation,i=[],a=0,o=void 0,s=void 0,l=void 0;for(o=0,t=n.length;o<t;o++)s=n[o],l=(0,H.getTimeBasedSegment)(_,d(),r,s.startTime,s.duration,s.timescale,s.media,s.mediaRange,a),i.push(l),l=null,a++;r.segmentAvailabilityRange={start:i[0].presentationStartTime,end:i[t-1].presentationStartTime},r.availableSegmentsNumber=t,p(r,i),Y.default.hasInitialization(r)&&v.trigger(U.default.REPRESENTATION_UPDATED,{sender:this,representation:r})}}t=t||{};var i,l=this.context,v=(0,B.default)(l).getInstance(),y=(0,K.default)(l).getInstance(),E=void 0,_=t.timelineConverter,T=t.dashMetrics,b=t.metricsModel,S=t.mediaPlayerModel,A=t.errHandler,R=t.baseURLController,w=void 0,I=void 0,D=void 0,M=void 0,C=void 0,O=void 0,P=void 0;return w={initialize:function(e){O=e,E.initialize(),P=(0,q.default)(l).create(t,d())},getStreamProcessor:function(){return O},getInitRequest:function(e){return e?function(e,t){var n=new k.default,r=e.adaptation.period,i=r.start,a=d();if(n.mediaType=t,n.type=F.HTTPRequest.INIT_SEGMENT_TYPE,n.range=e.range,n.availabilityStartTime=_.calcAvailabilityStartTimeFromPresentationTime(i,r.mpd,a),n.availabilityEndTime=_.calcAvailabilityEndTimeFromPresentationTime(i+r.duration,r.mpd,a),n.quality=e.index,n.mediaInfo=c(),n.representationId=e.id,o(n,e.initialization,e))return n}(e,u()):null},getSegmentRequestForTime:function(e,t,n){var r=void 0;if(!e)return null;var i=u(),a=D,o=!!n&&n.keepIdx,s=n?n.timeThreshold:null,l=!(!n||!n.ignoreIsFinished);return M!==t&&(M=t,I.debug("Getting the request for "+i+" time : "+t)),h(e),(D=g(t,e,s))<0&&(h(e),D=g(t,e,s)),0<=D&&I.debug("Index for "+i+" time "+t+" is "+D),!l&&f(e)?((r=new k.default).action=k.default.ACTION_COMPLETE,r.index=D,r.mediaType=i,r.mediaInfo=c(),I.debug("Signal complete in getSegmentRequestForTime -",i)):r=m((0,H.getSegmentByIndex)(D,e)),o&&0<=a&&(D=e.segmentInfoType===L.default.SEGMENT_TIMELINE&&d()?D:a),r},getNextSegmentRequest:function(e){var t=void 0,n=void 0;if(!e||-1===D)return null;var r=u(),i=d();return M=null,D++,I.debug("Getting the next request at index: "+D+", type: "+r),!(0,H.getSegmentByIndex)(D,e)&&i?(I.debug("No segment found at index: "+D+". Wait for next loop"),h(e),D--,null):(f(e)?((t=new k.default).action=k.default.ACTION_COMPLETE,t.index=D,t.mediaType=r,t.mediaInfo=c(),I.debug("Signal complete -",r)):(h(e),t=m(n=(0,H.getSegmentByIndex)(D,e)),!n&&i&&D--),t)},updateRepresentation:function(e,t){var n=Y.default.hasInitialization(e),r=Y.default.hasSegments(e),i=void 0;if(e.segmentDuration||e.segments||s(e),e.segmentAvailabilityRange=_.calcSegmentAvailabilityRange(e,d()),e.segmentAvailabilityRange.end<e.segmentAvailabilityRange.start&&!e.useCalculatedLiveEdgeTime)return i=new x.default(G.default.SEGMENTS_UNAVAILABLE_ERROR_CODE,G.default.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE,{availabilityDelay:e.segmentAvailabilityRange.start-e.segmentAvailabilityRange.end}),void v.trigger(U.default.REPRESENTATION_UPDATED,{sender:this,representation:e,error:i});t||a(),e.segmentDuration&&s(e),n||E.loadInitialization(e),r||E.loadSegments(e,u(),e.indexRange),n&&r&&v.trigger(U.default.REPRESENTATION_UPDATED,{sender:this,representation:e})},updateSegmentList:s,setCurrentTime:function(e){C=e},getCurrentTime:function(){return C},reset:function(){e(),v.off(U.default.INITIALIZATION_LOADED,n,w),v.off(U.default.SEGMENTS_LOADED,r,w)},resetIndex:a},I=(0,j.default)(l).getInstance().getLogger(w),e(),i=t.mimeType,(E="webm"===i.split("/")[1].toLowerCase()?(0,W.default)(l).getInstance():(0,V.default)(l).getInstance()).setConfig({baseURLController:R,metricsModel:b,mediaPlayerModel:S,errHandler:A}),v.on(U.default.INITIALIZATION_LOADED,n,w),v.on(U.default.SEGMENTS_LOADED,r,w),w}Object.defineProperty(n,"__esModule",{value:!0});var N=r(e(101)),L=r(e(60)),k=r(e(217)),x=r(e(215)),F=e(235),U=r(e(53)),B=r(e(47)),G=r(e(50)),a=r(e(48)),j=r(e(46)),K=r(e(210)),Y=r(e(87)),H=e(77),q=r(e(76)),V=r(e(58)),W=r(e(59));i.__dashjs_factory_name="DashHandler",n.default=a.default.getClassFactory(i),t.exports=n.default},{101:101,210:210,215:215,217:217,235:235,46:46,47:47,48:48,50:50,53:53,58:58,59:59,60:60,76:76,77:77,87:87}],57:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function i(e){var t=r.getValue();return t?t.Period_asArray[e]:-1}function n(e){return t(e,c.default.BUFFER_LEVEL)}function a(e){if(!e)return null;var t=e.HttpList,n=null,r=void 0;if(!t||t.length<=0)return null;for(r=t.length-1;0<=r;){if(t[r].responsecode){n=t[r];break}r--}return n}function o(e){return e&&e.HttpList?e.HttpList:[]}function t(e,t){if(!e)return null;var n=e[t];return!n||n.length<=0?null:n[n.length-1]}function s(e){var t={};if(!e)return t;for(var n=e.trim().split("\r\n"),r=0,i=n.length;r<i;r++){var a=n[r],o=a.indexOf(": ");0<o&&(t[a.substring(0,o)]=a.substring(o+2))}return t}function l(e,t,n){var r=void 0,i=void 0,a=void 0,o=void 0,s=void 0;if(e)for(r=e.AdaptationSet_asArray,o=0;o<r.length;o+=1)for(a=r[o].Representation_asArray,s=0;s<a.length;s+=1)if(t===(i=a[s]).id)return n?s:i;return null}var u=(e=e||{}).dashManifestModel,r=e.manifestModel;return{getBandwidthForRepresentation:function(e,t){var n;return null===(n=l(i(t),e))?null:n.bandwidth},getIndexForRepresentation:function(e,t){return n=i(t),null!==(r=l(n,e,!0))?r:-1;var n,r},getMaxIndexForBufferType:function(e,t){return function(e,t){var n,r,i=void 0,a=void 0,o=void 0,s=void 0;if(!e||!t)return-1;for(a=e.AdaptationSet_asArray,s=0;s<a.length;s+=1)if(i=a[s],o=i.Representation_asArray,n=i,r=t,u.getIsTypeOf(n,r))return o.length;return-1}(i(t),e)},getCurrentRepresentationSwitch:function(e){return t(e,c.default.TRACK_SWITCH)},getLatestBufferLevelVO:n,getCurrentBufferLevel:function(e){var t=n(e);return t?f.default.round10(t.level/1e3,-3):0},getCurrentHttpRequest:a,getHttpRequests:o,getCurrentDroppedFrames:function(e){return t(e,c.default.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(e){return t(e,c.default.SCHEDULING_INFO)},getCurrentDVRInfo:function(e){return t(e,c.default.DVR_INFO)},getCurrentManifestUpdate:function(e){return t(e,c.default.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(e,t){var n={},r=a(e);return r&&(n=s(r._responseHeaders)),void 0===n[t]?null:n[t]},getLatestMPDRequestHeaderValueByID:function(e,t){var n,r={},i=void 0,a=void 0;for(a=(n=o(e)).length-1;0<=a;a--)if((i=n[a]).type===d.HTTPRequest.MPD_TYPE){r=s(i._responseHeaders);break}return void 0===r[t]?null:r[t]},getRequestsQueue:function(e){return e?e.RequestsQueue:null}}}Object.defineProperty(n,"__esModule",{value:!0});var d=e(235),a=r(e(48)),c=r(e(102)),f=r(e(75));i.__dashjs_factory_name="DashMetrics",n.default=a.default.getSingletonFactory(i),t.exports=n.default},{102:102,235:235,48:48,75:75}],58:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function s(){if(!E||!E.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function l(e){if(e.url){var t=new b.default;return t.type=e.init?T.HTTPRequest.INIT_SEGMENT_TYPE:T.HTTPRequest.MEDIA_SEGMENT_TYPE,t.url=e.url,t.range=e.range.start+"-"+e.range.end,t}}function g(e,t,n){e?u.trigger(c.default.SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):u.trigger(c.default.SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new d.default(A.default.SEGMENT_BASE_LOADER_ERROR_CODE,A.default.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}var e=this.context,u=(0,f.default)(e).getInstance(),t=void 0,m=void 0,n=void 0,v=void 0,r=void 0,i=void 0,a=void 0,y=void 0,E=void 0;return t={setConfig:function(e){e.baseURLController&&(E=e.baseURLController),e.metricsModel&&(i=e.metricsModel),e.mediaPlayerModel&&(a=e.mediaPlayerModel),e.errHandler&&(n=e.errHandler)},initialize:function(){v=(0,h.default)(e).getInstance(),r=(0,o.default)(e).getInstance(),y=(0,S.default)(e).create({errHandler:n,metricsModel:i,mediaPlayerModel:a,requestModifier:r})},loadInitialization:function t(n,e){s();var r=null,i=E.resolve(n.path),a=e||{init:!0,url:i?i.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500};m.debug("Start searching for initialization.");var o=l(a);y.load({request:o,success:function(e){a.bytesLoaded=a.range.end,(r=v.findInitRange(e))?(n.range=r,u.trigger(c.default.INITIALIZATION_LOADED,{representation:n})):(a.range.end=a.bytesLoaded+a.bytesToLoad,t(n,a))},error:function(){u.trigger(c.default.INITIALIZATION_LOADED,{representation:n})}}),m.debug("Perform init search: "+a.url)},loadSegments:function u(d,c,e,t,f){if(s(),e&&(void 0===e.start||void 0===e.end)){var n=e?e.toString().split("-"):null;e=n?{start:parseFloat(n[0]),end:parseFloat(n[1])}:null}f=f||g;var o=null,h=null,r=!!e,i=E.resolve(d.path),p={init:!1,url:i?i.url:void 0,range:r?e:{start:0,end:1500},searching:!r,bytesLoaded:t?t.bytesLoaded:0,bytesToLoad:1500},a=l(p);y.load({request:a,success:function(e){var t=p.bytesToLoad,n=e.byteLength;if(p.bytesLoaded=p.range.end-p.range.start,o=v.parse(e),(h=o.getBox("sidx"))&&h.isComplete){var l=h.references,r=void 0,i=void 0;null!=l&&0<l.length&&(r=1===l[0].reference_type),r?function(){m.debug("Initiate multiple SIDX load."),p.range.end=p.range.start+h.size;var e=void 0,t=void 0,n=void 0,r=void 0,i=[],a=0,o=(h.offset||p.range.start)+h.size,s=function(e){e?(i=i.concat(e),++a>=t&&f(i,d,c)):f(null,d,c)};for(e=0,t=l.length;e<t;e++)r=(n=o)+l[e].referenced_size-1,o+=l[e].referenced_size,u(d,null,{start:n,end:r},p,s)}():(m.debug("Parsing segments from SIDX."),i=function(e,t){for(var n=e.references,r=n.length,i=e.timescale,a=e.earliest_presentation_time,o=t.range.start+e.offset+e.first_offset+e.size,s=[],l=void 0,u=void 0,d=void 0,c=void 0,f=0;f<r;f++)d=n[f].subsegment_duration,c=n[f].referenced_size,(l=new _.default).duration=d,l.startTime=a,l.timescale=i,u=o+c-1,l.mediaRange=o+"-"+u,s.push(l),a+=d,o+=c;return s}(h,p),f(i,d,c))}else{if(h)p.range.start=h.offset||p.range.start,p.range.end=p.range.start+(h.size||t);else{if(n<p.bytesLoaded)return void f(null,d,c);var a=o.getLastBox();a&&a.size?(p.range.start=a.offset+a.size,p.range.end=p.range.start+t):p.range.end+=t}u(d,c,p.range,p,f)}},error:function(){f(null,d,c)}}),m.debug("Perform SIDX load: "+p.url)},reset:function(){y.abort(),r=v=n=y=null}},m=(0,p.default)(e).getInstance().getLogger(t),t}Object.defineProperty(n,"__esModule",{value:!0});var o=r(e(207)),_=r(e(88)),d=r(e(215)),c=r(e(53)),f=r(e(47)),h=r(e(197)),a=r(e(48)),p=r(e(46)),T=e(235),b=r(e(217)),S=r(e(148)),A=r(e(50));i.__dashjs_factory_name="SegmentBaseLoader",n.default=a.default.getSingletonFactory(i),t.exports=n.default},{148:148,197:197,207:207,215:215,217:217,235:235,46:46,47:47,48:48,50:50,53:53,88:88}],59:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function p(e,t,n,r){var i,a,o=void 0,s=void 0,l=void 0,u=void 0,d=void 0,c=void 0;for(s=[],u=0,a=(i=function(e){var t=[],n=void 0,r=void 0,i=(0,_.default)(m).create({data:e});for(i.consumeTagAndSize(y.Segment.Cues);i.moreData()&&i.consumeTagAndSize(y.Segment.Cues.CuePoint,!0);){for((n={}).CueTime=i.parseTag(y.Segment.Cues.CuePoint.CueTime),n.CueTracks=[];i.moreData()&&i.consumeTag(y.Segment.Cues.CuePoint.CueTrackPositions,!0);){var a=i.getMatroskaCodedNum(),o=i.getPos();if((r={}).Track=i.parseTag(y.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===r.Track)throw new Error("Cue track cannot be 0");r.ClusterPosition=i.parseTag(y.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),n.CueTracks.push(r),i.setPos(o+a)}if(0===n.CueTracks.length)throw new Error("Mandatory cuetrack not found");t.push(n)}if(0===t.length)throw new Error("mandatory cuepoint not found");return t}(e)).length;u<a;u+=1)l=new T.default,o=0,o=u<i.length-1?i[u+1].CueTime-i[u].CueTime:r-i[u].CueTime,l.duration=o,l.startTime=i[u].CueTime,l.timescale=1e3,d=i[u].CueTracks[0].ClusterPosition+t,c=u<i.length-1?i[u+1].CueTracks[0].ClusterPosition+t-1:n-1,l.mediaRange=d+"-"+c,s.push(l);return v.debug("Parsed cues: "+s.length+" cues."),s}function s(){if(!d||!d.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function l(e,t,n){e?u.trigger(c.default.SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):u.trigger(c.default.SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new R.default(w.default.SEGMENT_BASE_LOADER_ERROR_CODE,w.default.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function g(e){var t=new S.default;return t.type=e.init?b.HTTPRequest.INIT_SEGMENT_TYPE:b.HTTPRequest.MEDIA_SEGMENT_TYPE,t.url=e.url,t.range=e.range.start+"-"+e.range.end,t}var m=this.context,u=(0,a.default)(m).getInstance(),e=void 0,v=void 0,y=void 0,t=void 0,n=void 0,r=void 0,i=void 0,E=void 0,d=void 0;return e={setConfig:function(e){if(!(e.baseURLController&&e.metricsModel&&e.mediaPlayerModel&&e.errHandler))throw new Error(o.default.MISSING_CONFIG_ERROR);d=e.baseURLController,r=e.metricsModel,i=e.mediaPlayerModel,t=e.errHandler},initialize:function(){n=(0,h.default)(m).getInstance(),E=(0,A.default)(m).create({errHandler:t,metricsModel:r,mediaPlayerModel:i,requestModifier:n})},loadInitialization:function(e,t){s();var n=null,r=d.resolve(e.path),i=r?r.url:void 0,a=e.range.split("-"),o=t||{range:{start:parseFloat(a[0]),end:parseFloat(a[1])},request:n,url:i,init:!0};v.info("Start loading initialization."),n=g(o),E.load({request:n,success:function(){u.trigger(c.default.INITIALIZATION_LOADED,{representation:e})},error:function(){u.trigger(c.default.INITIALIZATION_LOADED,{representation:e})}}),v.debug("Perform init load: "+o.url)},loadSegments:function(t,n,r,i){s();var e=null,a=d.resolve(t.path),o=a?a.url:void 0;i=i||l,e=g({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:e,url:o,init:!1}),v.debug("Parsing ebml header"),E.load({request:e,success:function(e){!function(e,t,n,r){var i,a=(0,_.default)(m).create({data:e}),o=void 0,s=void 0,l=n.split("-"),u=null,d={url:t,range:{start:parseFloat(l[0]),end:parseFloat(l[1])},request:u},c=void 0;for(v.debug("Parse EBML header: "+d.url),a.skipOverElement(y.EBML),a.consumeTag(y.Segment),c=a.getMatroskaCodedNum(),c+=a.getPos(),i=a.getPos();a.moreData()&&!a.consumeTagAndSize(y.Segment.Info,!0);)if(!(a.skipOverElement(y.Segment.SeekHead,!0)||a.skipOverElement(y.Segment.Tracks,!0)||a.skipOverElement(y.Segment.Cues,!0)||a.skipOverElement(y.Void,!0)))throw new Error("no valid top level element found");for(;void 0===o;){var f=a.getMatroskaCodedNum(!0),h=a.getMatroskaCodedNum();switch(f){case y.Segment.Info.Duration.tag:o=a[y.Segment.Info.Duration.parse](h);break;default:a.setPos(a.getPos()+h)}}u=g(d),E.load({request:u,success:function(e){s=p(e,i,c,o),r(s)},error:function(){v.error("Download Error: Cues "+d.url),r(null)}}),v.debug("Perform cues load: "+d.url+" bytes="+d.range.start+"-"+d.range.end)}(e,o,r,function(e){i(e,t,n)})},error:function(){i(null,t,n)}})},reset:function(){n=t=null}},v=(0,f.default)(m).getInstance().getLogger(e),y={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},e}Object.defineProperty(n,"__esModule",{value:!0});var c=r(e(53)),a=r(e(47)),_=r(e(201)),o=r(e(101)),s=r(e(48)),f=r(e(46)),h=r(e(207)),T=r(e(88)),b=e(235),S=r(e(217)),A=r(e(148)),R=r(e(215)),w=r(e(50));i.__dashjs_factory_name="WebmSegmentBaseLoader",n.default=s.default.getSingletonFactory(i),t.exports=n.default},{101:101,148:148,201:201,207:207,215:215,217:217,235:235,46:46,47:47,48:48,50:50,53:53,88:88}],60:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=new(function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.init()}return r(e,[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight"}}]),e}());n.default=i,t.exports=n.default},{}],61:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function f(){return E}function h(){return T}function e(){c=-1,E=!(y=null),_=[],I=w=u=l=R=A=b=null}function p(){var e=new Date,t=h(),n=1e3*A.getTime();R.addRepresentationSwitch(t.adaptation.type,e,n,t.id)}function g(){var e=D.getStreamInfo(),t=e?e.manifestInfo:null,n=t?t.isDynamic:null,r=u.calcSegmentAvailabilityRange(T,n);R.addDVRInfo(D.getType(),A.getTime(),t,r)}function d(e){return null==e||e>=_.length?null:_[e]}function m(e){var t=e;E=!1,v.trigger(k.default.AST_IN_FUTURE,{delay:t}),setTimeout(function(){if(!f()){E=!0,v.trigger(k.default.DATA_UPDATE_STARTED,{sender:s}),_.forEach(function(e){e.segmentAvailabilityRange=null});for(var e=0;e<_.length;e++)S.updateRepresentation(_[e],!0)}},t)}function t(e){if(e.sender.getStreamProcessor()===D&&f()){var t=e.representation,n=R.getMetricsFor(C.default.STREAM),r=R.getMetricsFor(h().adaptation.type),i=I.getCurrentManifestUpdate(n),a=!1,o=0,s=void 0,l=void 0;if(t.adaptation.period.mpd.manifest.type===P.default.DYNAMIC&&!t.adaptation.period.mpd.manifest.ignorePostponeTimePeriod){var u=t.segmentAvailabilityRange.end-t.segmentAvailabilityRange.start;o=1e3*(A.computeLiveDelay(T.segmentDuration,D.getStreamInfo().manifestInfo.DVRWindowSize)-u)}if(0<o)return g(),m(o),l=new N.default(O.default.SEGMENTS_UPDATE_FAILED_ERROR_CODE,O.default.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE),void v.trigger(k.default.DATA_UPDATE_COMPLETED,{sender:this,data:y,currentRepresentation:T,error:l});if(i){for(var d=0;d<i.representationInfo.length;d++)if((s=i.representationInfo[d]).index===t.index&&s.mediaType===D.getType()){a=!0;break}a||R.addManifestUpdateRepresentationInfo(i,t.id,t.index,t.adaptation.period.index,D.getType(),t.presentationTimeOffset,t.startNumber,t.segmentInfoType)}(function(){for(var e=0,t=_.length;e<t;e++){var n=_[e].segmentInfoType;if(null===_[e].segmentAvailabilityRange||!x.default.hasInitialization(_[e])||(n===P.default.SEGMENT_BASE||n===P.default.BASE_URL)&&!_[e].segments)return!1}return!0})()&&(E=!1,b.setPlaybackQuality(D.getType(),D.getStreamInfo(),(c=T,_.indexOf(c))),R.updateManifestUpdateInfo(i,{latency:T.segmentAvailabilityRange.end-A.getTime()}),I.getCurrentRepresentationSwitch(r)||p(),v.trigger(k.default.DATA_UPDATE_COMPLETED,{sender:this,data:y,currentRepresentation:T}))}var c}function n(e){e.isDynamic&&function(e){for(var t=void 0,n=0,r=_.length;n<r;n++)(t=_[n]).segmentAvailabilityRange=u.calcSegmentAvailabilityRange(t,e)}(e.isDynamic)}function r(e){e.sender.getStreamProcessor()===D&&(M.getValue().doNotUpdateDVRWindowOnBufferUpdated||g())}function i(e){if(e.mediaType===D.getType()&&D.getStreamInfo().id===e.streamInfo.id&&e.oldQuality!==e.newQuality){T=d(e.newQuality);var t=b.getThroughputHistory().getAverageThroughput(e.mediaType);isNaN(t)||l.setSavedBitrateSettings(e.mediaType,t),p()}}function a(e){if(e.newDuration){var t=h();t&&t.adaptation.period&&(t.adaptation.period.duration=e.newDuration)}}var o=this.context,v=(0,L.default)(o).getInstance(),s=void 0,y=void 0,c=void 0,E=void 0,_=void 0,T=void 0,b=void 0,S=void 0,A=void 0,R=void 0,l=void 0,u=void 0,w=void 0,I=void 0,D=void 0,M=void 0;return s={initialize:function(){S=D.getIndexHandler()},setConfig:function(e){e.abrController&&(b=e.abrController),e.domStorage&&(l=e.domStorage),e.metricsModel&&(R=e.metricsModel),e.dashMetrics&&(I=e.dashMetrics),e.dashManifestModel&&(w=e.dashManifestModel),e.playbackController&&(A=e.playbackController),e.timelineConverter&&(u=e.timelineConverter),e.manifestModel&&(M=e.manifestModel),e.streamProcessor&&(D=e.streamProcessor)},getData:function(){return y},getDataIndex:function(){return c},isUpdating:f,updateData:function(e,t,n){var r,i=D.getStreamInfo(),a=b.getTopQualityIndexFor(n,i.id),o=b.getMinAllowedIndexFor(n),s=void 0,l=null;if(E=!0,v.trigger(k.default.DATA_UPDATE_STARTED,{sender:this}),r=t,c=w.getIndexForAdaptation(y,r.period.mpd.manifest,r.period.index),_=w.getRepresentationsForAdaptation(r),s=null!==y&&y.id==e.id||n===C.default.FRAGMENTED_TEXT?b.getQualityFor(n,i):(l=b.getThroughputHistory().getAverageThroughput(n)||b.getInitialBitrateFor(n,i),b.getQualityForBitrate(D.getMediaInfo(),l)),void 0!==o&&s<o&&(s=o),a<s&&(s=a),T=d(s),y=e,n!==C.default.VIDEO&&n!==C.default.AUDIO&&n!==C.default.FRAGMENTED_TEXT)return E=!1,void v.trigger(k.default.DATA_UPDATE_COMPLETED,{sender:this,data:y,currentRepresentation:T});for(var u=0;u<_.length;u++)S.updateRepresentation(_[u],!0)},getStreamProcessor:function(){return D},getCurrentRepresentation:h,getRepresentationForQuality:d,reset:function(){v.off(k.default.QUALITY_CHANGE_REQUESTED,i,s),v.off(k.default.REPRESENTATION_UPDATED,t,s),v.off(k.default.WALLCLOCK_TIME_UPDATED,n,s),v.off(k.default.BUFFER_LEVEL_UPDATED,r,s),v.off(k.default.MANIFEST_VALIDITY_CHANGED,a,s),e()}},e(),v.on(k.default.QUALITY_CHANGE_REQUESTED,i,s),v.on(k.default.REPRESENTATION_UPDATED,t,s),v.on(k.default.WALLCLOCK_TIME_UPDATED,n,s),v.on(k.default.BUFFER_LEVEL_UPDATED,r,s),v.on(k.default.MANIFEST_VALIDITY_CHANGED,a,s),s}Object.defineProperty(n,"__esModule",{value:!0});var C=r(e(101)),O=r(e(50)),P=r(e(60)),N=r(e(215)),L=r(e(47)),k=r(e(53)),a=r(e(48)),x=r(e(87));i.__dashjs_factory_name="RepresentationController",n.default=a.default.getClassFactory(i),t.exports=n.default},{101:101,215:215,47:47,48:48,50:50,53:53,60:60,87:87}],62:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function s(e,t){var n=void 0,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,l=!1,u=!1;if(!e)throw new Error("adaptation is not defined");if(!t)throw new Error("type is not defined");if(e.hasOwnProperty("ContentComponent_asArray")&&(a=e.ContentComponent_asArray),o=t!==A.default.TEXT?new RegExp(t):new RegExp("(vtt|ttml)"),e.Representation_asArray&&e.Representation_asArray.length&&0<e.Representation_asArray.length){var d=h(e.Representation_asArray[0]);if(d&&0<d.length&&0<=U.THUMBNAILS_SCHEME_ID_URIS.indexOf(d[0].schemeIdUri))return t===A.default.IMAGE;if(e.Representation_asArray[0].hasOwnProperty(R.default.CODECS)&&(0===(s=e.Representation_asArray[0].codecs).search(A.default.STPP)||0===s.search(A.default.WVTT)))return t===A.default.FRAGMENTED_TEXT}if(a){if(1<a.length)return t===A.default.MUXED;a[0]&&a[0].contentType===t&&(u=l=!0)}if(e.hasOwnProperty(R.default.MIME_TYPE)&&(l=o.test(e.mimeType),u=!0),!u)for(n=0,r=e.Representation_asArray&&e.Representation_asArray.length?e.Representation_asArray.length:0;!u&&n<r;)(i=e.Representation_asArray[n]).hasOwnProperty(R.default.MIME_TYPE)&&(l=o.test(i.mimeType),u=!0),n++;return l}function c(e){return"text/vtt"===e||"application/ttml+xml"===e}function t(){return function(e,t){return e.bandwidth-t.bandwidth}}function l(e){return e&&void 0!==e.Representation_asArray&&null!==e.Representation_asArray&&e.Representation_asArray.sort(function(e,t){return e.bandwidth-t.bandwidth}),e}function u(e,t){return e&&e.Period_asArray&&S(t)&&e.Period_asArray[t]?e.Period_asArray[t].AdaptationSet_asArray:[]}function f(e){var t=!1;return e&&e.hasOwnProperty("type")&&(t=e.type===R.default.DYNAMIC),t}function h(e){return e&&e.EssentialProperty_asArray&&e.EssentialProperty_asArray.length?e.EssentialProperty_asArray.map(function(e){return{schemeIdUri:e.schemeIdUri,value:e.value}}):null}function p(e){if(e&&e.period&&S(e.period.index)){var t=e.period.mpd.manifest.Period_asArray[e.period.index];if(t&&t.AdaptationSet_asArray&&S(e.index))return l(t.AdaptationSet_asArray[e.index])}}function g(e){var t=e.S_asArray[e.S_asArray.length-1];return!t.hasOwnProperty("r")||0<=t.r}function m(e,t){if(!e)throw new Error("Period cannot be null or undefined");var n=D.default.DEFAULT_ID+"_"+t;return e.hasOwnProperty(R.default.ID)&&0<e.id.length&&"__proto__"!==e.id&&(n=e.id),n}function o(e,t){var n=[],r=void 0;if(!e)return n;for(r=0;r<e.length;r++){var i=new P.default;if(i.timescale=1,i.representation=t,!e[r].hasOwnProperty(A.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");i.schemeIdUri=e[r].schemeIdUri,e[r].hasOwnProperty(R.default.TIMESCALE)&&(i.timescale=e[r].timescale),e[r].hasOwnProperty(R.default.VALUE)&&(i.value=e[r].value),n.push(i)}return n}function v(r){var i=[],e=r.BaseURL_asArray||[r.baseUri],a=!1;return e.some(function(e){if(e){var t=new O.default,n=e.__text||e;return E.isRelative(n)&&(a=!0,r.baseUri&&(n=E.resolve(n,r.baseUri))),t.url=n,e.hasOwnProperty(R.default.SERVICE_LOCATION)&&e.serviceLocation.length?t.serviceLocation=e.serviceLocation:t.serviceLocation=n,e.hasOwnProperty(R.default.DVB_PRIORITY)&&(t.dvb_priority=e[R.default.DVB_PRIORITY]),e.hasOwnProperty(R.default.DVB_WEIGHT)&&(t.dvb_weight=e[R.default.DVB_WEIGHT]),e.hasOwnProperty(R.default.AVAILABILITY_TIME_OFFSET)&&(t.availabilityTimeOffset=e[R.default.AVAILABILITY_TIME_OFFSET]),e.hasOwnProperty(R.default.AVAILABILITY_TIME_COMPLETE)&&(t.availabilityTimeComplete="false"!==e[R.default.AVAILABILITY_TIME_COMPLETE]),i.push(t),a}}),i}e=e||{};var n=void 0,y=void 0,d=this.context,E=(0,L.default)(d).getInstance(),_=e.timelineConverter,T=e.errHandler,b=e.BASE64,i="urn:dvb:dash:profile:dvb-dash:2014",S=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};return n={getIsTypeOf:s,getIsTextTrack:c,getLanguageForAdaptation:function(e){var t="";return e&&e.hasOwnProperty(R.default.LANG)&&(t=e.lang.replace(/[^A-Za-z0-9-]/g,"")),t},getViewpointForAdaptation:function(e){return e&&e.hasOwnProperty(R.default.VIEWPOINT)?e.Viewpoint:null},getRolesForAdaptation:function(e){return e&&e.hasOwnProperty(R.default.ROLE_ASARRAY)?e.Role_asArray:[]},getAccessibilityForAdaptation:function(e){return e&&e.hasOwnProperty(R.default.ACCESSIBILITY_ASARRAY)?e.Accessibility_asArray:[]},getAudioChannelConfigurationForAdaptation:function(e){return e&&e.hasOwnProperty(R.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]},getAdaptationForIndex:function(e,t,n){var r=u(t,n);return 0<r.length&&S(e)?r[e]:null},getIndexForAdaptation:function(e,t,n){var r=u(t,n),i=r.length;if(e)for(var a=0;a<i;a++)if((0,N.default)(d).getInstance().areEqual(r[a],e))return a;return-1},getAdaptationForId:function(e,t,n){var r,i=u(t,n),a=void 0;for(a=0,r=i.length;a<r;a++)if(i[a].hasOwnProperty(R.default.ID)&&i[a].id===e)return i[a];return null},getAdaptationsForType:function(e,t,n){var r,i=u(e,t),a=void 0,o=[];for(a=0,r=i.length;a<r;a++)s(i[a],n)&&o.push(l(i[a]));return o},getCodec:function(e,t,n){var r=null;if(e&&e.Representation_asArray&&0<e.Representation_asArray.length){var i=S(t)&&0<=t&&t<e.Representation_asArray.length?e.Representation_asArray[t]:e.Representation_asArray[0];i&&(r=i.mimeType+';codecs="'+i.codecs+'"',n&&void 0!==i.width&&(r+=';width="'+i.width+'";height="'+i.height+'"'))}return r},getMimeType:function(e){return e&&e.Representation_asArray&&0<e.Representation_asArray.length?e.Representation_asArray[0].mimeType:null},getKID:function(e){return e&&e.hasOwnProperty(R.default.CENC_DEFAULT_KID)?e[R.default.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(e){if(!e.Label_asArray||!e.Label_asArray.length)return[];for(var t=[],n=0;n<e.Label_asArray.length;n++)t.push({lang:e.Label_asArray[n].lang,text:e.Label_asArray[n].__text||e.Label_asArray[n]});return t},getContentProtectionData:function(e){return e&&e.hasOwnProperty(R.default.CONTENTPROTECTION_ASARRAY)&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null},getIsDynamic:f,getIsDVB:function(e){return n=i,r=!1,(t=e)&&t.profiles&&0<t.profiles.length&&(r=-1!==t.profiles.indexOf(n)),r;var t,n,r},getDuration:function(e){return e&&e.hasOwnProperty(R.default.MEDIA_PRESENTATION_DURATION)?e.mediaPresentationDuration:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(e){return e&&e.bandwidth?e.bandwidth:NaN},getManifestUpdatePeriod:function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=NaN;return e&&e.hasOwnProperty(R.default.MINIMUM_UPDATE_PERIOD)&&(n=e.minimumUpdatePeriod),isNaN(n)?n:Math.max(n-t,1)},getRepresentationCount:function(e){return e&&e.Representation_asArray&&e.Representation_asArray.length?e.Representation_asArray.length:0},getBitrateListForAdaptation:function(e){return e&&e.Representation_asArray&&e.Representation_asArray.length?l(e).Representation_asArray.map(function(e){return{bandwidth:e.bandwidth,width:e.width||0,height:e.height||0,scanType:e.scanType||null}}):null},getRepresentationFor:function(e,t){return t&&t.Representation_asArray&&0<t.Representation_asArray.length&&S(e)?t.Representation_asArray[e]:null},getRepresentationsForAdaptation:function(e){var t=[],n=p(e),r=void 0,i=void 0;if(e&&e.period&&S(e.period.index)){var a=v(e.period.mpd.manifest);a&&(i=a[0])}if(n&&n.Representation_asArray)for(var o=0,s=n.Representation_asArray.length;o<s;++o){var l=n.Representation_asArray[o],u=new w.default;if(u.index=o,u.adaptation=e,l.hasOwnProperty(R.default.ID)&&(u.id=l.id),l.hasOwnProperty(R.default.CODECS)&&(u.codecs=l.codecs),l.hasOwnProperty(R.default.CODEC_PRIVATE_DATA)&&(u.codecPrivateData=l.codecPrivateData),l.hasOwnProperty(R.default.BANDWITH)&&(u.bandwidth=l.bandwidth),l.hasOwnProperty(R.default.WIDTH)&&(u.width=l.width),l.hasOwnProperty(R.default.HEIGHT)&&(u.height=l.height),l.hasOwnProperty(R.default.SCAN_TYPE)&&(u.scanType=l.scanType),l.hasOwnProperty(R.default.MAX_PLAYOUT_RATE)&&(u.maxPlayoutRate=l.maxPlayoutRate),l.hasOwnProperty(R.default.SEGMENT_BASE)?(r=l.SegmentBase,u.segmentInfoType=R.default.SEGMENT_BASE):l.hasOwnProperty(R.default.SEGMENT_LIST)?(r=l.SegmentList).hasOwnProperty(R.default.SEGMENT_TIMELINE)?(u.segmentInfoType=R.default.SEGMENT_TIMELINE,u.useCalculatedLiveEdgeTime=g(r.SegmentTimeline)):(u.segmentInfoType=R.default.SEGMENT_LIST,u.useCalculatedLiveEdgeTime=!0):l.hasOwnProperty(R.default.SEGMENT_TEMPLATE)?((r=l.SegmentTemplate).hasOwnProperty(R.default.SEGMENT_TIMELINE)?(u.segmentInfoType=R.default.SEGMENT_TIMELINE,u.useCalculatedLiveEdgeTime=g(r.SegmentTimeline)):u.segmentInfoType=R.default.SEGMENT_TEMPLATE,r.hasOwnProperty(R.default.INITIALIZATION_MINUS)&&(u.initialization=r.initialization.split("$Bandwidth$").join(l.bandwidth).split("$RepresentationID$").join(l.id))):u.segmentInfoType=R.default.BASE_URL,u.essentialProperties=h(l),r){if(r.hasOwnProperty(R.default.INITIALIZATION)){var d=r.Initialization;d.hasOwnProperty(R.default.SOURCE_URL)?u.initialization=d.sourceURL:d.hasOwnProperty(R.default.RANGE)&&(u.range=d.range)}else l.hasOwnProperty(R.default.MIME_TYPE)&&c(l.mimeType)&&(u.range=0);r.hasOwnProperty(R.default.TIMESCALE)&&(u.timescale=r.timescale),r.hasOwnProperty(R.default.DURATION)&&(u.segmentDuration=r.duration/u.timescale),r.hasOwnProperty(R.default.MEDIA)&&(u.media=r.media),r.hasOwnProperty(R.default.START_NUMBER)&&(u.startNumber=r.startNumber),r.hasOwnProperty(R.default.INDEX_RANGE)&&(u.indexRange=r.indexRange),r.hasOwnProperty(R.default.PRESENTATION_TIME_OFFSET)&&(u.presentationTimeOffset=r.presentationTimeOffset/u.timescale),r.hasOwnProperty(R.default.AVAILABILITY_TIME_OFFSET)?u.availabilityTimeOffset=r.availabilityTimeOffset:i&&void 0!==i.availabilityTimeOffset&&(u.availabilityTimeOffset=i.availabilityTimeOffset),r.hasOwnProperty(R.default.AVAILABILITY_TIME_COMPLETE)?u.availabilityTimeComplete="false"!==r.availabilityTimeComplete:i&&void 0!==i.availabilityTimeComplete&&(u.availabilityTimeComplete=i.availabilityTimeComplete)}u.MSETimeOffset=_.calcMSETimeOffset(u),u.path=[e.period.index,e.index,o],t.push(u)}return t},getAdaptationsForPeriod:function(e){var t=e&&S(e.index)?e.mpd.manifest.Period_asArray[e.index]:null,n=[],r=void 0,i=void 0,a=void 0;if(t&&t.AdaptationSet_asArray)for(a=0;a<t.AdaptationSet_asArray.length;a++)i=t.AdaptationSet_asArray[a],r=new I.default,i.hasOwnProperty(R.default.ID)&&(r.id=i.id),r.index=a,r.period=e,s(i,A.default.MUXED)?r.type=A.default.MUXED:s(i,A.default.AUDIO)?r.type=A.default.AUDIO:s(i,A.default.VIDEO)?r.type=A.default.VIDEO:s(i,A.default.FRAGMENTED_TEXT)?r.type=A.default.FRAGMENTED_TEXT:s(i,A.default.IMAGE)?r.type=A.default.IMAGE:r.type=A.default.TEXT,n.push(r);return n},getRegularPeriods:function(e){var t,n,r,i,a=!!e&&f(e.manifest),o=[],s=null,l=null,u=null,d=null,c=void 0;for(c=0,t=e&&e.manifest&&e.manifest.Period_asArray?e.manifest.Period_asArray.length:0;c<t;c++)(l=e.manifest.Period_asArray[c]).hasOwnProperty(R.default.START)?(d=new D.default).start=l.start:null!==s&&s.hasOwnProperty(R.default.DURATION)&&null!==u?(d=new D.default).start=parseFloat((u.start+u.duration).toFixed(5)):0!==c||a||((d=new D.default).start=0),null!==u&&isNaN(u.duration)&&(null!==d?u.duration=parseFloat((d.start-u.start).toFixed(5)):y.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==d&&(d.id=m(l,c),d.index=c,d.mpd=e,l.hasOwnProperty(R.default.DURATION)&&(d.duration=l.duration),o.push(d),s=l,u=d),d=l=null;return 0===o.length||null!==u&&isNaN(u.duration)&&(u.duration=parseFloat((n=u,r=f(n.mpd.manifest),i=void 0,n.mpd.manifest.mediaPresentationDuration?i=n.mpd.manifest.mediaPresentationDuration:n.duration?i=n.duration:r?i=Number.POSITIVE_INFINITY:T.error(new x.default(F.default.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",n)),i-u.start).toFixed(5))),o},getMpd:function(e){var t=new a.default;return e&&((t.manifest=e).hasOwnProperty(R.default.AVAILABILITY_START_TIME)?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):t.availabilityStartTime=new Date(e.loadedTime.getTime()),e.hasOwnProperty(R.default.AVAILABILITY_END_TIME)&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty(R.default.MINIMUM_UPDATE_PERIOD)&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty(R.default.MEDIA_PRESENTATION_DURATION)&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty(A.default.SUGGESTED_PRESENTATION_DELAY)&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty(R.default.TIMESHIFT_BUFFER_DEPTH)&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty(R.default.MAX_SEGMENT_DURATION)&&(t.maxSegmentDuration=e.maxSegmentDuration)),t},getEventsForPeriod:function(e){var t=e&&e.mpd&&e.mpd.manifest?e.mpd.manifest:null,n=t?t.Period_asArray:null,r=n&&e&&S(e.index)?n[e.index].EventStream_asArray:null,i=[],a=void 0,o=void 0;if(r)for(a=0;a<r.length;a++){var s=new P.default;if(s.period=e,s.timescale=1,!r[a].hasOwnProperty(A.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(s.schemeIdUri=r[a].schemeIdUri,r[a].hasOwnProperty(R.default.TIMESCALE)&&(s.timescale=r[a].timescale),r[a].hasOwnProperty(R.default.VALUE)&&(s.value=r[a].value),o=0;r[a].Event_asArray&&o<r[a].Event_asArray.length;o++){var l=new C.default;l.presentationTime=0,l.eventStream=s,r[a].Event_asArray[o].hasOwnProperty(R.default.PRESENTATION_TIME)&&(l.presentationTime=r[a].Event_asArray[o].presentationTime),r[a].Event_asArray[o].hasOwnProperty(R.default.DURATION)&&(l.duration=r[a].Event_asArray[o].duration),r[a].Event_asArray[o].hasOwnProperty(R.default.ID)&&(l.id=r[a].Event_asArray[o].id),r[a].Event_asArray[o].Signal&&r[a].Event_asArray[o].Signal.Binary?l.messageData=b.decodeArray(r[a].Event_asArray[o].Signal.Binary):l.messageData=r[a].Event_asArray[o].messageData||r[a].Event_asArray[o].__text,i.push(l)}}return i},getEventStreamForAdaptationSet:function(e,t){var n=void 0,r=void 0,i=void 0;return e&&e.Period_asArray&&t&&t.period&&S(t.period.index)&&(r=e.Period_asArray[t.period.index])&&r.AdaptationSet_asArray&&S(t.index)&&(i=r.AdaptationSet_asArray[t.index])&&(n=i.InbandEventStream_asArray),o(n,null)},getEventStreamForRepresentation:function(e,t){var n=void 0,r=void 0,i=void 0,a=void 0;return e&&e.Period_asArray&&t&&t.adaptation&&t.adaptation.period&&S(t.adaptation.period.index)&&(r=e.Period_asArray[t.adaptation.period.index])&&r.AdaptationSet_asArray&&S(t.adaptation.index)&&(i=r.AdaptationSet_asArray[t.adaptation.index])&&i.Representation_asArray&&S(t.index)&&(a=i.Representation_asArray[t.index])&&(n=a.InbandEventStream_asArray),o(n,t)},getUTCTimingSources:function(e){var t=f(e),n=!!e&&e.hasOwnProperty(R.default.AVAILABILITY_START_TIME),r=e?e.UTCTiming_asArray:null,i=[];return(t||n)&&r&&r.forEach(function(e){var t=new M.default;e.hasOwnProperty(A.default.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty(R.default.VALUE)&&(t.value=e.value.toString(),i.push(t)))}),i},getBaseURLsFromElement:v,getRepresentationSortFunction:t,getLocation:function(e){if(e&&e.hasOwnProperty(A.default.LOCATION))return e.Location=e.Location_asArray[0],e.Location},getUseCalculatedLiveEdgeTimeForAdaptation:function(e){var t=p(e).Representation_asArray[0],n=void 0;return t.hasOwnProperty(R.default.SEGMENT_LIST)?!(n=t.SegmentList).hasOwnProperty(R.default.SEGMENT_TIMELINE)||g(n.SegmentTimeline):!(!t.hasOwnProperty(R.default.SEGMENT_TEMPLATE)||!(n=t.SegmentTemplate).hasOwnProperty(R.default.SEGMENT_TIMELINE))&&g(n.SegmentTimeline)}},y=(0,k.default)(d).getInstance().getLogger(n),n}Object.defineProperty(n,"__esModule",{value:!0});var A=r(e(101)),R=r(e(60)),w=r(e(87)),I=r(e(81)),D=r(e(86)),a=r(e(85)),M=r(e(89)),C=r(e(83)),O=r(e(82)),P=r(e(84)),N=r(e(206)),L=r(e(210)),o=r(e(48)),k=r(e(46)),x=r(e(215)),F=r(e(50)),U=e(195);i.__dashjs_factory_name="DashManifestModel",n.default=o.default.getSingletonFactory(i),t.exports=n.default},{101:101,195:195,206:206,210:210,215:215,46:46,48:48,50:50,60:60,81:81,82:82,83:83,84:84,85:85,86:86,87:87,89:89}],63:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){var e=this.context,t=void 0,a=void 0,n=void 0,o=void 0,s=void 0;return t={parse:function(e){var t,n=window.performance.now();if(!(t=o.xml_str2json(e)))throw new Error("parsing the manifest failed");var r=window.performance.now();s.run(t);var i=window.performance.now();return a.info("Parsing complete: ( xml2json: "+(r-n).toPrecision(3)+"ms, objectiron: "+(i-r).toPrecision(3)+"ms, total: "+((i-n)/1e3).toPrecision(3)+"s)"),t},getMatchers:function(){return n},getIron:function(){return s}},a=(0,l.default)(e).getInstance().getLogger(t),n=[new f.default,new h.default,new p.default,new c.default],o=new d.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:n}),s=(0,u.default)(e).create({adaptationset:new g.default,period:new m.default}),t}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(48)),l=r(e(46)),u=r(e(73)),d=r(e(3)),c=r(e(72)),f=r(e(70)),h=r(e(69)),p=r(e(71)),g=r(e(66)),m=r(e(67));i.__dashjs_factory_name="DashParser",n.default=a.default.getClassFactory(i),t.exports=n.default},{3:3,46:46,48:48,66:66,67:67,69:69,70:70,71:71,72:72,73:73}],64:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=function(){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t;this._name=e,this._merge=(t=e)&&t.length&&t.charAt(0)===t.charAt(0).toUpperCase()}return r(n,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),n}();n.default=i,t.exports=n.default},{}],65:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,a=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e(64),o=(r=i)&&r.__esModule?r:{default:r},s=function(){function i(e,t,n){var r=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,i),this._name=e||"",this._properties=[],this._children=n||[],Array.isArray(t)&&t.forEach(function(e){r._properties.push(new o.default(e))})}return a(i,[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),i}();n.default=s,t.exports=n.default},{64:64}],66:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(65)),a=r(e(60)),o=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=[a.default.PROFILES,a.default.WIDTH,a.default.HEIGHT,a.default.SAR,a.default.FRAMERATE,a.default.AUDIO_SAMPLING_RATE,a.default.MIME_TYPE,a.default.SEGMENT_PROFILES,a.default.CODECS,a.default.MAXIMUM_SAP_PERIOD,a.default.START_WITH_SAP,a.default.MAX_PLAYOUT_RATE,a.default.CODING_DEPENDENCY,a.default.SCAN_TYPE,a.default.FRAME_PACKING,a.default.AUDIO_CHANNEL_CONFIGURATION,a.default.CONTENT_PROTECTION,a.default.ESSENTIAL_PROPERTY,a.default.SUPPLEMENTAL_PROPERTY,a.default.INBAND_EVENT_STREAM];(function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=a,n=o,r=!0,s=u=void 0}})(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,a.default.ADAPTATION_SET,e,[new i.default(a.default.REPRESENTATION,e,[new i.default(a.default.SUB_REPRESENTATION,e)])])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),t}();n.default=o,t.exports=n.default},{60:60,65:65}],67:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(65)),a=r(e(60)),o=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=[a.default.SEGMENT_BASE,a.default.SEGMENT_TEMPLATE,a.default.SEGMENT_LIST];(function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=a,n=o,r=!0,s=u=void 0}})(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,a.default.PERIOD,e,[new i.default(a.default.ADAPTATION_SET,e,[new i.default(a.default.REPRESENTATION,e)])])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),t}();n.default=o,t.exports=n.default},{60:60,65:65}],68:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=function(){function n(e,t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),this._test=e,this._converter=t}return r(n,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),n}();n.default=i,t.exports=n.default},{}],69:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(68),a=(r=i)&&r.__esModule?r:{default:r},o=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,s=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=a,n=o,r=!0,s=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){return o.test(e.value)},function(e){var t=o.exec(e),n=void 0;if(n=Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),t[6]&&parseInt(t[6],10)||0,t[7]&&1e3*parseFloat(t[7])||0),t[9]&&t[10]){var r=60*parseInt(t[9],10)+parseInt(t[10],10);n+=("+"===t[8]?-1:1)*r*60*1e3}return new Date(n)})}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),t}();n.default=s,t.exports=n.default},{68:68}],70:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(68)),a=r(e(101)),o=r(e(60)),s=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,l=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=a,n=o,r=!0,s=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){for(var t=[o.default.MIN_BUFFER_TIME,o.default.MEDIA_PRESENTATION_DURATION,o.default.MINIMUM_UPDATE_PERIOD,o.default.TIMESHIFT_BUFFER_DEPTH,o.default.MAX_SEGMENT_DURATION,o.default.MAX_SUBSEGMENT_DURATION,a.default.SUGGESTED_PRESENTATION_DELAY,o.default.START,a.default.START_TIME,o.default.DURATION],n=t.length,r=0;r<n;r++)if(e.nodeName===t[r])return s.test(e.value);return!1},function(e){var t=s.exec(e),n=31536e3*parseFloat(t[2]||0)+2592e3*parseFloat(t[4]||0)+86400*parseFloat(t[6]||0)+3600*parseFloat(t[8]||0)+60*parseFloat(t[10]||0)+parseFloat(t[12]||0);return void 0!==t[1]&&(n=-n),n})}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),t}();n.default=l,t.exports=n.default},{101:101,60:60,68:68}],71:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(68),a=(r=i)&&r.__esModule?r:{default:r},o=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,s=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=a,n=o,r=!0,s=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e){return o.test(e.value)},function(e){return parseFloat(e)})}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),t}();n.default=s,t.exports=n.default},{68:68}],72:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(68)),o=r(e(60)),s=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=a,n=o,r=!0,s=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,function(e,t){var n,r=(a(n={},o.default.MPD,[o.default.ID,o.default.PROFILES]),a(n,o.default.PERIOD,[o.default.ID]),a(n,o.default.BASE_URL,[o.default.SERVICE_LOCATION,o.default.BYTE_RANGE]),a(n,o.default.SEGMENT_BASE,[o.default.INDEX_RANGE]),a(n,o.default.INITIALIZATION,[o.default.RANGE]),a(n,o.default.REPRESENTATION_INDEX,[o.default.RANGE]),a(n,o.default.SEGMENT_LIST,[o.default.INDEX_RANGE]),a(n,o.default.BITSTREAM_SWITCHING,[o.default.RANGE]),a(n,o.default.SEGMENT_URL,[o.default.MEDIA_RANGE,o.default.INDEX_RANGE]),a(n,o.default.SEGMENT_TEMPLATE,[o.default.INDEX_RANGE,o.default.MEDIA,o.default.INDEX,o.default.INITIALIZATION_MINUS,o.default.BITSTREAM_SWITCHING_MINUS]),a(n,o.default.ASSET_IDENTIFIER,[o.default.VALUE,o.default.ID]),a(n,o.default.EVENT_STREAM,[o.default.VALUE]),a(n,o.default.ADAPTATION_SET,[o.default.PROFILES,o.default.MIME_TYPE,o.default.SEGMENT_PROFILES,o.default.CODECS,o.default.CONTENT_TYPE]),a(n,o.default.FRAME_PACKING,[o.default.VALUE,o.default.ID]),a(n,o.default.AUDIO_CHANNEL_CONFIGURATION,[o.default.VALUE,o.default.ID]),a(n,o.default.CONTENT_PROTECTION,[o.default.VALUE,o.default.ID]),a(n,o.default.ESSENTIAL_PROPERTY,[o.default.VALUE,o.default.ID]),a(n,o.default.SUPPLEMENTAL_PROPERTY,[o.default.VALUE,o.default.ID]),a(n,o.default.INBAND_EVENT_STREAM,[o.default.VALUE,o.default.ID]),a(n,o.default.ACCESSIBILITY,[o.default.VALUE,o.default.ID]),a(n,o.default.ROLE,[o.default.VALUE,o.default.ID]),a(n,o.default.RATING,[o.default.VALUE,o.default.ID]),a(n,o.default.VIEWPOINT,[o.default.VALUE,o.default.ID]),a(n,o.default.CONTENT_COMPONENT,[o.default.CONTENT_TYPE]),a(n,o.default.REPRESENTATION,[o.default.ID,o.default.DEPENDENCY_ID,o.default.MEDIA_STREAM_STRUCTURE_ID]),a(n,o.default.SUBSET,[o.default.ID]),a(n,o.default.METRICS,[o.default.METRICS_MINUS]),a(n,o.default.REPORTING,[o.default.VALUE,o.default.ID]),n);if(r.hasOwnProperty(t)){var i=r[t];return void 0!==i&&0<=i.indexOf(e.name)}return!1},function(e){return String(e)})}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),t}();n.default=s,t.exports=n.default},{60:60,68:68}],73:[function(e,t,n){"use strict";function r(d){function l(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function u(e,t,n){for(var r=0,i=e.length;r<i;++r){var a=e[r];if(t[a.name])if(n[a.name]){if(a.merge){var o=t[a.name],s=n[a.name];"object"==typeof o&&"object"==typeof s?l(o,s):n[a.name]=o+s}}else n[a.name]=t[a.name]}}function c(e,t){for(var n=0,r=e.children.length;n<r;++n){var i=e.children[n],a=t[i.name+"_asArray"];if(a)for(var o=0,s=a.length;o<s;++o){var l=a[o];u(e.properties,t,l),c(i,l)}}}return{run:function(e){if(null===e||"object"!=typeof e)return e;if("period"in d)for(var t=d.period,n=e.Period_asArray,r=0,i=n.length;r<i;++r){var a=n[r];if(c(t,a),"adaptationset"in d){var o=a.AdaptationSet_asArray;if(o)for(var s=d.adaptationset,l=0,u=o.length;l<u;++l)c(s,o[l])}}return e}}}Object.defineProperty(n,"__esModule",{value:!0});var i,a=e(48),o=(i=a)&&i.__esModule?i:{default:i};r.__dashjs_factory_name="ObjectIron";var s=o.default.getClassFactory(r);n.default=s,t.exports=n.default},{48:48}],74:[function(e,t,n){"use strict";function r(e,p){var g=(e=e||{}).timelineConverter;return{getSegments:function(e,t,n,r){var i,a,o,s,l=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,u=l.SegmentURL_asArray.length,d=[],c=void 0,f=void 0,h=void 0;for(s=e.startNumber,i=(0,m.decideSegmentListRangeForTemplate)(g,p,e,t,n,r),a=Math.max(i.start,0),o=Math.min(i.end,l.SegmentURL_asArray.length-1),c=a;c<=o;c++)h=l.SegmentURL_asArray[c],(f=(0,m.getIndexBasedSegment)(g,p,e,c)).replacementTime=(s+c-1)*e.segmentDuration,f.media=h.media?h.media:"",f.mediaRange=h.mediaRange,f.index=h.index,f.indexRange=h.indexRange,d.push(f),f=null;return e.availableSegmentsNumber=u,d}}}Object.defineProperty(n,"__esModule",{value:!0});var i,a=e(48),o=(i=a)&&i.__esModule?i:{default:i},m=e(77);r.__dashjs_factory_name="ListSegmentsGetter";var s=o.default.getClassFactory(r);n.default=s,t.exports=n.default},{48:48,77:77}],75:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"round10",value:function(e,t){return n="round",r=e,void 0===(i=t)||0==+i?Math[n](r):(i=+i,null===(r=+r)||isNaN(r)||"number"!=typeof i||i%1!=0?NaN:(r=r.toString().split("e"),+((r=(r=Math[n](+(r[0]+"e"+(r[1]?+r[1]-i:-i)))).toString().split("e"))[0]+"e"+(r[1]?+r[1]+i:i))));var n,r,i}}]),e}();n.default=i,t.exports=n.default},{}],76:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n,r=this.context,c=void 0,f=void 0,h=void 0;return n={getSegments:function(e,t,n,r,i){var a,o,s,l,u=void 0,d=e.segmentInfoType;d!==p.default.SEGMENT_BASE&&d!==p.default.BASE_URL&&(a=n,o=e.segments,l=s=void 0,!o||0===o.length||(l=o[0].availabilityIdx,s=o[o.length-1].availabilityIdx,a<l||s<a))?(d===p.default.SEGMENT_TIMELINE?u=c.getSegments(e,t,n,i):d===p.default.SEGMENT_TEMPLATE?u=f.getSegments(e,t,n,i):d===p.default.SEGMENT_LIST&&(u=h.getSegments(e,t,n,i)),r&&r(e,u)):u=e.segments}},c=(0,o.default)(r).create(e,t),f=(0,s.default)(r).create(e,t),h=(0,l.default)(r).create(e,t),n}Object.defineProperty(n,"__esModule",{value:!0});var p=r(e(60)),a=r(e(48)),o=r(e(80)),s=r(e(78)),l=r(e(74));i.__dashjs_factory_name="SegmentsGetter";var u=a.default.getClassFactory(i);n.default=u,t.exports=n.default},{48:48,60:60,74:74,78:78,80:80}],77:[function(e,t,n){"use strict";function c(e,t){for(;e.length<t;)e="0"+e;return e}function g(e,t){return e.representation.startNumber+t}function m(e,t,n){var r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,l=void 0,u=t.length,d="%0".length;if(!e)return e;for(;;){if((r=e.indexOf("$"+t))<0)return e;if((i=e.indexOf("$",r+u))<0)return e;if((a=e.indexOf("%0",r+u))>r&&a<i)switch(o=e.charAt(i-1),s=parseInt(e.substring(a+d,i-1),10),o){case"d":case"i":case"u":l=c(n.toString(),s);break;case"x":l=c(n.toString(16),s);break;case"X":l=c(n.toString(16),s).toUpperCase();break;case"o":l=c(n.toString(8),s);break;default:return e}else l=n;e=e.substring(0,r)+l+e.substring(i+1)}}function v(e,t){if(!t||!t.segments)return null;var n=t.segments.length,r=void 0,i=void 0;if(e<n&&(r=t.segments[e])&&r.availabilityIdx===e)return r;for(i=0;i<n;i++)if((r=t.segments[i])&&r.availabilityIdx===e)return r;return null}Object.defineProperty(n,"__esModule",{value:!0}),n.unescapeDollarsInTemplate=function(e){return e?e.split("$$").join("$"):e},n.replaceIDForTemplate=function(e,t){if(!t||!e||-1===e.indexOf("$RepresentationID$"))return e;var n=t.toString();return e.split("$RepresentationID$").join(n)},n.replaceTokenForTemplate=m,n.getIndexBasedSegment=function(e,t,n,r){var i,a,o=void 0,s=void 0;return s=n.segmentDuration,isNaN(s)&&(s=n.adaptation.period.duration),i=parseFloat((n.adaptation.period.start+r*s).toFixed(5)),a=parseFloat((i+s).toFixed(5)),(o=new y.default).representation=n,o.duration=s,o.presentationStartTime=i,o.mediaStartTime=e.calcMediaTimeFromPresentationTime(o.presentationStartTime,n),o.availabilityStartTime=e.calcAvailabilityStartTimeFromPresentationTime(o.presentationStartTime,n.adaptation.period.mpd,t),o.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(a,n.adaptation.period.mpd,t),o.wallStartTime=e.calcWallTimeForSegment(o,t),o.replacementNumber=g(o,r),o.availabilityIdx=r,o},n.getTimeBasedSegment=function(e,t,n,r,i,a,o,s,l,u){var d,c,f=r/a,h=Math.min(i/a,n.adaptation.period.mpd.maxSegmentDuration),p=void 0;return c=(d=e.calcPresentationTimeFromMediaTime(f,n))+h,(p=new y.default).representation=n,p.duration=h,p.mediaStartTime=f,p.presentationStartTime=d,p.availabilityStartTime=n.adaptation.period.mpd.manifest.loadedTime,p.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(c,n.adaptation.period.mpd,t),p.wallStartTime=e.calcWallTimeForSegment(p,t),p.replacementTime=u||r,p.replacementNumber=g(p,l),o=m(o=m(o,"Number",p.replacementNumber),"Time",p.replacementTime),p.media=o,p.mediaRange=s,p.availabilityIdx=l,p},n.getSegmentByIndex=v,n.decideSegmentListRangeForTemplate=function(e,t,n,r,i,a){var o=n.segmentDuration,s=n.adaptation.period.mpd.manifest.minBufferTime,l=n.segmentAvailabilityRange,u={start:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,l?l.start:NaN),end:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,l?l.end:NaN)},d=n.segments,c=2*o,f=a||Math.max(2*s,10*o),h=NaN,p=null,g=void 0,m=void 0;return u.start=Math.max(u.start,0),m=t&&!e.isTimeSyncCompleted()?(g=Math.floor(u.start/o),Math.floor(u.end/o)):(h=d&&0<d.length?(p=v(i,n))?e.calcPeriodRelativeTimeFromMpdRelativeTime(n,p.presentationStartTime):0<i?i*o:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,r):0<i?i*o:t?u.end:u.start,g=Math.floor(Math.max(h-c,u.start)/o),Math.floor(Math.min(g+f/o,u.end/o))),{start:g,end:m}};var r,i=e(88),y=(r=i)&&r.__esModule?r:{default:r}},{88:88}],78:[function(e,t,n){"use strict";function r(e,g){var m=e.timelineConverter;return{getSegments:function(e,t,n,r){var i,a,o,s,l=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate,u=e.segmentDuration,d=e.segmentAvailabilityRange,c=[],f=null,h=null,p=void 0;for(s=e.startNumber,a=(i=isNaN(u)&&!g?{start:s,end:s}:(0,v.decideSegmentListRangeForTemplate)(m,g,e,t,n,r)).start,o=i.end,p=a;p<=o;p++)(h=(0,v.getIndexBasedSegment)(m,g,e,p)).replacementTime=(s+p-1)*e.segmentDuration,f=l.media,f=(0,v.replaceTokenForTemplate)(f,"Number",h.replacementNumber),f=(0,v.replaceTokenForTemplate)(f,"Time",h.replacementTime),h.media=f,c.push(h),h=null;return isNaN(u)?e.availableSegmentsNumber=1:e.availableSegmentsNumber=Math.ceil((d.end-d.start)/u),c}}}Object.defineProperty(n,"__esModule",{value:!0});var i,a=e(48),o=(i=a)&&i.__esModule?i:{default:i},v=e(77);r.__dashjs_factory_name="TemplateSegmentsGetter";var s=o.default.getClassFactory(r);n.default=s,t.exports=n.default},{48:48,77:77}],79:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function t(e){o=e}function r(e,t,n,r){return r?n&&t.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(t.availabilityStartTime.getTime()+1e3*(e+t.timeShiftBufferDepth)):t.availabilityEndTime:n?new Date(t.availabilityStartTime.getTime()+1e3*(e-o)):t.availabilityStartTime}function l(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*o)/1e3}function e(e){u||void 0!==e.offset&&(t(e.offset/1e3),u=!0)}function n(){o=0,u=!1,s=NaN}var i=this.context,a=(0,d.default)(i).getInstance(),o=void 0,u=void 0,s=void 0;return{initialize:function(){n(),a.on(c.default.TIME_SYNCHRONIZATION_COMPLETED,e,this)},isTimeSyncCompleted:function(){return u},setTimeSyncCompleted:function(e){u=e},getClientTimeOffset:function(){return o},setClientTimeOffset:t,getExpectedLiveEdge:function(){return s},setExpectedLiveEdge:function(e){s=e},calcAvailabilityStartTimeFromPresentationTime:function(e,t,n){return r.call(this,e,t,n)},calcAvailabilityEndTimeFromPresentationTime:function(e,t,n){return r.call(this,e,t,n,!0)},calcPresentationTimeFromWallTime:l,calcPresentationTimeFromMediaTime:function(e,t){return e+(t.adaptation.period.start-t.presentationTimeOffset)},calcPeriodRelativeTimeFromMpdRelativeTime:function(e,t){return t-e.adaptation.period.start},calcMediaTimeFromPresentationTime:function(e,t){return e-t.adaptation.period.start+t.presentationTimeOffset},calcSegmentAvailabilityRange:function(e,t){var n=e.adaptation.period,r={start:n.start,end:n.start+n.duration};if(!t)return r;if(!u&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var i=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0),a=l(new Date,n),o=n.start+n.duration;r.start=Math.max(a-n.mpd.timeShiftBufferDepth,n.start);var s=void 0!==e.availabilityTimeOffset&&e.availabilityTimeOffset<i?i-e.availabilityTimeOffset:i;return r.end=o<=a&&a-s<o?o:a-s,r},calcWallTimeForSegment:function(e,t){var n=void 0,r=void 0,i=void 0;return t&&(n=e.representation.adaptation.period.mpd.suggestedPresentationDelay,r=e.presentationStartTime+n,i=new Date(e.availabilityStartTime.getTime()+1e3*r)),i},calcMSETimeOffset:function(e){var t=e.presentationTimeOffset;return e.adaptation.period.start-t},reset:function(){a.off(c.default.TIME_SYNCHRONIZATION_COMPLETED,e,this),n()}}}Object.defineProperty(n,"__esModule",{value:!0});var d=r(e(47)),c=r(e(53)),a=r(e(48));i.__dashjs_factory_name="TimelineConverter",n.default=a.default.getSingletonFactory(i),t.exports=n.default},{47:47,48:48,53:53}],80:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,I){var D=(e=e||{}).timelineConverter;return{getSegments:function(i,e,t,n){if(function(){if(!D||!D.hasOwnProperty("calcMediaTimeFromPresentationTime")||!D.hasOwnProperty("calcSegmentAvailabilityRange"))throw new Error(M.default.MISSING_CONFIG_ERROR)}(),!i)throw new Error("no representation");void 0===e&&(e=null);var r,a=i.adaptation.period.mpd.manifest.Period_asArray[i.adaptation.period.index].AdaptationSet_asArray[i.adaptation.index].Representation_asArray[i.index].SegmentTemplate||i.adaptation.period.mpd.manifest.Period_asArray[i.adaptation.period.index].AdaptationSet_asArray[i.adaptation.index].Representation_asArray[i.index].SegmentList,o=a.SegmentTimeline,s=a.SegmentURL_asArray,l=0<i.availableSegmentsNumber;r=n||(-1<t||null!==e?10:1/0);var u,d,c,f=0,h=0,p=-1,g=[],m=null,v=void 0,y=void 0,E=void 0,_=void 0,T=void 0,b=void 0,S=void 0,A=void 0,R=function(e,t){var n=a.media,r=e.mediaRange;return s&&(n=s[t].media||"",r=s[t].mediaRange),(0,C.getTimeBasedSegment)(D,I,i,f,e.d,A,n,r,p,e.tManifest)};for(A=i.timescale,u=o.S_asArray,c=t,null!==e&&(m=D.calcMediaTimeFromPresentationTime(e,i)),y=0,d=u.length;y<d;y++){if(_=0,(v=u[y]).hasOwnProperty("r")&&(_=v.r),v.hasOwnProperty("t")&&(h=(f=v.t)/A),_<0){if((b=u[y+1])&&b.hasOwnProperty("t"))T=b.t/A;else{var w=i.segmentAvailabilityRange?i.segmentAvailabilityRange.end:D.calcSegmentAvailabilityRange(i,I).end;T=D.calcMediaTimeFromPresentationTime(w,i),i.segmentDuration=v.d/A}_=Math.ceil((T-h)/(v.d/A))-1}if(S){if(l)break;p+=_+1}else for(E=0;E<=_;E++)if(p++,g.length>r){if(S=!0,l)break}else null!==m?h>=m-v.d/A*1.5&&g.push(R(v,p)):c<=p&&g.push(R(v,p)),h=(f+=v.d)/A}return l||(i.availableSegmentsNumber=p+1),g}}}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(48)),M=r(e(101)),C=e(77);i.__dashjs_factory_name="TimelineSegmentsGetter";var o=a.default.getClassFactory(i);n.default=o,t.exports=n.default},{101:101,48:48,77:77}],81:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.period=null,this.index=-1,this.type=null},t.exports=n.default},{}],82:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function e(t,n,r,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.url=t||"",this.serviceLocation=n||t||"",this.dvb_priority=r||1,this.dvb_weight=i||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0};r.DEFAULT_DVB_PRIORITY=1,r.DEFAULT_DVB_WEIGHT=1,n.default=r,t.exports=n.default},{}],83:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},t.exports=n.default},{}],84:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri=""},t.exports=n.default},{}],85:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},t.exports=n.default},{}],86:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null};r.DEFAULT_ID="defaultId",n.default=r,t.exports=n.default},{}],87:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=e(60),o=(r=a)&&r.__esModule?r:{default:r},s=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}return i(e,null,[{key:"hasInitialization",value:function(e){return null!==e.initialization||null!==e.range}},{key:"hasSegments",value:function(e){return e.segmentInfoType!==o.default.BASE_URL&&e.segmentInfoType!==o.default.SEGMENT_BASE&&!e.indexRange}}]),e}();n.default=s,t.exports=n.default},{60:60}],88:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null},t.exports=n.default},{}],89:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.schemeIdUri="",this.value=""},t.exports=n.default},{}],90:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){e=e||{};var t,n=this.context,i=(0,d.default)(n).getInstance(),a=void 0,o=void 0;return a={checkForExistence:function(t){var e=function(e){i.trigger(f.default.CHECK_FOR_EXISTENCE_COMPLETED,{request:t,exists:e})};if(t){var n=new l.default(t.url);o.load({request:n,success:function(){e(!0)},error:function(){e(!1)}})}else e(!1)},load:function(n){var r=function(e,t){i.trigger(f.default.LOADING_COMPLETED,{request:n,response:e||null,error:t||null,sender:a})};n?o.load({request:n,progress:function(e){i.trigger(f.default.LOADING_PROGRESS,{request:n,stream:e.stream}),e.data&&i.trigger(f.default.LOADING_DATA_PROGRESS,{request:n,response:e.data||null,error:null,sender:a})},success:function(e){r(e)},error:function(e,t,n){r(void 0,new u.default(h.default.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,n,t))},abort:function(e){e&&i.trigger(f.default.LOADING_ABANDONED,{request:e,mediaType:e.mediaType,sender:a})}}):r(void 0,new u.default(h.default.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,h.default.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){o&&o.abort()},reset:function(){o&&(o.abort(),o=null)}},t=(0,c.default)(n).getInstance(),o=(0,s.default)(n).create({errHandler:e.errHandler,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,boxParser:t,useFetch:e.mediaPlayerModel.getLowLatencyEnabled()}),a}Object.defineProperty(n,"__esModule",{value:!0});var s=r(e(148)),l=r(e(218)),u=r(e(215)),d=r(e(47)),c=r(e(197)),f=r(e(53)),h=r(e(50)),a=r(e(48));i.__dashjs_factory_name="FragmentLoader",n.default=a.default.getClassFactory(i),t.exports=n.default},{148:148,197:197,215:215,218:218,47:47,48:48,50:50,53:53}],91:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){d.trigger(_.default.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}e=e||{};var u=this.context,d=(0,l.default)(u).getInstance(),c=(0,s.default)(u).getInstance(),n=void 0,f=void 0,r=void 0,h=void 0,p=void 0,g=e.mssHandler,i=e.errHandler;return n={load:function(l){var e=new v.default(l,E.HTTPRequest.MPD_TYPE);r.load({request:e,success:function(e,t,n){if(h){var r=void 0,i=void 0,a=void 0;if(n&&n!==l?(i=c.parseBaseUrl(n),r=n):(c.isRelative(l)&&(l=c.resolve(l,window.location.href)),i=c.parseBaseUrl(l)),null===p&&(s=null,p=-1<(o=e).indexOf("SmoothStreamingMedia")?(g&&(s=g.createMssParser(),g.registerEvents()),s):-1<o.indexOf("MPD")?(0,b.default)(u).create():s),null===p)return void d.trigger(_.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new y.default(T.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,T.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+l)});h.setMatchers(p.getMatchers()),h.setIron(p.getIron());try{a=p.parse(e)}catch(e){return void d.trigger(_.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new y.default(T.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,T.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+l)})}a?(a.url=r||l,a.originalUrl||(a.originalUrl=a.url),a.hasOwnProperty(m.default.LOCATION)&&(i=c.parseBaseUrl(a.Location_asArray[0]),f.debug("BaseURI set by Location to: "+i)),a.baseUri=i,a.loadedTime=new Date,h.resolveManifestOnLoad(a)):d.trigger(_.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new y.default(T.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,T.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+l)})}var o,s},error:function(e,t,n){d.trigger(_.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new y.default(T.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,T.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+(l+", ")+n)})}})},reset:function(){d.off(_.default.XLINK_READY,t,n),h&&(h.reset(),h=null),r&&(r.abort(),r=null),g&&g.reset()}},f=(0,S.default)(u).getInstance().getLogger(n),d.on(_.default.XLINK_READY,t,n),r=(0,o.default)(u).create({errHandler:i,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),h=(0,a.default)(u).create({errHandler:i,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),p=null,n}Object.defineProperty(n,"__esModule",{value:!0});var m=r(e(101)),a=r(e(116)),o=r(e(148)),s=r(e(210)),v=r(e(226)),y=r(e(215)),E=e(235),l=r(e(47)),_=r(e(53)),T=r(e(50)),u=r(e(48)),b=r(e(63)),S=r(e(46));i.__dashjs_factory_name="ManifestLoader";var d=u.default.getClassFactory(i);n.default=d,t.exports=n.default},{101:101,116:116,148:148,210:210,215:215,226:226,235:235,46:46,47:47,48:48,50:50,53:53,63:63}],92:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){p=NaN,m=!(v=!1),t()}function t(){null!==g&&(clearInterval(g),g=null)}function r(e){t(),isNaN(e)&&!isNaN(p)&&(e=1e3*p),isNaN(e)||(h.debug("Refresh manifest in "+e+" milliseconds."),g=setTimeout(a,e))}function n(){v=!0;var e=E.getValue(),t=e.url,n=_.getLocation(e);n&&(t=n),y.load(t)}function i(e){E.setValue(e);var t=new Date,n=(t.getTime()-e.loadedTime.getTime())/1e3;2147483647<1e3*(p=_.getManifestUpdatePeriod(e,n))&&(p=2147483.647),c.trigger(A.default.MANIFEST_UPDATED,{manifest:e}),h.info("Manifest has been refreshed at "+t+"["+t.getTime()/1e3+"] "),m||r()}function a(){if(!m||b.getScheduleWhilePaused())return v?void r(b.getManifestUpdateRetryInterval()):void n()}function o(e){e.error?e.error.code===w.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&T.error(e.error):i(e.manifest)}function s(){m=!1,r()}function l(){m=!0,t()}function u(){v=!1}var d=this.context,c=(0,S.default)(d).getInstance(),f=void 0,h=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,E=void 0,_=void 0,T=void 0,b=void 0;return f={initialize:function(){e(),c.on(A.default.STREAMS_COMPOSED,u,this),c.on(A.default.PLAYBACK_STARTED,s,this),c.on(A.default.PLAYBACK_PAUSED,l,this),c.on(A.default.INTERNAL_MANIFEST_LOADED,o,this)},setManifest:function(e){i(e)},refreshManifest:n,setConfig:function(e){e&&(e.manifestModel&&(E=e.manifestModel),e.dashManifestModel&&(_=e.dashManifestModel),e.mediaPlayerModel&&(b=e.mediaPlayerModel),e.manifestLoader&&(y=e.manifestLoader),e.errHandler&&(T=e.errHandler))},reset:function(){c.off(A.default.PLAYBACK_STARTED,s,this),c.off(A.default.PLAYBACK_PAUSED,l,this),c.off(A.default.STREAMS_COMPOSED,u,this),c.off(A.default.INTERNAL_MANIFEST_LOADED,o,this),e()}},h=(0,R.default)(d).getInstance().getLogger(f),f}Object.defineProperty(n,"__esModule",{value:!0});var S=r(e(47)),A=r(e(53)),a=r(e(48)),R=r(e(46)),w=r(e(50));i.__dashjs_factory_name="ManifestUpdater",n.default=a.default.getClassFactory(i),t.exports=n.default},{46:46,47:47,48:48,50:50,53:53}],93:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function t(){return!!N&&!!te.getElement()}function r(){return(0,Ce.getVersionString)()}function e(){if(!F)throw b;return Z.isPaused()}function o(e){var t=y();if(!t)return 0;var n=Z.getLiveDelay(),r=t.range.start+e;return r>t.range.end-n&&(r=t.range.end-n),r}function n(e){if(!F)throw b;var t=d().currentTime;if(void 0!==e)t=Q.getTimeRelativeToStreamId(t,e);else if(Z.getIsDynamic()){var n=y();t=null===n?0:i()-(n.range.end-n.time)}return t}function i(){if(!F)throw b;var e=d().duration;if(Z.getIsDynamic()){var t,n=y();if(!n)return 0;e=(t=n.range.end-n.range.start)<n.manifestInfo.DVRWindowSize?t:n.manifestInfo.DVRWindowSize}return e}function a(e){(0,Be.checkParameterType)(e,"boolean"),U=e}function s(){W.restoreDefaultUTCTimingSources()}function l(){return J}function u(e){return V.getReadOnlyMetricsFor(e)}function d(){if(!te.getElement())throw S;return te.getElement()}function c(e){if(!k)throw R;te.setElement(e),e&&(v(),function(){if(!Y){var e=dashjs.MetricsReporting;if("function"==typeof e){var t=e(D).create();Y=t.createMetricsReporting({debug:C,eventBus:M,mediaElement:d(),dashManifestModel:$,metricsModel:V,events:Ie.default,constants:ae.default,metricsConstants:oe.default})}}}(),function(){if(!H){var e=dashjs.MssHandler;"function"==typeof e&&(Re.default.extend(e.errors),H=e(D).create({eventBus:M,mediaPlayerModel:W,metricsModel:V,manifestModel:ee,playbackController:Z,protectionController:K,baseURLController:(0,de.default)(D).getInstance(),errHandler:z,events:Ie.default,constants:ae.default,debug:C,initSegmentType:ke.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:xe.default,ISOBoxer:Fe.default}))}}(),Q&&Q.switchToVideoElement()),F&&g(),_()}function f(e){if(!x)throw T;var t=Q.getActiveStreamInfo();return j.getTracksFor(e,t)}function h(e){if(!k)throw R;"string"==typeof e&&re.initialize(e),N=e,(x||F)&&g(),t()&&_()}function p(){if(!x)throw T;var e=Q.getActiveStreamInfo();return e?Q.getStreamById(e.id):null}function g(){x=F=!1,q.reset(),Q.reset(),Z.reset(),B.reset(),j.reset(),ne.reset(),K&&(W.getKeepProtectionMediaKeys()?K.stop():(K.reset(),K=null,v()))}function m(){return(0,ce.default)(D).create({errHandler:z,metricsModel:V,mediaPlayerModel:W,requestModifier:(0,ge.default)(D).getInstance(),mssHandler:H})}function v(){if(K)return K;var e=dashjs.Protection;if("function"!=typeof e)return null;var t=e(D).create();return Ie.default.extend(e.events),De.default.extend(e.events,{publicOnly:!0}),Re.default.extend(e.errors),X||(X=(0,he.default)(D).getInstance()),K=t.createProtectionSystem({debug:C,errHandler:z,videoModel:te,capabilities:X,eventBus:M,events:Ie.default,BASE64:xe.default,constants:ae.default})}function y(){var e=V.getReadOnlyMetricsFor(ae.default.VIDEO)||V.getReadOnlyMetricsFor(ae.default.AUDIO);return J.getCurrentDVRInfo(e)}function E(e){var t=y();return t?e+(t.manifestInfo.availableFrom.getTime()/1e3+t.range.start):0}function _(){var e;!x&&N&&(x=!0,P.info("Streaming Initialized"),e=m(),Q||(Q=(0,le.default)(D).getInstance()),j.setConfig({domStorage:ie}),Q.setConfig({capabilities:X,manifestLoader:e,manifestModel:ee,dashManifestModel:$,mediaPlayerModel:W,protectionController:K,adapter:q,metricsModel:V,dashMetrics:J,errHandler:z,timelineConverter:G,videoModel:te,playbackController:Z,domStorage:ie,abrController:B,mediaController:j,textController:ne}),Z.setConfig({streamController:Q,metricsModel:V,dashMetrics:J,manifestModel:ee,mediaPlayerModel:W,dashManifestModel:$,adapter:q,videoModel:te,timelineConverter:G,uriFragmentModel:re}),B.setConfig({streamController:Q,domStorage:ie,mediaPlayerModel:W,metricsModel:V,dashMetrics:J,manifestModel:ee,videoModel:te,adapter:q}),B.createAbrRulesCollection(),ne.setConfig({errHandler:z,manifestModel:ee,dashManifestModel:$,mediaController:j,streamController:Q,videoModel:te}),Q.initialize(U,L),"string"==typeof N?Q.load(N):Q.loadWithManifest(N)),!F&&t()&&(F=!0,P.info("Playback Initialized"))}var T="You must first call initialize() and set a source before calling this method",b="You must first call initialize() and set a valid source and view before calling this method",S="You must first call attachView() to set the video element before calling this method",A="You must first call attachSource() with a valid source before calling this method",R="MediaPlayer not initialized!",w="Playback minimum drift has an invalid value! Use a number from 0 to 0.5",I="Playback maximum drift has an invalid value! Use a number greater or equal to 0",D=this.context,M=(0,we.default)(D).getInstance(),C=(0,Ae.default)(D).getInstance(),O=void 0,P=void 0,N=void 0,L=void 0,k=void 0,x=void 0,F=void 0,U=void 0,B=void 0,G=void 0,j=void 0,K=void 0,Y=void 0,H=void 0,q=void 0,V=void 0,W=void 0,z=void 0,X=void 0,Q=void 0,Z=void 0,J=void 0,$=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0;return O={initialize:function(e,t,n){if(X||(X=(0,he.default)(D).getInstance()),z=(0,fe.default)(D).getInstance(),!X.supportsMediaSource())return z.capabilityError("mediasource"),void z.error(new Ue.default(Re.default.CAPABILITY_MEDIASOURCE_ERROR_CODE,Re.default.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE));k||(k=!0,G=(0,Le.default)(D).getInstance(),B||(B=(0,Te.default)(D).getInstance()),Z||(Z=(0,se.default)(D).getInstance()),j||(j=(0,ue.default)(D).getInstance()),q=(0,Oe.default)(D).getInstance(),$=(0,Pe.default)(D).getInstance({timelineConverter:G,errHandler:z,BASE64:xe.default}),ee=(0,ye.default)(D).getInstance(),J=(0,Ne.default)(D).getInstance({manifestModel:ee,dashManifestModel:$}),V=(0,_e.default)(D).getInstance(),ne=(0,me.default)(D).getInstance(),ie=(0,Se.default)(D).getInstance({mediaPlayerModel:W}),q.setConfig({dashManifestModel:$}),s(),a(void 0===n||n),e&&c(e),t&&h(t),P.info("[dash.js "+r()+"] MediaPlayer has been initialized"))},setConfig:function(e){e&&(e.capabilities&&(X=e.capabilities),e.streamController&&(Q=e.streamController),e.playbackController&&(Z=e.playbackController),e.mediaPlayerModel&&(W=e.mediaPlayerModel),e.abrController&&(B=e.abrController),e.mediaController&&(j=e.mediaController))},on:function(e,t,n){M.on(e,t,n)},off:function(e,t,n){M.off(e,t,n)},extend:function(e,t,n){Me.default.extend(e,t,n,D)},attachView:c,attachSource:h,isReady:t,preload:function(){if(te.getElement()||x)return!1;if(!N)throw A;_()},play:function(){if(!F)throw b;(!U||e()&&F)&&Z.play()},isPaused:e,pause:function(){if(!F)throw b;Z.pause()},isSeeking:function(){if(!F)throw b;return Z.isSeeking()},isDynamic:function(){if(!F)throw b;return Z.getIsDynamic()},seek:function(e){if(!F)throw b;if((0,Be.checkParameterType)(e,"number"),isNaN(e))throw ae.default.BAD_ARGUMENT_ERROR;var t=Z.getIsDynamic()?o(e):e;Z.seek(t)},setPlaybackRate:function(e){d().playbackRate=e},getPlaybackRate:function(){return d().playbackRate},setMute:function(e){(0,Be.checkParameterType)(e,"boolean"),d().muted=e},isMuted:function(){return d().muted},setVolume:function(e){if("number"!=typeof e||isNaN(e)||e<0||1<e)throw ae.default.BAD_ARGUMENT_ERROR;d().volume=e},getVolume:function(){return d().volume},time:n,duration:i,timeAsUTC:function(){if(!F)throw b;return n()<0?NaN:E(n())},durationAsUTC:function(){if(!F)throw b;return E(i())},getActiveStream:p,getDVRWindowSize:function(){var e=y();return e?e.manifestInfo.DVRWindowSize:0},getDVRSeekOffset:o,convertToTimeCode:function(e){e=Math.max(e,0);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return(0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(n<10?"0"+n.toString():n.toString())+":"+(r<10?"0"+r.toString():r.toString())},formatUTC:function(e,t,n){var r=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],i=new Date(1e3*e),a=i.toLocaleDateString(t),o=i.toLocaleTimeString(t,{hour12:n});return r?o+" "+a:o},getVersion:r,getDebug:function(){return C},getBufferLength:function(e){var t,n=[ae.default.VIDEO,ae.default.AUDIO,ae.default.FRAGMENTED_TEXT];return e?-1===n.indexOf(e)?(P.warn("getBufferLength requested for invalid type"),NaN):(t=l().getCurrentBufferLevel(u(e)))||NaN:(t=n.map(function(e){return 0<f(e).length?l().getCurrentBufferLevel(u(e)):Number.MAX_VALUE}).reduce(function(e,t){return Math.min(e,t)}))===Number.MAX_VALUE?NaN:t},getTTMLRenderingDiv:function(){return te?te.getTTMLRenderingDiv():null},getVideoElement:d,getSource:function(){if(!N)throw A;return N},setLiveDelayFragmentCount:function(e){W.setLiveDelayFragmentCount(e)},setLiveDelay:function(e){W.setLiveDelay(e)},getLiveDelay:function(){return W.getLiveDelay()},getCurrentLiveLatency:function(){if(!k)throw R;return F?Z.getCurrentLiveLatency():NaN},useSuggestedPresentationDelay:function(e){W.setUseSuggestedPresentationDelay(e)},enableLastBitrateCaching:function(e,t){W.setLastBitrateCachingInfo(e,t)},enableLastMediaSettingsCaching:function(e,t){W.setLastMediaSettingsCachingInfo(e,t)},setMaxAllowedBitrateFor:function(e,t){B.setMaxAllowedBitrateFor(e,t)},getMaxAllowedBitrateFor:function(e){return B.getMaxAllowedBitrateFor(e)},getTopBitrateInfoFor:function(e){if(!x)throw T;return B.getTopBitrateInfoFor(e)},setMinAllowedBitrateFor:function(e,t){B.setMinAllowedBitrateFor(e,t)},getMinAllowedBitrateFor:function(e){return B.getMinAllowedBitrateFor(e)},setMaxAllowedRepresentationRatioFor:function(e,t){B.setMaxAllowedRepresentationRatioFor(e,t)},getMaxAllowedRepresentationRatioFor:function(e){return B.getMaxAllowedRepresentationRatioFor(e)},setAutoPlay:a,getAutoPlay:function(){return U},setScheduleWhilePaused:function(e){W.setScheduleWhilePaused(e)},getScheduleWhilePaused:function(){return W.getScheduleWhilePaused()},getDashMetrics:l,getMetricsFor:u,getQualityFor:function(e){if(!x)throw T;if(e!==ae.default.IMAGE)return B.getQualityFor(e,Q.getActiveStreamInfo());var t=p();if(!t)return-1;var n=t.getThumbnailController();return n?n.getCurrentTrackIndex():-1},setQualityFor:function(e,t){if(!x)throw T;if(e===ae.default.IMAGE){var n=p();if(!n)return;var r=n.getThumbnailController();r&&r.setTrackByIndex(t)}B.setPlaybackQuality(e,Q.getActiveStreamInfo(),t)},updatePortalSize:function(){B.setElementSize(),B.setWindowResizeEventCalled(!0)},getLimitBitrateByPortal:function(){return B.getLimitBitrateByPortal()},setLimitBitrateByPortal:function(e){B.setLimitBitrateByPortal(e)},getUsePixelRatioInLimitBitrateByPortal:function(){return B.getUsePixelRatioInLimitBitrateByPortal()},setUsePixelRatioInLimitBitrateByPortal:function(e){B.setUsePixelRatioInLimitBitrateByPortal(e)},setTextDefaultLanguage:function(e){void 0===ne&&(ne=(0,me.default)(D).getInstance()),ne.setTextDefaultLanguage(e)},getTextDefaultLanguage:function(){return void 0===ne&&(ne=(0,me.default)(D).getInstance()),ne.getTextDefaultLanguage()},setTextDefaultEnabled:function(e){void 0===ne&&(ne=(0,me.default)(D).getInstance()),ne.setTextDefaultEnabled(e)},getTextDefaultEnabled:function(){return void 0===ne&&(ne=(0,me.default)(D).getInstance()),ne.getTextDefaultEnabled()},enableText:function(e){void 0===ne&&(ne=(0,me.default)(D).getInstance()),ne.enableText(e)},enableForcedTextStreaming:function(e){void 0===ne&&(ne=(0,me.default)(D).getInstance()),ne.enableForcedTextStreaming(e)},isTextEnabled:function(){return void 0===ne&&(ne=(0,me.default)(D).getInstance()),ne.isTextEnabled()},setTextTrack:function(e){if(!F)throw b;void 0===ne&&(ne=(0,me.default)(D).getInstance()),ne.setTextTrack(e)},getBitrateInfoListFor:function(e){if(!x)throw T;var t=p();return t?t.getBitrateListFor(e):[]},setInitialBitrateFor:function(e,t){B.setInitialBitrateFor(e,t)},getInitialBitrateFor:function(e){if(!x)throw T;return B.getInitialBitrateFor(e)},setInitialRepresentationRatioFor:function(e,t){B.setInitialRepresentationRatioFor(e,t)},getInitialRepresentationRatioFor:function(e){return B.getInitialRepresentationRatioFor(e)},getStreamsFromManifest:function(e){if(!x)throw T;return q.getStreamsInfo(e)},getTracksFor:f,getTracksForTypeFromManifest:function(e,t,n){if(!x)throw T;return(n=n||q.getStreamsInfo(t,1)[0])?q.getAllMediaInfoForType(n,e,t):[]},getCurrentTrackFor:function(e){if(!x)throw T;var t=Q.getActiveStreamInfo();return j.getCurrentTrackFor(e,t)},setInitialMediaSettingsFor:function(e,t){if(!k)throw R;j.setInitialSettings(e,t)},getInitialMediaSettingsFor:function(e){if(!k)throw R;return j.getInitialSettings(e)},setCurrentTrack:function(e){if(!x)throw T;j.setTrack(e)},getTrackSwitchModeFor:function(e){if(!k)throw R;return j.getSwitchMode(e)},setTrackSwitchModeFor:function(e,t){if(!k)throw R;j.setSwitchMode(e,t)},setSelectionModeForInitialTrack:function(e){if(!k)throw R;j.setSelectionModeForInitialTrack(e)},getSelectionModeForInitialTrack:function(){if(!k)throw R;return j.getSelectionModeForInitialTrack()},setFastSwitchEnabled:function(e){W.setFastSwitchEnabled(e)},getFastSwitchEnabled:function(){return W.getFastSwitchEnabled()},setMovingAverageMethod:function(e){W.setMovingAverageMethod(e)},getMovingAverageMethod:function(){return W.getMovingAverageMethod()},getAutoSwitchQualityFor:function(e){return B.getAutoSwitchBitrateFor(e)},setAutoSwitchQualityFor:function(e,t){B.setAutoSwitchBitrateFor(e,t)},setABRStrategy:function(e){W.setABRStrategy(e)},getABRStrategy:function(){return W.getABRStrategy()},useDefaultABRRules:function(e){W.setUseDefaultABRRules(e)},addABRCustomRule:function(e,t,n){W.addABRCustomRule(e,t,n)},removeABRCustomRule:function(e){W.removeABRCustomRule(e)},removeAllABRCustomRule:function(){W.removeABRCustomRule()},setBandwidthSafetyFactor:function(e){W.setBandwidthSafetyFactor(e)},getBandwidthSafetyFactor:function(){return W.getBandwidthSafetyFactor()},getAverageThroughput:function(e){var t=B.getThroughputHistory();return t?t.getAverageThroughput(e):0},setAbandonLoadTimeout:function(e){W.setAbandonLoadTimeout(e)},retrieveManifest:function(e,n){var r=m(),i=this;M.on(Ie.default.INTERNAL_MANIFEST_LOADED,function e(t){t.error?n(null,t.error):n(t.manifest),M.off(Ie.default.INTERNAL_MANIFEST_LOADED,e,i),r.reset()},i),re.initialize(e),r.load(e)},addUTCTimingSource:function(e,t){W.addUTCTimingSource(e,t)},removeUTCTimingSource:function(e,t){W.removeUTCTimingSource(e,t)},clearDefaultUTCTimingSources:function(){W.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:s,setBufferToKeep:function(e){W.setBufferToKeep(e)},setBufferAheadToKeep:function(e){W.setBufferAheadToKeep(e)},setBufferPruningInterval:function(e){W.setBufferPruningInterval(e)},setStableBufferTime:function(e){W.setStableBufferTime(e)},getStableBufferTime:function(){return W.getStableBufferTime()},setBufferTimeAtTopQuality:function(e){W.setBufferTimeAtTopQuality(e)},getBufferTimeAtTopQuality:function(){return W.getBufferTimeAtTopQuality()},setBufferTimeAtTopQualityLongForm:function(e){W.setBufferTimeAtTopQualityLongForm(e)},getBufferTimeAtTopQualityLongForm:function(){return W.getBufferTimeAtTopQualityLongForm()},setFragmentLoaderRetryAttempts:function(e){W.setRetryAttemptsForType(ke.HTTPRequest.MEDIA_SEGMENT_TYPE,e)},setFragmentLoaderRetryInterval:function(e){W.setRetryIntervalForType(ke.HTTPRequest.MEDIA_SEGMENT_TYPE,e)},setManifestLoaderRetryAttempts:function(e){W.setRetryAttemptsForType(ke.HTTPRequest.MPD_TYPE,e)},setManifestLoaderRetryInterval:function(e){W.setRetryIntervalForType(ke.HTTPRequest.MPD_TYPE,e)},setXHRWithCredentialsForType:function(e,t){W.setXHRWithCredentialsForType(e,t)},getXHRWithCredentialsForType:function(e){return W.getXHRWithCredentialsForType(e)},setJumpGaps:function(e){W.setJumpGaps(e)},getJumpGaps:function(){return W.getJumpGaps()},setSmallGapLimit:function(e){W.setSmallGapLimit(e)},getSmallGapLimit:function(){return W.getSmallGapLimit()},setLowLatencyEnabled:function(e){W.setLowLatencyEnabled(e)},getLowLatencyEnabled:function(){return W.getLowLatencyEnabled()},setCatchUpPlaybackRate:function(e){W.setCatchUpPlaybackRate(e)},getCatchUpPlaybackRate:function(){return W.getCatchUpPlaybackRate()},setLowLatencyMinDrift:function(e){if("number"!=typeof e||isNaN(e)||e<0||.5<e)throw w;W.setLowLatencyMinDrift(e)},getLowLatencyMinDrift:function(){return W.getLowLatencyMinDrift()},setLowLatencyMaxDriftBeforeSeeking:function(e){if("number"!=typeof e||isNaN(e)||e<0)throw I;W.setLowLatencyMaxDriftBeforeSeeking(e)},getLowLatencyMaxDriftBeforeSeeking:function(){return W.getLowLatencyMaxDriftBeforeSeeking()},setManifestUpdateRetryInterval:function(e){W.setManifestUpdateRetryInterval(e)},getManifestUpdateRetryInterval:function(){return W.getManifestUpdateRetryInterval()},setLongFormContentDurationThreshold:function(e){W.setLongFormContentDurationThreshold(e)},setSegmentOverlapToleranceTime:function(e){W.setSegmentOverlapToleranceTime(e)},setCacheLoadThresholdForType:function(e,t){W.setCacheLoadThresholdForType(e,t)},getProtectionController:function(){return v()},attachProtectionController:function(e){K=e},setProtectionData:function(e){L=e,Q&&Q.setProtectionData(L)},enableManifestDateHeaderTimeSource:function(e){W.setUseManifestDateHeaderTimeSource(e)},displayCaptionsOnTop:function(e){var t=(0,pe.default)(D).getInstance();t.setConfig({videoModel:te}),t.initialize(),t.displayCConTop(e)},attachVideoContainer:function(e){P.warn("attachVideoContainer method has been deprecated and will be removed in dash.js v3.0.0")},attachTTMLRenderingDiv:function(e){if(!te.getElement())throw S;te.setTTMLRenderingDiv(e)},getCurrentTextTrackIndex:function(){var e=NaN;return ne&&(e=ne.getCurrentTrackIdx()),e},getUseDeadTimeLatencyForAbr:function(){return B.getUseDeadTimeLatency()},setUseDeadTimeLatencyForAbr:function(e){B.setUseDeadTimeLatency(e)},getThumbnail:function(e,t){if(e<0)return null;var n=Z.getIsDynamic()?o(e):e,r=Q.getStreamForTime(n);if(null===r)return null;var i=r.getThumbnailController();if(!i)return null;var a=Q.getTimeRelativeToStreamId(n,r.getId());return i.get(a,t)},keepProtectionMediaKeys:function(e){W.setKeepProtectionMediaKeys(e)},reset:function(){h(null),c(null),L=null,K&&(K.reset(),K=null),Y&&(Y.reset(),Y=null)}},P=C.getLogger(O),U=!(x=F=k=!1),q=L=K=null,Ie.default.extend(De.default),W=(0,Ee.default)(D).getInstance(),te=(0,be.default)(D).getInstance(),re=(0,ve.default)(D).getInstance(),O}Object.defineProperty(n,"__esModule",{value:!0});var ae=r(e(101)),oe=r(e(102)),se=r(e(112)),le=r(e(114)),ue=r(e(110)),de=r(e(105)),ce=r(e(91)),fe=r(e(202)),he=r(e(198)),pe=r(e(193)),ge=r(e(207)),me=r(e(191)),ve=r(e(145)),ye=r(e(142)),Ee=r(e(143)),_e=r(e(144)),Te=r(e(104)),be=r(e(146)),Se=r(e(200)),Ae=r(e(46)),Re=r(e(50)),we=r(e(47)),Ie=r(e(53)),De=r(e(94)),Me=r(e(48)),Ce=e(49),Oe=r(e(55)),Pe=r(e(62)),Ne=r(e(57)),Le=r(e(79)),ke=e(235),xe=r(e(1)),Fe=r(e(6)),Ue=r(e(215)),Be=e(208);i.__dashjs_factory_name="MediaPlayer";var a=Me.default.getClassFactory(i);a.events=De.default,a.errors=Re.default,Me.default.updateClassFactory(i.__dashjs_factory_name,a),n.default=a,t.exports=n.default},{1:1,101:101,102:102,104:104,105:105,110:110,112:112,114:114,142:142,143:143,144:144,145:145,146:146,191:191,193:193,198:198,200:200,202:202,207:207,208:208,215:215,235:235,46:46,47:47,48:48,49:49,50:50,53:53,55:55,57:57,6:6,62:62,79:79,91:91,94:94}],94:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(54),a=(r=i)&&r.__esModule?r:{default:r},o=new(function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=a,n=o,r=!0,s=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.AST_IN_FUTURE="astInFuture",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.TRACK_CHANGE_RENDERED="trackChangeRendered",this.SOURCE_INITIALIZED="sourceInitialized",this.STREAM_INITIALIZED="streamInitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.TTML_PARSED="ttmlParsed",this.TTML_TO_PARSE="ttmlToParse",this.CAPTION_RENDERED="captionRendered",this.CAPTION_CONTAINER_RESIZE="captionContainerResize",this.CAN_PLAY="canPlay",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_SEEK_ASKED="playbackSeekAsked",this.PLAYBACK_STALLED="playbackStalled",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",this.PLAYBACK_WAITING="playbackWaiting",this.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged"}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),t}());n.default=o,t.exports=n.default},{54:54}],95:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(93),o=(r=i)&&r.__esModule?r:{default:r},a=function(){function s(e,t,n){if(!e||!/^VIDEO$/i.test(e.nodeName))return null;if(e._dashjs_player)return e._dashjs_player;var r=void 0,i=e.id||e.name||"video element";if(!(t=t||[].slice.call(e.querySelectorAll("source")).filter(function(e){return e.type==u})[0])&&e.src)(t=document.createElement("source")).src=e.src;else if(!t&&!e.src)return null;return n=n||{},(r=(0,o.default)(n).create()).initialize(e,t.src,e.autoplay),a||(a=r.getDebug().getLogger()),a.debug("Converted "+i+" to dash.js player and added content: "+t.src),e._dashjs_player=r}function l(e){for(var t=!0;t;){var n=e;if(t=!1,/^VIDEO$/i.test(n.nodeName))return n;e=n.parentNode,t=!0}}var u="application/dash+xml",a=void 0;return{create:s,createAll:function(e,t){var n=[];e=e||"[data-dashjs-player]";for(var r=(t=t||document).querySelectorAll(e),i=0;i<r.length;i++){var a=s(r[i],null);n.push(a)}var o=t.querySelectorAll('source[type="'+u+'"]');for(i=0;i<o.length;i++)a=s(l(o[i]),null),n.push(a);return n}}}(),s=void 0;!("undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&"undefined"!=typeof window&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?a.createAll():s=window.setInterval(function(){window.dashjs&&(window.clearInterval(s),a.createAll())},500):window.addEventListener("load",function e(){window.removeEventListener("load",e),a.createAll()})),n.default=a,t.exports=n.default},{93:93}],96:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function a(t,n){s=s.filter(function(e){return!((isNaN(n)||e.start<n)&&(isNaN(t)||e.end>t))})}var t=this.context,n=void 0,r=void 0,o=void 0,s=[],i=e;return n={getAllBufferRanges:function(){for(var t=[],e=0;e<s.length;e++){var n=s[e];0===t.length||n.start>t[t.length-1].end?t.push({start:n.start,end:n.end}):t[t.length-1].end=n.end}var r={start:function(e){return t[e].start},end:function(e){return t[e].end}};return Object.defineProperty(r,"length",{get:function(){return t.length}}),r},append:function(e){o="InitializationSegment"!==e.segmentType?(s.push(e),s.sort(function(e,t){return e.start-t.start}),null):e,r.debug("PreBufferSink appended chunk s: "+e.start+"; e: "+e.end),i&&i({chunk:e})},remove:a,abort:function(){},discharge:function(e,t){var n,r,i=(n=e,r=t,s.filter(function(e){return(isNaN(r)||e.start<r)&&(isNaN(n)||e.end>n)}));return o&&(i.push(o),o=null),a(e,t),i},reset:function(){s=[],i=o=null},updateTimestampOffset:function(){},hasDiscontinuitiesAfter:function(){return!1}},r=(0,l.default)(t).getInstance().getLogger(n),n}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(46)),a=r(e(48));i.__dashjs_factory_name="PreBufferSink";var o=a.default.getClassFactory(i);n.default=o,t.exports=n.default},{46:46,48:48}],97:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(i,r,e,a){function u(){try{return g.buffered}catch(e){return p.error("getAllBufferRanges exception: "+e.message),null}}function n(){if(0<y.length){var e=y.shift();g.updating?d(g,e):(e(),n())}}function o(){g.updating||n()}function s(){g.updating||n()}function l(){p.error("SourceBufferSink error",r.type)}function d(e,t){y.push(t),e.updating||n()}var c=this.context,f=(0,S.default)(c).getInstance(),h=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=[],E=[],_=e;return h={getAllBufferRanges:u,getBuffer:function(){return g},append:function(e){e?(E.push(e),m||d(g,function s(){var t=this,l=this;0<E.length&&function(){m=!0;var a=E[0];E.splice(0,1);var o=[],e=function(){var e,t,n,r,i=u();e=l,n=i,r=a,(t=o)&&0<t.length&&t.length<n.length&&function(e,t){for(var n=0;n<e.length;n++){var r=Math.round(e.start(n)),i=Math.round(e.end(n));if(i===t.start||r===t.end||t.start>=r&&t.end<=i)return!0}return!1}(t,r)&&f.trigger(A.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:n.end(n.length-2),to:n.start(n.length-1),unintended:!0}),0<E.length?s.call(this):(m=!1,_&&_({chunk:a}))};try{0===a.bytes.length?e.call(t):(o=u(),g.appendBuffer?g.appendBuffer(a.bytes):g.append(a.bytes,a),d(g,e.bind(t)))}catch(e){p.fatal('SourceBuffer append failed "'+e+'"'),0<E.length?s():m=!1,_&&_({chunk:a,error:new b.default(e.code,e.message)})}}()}.bind(this))):_({chunk:e,error:new b.default(w.default.APPEND_ERROR_CODE,w.default.APPEND_ERROR_MESSAGE)})},remove:function(t,n,e){var r=this;d(g,function(){try{0<=t&&t<n&&(e||"ended"!==i.readyState)&&g.remove(t,n),d(g,function(){f.trigger(A.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:r,from:t,to:n,unintended:!1})})}catch(e){f.trigger(A.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:r,from:t,to:n,unintended:!1,error:new b.default(e.code,e.message)})}})},abort:function(){try{"open"===i.readyState?g.abort():g.setTextTrack&&"ended"===i.readyState&&g.abort()}catch(e){p.error('SourceBuffer append abort failed: "'+e+'"')}E=[]},reset:function(e){if(g){if("function"==typeof g.removeEventListener&&(g.removeEventListener("updateend",s,!1),g.removeEventListener("error",l,!1),g.removeEventListener("abort",l,!1)),clearInterval(v),!e){try{g.getClassName&&"TextSourceBuffer"===g.getClassName()||i.removeSourceBuffer(g)}catch(e){p.error("Failed to remove source buffer from media source.")}g=null}m=!1}E=[],_=null},updateTimestampOffset:function(e){g.timestampOffset===e||isNaN(e)||d(g,function(){g.timestampOffset=e})},hasDiscontinuitiesAfter:function(e){try{var t=u();if(t&&1<t.length)for(var n=0,r=t.length;n<r;n++)if(0<n&&e<t.start(n)&&t.start(n)>t.end(n-1)+.1)return!0}catch(e){p.error("hasDiscontinuities exception: "+e.message)}return!1}},function(){p=(0,T.default)(c).getInstance().getLogger(h),m=!1;var t=r.codec;try{if(t.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))throw new Error("not really supported");if((g=a||i.addSourceBuffer(t)).changeType&&a&&(p.debug("Doing period transition with changeType"),g.changeType(t)),"function"==typeof g.addEventListener)try{g.addEventListener("updateend",s,!1),g.addEventListener("error",l,!1),g.addEventListener("abort",l,!1)}catch(e){v=setInterval(o,50)}else v=setInterval(o,50)}catch(e){if(!r.isText&&-1===t.indexOf('codecs="stpp')&&-1===t.indexOf('codecs="wvtt'))throw e;var n=(0,R.default)(c).getInstance();g=n.getTextSourceBuffer()}}(),h}Object.defineProperty(n,"__esModule",{value:!0});var T=r(e(46)),b=r(e(215)),S=r(e(47)),A=r(e(53)),a=r(e(48)),R=r(e(191)),w=r(e(50));i.__dashjs_factory_name="SourceBufferSink";var o=a.default.getClassFactory(i);n.default=o,t.exports=n.default},{191:191,215:215,46:46,47:47,48:48,50:50,53:53}],98:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(s){function e(e){for(var t=Y?Y.length:0,n=0;n<t;n++)Y[n].getFragmentModel().removeExecutedRequestsBeforeTime(i()+r()),Y[n].reset(!1,e);S(q=H=!(Y=[])),w.off(le.default.CURRENT_TRACK_CHANGED,u,j)}function t(){e(),V=null,z=!(W={})}function n(){F&&F.pause(),Q&&(Q.reset(),Q=null),t(),w.off(le.default.DATA_UPDATE_COMPLETED,y,j),w.off(le.default.BUFFERING_COMPLETED,v,j),X&&(w.off(le.default.KEY_ERROR,o,j),w.off(le.default.SERVER_CERTIFICATE_UPDATED,o,j),w.off(le.default.LICENSE_REQUEST_COMPLETE,o,j),w.off(le.default.KEY_SYSTEM_SELECTED,o,j),w.off(le.default.KEY_SESSION_CREATED,o,j),w.off(le.default.KEY_STATUSES_CHANGED,o,j)),S(!1)}function r(){return V?V.duration:NaN}function i(){return V?V.start:NaN}function c(){return V}function a(){if(!(x&&x.hasOwnProperty("getBitrateList")&&O&&O.hasOwnProperty("getAllMediaInfoForType")&&O.hasOwnProperty("getEventsFor")))throw new Error(ne.default.MISSING_CONFIG_ERROR)}function o(e){e.error&&(N.mediaKeySessionError(e.error.message),N.error(e.error),K.fatal(e.error.message),n())}function l(e){var t,n=e.type,r=void 0;if(n===ne.default.MUXED&&e)return r="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",K.fatal(r),N.manifestError(r,"multiplexedrep",I.getValue()),N.error(new ce.default(de.default.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,r,I.getValue())),!1;if(n===ne.default.TEXT||n===ne.default.FRAGMENTED_TEXT||n===ne.default.EMBEDDED_TEXT||n===ne.default.IMAGE)return!0;if(t=e.codec,K.debug(n+" codec: "+t),e.contentProtection&&!P.supportsEncryptedMedia())N.capabilityError("encryptedmedia"),N.error(new ce.default(de.default.CAPABILITY_MEDIAKEYS_ERROR_CODE,de.default.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE));else if(!P.supportsCodec(t))return r=n+"Codec ("+t+") is not supported.",K.error(r),!1;return!0}function u(e){if(e.newMediaInfo.streamInfo.id===V.id){var t=E(e.newMediaInfo);if(t){var n=F.getTime();K.info("Stream -  Process track changed at current time "+n);var r=e.newMediaInfo,i=I.getValue();O.setCurrentMediaInfo(V.id,r.type,r),K.debug("Stream -  Update stream controller"),i.refreshManifestOnSwitchTrack?(K.debug("Stream -  Refreshing manifest for switch track"),ee=e,C.refreshManifest()):(t.selectMediaInfo(r),r.type!==ne.default.FRAGMENTED_TEXT?(x.updateTopQualityIndex(r),t.switchTrackAsked(),t.getFragmentModel().abortRequests()):(t.getScheduleController().setSeekTarget(NaN),O.setIndexHandlerTime(t,n),O.resetIndexHandler(t)))}}}function d(e,t){var n=O.getAllMediaInfoForType(V,e),r=null,i=void 0;if(n&&0!==n.length){for(var a=0,o=n.length;a<o;a++)if(r=n[a],e===ne.default.EMBEDDED_TEXT)B.addEmbeddedTrack(r);else{if(!l(r))continue;U.addTrack(r)}if(e!==ne.default.EMBEDDED_TEXT&&0!==U.getTracksFor(e,V).length){if(e===ne.default.IMAGE)return void(Z=(0,oe.default)(R).create({dashManifestModel:D,adapter:O,baseURLController:s.baseURLController,stream:j,timelineConverter:s.timelineConverter}));(e!==ne.default.FRAGMENTED_TEXT||e===ne.default.FRAGMENTED_TEXT&&B.getTextDefaultEnabled())&&(U.checkInitialMediaSettingsForType(e,V),i=U.getCurrentTrackFor(e,V)),e!==ne.default.FRAGMENTED_TEXT||B.getTextDefaultEnabled()||(i=U.getTracksFor(e,V)[0]),function(e,t,n,r){var i=(0,re.default)(R).create({type:e.type,mimeType:e.mimeType,timelineConverter:L,adapter:O,manifestModel:I,dashManifestModel:D,mediaPlayerModel:M,metricsModel:k,dashMetrics:s.dashMetrics,baseURLController:s.baseURLController,stream:j,abrController:x,domStorage:s.domStorage,playbackController:F,mediaController:U,streamController:s.streamController,textController:B,errHandler:N});if(i.initialize(n),x.updateTopQualityIndex(e),r?(i.setBuffer(r.buffer),i.getIndexHandler().setCurrentTime(r.currentTime),Y[r.replaceIdx]=i):Y.push(i),!r||!r.ignoreMediaInfo)if(e.type===ne.default.TEXT||e.type===ne.default.FRAGMENTED_TEXT){for(var a=void 0,o=0;o<t.length;o++)t[o].index===e.index&&(a=o),i.addMediaInfo(t[o]);i.selectMediaInfo(t[a])}else i.addMediaInfo(e,!0)}(i,n,t)}}else K.info("No "+e+" data.")}function f(){J||((J=(0,ie.default)(R).create()).setConfig({manifestUpdater:C,playbackController:F}),h())}function h(){var e=O.getEventsFor(V);J.addInlineEvents(e)}function p(e){var r=O.getAdaptationForType(I.getValue(),V.index,e,V);r&&Array.isArray(r.Representation_asArray)&&(r.Representation_asArray=r.Representation_asArray.filter(function(e,t){if(0===t)return!0;var n=D.getCodec(r,t,!0);return!!P.supportsCodec(n)||(K.error("[Stream] codec not supported: "+n),!1)}))}function g(){for(var e=Y.length,t=!!W.audio||!!W.video?new ce.default(de.default.DATA_UPDATE_FAILED_ERROR_CODE,de.default.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,n=0;n<e;n++)if(Y[n].isUpdating()||z)return;if(q){if(X)for(n=0;n<e&&Y[n];n++)Y[n].getType()!==ne.default.AUDIO&&Y[n].getType()!==ne.default.VIDEO&&Y[n].getType()!==ne.default.FRAGMENTED_TEXT||X.initializeForMedia(Y[n].getMediaInfo());w.trigger(le.default.STREAM_INITIALIZED,{streamInfo:V,error:t})}}function m(e){for(var t={},n=0,r=Y.length;n<r;n++)t[Y[n].getType()]=Y[n].createBuffer(e).getBuffer();return t}function v(e){if(e.streamInfo===V){var t=_(),n=t.length;if(0===n)return void K.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined");for(var r=0;r<n;r++)if(!t[r].isBufferingCompleted()&&(t[r].getType()===ne.default.AUDIO||t[r].getType()===ne.default.VIDEO))return void K.warn("onBufferingCompleted - One streamProcessor has finished but",t[r].getType(),"one is not buffering completed");K.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),w.trigger(le.default.STREAM_BUFFERING_COMPLETED,{streamInfo:V})}}function y(e){var t=e.sender.getStreamProcessor();t.getStreamInfo()===V&&(W[t.getType()]=e.error,g())}function E(t){return t?_().filter(function(e){return e.getType()===t.type})[0]:null}function _(){for(var e=Y.length,t=[],n=void 0,r=void 0,i=0;i<e;i++)(n=(r=Y[i]).getType())!==ne.default.AUDIO&&n!==ne.default.VIDEO&&n!==ne.default.FRAGMENTED_TEXT&&n!==ne.default.TEXT||t.push(r);return t}function T(e,t){if(!e)return!1;var n=e.getStreamInfo(),r=c();if(!n||!r)return!1;var i=O.getAdaptationForType(I.getValue(),n.index,t,n),a=O.getAdaptationForType(I.getValue(),r.index,t,r);return i&&a?!i.ContentProtection&&!a.ContentProtection:!i&&!a}function b(e,t){if(!e)return!1;var n=e.getStreamInfo(),r=c();if(!n||!r)return!1;var i=O.getAdaptationForType(I.getValue(),n.index,t,n),a=O.getAdaptationForType(I.getValue(),r.index,t,r);if(!i||!a)return!i&&!a;var o=i&&a&&i.mimeType===a.mimeType,s=a.Representation_asArray.map(function(e){return e.codecs}),l=i.Representation_asArray.map(function(e){return e.codecs}),u=l.some(function(e){return-1<s.indexOf(e)}),d=l.some(function(t){return s.some(function(e){return function(e,t){for(var n=e.split(".")[0],r=0===t.indexOf(n),i=void 0,a=0;a<te.length;a++)if(te[a].codec===n){i=te[a];break}return i?r||i.compatibleCodecs.some(function(e){return 0===t.indexOf(e)}):r}(e,t)})});return u||d&&o}function S(e){$=e}function A(){return $}s=s||{};var R=this.context,w=(0,se.default)(R).getInstance(),I=s.manifestModel,D=s.dashManifestModel,M=s.mediaPlayerModel,C=s.manifestUpdater,O=s.adapter,P=s.capabilities,N=s.errHandler,L=s.timelineConverter,k=s.metricsModel,x=s.abrController,F=s.playbackController,U=s.mediaController,B=s.textController,G=s.videoModel,j=void 0,K=void 0,Y=void 0,H=void 0,q=void 0,V=void 0,W=void 0,z=void 0,X=void 0,Q=void 0,Z=void 0,J=void 0,$=void 0,ee=void 0,te=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];return j={initialize:function(e,t){V=e,(X=t)&&(w.on(le.default.KEY_ERROR,o,j),w.on(le.default.SERVER_CERTIFICATE_UPDATED,o,j),w.on(le.default.LICENSE_REQUEST_COMPLETE,o,j),w.on(le.default.KEY_SYSTEM_SELECTED,o,j),w.on(le.default.KEY_SESSION_CREATED,o,j),w.on(le.default.KEY_STATUSES_CHANGED,o,j))},activate:function(e,t){if(H)return t;var n=void 0;return w.on(le.default.CURRENT_TRACK_CHANGED,u,j),n=A()?(function(){if(z=!0,a(),p(ne.default.VIDEO),p(ne.default.AUDIO),z=!(q=!0),0===Y.length){var e="No streams to play.";N.manifestError(e,"nostreams",I.getValue()),K.debug(e)}else g()}(),t):function(e,t){a();var n=G.getElement();f(),z=!0,p(ne.default.VIDEO),p(ne.default.AUDIO),(null===n||n&&/^VIDEO$/i.test(n.nodeName))&&d(ne.default.VIDEO,e),d(ne.default.AUDIO,e),d(ne.default.TEXT,e),d(ne.default.FRAGMENTED_TEXT,e),d(ne.default.EMBEDDED_TEXT,e),d(ne.default.MUXED,e),d(ne.default.IMAGE,e);var r=m(t);if(z=!(q=!0),0===Y.length){var i="No streams to play.";N.manifestError(i,"nostreams",I.getValue()),N.error(new ce.default(de.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,i,I.getValue())),K.fatal(i)}else g();return r}(e,t),H=!0,n},deactivate:e,isActive:function(){return H},getDuration:r,getStartTime:i,getId:function(){return V?V.id:null},getStreamInfo:c,preload:function(e,t){f(),d(ne.default.VIDEO,e),d(ne.default.AUDIO,e),d(ne.default.TEXT,e),d(ne.default.FRAGMENTED_TEXT,e),d(ne.default.EMBEDDED_TEXT,e),d(ne.default.MUXED,e),d(ne.default.IMAGE,e),m(t),w.on(le.default.CURRENT_TRACK_CHANGED,u,j);for(var n=0;n<Y.length&&Y[n];n++)Y[n].getScheduleController().start();S(!0)},getFragmentController:function(){return Q},getThumbnailController:function(){return Z},getBitrateListFor:function(e){if(a(),e===ne.default.IMAGE)return Z?Z.getBitrateList():[];var t=function(e){for(var t=Y.length,n=null,r=0;r<t;r++)if((n=Y[r]).getType()===e)return n.getMediaInfo();return null}(e);return x.getBitrateList(t)},startEventController:function(){J&&J.start()},stopEventController:function(){J&&J.stop()},updateData:function(e){K.info("Manifest updated... updating data system wide."),z=!(H=!1),V=e,J&&h(),p(ne.default.VIDEO),p(ne.default.AUDIO);for(var t=0,n=Y.length;t<n;t++){var r=Y[t],i=O.getMediaInfoForType(V,r.getType());x.updateTopQualityIndex(i),r.addMediaInfo(i,!0)}if(ee&&"fragmentedText"!==(i=ee.newMediaInfo).type){var a=E(ee.oldMediaInfo);if(!a)return;a.switchTrackAsked(),ee=void 0}z=!1,g()},reset:n,getProcessors:_,setMediaSource:function(e){for(var t=0;t<Y.length;)l(Y[t].getMediaInfo())?(Y[t].setMediaSource(e),t++):(Y[t].reset(),Y.splice(t,1));for(t=0;t<Y.length;t++)Y[t].dischargePreBuffer();if(0===Y.length){var n="No streams to play.";N.manifestError(n,"nostreams",I.getValue()),N.error(new ce.default(de.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,n+"nostreams",I.getValue())),K.fatal(n)}},isMediaCodecCompatible:function(e){return b(e,ne.default.VIDEO)&&b(e,ne.default.AUDIO)},isProtectionCompatible:function(e){return T(e,ne.default.VIDEO)&&T(e,ne.default.AUDIO)},getPreloaded:A,addInbandEvents:function(e){J&&J.addInbandEvents(e)}},K=(0,ue.default)(R).getInstance().getLogger(j),t(),Q=(0,ae.default)(R).create({mediaPlayerModel:M,metricsModel:k,errHandler:N}),w.on(le.default.BUFFERING_COMPLETED,v,j),w.on(le.default.DATA_UPDATE_COMPLETED,y,j),j}Object.defineProperty(n,"__esModule",{value:!0});var ne=r(e(101)),re=r(e(99)),ie=r(e(108)),ae=r(e(109)),oe=r(e(194)),se=r(e(47)),le=r(e(53)),ue=r(e(46)),de=r(e(50)),a=r(e(48)),ce=r(e(215));i.__dashjs_factory_name="Stream",n.default=a.default.getClassFactory(i),t.exports=n.default},{101:101,108:108,109:109,194:194,215:215,46:46,47:47,48:48,50:50,53:53,99:99}],99:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(n){function e(){O=[]}function r(){R=[],A=null,e()}function i(){return h?h.getStreamInfo():null}function t(){return A}n=n||{};var a=this.context,o=n.type,s=n.errHandler,l=n.mimeType,u=n.timelineConverter,d=n.adapter,c=n.manifestModel,f=n.mediaPlayerModel,h=n.stream,p=n.abrController,g=n.playbackController,m=n.streamController,v=n.mediaController,y=n.textController,E=n.domStorage,_=n.metricsModel,T=n.dashMetrics,b=n.dashManifestModel,S=void 0,A=void 0,R=void 0,w=void 0,I=void 0,D=void 0,M=void 0,C=void 0,O=void 0,P=void 0;return S={initialize:function(e){var t;(P=(0,B.default)(a).create({mimeType:l,timelineConverter:u,dashMetrics:T,metricsModel:_,mediaPlayerModel:f,baseURLController:n.baseURLController,errHandler:s})).initialize(S),p.registerStreamType(o,S),(C=h.getFragmentController().getModel(o)).setStreamProcessor(S),w=(t=o)===N.default.VIDEO||t===N.default.AUDIO?(0,k.default)(a).create({type:t,metricsModel:_,mediaPlayerModel:f,manifestModel:c,errHandler:s,streamController:m,mediaController:v,adapter:d,textController:y,abrController:p,playbackController:g,streamProcessor:S}):(0,x.default)(a).create({type:t,mimeType:l,metricsModel:_,mediaPlayerModel:f,manifestModel:c,errHandler:s,streamController:m,mediaController:v,adapter:d,textController:y,abrController:p,playbackController:g,streamProcessor:S}),I=(0,F.default)(a).create({type:o,mimeType:l,metricsModel:_,adapter:d,dashMetrics:T,dashManifestModel:b,timelineConverter:u,mediaPlayerModel:f,abrController:p,playbackController:g,streamController:m,textController:y,streamProcessor:S,mediaController:v}),(M=(0,U.default)(a).create()).setConfig({abrController:p,domStorage:E,metricsModel:_,dashMetrics:T,dashManifestModel:b,manifestModel:c,playbackController:g,timelineConverter:u,streamProcessor:S}),w.initialize(e),I.initialize(),M.initialize()},isUpdating:function(){return!!M&&M.isUpdating()},getType:function(){return o},getBufferController:function(){return w},getFragmentModel:function(){return C},getScheduleController:function(){return I},getLiveEdgeFinder:function(){return D},getFragmentController:function(){return h?h.getFragmentController():null},getRepresentationController:function(){return M},getIndexHandler:function(){return P},getRepresentationInfo:function(e){return d.getRepresentationInfo(M,e)},getBufferLevel:function(){return w.getBufferLevel()},switchInitData:function(e,t){w&&w.switchInitData(i().id,e,t)},isBufferingCompleted:function(){return!!w&&w.getIsBufferingCompleted()},timeIsBuffered:function(e){return!!w&&null!==w.getRangeAt(e,0)},createBuffer:function(e){return w.getBuffer()||w.createBuffer(A,e)},getStreamInfo:i,selectMediaInfo:function(e){e===A||e&&A&&e.type!==A.type||(A=e),d.updateData(this)},addMediaInfo:function(e,t){-1===R.indexOf(e)&&R.push(e),t&&this.selectMediaInfo(e)},switchTrackAsked:function(){I.switchTrackAsked()},getMediaInfoArr:function(){return R},getMediaInfo:t,getMediaSource:function(){return w.getMediaSource()},setMediaSource:function(e){w.setMediaSource(e,t())},dischargePreBuffer:function(){w.dischargePreBuffer()},getBuffer:function(){return w.getBuffer()},setBuffer:function(e){w.setBuffer(e)},registerExternalController:function(e){O.push(e)},unregisterExternalController:function(e){var t=O.indexOf(e);-1!==t&&O.splice(t,1)},getExternalControllers:function(){return O},unregisterAllExternalController:e,addInbandEvents:function(e){h&&h.addInbandEvents(e)},reset:function(e,t){P.reset(),w&&(w.reset(e,t),w=null),I&&(I.reset(),I=null),M&&(M.reset(),M=null),p&&p.unRegisterStreamType(o),O.forEach(function(e){e.reset()}),r(),h=o=null,D&&(D.reset(),D=null)}},g&&g.getIsDynamic()&&(D=(0,L.default)(a).create({timelineConverter:u,streamProcessor:S})),r(),S}Object.defineProperty(n,"__esModule",{value:!0});var N=r(e(101)),L=r(e(205)),k=r(e(107)),x=r(e(190)),F=r(e(113)),U=r(e(61)),a=r(e(48)),B=r(e(56));i.__dashjs_factory_name="StreamProcessor",n.default=a.default.getClassFactory(i),t.exports=n.default},{101:101,107:107,113:113,190:190,205:205,48:48,56:56,61:61}],100:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){e=e||{};var a="urn:mpeg:dash:resolve-to-zero:2013",t=this.context,o=(0,f.default)(t).getInstance(),s=(0,u.default)(t).create({errHandler:e.errHandler,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier});return{load:function(n,r,i){var t=function(e,t){r.resolved=!0,r.resolvedContent=e||null,o.trigger(h.default.XLINK_ELEMENT_LOADED,{element:r,resolveObject:i,error:e||t?null:new l.default(p.default.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,p.default.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+n)})};if(n===a)t(null,!0);else{var e=new c.default(n,d.HTTPRequest.XLINK_EXPANSION_TYPE);s.load({request:e,success:function(e){t(e)},error:function(){t(null)}})}},reset:function(){s&&(s.abort(),s=null)}}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(215)),u=r(e(148)),d=e(235),c=r(e(226)),f=r(e(47)),h=r(e(53)),a=r(e(48)),p=r(e(50));i.__dashjs_factory_name="XlinkLoader",n.default=a.default.getClassFactory(i),t.exports=n.default},{148:148,215:215,226:226,235:235,47:47,48:48,50:50,53:53}],101:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=new(function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.init()}return r(e,[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.FRAGMENTED_TEXT="fragmentedText",this.EMBEDDED_TEXT="embeddedText",this.MUXED="muxed",this.IMAGE="image",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.UTF8="utf-8",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)"}}]),e}());n.default=i,t.exports=n.default},{}],102:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=new(function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.init()}return r(e,[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors"}}]),e}());n.default=i,t.exports=n.default},{}],103:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=new(function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.init()}return r(e,[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready"}}]),e}());n.default=i,t.exports=n.default},{}],104:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function n(){(w=(0,$.default)(T).create({metricsModel:Q,dashMetrics:Z,mediaPlayerModel:Y,adapter:j})).initialize()}function e(){D={video:!0,audio:!0},M={},C={},O={},P={},L={},N={},V={},t=!(J=!(x=!(X={}))),void 0===F&&(F=!1),z=W=q=void 0,clearTimeout(k),k=null}function r(e){e.mediaType===ee.default.VIDEO&&(q=e.oldQuality,W.push(q,K.getPlaybackQuality()))}function i(e){e.metric!==te.default.HTTP_REQUEST||!e.value||e.value.type!==ce.HTTPRequest.MEDIA_SEGMENT_TYPE||e.mediaType!==ee.default.AUDIO&&e.mediaType!==ee.default.VIDEO||z.push(e.mediaType,e.value,J),e.metric!==te.default.BUFFER_LEVEL||e.mediaType!==ee.default.AUDIO&&e.mediaType!==ee.default.VIDEO||function(e,t){var n=Y.getABRStrategy();if(n===ee.default.ABR_STRATEGY_BOLA)return X[e]=!0;if(n===ee.default.ABR_STRATEGY_THROUGHPUT)return X[e]=!1;var r=Y.getStableBufferTime(),i=r,a=.5*r,o=X[e],s=(o?a:i)<t;(X[e]=s)!==o&&(s?R.info("AbrController ("+e+") switching from throughput to buffer occupancy ABR rule (buffer: "+t.toFixed(3)+")."):R.info("AbrController ("+e+") switching from buffer occupancy to throughput ABR rule (buffer: "+t.toFixed(3)+")."))}(e.mediaType,.001*e.value.level)}function c(e,t){var n,r,i,a,o=void 0;return M[t]=M[t]||{},M[t].hasOwnProperty(e)||(M[t][e]=0),o=function(e,t){var n=e;if(!N[t])return n;var r=f(t);void 0!==r&&(n=Math.max(e,r));var i=s(t);return void 0!==i&&(n=Math.min(n,i)),n}(M[t][e],e),n=o,r=e,i=M[t][e],a=l(r),function(e,t){if(t!==ee.default.VIDEO||!x||!N[t])return e;F||E();var n=G.getValue(),r=j.getAdaptationForType(n,0,t).Representation,i=e;if(0<U&&0<B){for(;0<i&&r[i]&&U<r[i].width&&U-r[i-1].width<r[i].width-U;)i-=1;r.length-2>=i&&r[i].width===r[i+1].width&&(i=Math.min(e,i+1))}return i}(o=isNaN(a)||1<=a||a<0?n:Math.min(n,Math.round(i*a)),e)}function a(e){return O.hasOwnProperty("max")&&O.max.hasOwnProperty(e)?O.max[e]:NaN}function o(e){return O.hasOwnProperty("min")&&O.min.hasOwnProperty(e)?O.min[e]:NaN}function s(e){var t=a(e);return t?g(N[e].getMediaInfo(),t):void 0}function f(e){var t=o(e);if(t){var n=N[e].getMediaInfo(),r=m(n),i=g(n,t);return r[i]&&i<r.length-1&&r[i].bitrate<1e3*t&&i++,i}}function l(e){return P.hasOwnProperty("max")&&P.max.hasOwnProperty(e)?P.max[e]:1}function h(e){return D[e]}function u(e,t,n,r){var i=t.id,a=y(e);(0,he.checkInteger)(n);var o=c(e,i);n!==a&&0<=n&&n<=o&&p(e,a,n,o,r)}function p(e,t,n,r,i){if(e&&N[e]){var a=N[e].getStreamInfo(),o=a?a.id:null;if(b.getLogToBrowserConsole()){var s=Z.getCurrentBufferLevel(Q.getReadOnlyMetricsFor(e));R.info("AbrController ("+e+") switch from "+t+" to "+n+"/"+r+" (buffer: "+s+") "+(i?JSON.stringify(i):"."))}l=e,d=n,C[u=o]=C[u]||{},C[u][l]=d,S.trigger(ae.default.QUALITY_CHANGE_REQUESTED,{mediaType:e,streamInfo:a,oldQuality:t,newQuality:n,reason:i})}var l,u,d}function d(e,t){L[e].state=t}function g(e,t,n){var r=e&&e.type?N[e.type].getRepresentationInfo():null;if(J&&n&&r&&r.fragmentDuration){n/=1e3;var i=r.fragmentDuration;if(i<n)return 0;t*=1-n/i}for(var a=m(e),o=a.length-1;0<=o;o--)if(1e3*t>=a[o].bitrate)return o;return 0}function m(e){var t=[];if(!e||!e.bitrateList)return t;for(var n=e.bitrateList,r=e.type,i=void 0,a=0,o=n.length;a<o;a++)(i=new ne.default).mediaType=r,i.qualityIndex=a,i.bitrate=n[a].bandwidth,i.width=n[a].width,i.height=n[a].height,i.scanType=n[a].scanType,t.push(i);return t}function v(e){return X[e]}function y(e){if(e&&N[e]){var t=N[e].getStreamInfo(),n=t?t.id:null;if(n)return C[n]=C[n]||{},C[n].hasOwnProperty(e)||(C[n][e]=0),C[n][e]}return 0}function E(){if(K){var e=t&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;U=K.getClientWidth()*e,B=K.getClientHeight()*e}}function _(e){var t=e.request.mediaType;if(h(t)){var n=N[t];if(!n)return;var r=(0,oe.default)(T).create({abrController:A,streamProcessor:n,currentRequest:e.request,useBufferOccupancyABR:v(t)}),i=w.shouldAbandonFragment(r);if(i.quality>se.default.NO_CHANGE){var a=n.getFragmentModel();a.getRequests({state:re.default.FRAGMENT_MODEL_LOADING,index:e.request.index})[0]&&(a.abortRequests(),d(t,pe),V[t].reset(),V[t].push({oldValue:y(t,I.getActiveStreamInfo()),newValue:i.quality,confidence:1,reason:i.reason}),u(t,I.getActiveStreamInfo(),i.quality,i.reason),clearTimeout(k),k=setTimeout(function(){d(t,ge),k=null},Y.getAbandonLoadTimeout()))}}}var T=this.context,b=(0,fe.default)(T).getInstance(),S=(0,ie.default)(T).getInstance(),A=void 0,R=void 0,w=void 0,I=void 0,D=void 0,M=void 0,C=void 0,O=void 0,P=void 0,N=void 0,L=void 0,k=void 0,x=void 0,t=void 0,F=void 0,U=void 0,B=void 0,G=void 0,j=void 0,K=void 0,Y=void 0,H=void 0,q=void 0,V=void 0,W=void 0,z=void 0,X=void 0,Q=void 0,Z=void 0,J=void 0;return A={isPlayingAtTopQuality:function(e){var t=e?e.id:null,n=y(ee.default.AUDIO),r=y(ee.default.VIDEO);return n===c(ee.default.AUDIO,t)&&r===c(ee.default.VIDEO,t)},updateTopQualityIndex:function(e){var t,n,r,i=e.type,a=e.streamInfo.id,o=e.representationCount-1;return t=i,r=o,M[n=a]=M[n]||{},M[n][t]=r,o},getThroughputHistory:function(){return z},getBitrateList:m,getQualityForBitrate:g,getMaxAllowedBitrateFor:a,getTopBitrateInfoFor:function(e){if(e&&N&&N[e]){var t=N[e].getStreamInfo();if(t&&t.id){var n=c(e,t.id),r=m(N[e].getMediaInfo());return r[n]?r[n]:null}}return null},getMinAllowedBitrateFor:o,setMaxAllowedBitrateFor:function(e,t){(0,he.checkParameterType)(t,"number"),(0,he.checkIsVideoOrAudioType)(e),O.max=O.max||{},O.max[e]=t},setMinAllowedBitrateFor:function(e,t){(0,he.checkParameterType)(t,"number"),(0,he.checkIsVideoOrAudioType)(e),O.min=O.min||{},O.min[e]=t},getMaxAllowedIndexFor:s,getMinAllowedIndexFor:f,getMaxAllowedRepresentationRatioFor:l,setMaxAllowedRepresentationRatioFor:function(e,t){P.max=P.max||{},P.max[e]=t},getInitialBitrateFor:function(e){!function(){if(!H||!H.hasOwnProperty("getSavedBitrateSettings"))throw new Error(ee.default.MISSING_CONFIG_ERROR)}();var t=H.getSavedBitrateSettings(e);if(!O.hasOwnProperty(e))if(P.hasOwnProperty(e)){var n=G.getValue(),r=j.getAdaptationForType(n,0,e).Representation;if(Array.isArray(r)){var i=Math.max(Math.round(r.length*P[e])-1,0);O[e]=r[i].bandwidth}else O[e]=0}else isNaN(t)?O[e]=e===ee.default.VIDEO?1e3:100:O[e]=t;return O[e]},setInitialBitrateFor:function(e,t){(0,he.checkIsVideoOrAudioType)(e),(0,he.checkParameterType)(t,"number"),O[e]=t},getInitialRepresentationRatioFor:function(e){return P.hasOwnProperty(e)?P[e]:null},setInitialRepresentationRatioFor:function(e,t){P[e]=t},setAutoSwitchBitrateFor:function(e,t){(0,he.checkParameterType)(t,"boolean"),(0,he.checkIsVideoOrAudioType)(e),D[e]=t},getAutoSwitchBitrateFor:h,getUseDeadTimeLatency:function(){return J},setUseDeadTimeLatency:function(e){(0,he.checkParameterType)(e,"boolean"),J=e},setLimitBitrateByPortal:function(e){(0,he.checkParameterType)(e,"boolean"),x=e},getLimitBitrateByPortal:function(){return x},getUsePixelRatioInLimitBitrateByPortal:function(){return t},setUsePixelRatioInLimitBitrateByPortal:function(e){(0,he.checkParameterType)(e,"boolean"),t=e},getQualityFor:y,getAbandonmentStateFor:function(e){return L[e]?L[e].state:null},setPlaybackQuality:u,checkPlaybackQuality:function(e){if(e&&N&&N[e]){var t=N[e].getStreamInfo(),n=t?t.id:null,r=y(e),i=(0,oe.default)(T).create({abrController:A,streamProcessor:N[e],currentValue:r,switchHistory:V[e],droppedFramesHistory:W,useBufferOccupancyABR:v(e)});if(W){var a=K.getPlaybackQuality();a&&W.push(q,a)}if(h(e)){var o=f(e),s=c(e,n),l=w.getMaxQuality(i),u=l.quality;if(void 0!==o&&u<o&&(u=o),s<u&&(u=s),V[e].push({oldValue:r,newValue:u}),u>se.default.NO_CHANGE&&u!=r)(L[e].state===ge||r<u)&&p(e,r,u,s,l.reason);else if(b.getLogToBrowserConsole()){var d=Z.getCurrentBufferLevel(Q.getReadOnlyMetricsFor(e));R.debug("AbrController ("+e+") stay on "+r+"/"+s+" (buffer: "+d+")")}}}},getTopQualityIndexFor:c,setElementSize:E,setWindowResizeEventCalled:function(e){F=e},createAbrRulesCollection:n,registerStreamType:function(e,t){V[e]=(0,le.default)(T).create(),N[e]=t,L[e]=L[e]||{},L[e].state=ge,X[e]=!1,S.on(ae.default.LOADING_PROGRESS,_,this),e==ee.default.VIDEO&&(S.on(ae.default.QUALITY_CHANGE_RENDERED,r,this),W=(0,ue.default)(T).create(),E()),S.on(ae.default.METRIC_ADDED,i,this),S.on(ae.default.PERIOD_SWITCH_COMPLETED,n,this),z=(0,de.default)(T).create({mediaPlayerModel:Y})},unRegisterStreamType:function(e){delete N[e]},setConfig:function(e){e&&(e.streamController&&(I=e.streamController),e.domStorage&&(H=e.domStorage),e.mediaPlayerModel&&(Y=e.mediaPlayerModel),e.metricsModel&&(Q=e.metricsModel),e.dashMetrics&&(Z=e.dashMetrics),e.adapter&&(j=e.adapter),e.manifestModel&&(G=e.manifestModel),e.videoModel&&(K=e.videoModel))},reset:function(){e(),S.off(ae.default.LOADING_PROGRESS,_,this),S.off(ae.default.QUALITY_CHANGE_RENDERED,r,this),S.off(ae.default.METRIC_ADDED,i,this),S.off(ae.default.PERIOD_SWITCH_COMPLETED,n,this),w&&w.reset()}},R=b.getLogger(A),e(),A}Object.defineProperty(n,"__esModule",{value:!0});var $=r(e(179)),ee=r(e(101)),te=r(e(102)),ne=r(e(214)),re=r(e(141)),ie=r(e(47)),ae=r(e(53)),a=r(e(48)),oe=r(e(175)),se=r(e(176)),le=r(e(177)),ue=r(e(174)),de=r(e(178)),ce=e(235),fe=r(e(46)),he=e(208),pe="abandonload",ge="allowload";i.__dashjs_factory_name="AbrController";var o=a.default.getSingletonFactory(i);o.ABANDON_LOAD=pe,o.QUALITY_DEFAULT=0,a.default.updateSingletonFactory(i.__dashjs_factory_name,o),n.default=o,t.exports=n.default},{101:101,102:102,141:141,174:174,175:175,176:176,177:177,178:178,179:179,208:208,214:214,235:235,46:46,47:47,48:48,53:53}],105:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){o.invalidateSelectedIndexes(e.entry)}var t=void 0,n=void 0,r=this.context,i=(0,f.default)(r).getInstance(),a=(0,d.default)(r).getInstance(),o=void 0,s=void 0;return t={reset:function(){o.reset(),s.reset()},initialize:function(e){var t;o.setConfig({dashManifestModel:n}),s.setConfig({dashManifestModel:n}),t=e,o.update(t),s.chooseSelectorFromManifest(t)},resolve:function(e){var t=o.getForPath(e).reduce(function(e,t){var n=s.select(t);return n?(a.isRelative(n.url)?e.url=a.resolve(n.url,e.url):(e.url=n.url,e.serviceLocation=n.serviceLocation),e.availabilityTimeOffset=n.availabilityTimeOffset,e.availabilityTimeComplete=n.availabilityTimeComplete,e):new c.default},new c.default);if(!a.isRelative(t.url))return t},setConfig:function(e){e.baseURLTreeModel&&(o=e.baseURLTreeModel),e.baseURLSelector&&(s=e.baseURLSelector),e.dashManifestModel&&(n=e.dashManifestModel)}},o=(0,l.default)(r).create(),s=(0,u.default)(r).create(),i.on(h.default.SERVICE_LOCATION_BLACKLIST_CHANGED,e,t),t}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(140)),u=r(e(196)),d=r(e(210)),c=r(e(82)),a=r(e(48)),f=r(e(47)),h=r(e(53));i.__dashjs_factory_name="BaseURLController",n.default=a.default.getSingletonFactory(i),t.exports=n.default},{140:140,196:196,210:210,47:47,48:48,53:53,82:82}],106:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){-1===r.indexOf(e)&&(r.push(e),i.trigger(a,{entry:e}))}function n(e){t(e.entry)}e=e||{};var r=[],i=(0,s.default)(this.context).getInstance(),a=e.updateEventName,o=e.addBlacklistEventName;return function(){o&&i.on(o,n,this)}(),{add:t,contains:function(e){return!!(r.length&&e&&e.length)&&-1!==r.indexOf(e)},reset:function(){r=[]}}}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(48)),s=r(e(47));i.__dashjs_factory_name="BlackListController",n.default=a.default.getClassFactory(i),t.exports=n.default},{47:47,48:48}],107:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function n(e,t){if(!le||!e||!V)return null;if($)try{"function"==typeof(ne=t&&t[q]?(0,me.default)(L).create($,e,a.bind(this),t[q]):(0,me.default)(L).create($,e,a.bind(this))).getBuffer().initialize&&ne.getBuffer().initialize(q,V)}catch(e){z.fatal("Caught error on create SourceBuffer: "+e),U.mediaSourceError("Error creating "+q+" source buffer."),U.error(new Re.default(we.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,we.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+q))}else ne=(0,ve.default)(L).create(a.bind(this));return A(V.getRepresentationInfo(X).MSETimeOffset),ne}function r(e){e.fragmentModel===V.getFragmentModel()&&(z.info("Init fragment finished loading saving to",q+"'s init cache"),le.save(e.chunk),z.debug("Append Init fragment",q," with representationId:",e.chunk.representationId," and quality:",e.chunk.quality,", data size:",e.chunk.bytes.byteLength),u(e.chunk))}function i(e){if(e.fragmentModel===V.getFragmentModel()){var t=e.chunk,n=t.bytes,r=t.quality,i=V.getRepresentationInfo(r),a=j.getEventsFor(i.mediaInfo,V),o=j.getEventsFor(i,V);if(a&&0<a.length||o&&0<o.length){var s=function(e,t,n,r){for(var i=Math.max(!t||isNaN(t.startTime)?0:t.startTime,0),a=[],o=[],s=n.concat(r),l=0,u=s.length;l<u;l++)a[s[l].schemeIdUri+"/"+s[l].value]=s[l];for(var d=(0,be.default)(L).getInstance().parse(e).getBoxes("emsg"),l=0,u=d.length;l<u;l++){var c=j.getEvent(d[l],a,i);c&&o.push(c)}return o}(n,V.getFragmentModel().getRequests({state:ge.default.FRAGMENT_MODEL_EXECUTED,quality:r,index:t.index})[0],a,o);V.addInbandEvents(s)}if(fe){he=t;var l=ne&&ne.getAllBufferRanges();l&&0<l.length&&.5<H.getTimeToStreamEnd()&&(z.debug("Clearing buffer because track changed - "+(l.end(l.length-1)+.5)),T([{start:0,end:l.end(l.length-1)+.5,force:!0}]))}else u(t)}}function u(e){ne.append(e),e.mediaInfo.type===pe.default.VIDEO&&k.trigger(Te.default.VIDEO_CHUNK_RECEIVED,{chunk:e})}function o(e){if(e&&0<e.length)for(var t=0,n=e.length;t<n;t++)z.debug("Buffered Range for type:",q,":",e.start(t)," - ",e.end(t)," currentTime = ",H.getTime())}function a(e){if(e.error){if(22===e.error.code&&(J=.8*O(),z.warn("Quota exceeded for type: "+q+", Critical Buffer: "+J),0<J)){var t=Math.max(.2*J,1),n=J-t;F.setBufferToKeep(parseFloat(t.toFixed(5))),F.setBufferAheadToKeep(parseFloat(n.toFixed(5)))}22!==e.error.code&&P()||(z.warn("Clearing playback buffer to overcome quota exceed situation for type: "+q),k.trigger(Te.default.QUOTA_EXCEEDED,{sender:W,criticalBufferLevel:J}),c())}else{(ae=e.chunk)&&!isNaN(ae.index)&&(ee=Math.max(ae.index,ee),v());var r=ne.getAllBufferRanges();if(ae.segmentType===Ie.HTTPRequest.MEDIA_SEGMENT_TYPE)o(r),f();else if(fe){var i=H.getTime();z.debug("AppendToBuffer seek target should be "+i),V.getScheduleController().setSeekTarget(i),j.setIndexHandlerTime(V,i)}var a={sender:W,quality:ae.quality,startTime:ae.start,index:ae.index,bufferedRanges:r};ae&&!ae.endFragment?k.trigger(Te.default.BYTES_APPENDED,a):ae&&k.trigger(Te.default.BYTES_APPENDED_END_FRAGMENT,a)}}function s(e){X!==e.newQuality&&q===e.mediaType&&V.getStreamInfo().id===e.streamInfo.id&&(A(V.getRepresentationInfo(e.newQuality).MSETimeOffset),X=e.newQuality)}function l(){Q&&(Q=!(de=!0),te=Number.POSITIVE_INFINITY),q!==pe.default.FRAGMENTED_TEXT?c():f()}function d(){ue=void 0}function c(){var e=function(){var e=[],t=ne.getAllBufferRanges();if(!t||0===t.length)return e;var n=H.getTime(),r=t.end(t.length-1)+.5,i=V.getFragmentModel().getRequests({state:ge.default.FRAGMENT_MODEL_EXECUTED,time:n,threshold:.01})[0];if(i){var a={start:0,end:i.startTime-.5},o=V.getFragmentModel().getRequests({state:ge.default.FRAGMENT_MODEL_EXECUTED,time:i.startTime-i.duration/2,threshold:.01})[0];o&&o.startTime!=i.startTime&&(a.end=o.startTime),a.start<a.end&&a.end>t.start(0)&&e.push(a);var s={start:i.startTime+i.duration+.5,end:r},l=V.getFragmentModel().getRequests({state:ge.default.FRAGMENT_MODEL_EXECUTED,time:i.startTime+i.duration+.5,threshold:.01})[0];l&&l.startTime!==i.startTime&&(s.start=l.startTime+l.duration+.5),s.start<s.end&&s.start<r&&e.push(s)}else z.debug("getAllRangesWithSafetyFactor for",q,"- No request found in current time position, removing full buffer 0 -",r),e.push({start:0,end:r});return e}();e&&0!==e.length||f(),T(e)}function f(){(!fe||q===pe.default.FRAGMENTED_TEXT&&K.isTextEnabled())&&(t(),m())}function h(){y()}function p(){y()}function g(e,t){var n=ne.getAllBufferRanges(),r=0,i=0,a=null,o=null,s=0,l=void 0,u=void 0,d=t||.15;if(null!=n){for(u=0,l=n.length;u<l;u++)if(r=n.start(u),i=n.end(u),null===a)s=Math.abs(r-e),r<=e&&e<i?(a=r,o=i):s<=d&&(a=r,o=i);else{if(!((s=r-o)<=d))break;o=i}if(null!==a)return{start:a,end:o}}return null}function t(){var e,t,n;H&&(e=function(){var e=H.getTime();if(ue){var t=ne.getAllBufferRanges();t&&t.length&&(e=Math.max(t.start(0),ue))}return e}()||0,Z=null===(n=g(e,t))?0:n.end-e,k.trigger(Te.default.BUFFER_LEVEL_UPDATED,{sender:W,bufferLevel:Z}),y())}function m(){V&&B&&V.getStreamInfo()&&(x.addBufferState(q,ie,V.getScheduleController().getBufferTarget()),x.addBufferLevel(q,new Date,1e3*Z))}function v(){te-1<=ee&&!Q&&void 0===ne.discharge&&(Q=!0,z.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED"),k.trigger(Te.default.BUFFERING_COMPLETED,{sender:W,streamInfo:V.getStreamInfo()}))}function y(){"audio"!==q&&"video"!==q||(de&&!Q&&H&&H.getTimeToStreamEnd()-Z<.5&&(Q=!(de=!1),z.debug("checkIfSufficientBuffer trigger BUFFERING_COMPLETED"),k.trigger(Te.default.BUFFERING_COMPLETED,{sender:W,streamInfo:V.getStreamInfo()})),(!F.getLowLatencyEnabled()&&Z<.5||0===Z)&&!Q?E(Me):(Q||Z>=F.getStableBufferTime())&&E(De))}function E(e){ie===e||e===Me&&0===H.getTime()||q===pe.default.FRAGMENTED_TEXT&&!K.isTextEnabled()||(ie=e,m(),k.trigger(Te.default.BUFFER_LEVEL_STATE_CHANGED,{sender:W,state:e,mediaType:q,streamInfo:V.getStreamInfo()}),k.trigger(e===De?Te.default.BUFFER_LOADED:Te.default.BUFFER_EMPTY,{mediaType:q}),z.debug(e===De?"Got enough buffer to start for "+q:"Waiting for more buffer before starting playback for "+q))}function _(){ne&&q!==pe.default.FRAGMENTED_TEXT&&(Q||T(function(){var e=[],t=ne.getAllBufferRanges();if(!t||0===t.length)return e;var n=H.getTime(),r={start:Math.max(0,n-F.getBufferToKeep()),end:n+F.getBufferAheadToKeep()},i=V.getFragmentModel().getRequests({state:ge.default.FRAGMENT_MODEL_EXECUTED,time:n,threshold:.01})[0];if(i)r.start=Math.min(i.startTime,r.start),r.end=Math.max(i.startTime+i.duration,r.end);else if(0===n&&H.getIsDynamic())return[];if(t.start(0)<=r.start){for(var a={start:0,end:r.start},o=0;o<t.length&&t.end(o)<=r.start;o++)a.end=t.end(o);a.start<a.end&&e.push(a)}if(t.end(t.length-1)>=r.end){var s={start:r.end,end:t.end(t.length-1)+.01};s.start<s.end&&e.push(s)}return e}()))}function T(e){e&&ne&&0!==e.length&&(ce.push.apply(ce,e),se||b())}function b(){if(0===ce.length||!ne)return z.debug("Nothing to prune, halt pruning"),void(se=!(ce=[]));var e=ne.getBuffer();if(!e||!e.buffered||0===e.buffered.length)return z.debug("SourceBuffer is empty (or does not exist), halt pruning"),void(se=!(ce=[]));var t=ce.shift();z.debug("Removing",q,"buffer from:",t.start,"to",t.end),se=!0;var n=H.getTime();n<t.end&&(Q=!1,ee=0,fe||(V.getScheduleController().setSeekTarget(n),j.setIndexHandlerTime(V,n))),ne.remove(t.start,t.end,t.force)}function S(e){ne===e.buffer&&(z.debug("onRemoved buffer from:",e.from,"to",e.to),o(ne.getAllBufferRanges()),0===ce.length&&(se=!1),e.unintended&&(z.warn("Detected unintended removal from:",e.from,"to",e.to,"setting index handler time to",e.from),j.setIndexHandlerTime(V,e.from)),se?b():(fe?(fe=!1,he&&u(he)):(z.debug("onRemoved : call updateBufferLevel"),t()),k.trigger(Te.default.BUFFER_CLEARED,{sender:W,from:e.from,to:e.to,unintended:e.unintended,hasEnoughSpaceToAppend:P()})))}function A(e){ne&&ne.updateTimestampOffset&&ne.updateTimestampOffset(e)}function R(e){e.sender.getStreamProcessor()!==V||e.error||A(e.currentRepresentation.MSETimeOffset)}function w(e){e.fragmentModel===V.getFragmentModel()&&(te=e.request.index,v())}function I(e){var t=ne&&ne.getAllBufferRanges();t&&e.newMediaInfo.type===q&&e.newMediaInfo.streamInfo.id===V.getStreamInfo().id&&(z.info("Track change asked"),G.getSwitchMode(q)===Ee.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&t&&0<t.length&&.5<H.getTimeToStreamEnd()&&(Q=!1,te=Number.POSITIVE_INFINITY))}function D(){++oe*(F.getWallclockTimeUpdateInterval()/1e3)>=F.getBufferPruningInterval()&&(oe=0,_())}function M(){y()}function C(e,t){$=e,ne&&t&&"function"==typeof ne.discharge&&(re=ne,n(t))}function O(){var e,t=ne.getAllBufferRanges(),n=0,r=void 0;if(!t)return n;for(r=0,e=t.length;r<e;r++)n+=t.end(r)-t.start(r);return n}function P(){return O()<J}function N(e,t){J=Number.POSITIVE_INFINITY,ie=void 0,X=ye.default.QUALITY_DEFAULT,te=Number.POSITIVE_INFINITY,ae=null,de=se=Q=!1,oe=Z=ee=0,ce=[],ne&&(e||ne.abort(),ne.reset(t),ne=null),fe=!1}e=e||{};var L=this.context,k=(0,_e.default)(L).getInstance(),x=e.metricsModel,F=e.mediaPlayerModel,U=e.errHandler,B=e.streamController,G=e.mediaController,j=e.adapter,K=e.textController,Y=e.abrController,H=e.playbackController,q=e.type,V=e.streamProcessor,W=void 0,z=void 0,X=void 0,Q=void 0,Z=void 0,J=void 0,$=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,ae=void 0,oe=void 0,se=void 0,le=void 0,ue=void 0,de=void 0,ce=void 0,fe=void 0,he=void 0;return W={getBufferControllerType:function(){return Ce},initialize:function(e){C(e),X=Y.getQualityFor(q,V.getStreamInfo()),k.on(Te.default.DATA_UPDATE_COMPLETED,R,this),k.on(Te.default.INIT_FRAGMENT_LOADED,r,this),k.on(Te.default.MEDIA_FRAGMENT_LOADED,i,this),k.on(Te.default.QUALITY_CHANGE_REQUESTED,s,this),k.on(Te.default.STREAM_COMPLETED,w,this),k.on(Te.default.PLAYBACK_PLAYING,p,this),k.on(Te.default.PLAYBACK_PROGRESS,f,this),k.on(Te.default.PLAYBACK_TIME_UPDATED,f,this),k.on(Te.default.PLAYBACK_RATE_CHANGED,M,this),k.on(Te.default.PLAYBACK_SEEKING,l,this),k.on(Te.default.PLAYBACK_SEEKED,d,this),k.on(Te.default.PLAYBACK_STALLED,h,this),k.on(Te.default.WALLCLOCK_TIME_UPDATED,D,this),k.on(Te.default.CURRENT_TRACK_CHANGED,I,this,_e.default.EVENT_PRIORITY_HIGH),k.on(Te.default.SOURCEBUFFER_REMOVE_COMPLETED,S,this)},createBuffer:n,dischargePreBuffer:function(){if(ne&&re&&"function"==typeof re.discharge){var e=re.getAllBufferRanges();if(0<e.length){for(var t="Beginning "+q+"PreBuffer discharge, adding buffer for:",n=0;n<e.length;n++)t+=" start: "+e.start(n)+", end: "+e.end(n)+";";z.debug(t)}else z.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");for(var r=re.discharge(),i=null,a=0;a<r.length;a++){var o=r[a],s=le.extract(o.streamId,o.representationId);s&&(i!==s&&(ne.append(s),i=s),ne.append(o))}re.reset(),re=null}},getType:function(){return q},getStreamProcessor:function(){return V},setSeekStartTime:function(e){ue=e},getBuffer:function(){return ne},setBuffer:function(e){ne=e},getBufferLevel:function(){return Z},getRangeAt:g,setMediaSource:C,getMediaSource:function(){return $},getIsBufferingCompleted:function(){return Q},switchInitData:function(e,t,n){var r=le.extract(e,t);fe=!0===n&&n,r?(z.info("Append Init fragment",q," with representationId:",r.representationId," and quality:",r.quality,", data size:",r.bytes.byteLength),u(r)):k.trigger(Te.default.INIT_REQUESTED,{sender:W})},getIsPruningInProgress:function(){return se},reset:function(e,t){k.off(Te.default.DATA_UPDATE_COMPLETED,R,this),k.off(Te.default.QUALITY_CHANGE_REQUESTED,s,this),k.off(Te.default.INIT_FRAGMENT_LOADED,r,this),k.off(Te.default.MEDIA_FRAGMENT_LOADED,i,this),k.off(Te.default.STREAM_COMPLETED,w,this),k.off(Te.default.CURRENT_TRACK_CHANGED,I,this),k.off(Te.default.PLAYBACK_PLAYING,p,this),k.off(Te.default.PLAYBACK_PROGRESS,f,this),k.off(Te.default.PLAYBACK_TIME_UPDATED,f,this),k.off(Te.default.PLAYBACK_RATE_CHANGED,M,this),k.off(Te.default.PLAYBACK_SEEKING,l,this),k.off(Te.default.PLAYBACK_SEEKED,d,this),k.off(Te.default.PLAYBACK_STALLED,h,this),k.off(Te.default.WALLCLOCK_TIME_UPDATED,D,this),k.off(Te.default.SOURCEBUFFER_REMOVE_COMPLETED,S,this),N(e,t)}},z=(0,Se.default)(L).getInstance().getLogger(W),le=(0,Ae.default)(L).getInstance(),N(),W}Object.defineProperty(n,"__esModule",{value:!0});var pe=r(e(101)),ge=r(e(141)),me=r(e(97)),ve=r(e(96)),ye=r(e(104)),Ee=r(e(110)),_e=r(e(47)),Te=r(e(53)),be=r(e(197)),a=r(e(48)),Se=r(e(46)),Ae=r(e(203)),Re=r(e(215)),we=r(e(50)),Ie=e(235),De="bufferLoaded",Me="bufferStalled",Ce="BufferController";i.__dashjs_factory_name=Ce;var o=a.default.getClassFactory(i);o.BUFFER_LOADED=De,o.BUFFER_EMPTY=Me,a.default.updateClassFactory(i.__dashjs_factory_name,o),n.default=o,t.exports=n.default},{101:101,104:104,110:110,141:141,197:197,203:203,215:215,235:235,46:46,47:47,48:48,50:50,53:53,96:96,97:97}],108:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){b=!1,o={},s={},v={},l=null,y=100,E=Date.now()/1e3}function u(){if(!_||!T)throw new Error("setConfig function has to be called previously")}function t(){null!==l&&b&&(clearInterval(l),l=null,b=!1)}function r(e){if(e.eventStream.value==c){var t,n=e.eventStream.timescale||1,r=e.presentationTime/n;t=4294967295==e.presentationTime?NaN:(e.presentationTime+e.duration)/n,m.info("Manifest validity changed: Valid until: "+r+"; remaining duration: "+t),g.trigger(R.default.MANIFEST_VALIDITY_CHANGED,{id:e.id,validUntil:r,newDuration:t,newManifestValidAfter:NaN})}}function n(){var e=T.getTime(),t=e-E;i(s,t,E=e),i(o,t,e),function(){if(v)for(var e=T.getTime(),t=Object.keys(v),n=0;n<t.length;n++){var r=t[n],i=v[r];null!==i&&(i.duration+i.presentationTime)/i.eventStream.timescale<e&&(m.debug("Remove Event "+r+" at time "+e),i=null,delete v[r])}}()}function i(e,t,n){var r,i;if(e)for(var a=Object.keys(e),o=0;o<a.length;o++){var s=a[o],l=e[s];void 0!==l&&(0==(r=l.presentationTime/l.eventStream.timescale)||r<=n&&n<r+t)&&(m.debug("Start Event "+s+" at "+n),0<l.duration&&(v[s]=l),l.eventStream.schemeIdUri==d&&l.eventStream.value==c?0===l.duration&&0===l.presentationTimeDelta||(u(),_.refreshManifest()):l.eventStream.schemeIdUri==f&&l.eventStream.value==h?(i=l.messageData,(0,w.default)(p).create({}).load({method:"get",url:i,request:{responseType:"arraybuffer"}})):g.trigger(l.eventStream.schemeIdUri,{event:l}),delete e[s])}}var d="urn:mpeg:dash:event:2012",c=1,f="urn:mpeg:dash:event:callback:2015",h=1,p=this.context,g=(0,A.default)(p).getInstance(),a=void 0,m=void 0,o=void 0,s=void 0,v=void 0,l=void 0,y=void 0,E=void 0,_=void 0,T=void 0,b=void 0;return a={addInlineEvents:function(e){if(u(),o={},e)for(var t=0;t<e.length;t++){var n=e[t];o[n.id]=n,m.debug("Add inline event with id "+n.id)}m.debug("Added "+e.length+" inline events")},addInbandEvents:function(e){u();for(var t=0;t<e.length;t++){var n=e[t];n.id in s?m.debug("Repeated event with id "+n.id):(n.eventStream.schemeIdUri===d&&void 0===s[n.id]&&r(n),s[n.id]=n,m.debug("Add inband event with id "+n.id))}},stop:t,start:function(){u(),m.debug("Start Event Controller"),b||isNaN(y)||(b=!0,l=setInterval(n,y))},setConfig:function(e){e&&(e.manifestUpdater&&(_=e.manifestUpdater),e.playbackController&&(T=e.playbackController))},reset:function(){t(),e()}},m=(0,S.default)(p).getInstance().getLogger(a),e(),a}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(48)),S=r(e(46)),A=r(e(47)),R=r(e(53)),w=r(e(149));i.__dashjs_factory_name="EventController",n.default=a.default.getClassFactory(i),t.exports=n.default},{149:149,46:46,47:47,48:48,53:53}],109:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function c(e){return e&&e.type&&e.type===l.HTTPRequest.INIT_SEGMENT_TYPE}function t(){for(var e in p)p[e].reset();p={}}function n(e){if(p[e.request.mediaType]===e.sender){var t=e.request,n=e.response,r=c(t),i=t.mediaInfo.streamInfo;if(e.error&&(e.request.mediaType!==g.default.AUDIO&&e.request.mediaType!==g.default.VIDEO&&e.request.mediaType!==g.default.FRAGMENTED_TEXT||f.trigger(E.default.SERVICE_LOCATION_BLACKLIST_ADD,{entry:e.request.serviceLocation})),!n||!i)return void h.warn("No "+t.mediaType+" bytes to push or stream is inactive.");var a=(o=n,s=t,l=i.id,u=e.type!==E.default.FRAGMENT_LOADING_PROGRESS,(d=new m.default).streamId=l,d.mediaInfo=s.mediaInfo,d.segmentType=s.type,d.start=s.startTime,d.duration=s.duration,d.end=d.start+d.duration,d.bytes=o,d.index=s.index,d.quality=s.quality,d.representationId=s.representationId,d.endFragment=u,d);f.trigger(r?E.default.INIT_FRAGMENT_LOADED:E.default.MEDIA_FRAGMENT_LOADED,{chunk:a,fragmentModel:e.sender})}var o,s,l,u,d}e=e||{};var r=this.context,f=(0,y.default)(r).getInstance(),i=e.errHandler,a=e.mediaPlayerModel,o=e.metricsModel,s=void 0,h=void 0,p=void 0;return s={getModel:function(e){var t=p[e];return t||(t=(0,u.default)(r).create({metricsModel:o,fragmentLoader:(0,d.default)(r).create({metricsModel:o,mediaPlayerModel:a,errHandler:i,requestModifier:(0,v.default)(r).getInstance()})}),p[e]=t),t},isInitializationRequest:c,reset:function(){f.off(E.default.FRAGMENT_LOADING_COMPLETED,n,this),f.off(E.default.FRAGMENT_LOADING_PROGRESS,n,this),t()}},h=(0,_.default)(r).getInstance().getLogger(s),t(),f.on(E.default.FRAGMENT_LOADING_COMPLETED,n,s),f.on(E.default.FRAGMENT_LOADING_PROGRESS,n,s),s}Object.defineProperty(n,"__esModule",{value:!0});var g=r(e(101)),l=e(235),m=r(e(216)),u=r(e(141)),d=r(e(90)),v=r(e(207)),y=r(e(47)),E=r(e(53)),a=r(e(48)),_=r(e(46));i.__dashjs_factory_name="FragmentController",n.default=a.default.getClassFactory(i),t.exports=n.default},{101:101,141:141,207:207,216:216,235:235,46:46,47:47,48:48,53:53,90:90}],110:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function a(e,t){if(!e||!t)return[];var n=t.id;return v[n]&&v[n][e]?v[n][e].list:[]}function l(e,t){return!e||!t||t&&!v[t.id]?null:v[t.id][e].current}function s(e){if(e&&e.streamInfo){var t=e.type,n=e.streamInfo,r=n.id,i=l(t,n);if(v[r]&&v[r][t]&&!f(e,i)){v[r][t].current=e,v[r][t].current&&g.trigger(S.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:i,newMediaInfo:e,switchMode:y[t]});var a=(s={lang:(o=e).lang,viewpoint:o.viewpoint,roles:o.roles,accessibility:o.accessibility,audioChannelConfiguration:o.audioChannelConfiguration}).lang||s.viewpoint||s.role&&0<s.role.length||s.accessibility&&0<s.accessibility.length||s.audioChannelConfiguration&&0<s.audioChannelConfiguration.length?s:null;a&&v[r][t].storeLastSettings&&(a.roles&&(a.role=a.roles[0],delete a.roles),a.accessibility&&(a.accessibility=a.accessibility[0]),a.audioChannelConfiguration&&(a.audioChannelConfiguration=a.audioChannelConfiguration[0]),E.setSavedMediaSettings(t,a))}}var o,s}function o(e,t){e&&t&&(r[e]=t)}function u(e){return e?r[e]:null}function d(){return i||C}function c(e){return e===b.default.AUDIO||e===b.default.VIDEO||e===b.default.TEXT||e===b.default.FRAGMENTED_TEXT||e===b.default.IMAGE}function f(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;var n=e.id===t.id,r=e.viewpoint===t.viewpoint,i=e.lang===t.lang,a=e.roles.toString()===t.roles.toString(),o=e.accessibility.toString()===t.accessibility.toString(),s=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return n&&r&&i&&a&&o&&s}function e(){v={},r={audio:null,video:null},y={audio:I,video:w}}function h(t,e){var n=!t.lang||t.lang===e.lang,r=!t.viewpoint||t.viewpoint===e.viewpoint,i=!t.role||!!e.roles.filter(function(e){return e===t.role})[0],a=!t.accessibility||!!e.accessibility.filter(function(e){return e===t.accessibility})[0],o=!t.audioChannelConfiguration||!!e.audioChannelConfiguration.filter(function(e){return e===t.audioChannelConfiguration})[0];return n&&r&&i&&a&&o}function p(e){var t=d(),n=[],r=function(e){var t=0,n=[],r=void 0;return e.forEach(function(e){r=Math.max.apply(Math,e.bitrateList.map(function(e){return e.bandwidth})),t<r?(t=r,n=[e]):r===t&&n.push(e)}),n},i=function(e){var t=0,n=[],r=void 0;return e.forEach(function(e){r=e.representationCount,t<r?(t=r,n=[e]):r===t&&n.push(e)}),n};switch(t){case D:1<(n=r(e)).length&&(n=i(n));break;case M:1<(n=i(e)).length&&(n=r(e));break;default:m.warn("Track selection mode is not supported: "+t)}return n[0]}var t=this.context,g=(0,A.default)(t).getInstance(),n=void 0,m=void 0,v=void 0,r=void 0,i=void 0,y=void 0,E=void 0,_=[I,w],T=[D,M];return n={checkInitialMediaSettingsForType:function(e,t){var n=u(e),r=a(e,t),i=[];e!==b.default.FRAGMENTED_TEXT?(n||o(e,n=E.getSavedMediaSettings(e)),r&&0!==r.length&&(n&&r.forEach(function(e){h(n,e)&&i.push(e)}),s(0===i.length?p(r):1<i.length?p(i):i[0]))):s(r[0])},addTrack:function(e){if(e){var t=e.type;if(c(t)){var n=e.streamInfo.id;v[n]||(v[n]={audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},fragmentedText:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}});for(var r=v[n][t].list,i=0,a=r.length;i<a;++i)if(f(r[i],e))return;r.push(e);var o=u(t);o&&h(o,e)&&!l(t,e.streamInfo)&&s(e)}}},getTracksFor:a,getCurrentTrackFor:l,isCurrentTrack:function(e){if(!e)return!1;var t=e.type,n=e.streamInfo.id;return v[n]&&v[n][t]&&f(v[n][t].current,e)},setTrack:s,setInitialSettings:o,getInitialSettings:u,setSwitchMode:function(e,t){-1!==_.indexOf(t)?y[e]=t:m.warn("Track switch mode is not supported: "+t)},getSwitchMode:function(e){return y[e]},setSelectionModeForInitialTrack:function(e){-1!==T.indexOf(e)?i=e:m.warn("Track selection mode is not supported: "+e)},getSelectionModeForInitialTrack:d,isMultiTrackSupportedByType:c,isTracksEqual:f,setConfig:function(e){e&&e.domStorage&&(E=e.domStorage)},reset:e},m=(0,R.default)(t).getInstance().getLogger(n),e(),n}Object.defineProperty(n,"__esModule",{value:!0});var b=r(e(101)),S=r(e(53)),A=r(e(47)),a=r(e(48)),R=r(e(46)),w="neverReplace",I="alwaysReplace",D="highestBitrate",M="widestRange",C=D;i.__dashjs_factory_name="MediaController";var o=a.default.getSingletonFactory(i);o.TRACK_SWITCH_MODE_NEVER_REPLACE=w,o.TRACK_SWITCH_MODE_ALWAYS_REPLACE=I,o.TRACK_SELECTION_MODE_HIGHEST_BITRATE=D,o.TRACK_SELECTION_MODE_WIDEST_RANGE=M,o.DEFAULT_INIT_TRACK_SELECTION_MODE=C,a.default.updateSingletonFactory(i.__dashjs_factory_name,o),n.default=o,t.exports=n.default},{101:101,46:46,47:47,48:48,53:53}],111:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){var e=void 0,i=void 0,t=this.context;return e={createMediaSource:function(){var e="WebKitMediaSource"in window;return"MediaSource"in window?new MediaSource:e?new WebKitMediaSource:null},attachMediaSource:function(e,t){var n=window.URL.createObjectURL(e);return t.setSource(n),n},detachMediaSource:function(e){e.setSource(null)},setDuration:function(e,t){return e.duration!=t&&(e.duration=t),e.duration},setSeekable:function(e,t,n){e&&"function"==typeof e.setLiveSeekableRange&&"function"==typeof e.clearLiveSeekableRange&&"open"===e.readyState&&0<=t&&t<n&&(e.clearLiveSeekableRange(),e.setLiveSeekableRange(t,n))},signalEndOfStream:function(e){var t=e.sourceBuffers,n=t.length;if("open"===e.readyState){for(var r=0;r<n;r++){if(t[r].updating)return;if(0===t[r].buffered.length)return}i.info("call to mediaSource endOfStream"),e.endOfStream()}}},i=(0,o.default)(t).getInstance().getLogger(e),e}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(48)),o=r(e(46));i.__dashjs_factory_name="MediaSourceController",n.default=a.default.getSingletonFactory(i),t.exports=n.default},{46:46,48:48}],112:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function i(e){!ae&&e.fromStreamInfo&&void 0!==te[e.fromStreamInfo.id]&&(delete re[e.fromStreamInfo.id],delete te[e.fromStreamInfo.id])}function e(){return parseFloat((t()-o()).toFixed(5))}function t(){var e=m(!0),t=ae&&ie?e-ie.start:0;return e+(ie?ie.duration-t:t)}function a(){ie&&Z&&Z.getElement()?Z.play():se=!0}function n(){return ie&&Z?Z.isPaused():null}function r(){ie&&Z&&Z.pause()}function s(){return ie&&Z?Z.isSeeking():null}function u(e,t,n){ie&&Z&&(!0===n?e!==Z.getTime()&&(Z.removeEventListener("seeking",w),H.info("Requesting seek to time: "+e),Z.setCurrentTime(e,t)):(K.trigger(ye.default.PLAYBACK_SEEK_ASKED),H.info("Requesting seek to time: "+e),Z.setCurrentTime(e,t)))}function o(){return ie&&Z?Z.getTime():null}function l(){var e=o();if(ae&&!isNaN(ue)){var t=ue/1e3;t<e&&(e-=t)}return e}function d(){return ie&&Z?Z.getPlaybackRate():null}function c(){return ie&&Z?Z.getEnded():null}function f(){return ae}function h(){if(!ae||isNaN(ue))return NaN;var e=l();if(isNaN(e)||0===e)return 0;var t=(new Date).getTime()+1e3*J.getClientTimeOffset();return Math.max(((t-ue-1e3*e)/1e3).toFixed(3),0)}function p(){$=NaN,se=!1,te={},ue=ne=0,re={},Z&&(K.off(ye.default.DATA_UPDATE_COMPLETED,_,this),K.off(ye.default.BUFFER_LEVEL_STATE_CHANGED,B,this),K.off(ye.default.BYTES_APPENDED_END_FRAGMENT,F,this),K.off(ye.default.LOADING_PROGRESS,U,this),K.off(ye.default.PERIOD_SWITCH_STARTED,i,this),K.off(ye.default.PLAYBACK_PROGRESS,k,this),K.off(ye.default.PLAYBACK_TIME_UPDATED,k,this),K.off(ye.default.PLAYBACK_ENDED,N,this),y(),Z.removeEventListener("canplay",T),Z.removeEventListener("play",b),Z.removeEventListener("waiting",S),Z.removeEventListener("playing",A),Z.removeEventListener("pause",R),Z.removeEventListener("error",L),Z.removeEventListener("seeking",w),Z.removeEventListener("seeked",I),Z.removeEventListener("timeupdate",D),Z.removeEventListener("progress",M),Z.removeEventListener("ratechange",C),Z.removeEventListener("loadedmetadata",O),Z.removeEventListener("stalled",G),Z.removeEventListener("ended",P)),ae=ie=Z=ee=null}function g(){var e=pe.getURIFragmentData(),t=void 0;if(e){t={};var n=parseInt(e.r,10);0<=n&&ie&&n<ie.manifestInfo.DVRWindowSize&&null===e.t&&(e.t=Math.max(Math.floor(Date.now()/1e3)-ie.manifestInfo.DVRWindowSize,ie.manifestInfo.availableFrom.getTime()/1e3+ie.start)+n),t.fragS=parseFloat(e.s),t.fragT=parseFloat(e.t)}return t}function m(e,t){var n=void 0,r=NaN;if(e)r=ie?ie.start:r;else{var i=g();r=i?isNaN(i.fragS)?i.fragT:i.fragS:0}if(ae)!isNaN(r)&&ie&&((n=r-ie.manifestInfo.availableFrom.getTime()/1e3)>$||n<(isNaN(t)?NaN:t-ie.manifestInfo.DVRWindowSize))&&(n=null),n=n||$;else if(ie)if(!isNaN(r)&&r<Math.max(ie.manifestInfo.duration,ie.duration)&&0<=r)n=r;else{var a=te[ie.id];n=void 0!==a?Math.max(void 0!==a.audio?a.audio:0,void 0!==a.video?a.video:0,ie.start):ie.start}return n}function v(){if(null===ee){ee=setInterval(function(){var e;K.trigger(ye.default.WALLCLOCK_TIME_UPDATED,{isDynamic:ae,time:new Date}),f()&&n()&&(e=Date.now(),(!le||le+500<e)&&(le=e,D()))},oe.getWallclockTimeUpdateInterval())}}function y(){clearInterval(ee),ee=null}function E(){if(!n()&&ae&&0!==Z.getReadyState()){var e=l(),t=function(e){var t=V.getReadOnlyMetricsFor(ge.default.VIDEO)||V.getReadOnlyMetricsFor(ge.default.AUDIO),n=W.getCurrentDVRInfo(t),r=n?n.range:null,i=void 0;if(!r)return NaN;if(e>r.end)i=Math.max(r.end-2*ie.manifestInfo.minBufferTime,r.start);else{if(!(e+.25<r.start))return e;i=r.start}return i}(e);!isNaN(t)&&t!==e&&u(t)}}function _(e){if(!e.error){var t=Q.convertDataToRepresentationInfo(e.currentRepresentation).mediaInfo.streamInfo;ie.id===t.id&&(ie=t,E())}}function T(){K.trigger(ye.default.CAN_PLAY)}function b(){H.info("Native video element event: play"),E(),v(),K.trigger(ye.default.PLAYBACK_STARTED,{startTime:o()})}function S(){H.info("Native video element event: waiting"),K.trigger(ye.default.PLAYBACK_WAITING,{playingTime:o()})}function A(){H.info("Native video element event: playing"),K.trigger(ye.default.PLAYBACK_PLAYING,{playingTime:o()})}function R(){H.info("Native video element event: pause"),K.trigger(ye.default.PLAYBACK_PAUSED,{ended:c()})}function w(){var e=o();H.info("Seeking to: "+e),v(),K.trigger(ye.default.PLAYBACK_SEEKING,{seekTime:e})}function I(){H.info("Native video element event: seeked"),K.trigger(ye.default.PLAYBACK_SEEKED),Z.addEventListener("seeking",w)}function D(){ie&&K.trigger(ye.default.PLAYBACK_TIME_UPDATED,{timeToEnd:e(),time:o()})}function M(){K.trigger(ye.default.PLAYBACK_PROGRESS)}function C(){var e=d();H.info("Native video element event: ratechange: ",e),K.trigger(ye.default.PLAYBACK_RATE_CHANGED,{playbackRate:e})}function O(){H.info("Native video element event: loadedmetadata"),K.trigger(ye.default.PLAYBACK_METADATA_LOADED),v()}function P(){H.info("Native video element event: ended"),r(),y(),K.trigger(ye.default.PLAYBACK_ENDED,{isLast:q.getActiveStreamInfo().isLast})}function N(e){ee&&e.isLast&&(H.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended"),Z.setCurrentTime(t()),r(),y())}function L(e){var t=e.target||e.srcElement;K.trigger(ye.default.PLAYBACK_ERROR,{error:t.error})}function k(){ae&&oe.getLowLatencyEnabled()&&0<oe.getCatchUpPlaybackRate()&&!n()&&!s()&&(0<oe.getCatchUpPlaybackRate()&&0<o()&&Math.abs(h()-oe.getLiveDelay())>oe.getLowLatencyMinDrift()?function(){if(Z){var e=oe.getCatchUpPlaybackRate(),t=oe.getLiveDelay(),n=h()-t,r=5*n,i=2*e/(1+Math.pow(Math.E,-r)),a=1-e+i;fe&&(l=null,q.getActiveStreamProcessors().forEach(function(e){var t=e.getBufferLevel();l=null===l?t:Math.min(l,t)}),t/2<l?fe=!1:0<n&&(a=1)),Math.abs(Z.getPlaybackRate()-a)>he&&Z.setPlaybackRate(a),0<oe.getLowLatencyMaxDriftBeforeSeeking()&&!ce&&n>oe.getLowLatencyMaxDriftBeforeSeeking()?(H.info("Low Latency catchup mechanism. Latency too high, doing a seek to live point"),ce=!0,o=V.getReadOnlyMetricsFor(ge.default.VIDEO)||V.getReadOnlyMetricsFor(ge.default.AUDIO),u(((s=W.getCurrentDVRInfo(o))?s.range:null).end-oe.getLiveDelay(),!0,!1)):ce=!1}var o,s;var l}():x())}function x(){Z&&Z.setPlaybackRate(1)}function F(e){var t=void 0,n=void 0,r=e.bufferedRanges;if(r&&r.length&&(!te[ie.id]||!0!==te[ie.id].started)){var i=e.sender.getType();void 0===re[ie.id]&&(re[ie.id]=[]),re[ie.id][i]=r,void 0===te[ie.id]&&(te[ie.id]=[],te[ie.id].started=!1),void 0===te[ie.id][i]&&(te[ie.id][i]=Math.max(r.start(0),ie.start));var a=q.isTrackTypePresent(ge.default.VIDEO),o=q.isTrackTypePresent(ge.default.AUDIO);n=m(!1),o&&a?isNaN(te[ie.id].audio)||isNaN(te[ie.id].video)||function(e,t){if(t&&0<t.length)for(var n=0,r=t.length;n<r;n++)if(e>=t.start(n)&&e<t.end(n))return!0;return!1}(t,r=te[ie.id].audio<te[ie.id].video?(t=te[ie.id].video>n?te[ie.id].video:n,re[ie.id].audio):(t=te[ie.id].audio>n?te[ie.id].audio:n,re[ie.id].video))&&(s()||de||0===t||u(t,!0,!0),te[ie.id].started=!0):te[ie.id][i]&&(t=te[ie.id][i]>n?te[ie.id][i]:n,s()||de||u(t,!1,!0),te[ie.id].started=!0)}}function U(e){if(!1===e.stream&&oe.getLowLatencyEnabled()&&!isNaN(e.request.duration)){var t=1.2*e.request.duration;t>oe.getLiveDelay()&&(H.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",t.toFixed(2)),oe.setLiveDelay(t))}}function B(e){e.streamInfo.id===ie.id&&(oe.getLowLatencyEnabled()?e.state!==me.default.BUFFER_EMPTY||s()||fe||(fe=!0,x()):Z.setStallState(e.mediaType,e.state===me.default.BUFFER_EMPTY))}function G(e){K.trigger(ye.default.PLAYBACK_STALLED,{e:e})}var j=this.context,K=(0,ve.default)(j).getInstance(),Y=void 0,H=void 0,q=void 0,V=void 0,W=void 0,z=void 0,X=void 0,Q=void 0,Z=void 0,J=void 0,$=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,ae=void 0,oe=void 0,se=void 0,le=void 0,ue=void 0,de=void 0,ce=void 0,fe=void 0,he=void 0,pe=void 0;return Y={initialize:function(e,t){ie=e,Z.addEventListener("canplay",T),Z.addEventListener("play",b),Z.addEventListener("waiting",S),Z.addEventListener("playing",A),Z.addEventListener("pause",R),Z.addEventListener("error",L),Z.addEventListener("seeking",w),Z.addEventListener("seeked",I),Z.addEventListener("timeupdate",D),Z.addEventListener("progress",M),Z.addEventListener("ratechange",C),Z.addEventListener("loadedmetadata",O),Z.addEventListener("stalled",G),Z.addEventListener("ended",P),ae=ie.manifestInfo.isDynamic,fe=ce=!1,$=ie.start,de=t;var n="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",r=/safari/.test(n)&&!/chrome/.test(n);he=r?.25:.02,K.on(ye.default.DATA_UPDATE_COMPLETED,_,this),K.on(ye.default.BYTES_APPENDED_END_FRAGMENT,F,this),K.on(ye.default.LOADING_PROGRESS,U,this),K.on(ye.default.BUFFER_LEVEL_STATE_CHANGED,B,this),K.on(ye.default.PERIOD_SWITCH_STARTED,i,this),K.on(ye.default.PLAYBACK_PROGRESS,k,this),K.on(ye.default.PLAYBACK_TIME_UPDATED,k,this),K.on(ye.default.PLAYBACK_ENDED,N,this),se&&(se=!1,a())},setConfig:function(e){e&&(e.streamController&&(q=e.streamController),e.metricsModel&&(V=e.metricsModel),e.dashMetrics&&(W=e.dashMetrics),e.manifestModel&&(z=e.manifestModel),e.dashManifestModel&&(X=e.dashManifestModel),e.mediaPlayerModel&&(oe=e.mediaPlayerModel),e.adapter&&(Q=e.adapter),e.videoModel&&(Z=e.videoModel),e.timelineConverter&&(J=e.timelineConverter),e.uriFragmentModel&&(pe=e.uriFragmentModel))},getStartTimeFromUriParameters:g,getStreamStartTime:m,getTimeToStreamEnd:e,getTime:o,getNormalizedTime:l,getPlaybackRate:d,getPlayedRanges:function(){return ie&&Z?Z.getPlayedRanges():null},getEnded:c,getIsDynamic:f,getStreamController:function(){return q},setLiveStartTime:function(e){$=e},getLiveStartTime:function(){return $},computeLiveDelay:function(e,t){var n,r=X.getMpd(z.getValue()),i=void 0;if(n=oe.getUseSuggestedPresentationDelay()&&r.hasOwnProperty(ge.default.SUGGESTED_PRESENTATION_DELAY)?r.suggestedPresentationDelay:oe.getLowLatencyEnabled()?0:oe.getLiveDelay()?oe.getLiveDelay():isNaN(e)?2*ie.manifestInfo.minBufferTime:e*oe.getLiveDelayFragmentCount(),r.availabilityStartTime&&(ue=r.availabilityStartTime.getTime()),0<t){var a=Math.max(t-10,t/2);i=Math.min(n,a)}else i=n;return ne=i},getLiveDelay:function(){return ne},getCurrentLiveLatency:h,play:a,isPaused:n,pause:r,isSeeking:s,seek:u,reset:p},H=(0,Ee.default)(j).getInstance().getLogger(Y),p(),Y}Object.defineProperty(n,"__esModule",{value:!0});var ge=r(e(101)),me=r(e(107)),ve=r(e(47)),ye=r(e(53)),a=r(e(48)),Ee=r(e(46));i.__dashjs_factory_name="PlaybackController",n.default=a.default.getSingletonFactory(i),t.exports=n.default},{101:101,107:107,46:46,47:47,48:48,53:53}],113:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function r(){Q&&!q.isBufferingCompleted()?(z.debug("Schedule Controller starts"),C(),J=!1,Z&&(Z=!1),i(0)):z.warn("Start denied to Schedule Controller")}function t(){J||(z.debug("Schedule Controller stops"),J=!0,clearTimeout(ie))}function n(){var e=q.getBufferController();if(J||ne||!e||j.isPaused()&&!B.getScheduleWhilePaused()||!(H!==me.default.FRAGMENTED_TEXT&&H!==me.default.TEXT||Y.isTextEnabled()))z.debug("Schedule stop!");else if(e.getIsBufferingCompleted())z.debug("Schedule stop because buffering is completed!");else{!function(){var e=j.getTime(),t=1.5*Q.fragmentDuration,n=X.getRequests({state:be.default.FRAGMENT_MODEL_EXECUTED,time:e+t,threshold:0})[0];if(n&&-1===ce.indexOf(n)&&!F.getIsTextTrack(H)){var r=B.getFastSwitchEnabled(),i=q.getBufferLevel(),a=G.getAbandonmentStateFor(H),o=!V.isCurrentTrack(n.mediaInfo)&&V.getSwitchMode(n.mediaInfo.type)===we.default.TRACK_SWITCH_MODE_NEVER_REPLACE,s=n.quality<Q.quality;r&&(o||s)&&t<=i&&a!==ye.default.ABANDON_LOAD?(l(n),ge=!0,z.debug("Reloading outdated fragment at index: ",n.index)):n.quality>Q.quality&&!he&&I(j.getTime()+q.getBufferLevel())}}();var t=0<ce.length,r=q.getStreamInfo();if(he||isNaN(de)||fe||t||function(e,t){ue[t]=ue[t]||{};var n=G.getTopQualityIndexFor(e,t);return ue[t][e]!=n&&(z.info("Top quality "+e+" index has changed from "+ue[t][e]+" to "+n),ue[t][e]=n,!0)}(Q.mediaInfo.type,r.id)||oe.execute(q,K.isTrackTypePresent(me.default.VIDEO))){o(!0),t||fe||G.checkPlaybackQuality(H),function(){var e=q.getFragmentController();if(Q.quality===de&&!fe||he){var t=ce.shift();if(e.isInitializationRequest(t))q.switchInitData(t.representationId);else{var n=void 0;q.getBufferController().getIsPruningInProgress()||(n=se.execute(q,ae,t),I(NaN),n&&!t&&(isNaN(n.startTime+n.duration)||k.setIndexHandlerTime(q,n.startTime+n.duration),n.delayLoadingTime=(new Date).getTime()+re,D(0)),!n&&r.manifestInfo&&r.manifestInfo.isDynamic&&z.debug("Next fragment seems to be at the bleeding live edge and is not available yet. Rescheduling.")),n?(z.debug("Next fragment request url is "+n.url),X.executeRequest(n)):(o(!1),i(B.getLowLatencyEnabled()?100:500))}}else z.debug("Quality has changed, get init request for representationid = "+Q.id),fe?(he=V.getSwitchMode(H)===we.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,z.debug("Switch track has been asked, get init request for "+H+" with representationid = "+Q.id+"bufferResetInProgress = "+he),q.switchInitData(Q.id,he),fe=!1):q.switchInitData(Q.id),de=Q.quality}()}else i(500)}}function i(e){clearTimeout(ie),ie=setTimeout(n,e)}function a(e){e.sender&&e.sender.getStreamProcessor()===q&&s(Q.quality)}function o(e){ne!==e?ne=e:z.debug("isFragmentProcessingInProgress is already equal to",e)}function s(e){var t=k.getInitRequest(q,e);t&&(o(!0),t.url=(0,Ie.replaceTokenForTemplate)(t.url,"Bandwidth",Q?Q.bandwidth:null),X.executeRequest(t))}function l(e){ce.push(e)}function u(e){if(H===e.mediaType&&q.getStreamInfo().id===e.streamInfo.id){if(null===(Q=q.getRepresentationInfo(e.newQuality))||void 0===Q)throw new Error("Unexpected error! - currentRepresentationInfo is null or undefined");M(new Date,ve.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),C()}}function d(e){if(j&&X){var t=X.getRequests({state:be.default.FRAGMENT_MODEL_EXECUTED,time:j.getTime(),threshold:0})[0];t&&j.getTime()>=t.startTime&&((!le.mediaInfo||t.mediaInfo.type===le.mediaInfo.type&&t.mediaInfo.id!==le.mediaInfo.id)&&e&&N.trigger(Ae.default.TRACK_CHANGE_RENDERED,{mediaType:H,oldMediaInfo:le.mediaInfo,newMediaInfo:t.mediaInfo}),t.quality===le.quality&&t.adaptationIndex===le.adaptationIndex||!e||N.trigger(Ae.default.QUALITY_CHANGE_RENDERED,{mediaType:H,oldQuality:le.quality,newQuality:t.quality}),le={mediaInfo:t.mediaInfo,quality:t.quality,adaptationIndex:t.adaptationIndex})}}function c(e){e.error||e.sender.getStreamProcessor()!==q||(Q=k.convertDataToRepresentationInfo(e.currentRepresentation))}function f(e){e.error||q.getStreamInfo().id!==e.streamInfo.id||(Q=q.getRepresentationInfo(),Z&&(j.getIsDynamic()?(U.setTimeSyncCompleted(!0),function(){var e=q.getLiveEdgeFinder();if(e){var t=e.getLiveEdge(),n=Q.mediaInfo.streamInfo.manifestInfo.DVRWindowSize/2,r=t-j.computeLiveDelay(Q.fragmentDuration,n),i=k.getFragmentRequest(q,Q,r,{ignoreIsFinished:!0});if(i)if(B.getLowLatencyEnabled()){var a=i.duration<B.getLiveDelay()?i.startTime:i.startTime+i.duration-B.getLiveDelay();j.setLiveStartTime(a)}else j.setLiveStartTime(i.startTime);else z.debug("setLiveEdgeSeekTarget : getFragmentRequest returned undefined request object");ae=j.getStreamStartTime(!1,t),q.getBufferController().setSeekStartTime(ae),ae>Q.mediaInfo.streamInfo.start+Q.mediaInfo.streamInfo.duration&&j.seek(ae);var o=x.getCurrentManifestUpdate(L.getMetricsFor(me.default.STREAM));L.updateManifestUpdateInfo(o,{currentTime:ae,presentationStartTime:t,latency:t-ae,clientTimeOffset:U.getClientTimeOffset()})}}()):(ae=j.getStreamStartTime(!1),q.getBufferController().setSeekStartTime(ae))),J&&r())}function h(e){e.fragmentModel===X&&(t(),o(!1),z.info("Stream is complete"))}function p(e){e.sender===X&&(z.info("OnFragmentLoadingCompleted - Url:",e.request?e.request.url:"undefined",", Range:",e.request.range?e.request.range:"undefined"),F.getIsTextTrack(H)&&o(!1),e.error&&e.request.serviceLocation&&!J&&(l(e.request),o(!1),i(0)),he&&(pe=e.request))}function g(){d(!0)}function m(e){if(e.sender.getStreamProcessor()===q)if(he&&!isNaN(e.startTime)&&(he=!1,X.addExecutedRequest(pe)),o(!1),ge&&!isNaN(e.startTime)){var t=j.getTime(),n=e.startTime+Q.fragmentDuration,r=1.5*Q.fragmentDuration;i(n<=t+r?0:1e3*(n-(t+r))),ge=!1}else i(0)}function v(e){e.streamProcessor===q&&(z.info("onFragmentLoadingAbandoned for "+H+", request: "+e.request.url+" has been aborted"),j.isSeeking()||fe||(z.info("onFragmentLoadingAbandoned for "+H+", request: "+e.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),l(e.request)),o(!1),i(0))}function y(e){e.sender.getStreamProcessor()===q&&t()}function E(e){if(e.sender.getStreamProcessor()===q){var t=q.getStreamInfo();t&&(e.unintended?X.removeExecutedRequestsAfterTime(e.from,t.duration):X.syncExecutedRequestsWithBufferedRange(q.getBufferController().getBuffer().getAllBufferRanges(),t.duration)),e.hasEnoughSpaceToAppend&&J&&r()}}function _(e){e.sender.getStreamProcessor()!==q||e.state!==Ee.default.BUFFER_EMPTY||j.isSeeking()||(z.info("Buffer is empty! Stalling!"),M(new Date,ve.PlayListTrace.REBUFFERING_REASON))}function T(e){e.sender.getStreamProcessor()===q&&(t(),o(!1))}function b(){X.abortRequests(),t()}function S(e){e.sender.getStreamProcessor()===q&&Y.isTextEnabled()&&s(e.index)}function A(){!J&&B.getScheduleWhilePaused()||r()}function R(e){ae=e.seekTime,D(0),J&&r();var t=x.getCurrentManifestUpdate(L.getMetricsFor(me.default.STREAM)),n=Q.DVRWindow&&j?Q.DVRWindow.end-j.getTime():NaN;L.updateManifestUpdateInfo(t,{latency:n}),ne?(z.debug("onPlaybackSeeking for "+H+", call fragmentModel.abortRequests in order to seek quicker"),X.abortRequests()):i(0)}function w(e){ee&&(ee.playbackspeed=e.playbackRate.toString())}function I(e){ae=e}function D(e){re=e}function M(e,t){if($&&!1===te){var n=ee.start,r=e.getTime()-n.getTime();ee.duration=r,ee.stopreason=t,$.trace.push(ee),te=!0}}function C(){$&&!0===te&&Q&&(te=!1,(ee=new ve.PlayListTrace).representationid=Q.id,ee.start=new Date,ee.mstart=1e3*j.getTime(),ee.playbackspeed=j.getPlaybackRate().toString())}function O(){le={mediaInfo:void(re=0),quality:de=ae=NaN,adaptationIndex:NaN},ue={},pe=ee=$=null,ge=he=fe=!(J=Z=te=!(ne=!(ce=[])))}e=e||{};var P=this.context,N=(0,Se.default)(P).getInstance(),L=e.metricsModel,k=e.adapter,x=e.dashMetrics,F=e.dashManifestModel,U=e.timelineConverter,B=e.mediaPlayerModel,G=e.abrController,j=e.playbackController,K=e.streamController,Y=e.textController,H=e.type,q=e.streamProcessor,V=e.mediaController,W=void 0,z=void 0,X=void 0,Q=void 0,Z=void 0,J=void 0,$=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,ae=void 0,oe=void 0,se=void 0,le=void 0,ue=void 0,de=void 0,ce=void 0,fe=void 0,he=void 0,pe=void 0,ge=void 0;return W={initialize:function(){X=q.getFragmentModel(),oe=(0,_e.default)(P).create({abrController:G,dashMetrics:x,metricsModel:L,mediaPlayerModel:B,textController:Y}),se=(0,Te.default)(P).create({adapter:k,textController:Y,playbackController:j}),F.getIsTextTrack(e.mimeType)&&N.on(Ae.default.TIMED_TEXT_REQUESTED,S,this),N.on(Ae.default.QUALITY_CHANGE_REQUESTED,u,this),N.on(Ae.default.DATA_UPDATE_STARTED,y,this),N.on(Ae.default.DATA_UPDATE_COMPLETED,c,this),N.on(Ae.default.FRAGMENT_LOADING_COMPLETED,p,this),N.on(Ae.default.STREAM_COMPLETED,h,this),N.on(Ae.default.STREAM_INITIALIZED,f,this),N.on(Ae.default.BUFFER_LEVEL_STATE_CHANGED,_,this),N.on(Ae.default.BUFFER_CLEARED,E,this),N.on(Ae.default.BYTES_APPENDED_END_FRAGMENT,m,this),N.on(Ae.default.INIT_REQUESTED,a,this),N.on(Ae.default.QUOTA_EXCEEDED,T,this),N.on(Ae.default.PLAYBACK_SEEKING,R,this),N.on(Ae.default.PLAYBACK_STARTED,A,this),N.on(Ae.default.PLAYBACK_RATE_CHANGED,w,this),N.on(Ae.default.PLAYBACK_TIME_UPDATED,g,this),N.on(Ae.default.URL_RESOLUTION_FAILED,b,this),N.on(Ae.default.FRAGMENT_LOADING_ABANDONED,v,this)},getType:function(){return H},setSeekTarget:I,setTimeToLoadDelay:D,replaceRequest:l,switchTrackAsked:function(){fe=!0},isStarted:function(){return!1===J},start:r,stop:t,reset:function(){N.off(Ae.default.DATA_UPDATE_STARTED,y,this),N.off(Ae.default.DATA_UPDATE_COMPLETED,c,this),N.off(Ae.default.BUFFER_LEVEL_STATE_CHANGED,_,this),N.off(Ae.default.QUALITY_CHANGE_REQUESTED,u,this),N.off(Ae.default.FRAGMENT_LOADING_COMPLETED,p,this),N.off(Ae.default.STREAM_COMPLETED,h,this),N.off(Ae.default.STREAM_INITIALIZED,f,this),N.off(Ae.default.QUOTA_EXCEEDED,T,this),N.off(Ae.default.BYTES_APPENDED_END_FRAGMENT,m,this),N.off(Ae.default.BUFFER_CLEARED,E,this),N.off(Ae.default.INIT_REQUESTED,a,this),N.off(Ae.default.PLAYBACK_RATE_CHANGED,w,this),N.off(Ae.default.PLAYBACK_SEEKING,R,this),N.off(Ae.default.PLAYBACK_STARTED,A,this),N.off(Ae.default.PLAYBACK_TIME_UPDATED,g,this),N.off(Ae.default.URL_RESOLUTION_FAILED,b,this),N.off(Ae.default.FRAGMENT_LOADING_ABANDONED,v,this),F.getIsTextTrack(H)&&N.off(Ae.default.TIMED_TEXT_REQUESTED,S,this),t(),d(!1),O()},setPlayList:function(e){$=e},getBufferTarget:function(){return oe.getBufferTarget(q,K.isTrackTypePresent(me.default.VIDEO))},finalisePlayList:function(e,t){M(e,t),$=null}},z=(0,Re.default)(P).getInstance().getLogger(W),O(),W}Object.defineProperty(n,"__esModule",{value:!0});var me=r(e(101)),ve=e(237),ye=r(e(104)),Ee=r(e(107)),_e=r(e(186)),Te=r(e(187)),be=r(e(141)),Se=r(e(47)),Ae=r(e(53)),a=r(e(48)),Re=r(e(46)),we=r(e(110)),Ie=e(77);i.__dashjs_factory_name="ScheduleController",n.default=a.default.getClassFactory(i),t.exports=n.default},{101:101,104:104,107:107,110:110,141:141,186:186,187:187,237:237,46:46,47:47,48:48,53:53,77:77}],114:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function n(){if(t(Me.default.VIDEO)){var e=fe.getPlaybackQuality();e&&H.addDroppedFrames(Me.default.VIDEO,e)}}function r(){if(!(!pe.getJumpGaps()||0===h()||he.isSeeking()||ge||le||ue||de)&&++Se>=N){var e=he.getTime();Ie===e?function(e){for(var t=h(),n=pe.getSmallGapLimit(),r=void 0,i=0;i<t.length;i++){var a=t[i].getBuffer(),o=a.getAllBufferRanges(),s=void 0;if(o&&!(o.length<=1)){for(var l=0;l<o.length;l++)if(e<o.start(l)){s=o.start(l);break}if(0<s){var u=s-e;0<u&&u<=n&&(void 0===r||r<s)&&(r=s)}}}var d=he.getTimeToStreamEnd();void 0===r&&!isNaN(d)&&d<n&&(r=e+d),0<r&&(!isNaN(d)&&e+d<=r?(F.info("Jumping media gap (discontinuity) at time ",e,". Jumping to end of the stream"),k.trigger(Le.default.PLAYBACK_ENDED,{isLast:I().isLast})):(F.info("Jumping media gap (discontinuity) at time ",e,". Jumping to time position",r),he.seek(r,!0,!0)))}(e):Ie=e,Se=0}}function i(e){var t=f(e.seekTime);Te&&(s(),_e=!1),be&&(F.debug("[PreloadTimer] stop period preload timer."),clearTimeout(be),be=void 0),t===ie&&we&&we.deactivate(!0),t&&(t!==ie||we&&!ie.isActive())?(A(ke.PlayListTrace.END_OF_PERIOD_STOP_REASON),m(ie,t,e.seekTime)):A(ke.PlayListTrace.USER_REQUEST_STOP_REASON),R(ke.PlayList.SEEK_START_REASON)}function a(){F.debug("[onPlaybackStarted]"),me?(me=!1,R(ke.PlayList.INITIAL_PLAYOUT_START_REASON)):ge&&(ge=!1,R(ke.PlayList.RESUME_FROM_PAUSE_START_REASON),l())}function o(e){F.debug("[onPlaybackPaused]"),e.ended||(ge=!0,A(ke.PlayListTrace.USER_REQUEST_STOP_REASON),l())}function s(){F.debug("[toggleEndPeriodTimer] stop end period timer."),clearTimeout(Te),Te=void 0}function l(){if(_e)if(Te)s();else{var e=he.getTimeToStreamEnd(),t=0<e?1e3*e:0,n=t<2e3?t/4:t-2e3;F.debug("[toggleEndPeriodTimer] Going to fire preload in",n,"milliseconds"),be=setTimeout(c,n),F.debug("[toggleEndPeriodTimer] start-up of timer to notify PLAYBACK_ENDED event. It will be triggered in",t,"milliseconds"),Te=setTimeout(function(){k.trigger(Le.default.PLAYBACK_ENDED,{isLast:I().isLast})},t)}}function u(e){if(e.sender&&(e.sender.getType()===Me.default.AUDIO||e.sender.getType()===Me.default.VIDEO)){var t=I().isLast;ce&&!t&&void 0===Te&&(F.info("[onTrackBufferingCompleted] end of period detected. Track",e.sender.getType(),"has finished"),!(_e=!0)===ge&&l())}}function d(){var e=I().isLast;ce&&e&&(F.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),V.signalEndOfStream(ce))}function c(){var t,e=I().isLast;ce&&!e&&(t=g(),(Re=ie.isProtectionCompatible(t)&&(De||ie.isMediaCodecCompatible(t)))&&(F.info("[onStreamCanLoadNext] Preloading next stream"),ie.stopEventController(),ie.deactivate(!0),t.preload(ce,Ae),(we=t).getProcessors().forEach(function(e){Y.setIndexHandlerTime(e,t.getStartTime())})))}function f(e){var t=0,n=null,r=re.length;0<r&&(t+=re[0].getStartTime());for(var i=0;i<r;i++)if(n=re[i],e<(t=parseFloat((t+n.getDuration()).toFixed(5))))return n;return null}function h(){return ie?ie.getProcessors():[]}function p(){var e=g();e?(ye=Ee=void 0,m(ie,e,NaN)):F.debug("StreamController no next stream found"),A(e?ke.PlayListTrace.END_OF_PERIOD_STOP_REASON:ke.PlayListTrace.END_OF_CONTENT_STOP_REASON),Te=void 0,_e=!1}function g(){if(ie){var e=(t=I().start,n=I().duration,{v:re.filter(function(e){return e.getStreamInfo().start===parseFloat((t+n).toFixed(5))})[0]});if("object"==typeof e)return e.v}var t,n}function m(e,t,n){le||!t||e===t&&t.isActive()||(le=!0,k.trigger(Le.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:e?e.getStreamInfo():null,toStreamInfo:t.getStreamInfo()}),Re=!1,e&&(e.stopEventController(),Re=ie.isProtectionCompatible(t)&&(De||ie.isMediaCodecCompatible(t))&&!n||t.getPreloaded(),e.deactivate(Re)),ie=t,we=!1,he.initialize(I(),Re),fe.getElement()?v(n,e,!1,Re):y(n,Re))}function v(e,t,n,r){function i(){ce&&(F.debug("MediaSource is open!"),window.URL.revokeObjectURL(a),ce.removeEventListener("sourceopen",i),ce.removeEventListener("webkitsourceopen",i),E(),t||k.trigger(Le.default.SOURCE_INITIALIZED),n?ie.setMediaSource(ce):y(e,r))}var a=void 0;ce?r?(y(e,r),t||k.trigger(Le.default.SOURCE_INITIALIZED)):(V.detachMediaSource(fe),ce.addEventListener("sourceopen",i,!1),ce.addEventListener("webkitsourceopen",i,!1),a=V.attachMediaSource(ce,fe),F.debug("MediaSource attached to element.  Waiting on open...")):((ce=V.createMediaSource()).addEventListener("sourceopen",i,!1),ce.addEventListener("webkitsourceopen",i,!1),a=V.attachMediaSource(ce,fe),F.debug("MediaSource attached to element.  Waiting on open..."))}function y(e,t){if(Ae=ie.activate(ce,t?Ae:void 0),Ee=S(Me.default.AUDIO),ye=S(Me.default.VIDEO),Ae){var n=Object.keys(Ae);0<n.length&&Ae[n[0]].changeType&&(F.debug("SourceBuffer changeType method supported. Use it to switch codecs in periods transitions"),De=!0)}var r;me||(isNaN(e)?(r=he.getStreamStartTime(!0),t||h().forEach(function(e){Y.setIndexHandlerTime(e,r)})):he.seek(e)),ie.startEventController(),!se&&me||he.play(),le=!1,k.trigger(Le.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:I()})}function E(e){var t=e||I().manifestInfo.duration,n=V.setDuration(ce,t);F.debug("Duration successfully set to: "+n)}function _(e){for(var t=0,n=re.length;t<n;t++)if(re[t].getId()===e.id)return re[t];return null}function T(){var e=j.getValue();ae&&(k.trigger(Le.default.PROTECTION_CREATED,{controller:ae,manifest:e}),ae.setMediaElement(fe.getElement()),oe&&ae.setProtectionData(oe)),function(){try{var e=Y.getStreamsInfo();if(0===e.length)throw new Error("There are no streams");var t=q.getCurrentManifestUpdate(H.getMetricsFor(Me.default.STREAM));H.updateManifestUpdateInfo(t,{currentTime:he.getTime(),buffered:fe.getBufferRange(),presentationStartTime:e[0].start,clientTimeOffset:ne.getClientTimeOffset()});for(var n=0,r=e.length;n<r;n++){var i=e[n],a=_(i);a?a.updateData(i):(a=(0,Oe.default)(L).create({manifestModel:j,dashManifestModel:K,mediaPlayerModel:pe,metricsModel:H,dashMetrics:q,manifestUpdater:B,adapter:Y,timelineConverter:ne,capabilities:U,errHandler:te,baseURLController:z,domStorage:X,abrController:Q,playbackController:he,mediaController:Z,textController:J,videoModel:fe,streamController:x}),re.push(a),a.initialize(i,ae)),H.addManifestUpdateStreamInfo(t,i.id,i.index,i.start,i.duration)}if(!ie){var o=he.getStartTimeFromUriParameters(),s=null;o&&(s=f(isNaN(o.fragS)?o.fragT:o.fragS)),m(null,null!==s?s:re[0],NaN)}k.trigger(Le.default.STREAMS_COMPOSED)}catch(e){te.manifestError(e.message,"nostreamscomposed",j.getValue()),te.error(new Ye.default(He.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,e.message+"nostreamscomposed",j.getValue())),de=!0,O()}}()}function b(s){s.error?(de=!0,O()):function(){var e=s.manifest;Y.updatePeriods(e);var t=Y.getStreamsInfo(void 0,1)[0],n=Y.getMediaInfoForType(t,Me.default.VIDEO)||Y.getMediaInfoForType(t,Me.default.AUDIO),r=void 0;n&&(r=K.getUseCalculatedLiveEdgeTimeForAdaptation(Y.getDataForMedia(n)))&&(F.debug("SegmentTimeline detected using calculated Live Edge Time"),pe.setUseManifestDateHeaderTimeSource(!1));var i=K.getUTCTimingSources(s.manifest),a=!K.getIsDynamic(e)||r?i:i.concat(pe.getUTCTimingSources()),o=ee.isHTTPS(s.manifest.url);a.forEach(function(e){e.value.replace(/.*?:\/\//g,"")===pe.getDefaultUtcTimingSource().value.replace(/.*?:\/\//g,"")&&(e.value=e.value.replace(o?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),o?"https://":"http://"),F.debug("Matching default timing source protocol to manifest protocol: ",e.value))}),z.initialize(e),W.setConfig({metricsModel:H,dashMetrics:q,baseURLController:z}),W.initialize(a,pe.getUseManifestDateHeaderTimeSource())}()}function t(e){var t=void 0;if(!e)return t;switch(e){case Me.default.VIDEO:t=ye;break;case Me.default.AUDIO:t=Ee}return t}function S(t){var n=!1;return h().forEach(function(e){e.getMediaInfo().type===t&&(n=!0)}),n}function A(n,r){r=r||new Date,ve&&(h().forEach(function(e){var t=e.getScheduleController();t&&t.finalisePlayList(r,n)}),H.addPlayList(ve),ve=null)}function R(e){(ve=new ke.PlayList).start=new Date,ve.mstart=1e3*he.getTime(),ve.starttype=e,h().forEach(function(e){var t=e.getScheduleController();t&&t.setPlayList(ve)})}function w(e){if(e.error){var t="";switch(e.error.code){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE";break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:t="MEDIA_ERR_ENCRYPTED";break;default:t="UNKNOWN"}ue=!0,e.error.message&&(t+=" ("+e.error.message+")"),e.error.msExtendedCode&&(t+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),F.fatal("Video Element Error: "+t),e.error&&F.fatal(e.error),te.mediaSourceError(t),te.error(new Ye.default(e.error.code,t)),O()}}function I(){return ie?ie.getStreamInfo():null}function D(){if(!(G&&G.hasOwnProperty("load")&&ne&&ne.hasOwnProperty("initialize")&&ne.hasOwnProperty("reset")&&ne.hasOwnProperty("getClientTimeOffset")&&j&&te&&H&&he))throw new Error("setConfig function has to be called previously")}function M(e){isNaN(e.newDuration)||E(e.newDuration)}function C(){ve=ie=ae=null,Te=Ee=ye=void 0,_e=!(se=!(ge=!(me=!(de=ue=le=!(re=[]))))),Se=0}function O(){D(),W.reset(),A(ue||de?ke.PlayListTrace.FAILURE_STOP_REASON:ke.PlayListTrace.USER_REQUEST_STOP_REASON);for(var e=0,t=re?re.length:0;e<t;e++)re[e].reset(ue);(function(){k.off(Le.default.PLAYBACK_TIME_UPDATED,n,this),k.off(Le.default.PLAYBACK_SEEKING,i,this),k.off(Le.default.PLAYBACK_ERROR,w,this),k.off(Le.default.PLAYBACK_STARTED,a,this),k.off(Le.default.PLAYBACK_PAUSED,o,this),k.off(Le.default.PLAYBACK_ENDED,p,this),k.off(Le.default.MANIFEST_UPDATED,b,this),k.off(Le.default.BUFFERING_COMPLETED,u,this),k.off(Le.default.STREAM_BUFFERING_COMPLETED,d,this),k.off(Le.default.MANIFEST_VALIDITY_CHANGED,M,this),k.off(Le.default.TIME_SYNCHRONIZATION_COMPLETED,T,this),k.off(Le.default.WALLCLOCK_TIME_UPDATED,r,this),k.off(Be.default.METRIC_ADDED,P,this)})(),z.reset(),B.reset(),H.clearAllCurrentMetrics(),j.setValue(null),G.reset(),ne.reset(),$.reset(),ce&&(V.detachMediaSource(fe),ce=null),fe=null,ae&&(ae.setMediaElement(null),oe=ae=null,j.getValue()&&k.trigger(Le.default.PROTECTION_DESTROYED,{data:j.getValue().url})),k.trigger(Le.default.STREAM_TEARDOWN_COMPLETE),C()}function P(e){e.metric===Ce.default.DVR_INFO&&e.mediaType===Me.default.AUDIO&&V.setSeekable(ce,e.value.range.start,e.value.range.end)}var N=40,L=this.context,k=(0,Ne.default)(L).getInstance(),x=void 0,F=void 0,U=void 0,B=void 0,G=void 0,j=void 0,K=void 0,Y=void 0,H=void 0,q=void 0,V=void 0,W=void 0,z=void 0,X=void 0,Q=void 0,Z=void 0,J=void 0,$=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,ae=void 0,oe=void 0,se=void 0,le=void 0,ue=void 0,de=void 0,ce=void 0,fe=void 0,he=void 0,pe=void 0,ge=void 0,me=void 0,ve=void 0,ye=void 0,Ee=void 0,_e=void 0,Te=void 0,be=void 0,Se=void 0,Ae=void 0,Re=void 0,we=void 0,Ie=void 0,De=void 0;return x={initialize:function(e,t){D(),se=e,oe=t,ne.initialize(),(B=(0,Pe.default)(L).create()).setConfig({manifestModel:j,dashManifestModel:K,mediaPlayerModel:pe,manifestLoader:G,errHandler:te}),B.initialize(),z.setConfig({dashManifestModel:K}),function(){k.on(Le.default.PLAYBACK_TIME_UPDATED,n,this),k.on(Le.default.PLAYBACK_SEEKING,i,this),k.on(Le.default.PLAYBACK_ERROR,w,this),k.on(Le.default.PLAYBACK_STARTED,a,this),k.on(Le.default.PLAYBACK_PAUSED,o,this),k.on(Le.default.PLAYBACK_ENDED,p,this),k.on(Le.default.MANIFEST_UPDATED,b,this),k.on(Le.default.BUFFERING_COMPLETED,u,this),k.on(Le.default.STREAM_BUFFERING_COMPLETED,d,this),k.on(Le.default.MANIFEST_VALIDITY_CHANGED,M,this),k.on(Le.default.TIME_SYNCHRONIZATION_COMPLETED,T,this),k.on(Le.default.WALLCLOCK_TIME_UPDATED,r,this),k.on(Be.default.METRIC_ADDED,P,this)}()},getActiveStreamInfo:I,isTrackTypePresent:t,switchToVideoElement:function(e){ie&&(he.initialize(I()),v(e,null,!0,!1))},getStreamById:function(t){return re.filter(function(e){return e.getId()===t})[0]},getStreamForTime:f,getTimeRelativeToStreamId:function(e,t){for(var n=null,r=0,i=0,a=null,o=re.length,s=0;s<o;s++){if(i=(n=re[s]).getStartTime(),a=n.getDuration(),Number.isFinite(i)&&(r=i),n.getId()===t)return e-r;Number.isFinite(a)&&(r+=a)}return null},load:function(e){D(),G.load(e)},loadWithManifest:function(e){(function(){if(!B||!B.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")})(),B.setManifest(e)},getActiveStreamProcessors:h,setConfig:function(e){e&&(e.capabilities&&(U=e.capabilities),e.manifestLoader&&(G=e.manifestLoader),e.manifestModel&&(j=e.manifestModel),e.dashManifestModel&&(K=e.dashManifestModel),e.mediaPlayerModel&&(pe=e.mediaPlayerModel),e.protectionController&&(ae=e.protectionController),e.adapter&&(Y=e.adapter),e.metricsModel&&(H=e.metricsModel),e.dashMetrics&&(q=e.dashMetrics),e.errHandler&&(te=e.errHandler),e.timelineConverter&&(ne=e.timelineConverter),e.videoModel&&(fe=e.videoModel),e.playbackController&&(he=e.playbackController),e.domStorage&&(X=e.domStorage),e.abrController&&(Q=e.abrController),e.mediaController&&(Z=e.mediaController),e.textController&&(J=e.textController))},setProtectionData:function(e){oe=e},reset:O},F=(0,xe.default)(L).getInstance().getLogger(x),W=(0,Ge.default)(L).getInstance(),z=(0,je.default)(L).getInstance(),V=(0,Ke.default)(L).getInstance(),$=(0,Fe.default)(L).getInstance(),ee=(0,Ue.default)(L).getInstance(),C(),x}Object.defineProperty(n,"__esModule",{value:!0});var Me=r(e(101)),Ce=r(e(102)),Oe=r(e(98)),Pe=r(e(92)),Ne=r(e(47)),Le=r(e(53)),a=r(e(48)),ke=e(237),xe=r(e(46)),Fe=r(e(203)),Ue=r(e(210)),Be=r(e(94)),Ge=r(e(115)),je=r(e(105)),Ke=r(e(111)),Ye=r(e(215)),He=r(e(50));i.__dashjs_factory_name="StreamController",n.default=a.default.getSingletonFactory(i),t.exports=n.default},{101:101,102:102,105:105,111:111,115:115,203:203,210:210,215:215,237:237,46:46,47:47,48:48,50:50,53:53,92:92,94:94,98:98}],115:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function o(e){m=e}function s(e){g=e}function i(e){var t,n,r,i=Date.parse(e);return isNaN(i)&&(n=t=void 0,r=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(e),t=Date.UTC(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10),r[6]&&(parseInt(r[6],10)||0),r[7]&&1e3*parseFloat(r[7])||0),r[9]&&r[10]&&(n=60*parseInt(r[9],10)+parseInt(r[10],10),t+=("+"===r[8]?-1:1)*n*60*1e3),i=new Date(t).getTime()),i}function n(e){return Date.parse(e)}function r(e){return Date.parse(e)}function a(e,t,n){n()}function l(e,t,n){var r=i(e);isNaN(r)?n():t(r)}function f(n,e,r,t,i){var a,o,s=!1,l=new XMLHttpRequest,u=i?A.HTTPRequest.HEAD:A.HTTPRequest.GET,d=e.match(/\S+/g);if(e=d.shift(),a=function(){s||(s=!0,d.length?f(n,d.join(" "),r,t,i):t())},o=function(){var e=void 0,t=void 0;200===l.status&&(e=i?l.getResponseHeader("Date"):l.response,t=n(e),isNaN(t)||(r(t),s=!0))},h.isRelative(e)){var c=T.resolve();c&&(e=h.resolve(e,c.url))}l.open(u,e),l.timeout=5e3,l.onload=o,l.onloadend=a,l.send()}function u(e,t,n){f(r,e,t,n,!0)}function d(e,t,n){o(!1),c.trigger(w.default.TIME_SYNCHRONIZATION_COMPLETED,{time:t,offset:n,error:e?new S.default(I.default.TIME_SYNC_FAILED_ERROR_CODE,I.default.TIME_SYNC_FAILED_ERROR_MESSAGE):null})}var e=this.context,c=(0,R.default)(e).getInstance(),h=(0,M.default)(e).getInstance(),t=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,E=void 0,_=void 0,T=void 0;return t={initialize:function(e,t){v=t,g=0,m=!1,y={"urn:mpeg:dash:utc:http-head:2014":u,"urn:mpeg:dash:utc:http-xsdate:2014":f.bind(null,i),"urn:mpeg:dash:utc:http-iso:2014":f.bind(null,n),"urn:mpeg:dash:utc:direct:2014":l,"urn:mpeg:dash:utc:http-head:2012":u,"urn:mpeg:dash:utc:http-xsdate:2012":f.bind(null,i),"urn:mpeg:dash:utc:http-iso:2012":f.bind(null,n),"urn:mpeg:dash:utc:direct:2012":l,"urn:mpeg:dash:utc:http-ntp:2014":a,"urn:mpeg:dash:utc:ntp:2014":a,"urn:mpeg:dash:utc:sntp:2014":a},m||function e(t,n){var r=n||0,i=t[r],a=function(e,t){var n,r,i,a=!e||!t;a&&v?(n=E.getReadOnlyMetricsFor(b.default.STREAM),r=_.getLatestMPDRequestHeaderValueByID(n,"Date"),i=null!==r?new Date(r).getTime():Number.NaN,isNaN(i)?d(!0):(s(i-(new Date).getTime()),d(!1,i/1e3,g))):d(a,e,t)};o(!0),i?y.hasOwnProperty(i.schemeIdUri)?y[i.schemeIdUri](i.value,function(e){var t=(new Date).getTime(),n=e-t;s(n),p.info("Local time: "+new Date(t)),p.info("Server time: "+new Date(e)),p.info("Server Time - Local Time (ms): "+n),a(e,n)},function(){e(t,r+1)}):e(t,r+1):(s(0),a())}(e)},getOffsetToDeviceTimeMs:function(){return g},setConfig:function(e){e&&(e.metricsModel&&(E=e.metricsModel),e.dashMetrics&&(_=e.dashMetrics),e.baseURLController&&(T=e.baseURLController))},reset:function(){o(!1)}},p=(0,D.default)(e).getInstance().getLogger(t),t}Object.defineProperty(n,"__esModule",{value:!0});var b=r(e(101)),S=r(e(215)),A=e(235),R=r(e(47)),w=r(e(53)),I=r(e(50)),a=r(e(48)),D=r(e(46)),M=r(e(210));i.__dashjs_factory_name="TimeSyncController";var o=a.default.getSingletonFactory(i);o.HTTP_TIMEOUT_MS=5e3,a.default.updateSingletonFactory(i.__dashjs_factory_name,o),n.default=o,t.exports=n.default},{101:101,210:210,215:215,235:235,46:46,47:47,48:48,50:50,53:53}],116:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function i(e,t,n){var r={},i=void 0,a=void 0;r.elements=e,r.type=t,r.resolveType=n,0===r.elements.length&&s(r);for(var o=0;o<r.elements.length;o++)i=r.elements[o],a=l.isHTTPURL(i.url)?i.url:i.originalContent.BaseURL+i.url,h.load(a,i,r)}function t(e){var t,n=void 0,r="";if(n=e.element,t=e.resolveObject,n.resolvedContent){var i=0;0===n.resolvedContent.indexOf("<?xml")&&(i=n.resolvedContent.indexOf("?>")+2),r=n.resolvedContent.substr(0,i)+"<response>"+n.resolvedContent.substr(i)+"</response>",n.resolvedContent=f.xml_str2json(r)}(function(e){var t=void 0;for(t=0;t<e.elements.length;t++)if(!1===e.elements[t].resolved)return!1;return!0})(t)&&s(t)}function s(e){var t=[],n=void 0,r=void 0;if(function(e){var t=[],n=void 0,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0;for(a=e.elements.length-1;0<=a;a--){if(n=e.elements[a],r=n.type+"_asArray",n.resolvedContent){if(n.resolvedContent)for(o=0;o<n.resolvedContent[r].length;o++)i=n.resolvedContent[r][o],t.push(i)}else delete n.originalContent["xlink:actuate"],delete n.originalContent["xlink:href"],t.push(n.originalContent);for(n.parentElement[r].splice(n.index,1),s=0;s<t.length;s++)n.parentElement[r].splice(n.index+s,0,t[s]);t=[]}0<e.elements.length&&d.run(c)}(e),"onActuate"===e.resolveType&&o.trigger(m.default.XLINK_READY,{manifest:c}),e.resolveType===_)switch(e.type){case E.default.PERIOD:for(n=0;n<c[E.default.PERIOD+"_asArray"].length;n++)(r=c[E.default.PERIOD+"_asArray"][n]).hasOwnProperty(E.default.ADAPTATION_SET+"_asArray")&&(t=t.concat(a(r[E.default.ADAPTATION_SET+"_asArray"],r,E.default.ADAPTATION_SET,_))),r.hasOwnProperty(E.default.EVENT_STREAM+"_asArray")&&(t=t.concat(a(r[E.default.EVENT_STREAM+"_asArray"],r,E.default.EVENT_STREAM,_)));i(t,E.default.ADAPTATION_SET,_);break;case E.default.ADAPTATION_SET:o.trigger(m.default.XLINK_READY,{manifest:c})}}function a(e,t,n,r){var i=[],a=void 0,o=void 0,s=void 0;for(o=e.length-1;0<=o;o--)(a=e[o]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===a["xlink:href"]&&e.splice(o,1);for(o=0;o<e.length;o++)(a=e[o]).hasOwnProperty("xlink:href")&&a.hasOwnProperty("xlink:actuate")&&a["xlink:actuate"]===r&&(s={url:a["xlink:href"],parentElement:t,type:n,index:o,resolveType:r,originalContent:a,resolvedContent:null,resolved:!1},i.push(s));return i}e=e||{};var n=this.context,o=(0,g.default)(n).getInstance(),l=(0,y.default)(n).getInstance(),r=void 0,u=void 0,d=void 0,c=void 0,f=void 0,h=void 0;return r={resolveManifestOnLoad:function(e){f=new v.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:u}),i(a((c=e).Period_asArray,c,E.default.PERIOD,_),E.default.PERIOD,_)},setMatchers:function(e){e&&(u=e)},setIron:function(e){e&&(d=e)},reset:function(){o.off(m.default.XLINK_ELEMENT_LOADED,t,r),h&&(h.reset(),h=null)}},o.on(m.default.XLINK_ELEMENT_LOADED,t,r),h=(0,p.default)(n).create({errHandler:e.errHandler,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),r}Object.defineProperty(n,"__esModule",{value:!0});var p=r(e(100)),g=r(e(47)),m=r(e(53)),a=r(e(48)),v=r(e(3)),y=r(e(210)),E=r(e(60)),_="onLoad";i.__dashjs_factory_name="XlinkController",n.default=a.default.getClassFactory(i),t.exports=n.default},{100:100,210:210,3:3,47:47,48:48,53:53,60:60}],117:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){var t=this.context;return{createMetricsReporting:function(e){return(0,a.default)(t).getInstance({eventBus:e.eventBus,metricsModel:e.metricsModel,metricsConstants:e.metricsConstants,events:e.events}),(0,s.default)(t).create(e)},getReportingFactory:function(){return(0,u.default)(t).getInstance()},getMetricsHandlerFactory:function(){return(0,l.default)(t).getInstance()}}}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(131)),o=r(e(118)),s=r(e(119)),l=r(e(124)),u=r(e(129));i.__dashjs_factory_name="MetricsReporting";var d=dashjs.FactoryMaker.getClassFactory(i);d.events=o.default,dashjs.FactoryMaker.updateClassFactory(i.__dashjs_factory_name,d),n.default=d,t.exports=n.default},{118:118,119:119,124:124,129:129,131:131}],118:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(54),a=(r=i)&&r.__esModule?r:{default:r},o=new(function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=a,n=o,r=!0,s=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer"}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),t}());n.default=o,t.exports=n.default},{54:54}],119:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(i){function e(e){if(!e.error){var r=Object.keys(a);(0,l.default)(o).getInstance({dashManifestModel:i.dashManifestModel,constants:i.constants}).getMetrics(e.manifest).forEach(function(e){var t=JSON.stringify(e);if(a.hasOwnProperty(t))r.splice(t,1);else try{var n=(0,s.default)(o).create(i);n.initialize(e),a[t]=n}catch(e){}}),r.forEach(function(e){a[e].reset(),delete a[e]}),n.trigger(u.default.METRICS_INITIALISATION_COMPLETE)}}function t(){Object.keys(a).forEach(function(e){a[e].reset()}),a={}}i=i||{};var a={},o=this.context,n=i.eventBus,r=i.events;return n.on(r.MANIFEST_UPDATED,e),n.on(r.STREAM_TEARDOWN_COMPLETE,t),{reset:function(){n.off(r.MANIFEST_UPDATED,e),n.off(r.STREAM_TEARDOWN_COMPLETE,t)}}}Object.defineProperty(n,"__esModule",{value:!0});var s=r(e(120)),l=r(e(133)),u=r(e(118));i.__dashjs_factory_name="MetricsCollectionController",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{118:118,120:120,133:133}],120:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(t){function n(){r&&r.reset(),i&&i.reset(),a&&a.reset()}t=t||{};var r=void 0,i=void 0,a=void 0,o=this.context;return{initialize:function(e){try{(a=(0,s.default)(o).create({mediaElement:t.mediaElement})).initialize(e.Range),(i=(0,l.default)(o).create({debug:t.debug,metricsConstants:t.metricsConstants})).initialize(e.Reporting,a),(r=(0,u.default)(o).create({debug:t.debug,eventBus:t.eventBus,metricsConstants:t.metricsConstants,events:t.events})).initialize(e.metrics,i)}catch(e){throw n(),e}},reset:n}}Object.defineProperty(n,"__esModule",{value:!0});var s=r(e(122)),l=r(e(123)),u=r(e(121));i.__dashjs_factory_name="MetricsController",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{121:121,122:122,123:123}],121:[function(e,t,n){"use strict";function r(e){function t(t){o.forEach(function(e){e.handleNewMetric(t.metric,t.value,t.mediaType)})}e=e||{};var o=[],n=void 0,r=this.context,i=e.eventBus,s=e.events,l=(0,u.default)(r).getInstance({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants});return n={initialize:function(e,a){e.split(",").forEach(function(e,t,n){var r;if(-1!==e.indexOf("(")&&-1===e.indexOf(")")){var i=n[t+1];i&&-1===i.indexOf("(")&&-1!==i.indexOf(")")&&(e+=","+i,delete n[t+1])}(r=l.create(e,a))&&o.push(r)}),i.on(s.METRIC_ADDED,t,n),i.on(s.METRIC_UPDATED,t,n)},reset:function(){i.off(s.METRIC_ADDED,t,n),i.off(s.METRIC_UPDATED,t,n),o.forEach(function(e){return e.reset()}),o=[]}}}Object.defineProperty(n,"__esModule",{value:!0});var i,a=e(124),u=(i=a)&&i.__esModule?i:{default:i};r.__dashjs_factory_name="MetricsHandlersController",n.default=dashjs.FactoryMaker.getClassFactory(r),t.exports=n.default},{124:124}],122:[function(e,t,n){"use strict";function r(e){e=e||{};var t,a=!1,n=this.context,o=void 0,s=e.mediaElement;return t={initialize:function(e){e&&e.length&&(e.forEach(function(e){var t=e.starttime,n=t+e.duration;o.add(t,n)}),a=!!e[0]._useWallClockTime)},reset:function(){o.clear()},isEnabled:function(){var e,t=o.length;if(!t)return!0;e=a?(new Date).getTime()/1e3:s.currentTime;for(var n=0;n<t;n+=1){var r=o.start(n),i=o.end(n);if(r<=e&&e<i)return!0}return!1}},o=(0,l.default)(n).create(),t}Object.defineProperty(n,"__esModule",{value:!0});var i,a=e(199),l=(i=a)&&i.__esModule?i:{default:i};r.__dashjs_factory_name="RangeController",n.default=dashjs.FactoryMaker.getClassFactory(r),t.exports=n.default},{199:199}],123:[function(e,t,n){"use strict";function r(e){var r=[],i=(0,o.default)(this.context).getInstance(e);return{initialize:function(e,n){e.some(function(e){var t=i.create(e,n);if(t)return r.push(t),!0})},reset:function(){r.forEach(function(e){return e.reset()}),r=[]},report:function(t,n){r.forEach(function(e){return e.report(t,n)})}}}Object.defineProperty(n,"__esModule",{value:!0});var i,a=e(129),o=(i=a)&&i.__esModule?i:{default:i};r.__dashjs_factory_name="ReportingController",n.default=dashjs.FactoryMaker.getClassFactory(r),t.exports=n.default},{129:129}],124:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(i){var a=(i=i||{}).debug,o=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,s=this.context,l={BufferLevel:u.default,DVBErrors:d.default,HttpList:c.default,PlayList:f.default,RepSwitchList:f.default,TcpList:f.default};return{create:function(e,t){var n,r=e.match(o);if(r){try{(n=l[r[1]](s).create({eventBus:i.eventBus,metricsConstants:i.metricsConstants})).initialize(r[1],t,r[3],r[5])}catch(e){n=null,a.error("MetricsHandlerFactory: Could not create handler for type "+r[1]+" with args "+r[3]+", "+r[5]+" ("+e.message+")")}return n}},register:function(e,t){l[e]=t},unregister:function(e){delete l[e]}}}Object.defineProperty(n,"__esModule",{value:!0});var u=r(e(125)),d=r(e(126)),c=r(e(128)),f=r(e(127));i.__dashjs_factory_name="MetricsHandlerFactory",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{125:125,126:126,127:127,128:128}],125:[function(e,t,n){"use strict";function r(e){function r(){var e=function(){try{return Object.keys(u).map(function(e){return u[e]}).reduce(function(e,t){return e.level<t.level?e:t})}catch(e){return}}();e&&t!==e.t&&(t=e.t,i.report(o,e))}e=e||{};var i=void 0,a=void 0,o=void 0,s=void 0,t=void 0,n=this.context,l=(0,c.default)(n).getInstance(),u=[],d=e.metricsConstants;return{initialize:function(e,t,n){t&&(a=l.validateN(n),i=t,o=l.reconstructFullMetricName(e,n),s=setInterval(r,a))},reset:function(){clearInterval(s),a=0,t=i=s=null},handleNewMetric:function(e,t,n){e===d.BUFFER_LEVEL&&(u[n]=t)}}}Object.defineProperty(n,"__esModule",{value:!0});var i,a=e(132),c=(i=a)&&i.__esModule?i:{default:i};r.__dashjs_factory_name="BufferLevelHandler",n.default=dashjs.FactoryMaker.getClassFactory(r),t.exports=n.default},{132:132}],126:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(118),o=(r=i)&&r.__esModule?r:{default:r};n.default=dashjs.FactoryMaker.getClassFactory(function(e){function n(){i.off(o.default.METRICS_INITIALISATION_COMPLETE,n,this),i.trigger(o.default.BECAME_REPORTING_PLAYER)}var r=void 0,i=(e=e||{}).eventBus,a=e.metricsConstants;return{initialize:function(e,t){t&&(r=t,i.on(o.default.METRICS_INITIALISATION_COMPLETE,n,this))},reset:function(){r=null},handleNewMetric:function(e,t){e===a.DVB_ERRORS&&r&&r.report(e,t)}}}),t.exports=n.default},{118:118}],127:[function(e,t,n){"use strict";function r(){var n=void 0,r=void 0;return{initialize:function(e,t){n=e,r=t},reset:function(){r=null,n=void 0},handleNewMetric:function(e,t){e===n&&r&&r.report(n,t)}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="GenericMetricHandler",n.default=dashjs.FactoryMaker.getClassFactory(r),t.exports=n.default},{}],128:[function(e,t,n){"use strict";function r(e){function i(){var e=n;e.length&&a&&a.report(l,e),n=[]}e=e||{};var a=void 0,o=void 0,s=void 0,l=void 0,u=void 0,n=[],d=(0,c.default)(this.context).getInstance(),r=e.metricsConstants;return{initialize:function(e,t,n,r){t&&(o=d.validateN(n),a=t,r&&r.length&&(s=r),l=d.reconstructFullMetricName(e,n,r),u=setInterval(i,o))},reset:function(){clearInterval(u),n=[],a=s=o=u=null},handleNewMetric:function(e,t){e===r.HTTP_REQUEST&&(s&&s!==t.type||n.push(t))}}}Object.defineProperty(n,"__esModule",{value:!0});var i,a=e(132),c=(i=a)&&i.__esModule?i:{default:i};r.__dashjs_factory_name="HttpListHandler",n.default=dashjs.FactoryMaker.getClassFactory(r),t.exports=n.default},{132:132}],129:[function(e,t,n){"use strict";function r(e){e=e||{};var r={"urn:dvb:dash:reporting:2014":s.default},i=this.context,a=e.debug,o=e.metricsConstants;return{create:function(t,e){var n=void 0;try{(n=r[t.schemeIdUri](i).create({metricsConstants:o})).initialize(t,e)}catch(e){n=null,a.error("ReportingFactory: could not create Reporting with schemeIdUri "+t.schemeIdUri+" ("+e.message+")")}return n},register:function(e,t){r[e]=t},unregister:function(e){delete r[e]}}}Object.defineProperty(n,"__esModule",{value:!0});var i,a=e(130),s=(i=a)&&i.__esModule?i:{default:i};r.__dashjs_factory_name="ReportingFactory",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{130:130}],130:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){s=o=!1,u=l=null}e=e||{};var n,r=this.context,i=void 0,a=void 0,o=void 0,s=void 0,l=void 0,u=void 0,d=[],c=e.metricsConstants;return n={report:function(n,e){Array.isArray(e)||(e=[e]),s&&u.isEnabled()&&e.forEach(function(e){var t=i.serialise(e);n!==c.DVB_ERRORS&&(t="metricname="+n+"&"+t),function(e,t,n){var r=new XMLHttpRequest,i=function(){var e=d.indexOf(r);-1!==e&&(d.splice(e,1),200<=r.status&&r.status<300?t&&t():n&&n())};d.push(r);try{r.open("GET",e),r.onloadend=i,r.onerror=i,r.send()}catch(e){r.onerror()}}(t=l+"?"+t,null,function(){s=!1})})},initialize:function(e,t){var n=void 0;if(u=t,!(l=e["dvb:reportingUrl"]))throw new Error("required parameter missing (dvb:reportingUrl)");o||((n=e["dvb:probability"]||e["dvb:priority"]||0)&&(1e3===n||n/1e3>=a.random())&&(s=!0),o=!0)},reset:function(){t()}},i=(0,f.default)(r).getInstance(),a=(0,h.default)(r).getInstance(),t(),n}Object.defineProperty(n,"__esModule",{value:!0});var f=r(e(134)),h=r(e(135));i.__dashjs_factory_name="DVBReporting",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{134:134,135:135}],131:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function n(e){var t=new p.default;if(u){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.mpdurl||(t.mpdurl=u.originalUrl||u.url),t.terror||(t.terror=new Date),c.addDVBErrors(t)}}function t(e){e.error||(u=e.manifest)}function r(e){n({errorcode:p.default.BASE_URL_CHANGED,servicelocation:e.entry})}function i(){n({errorcode:p.default.BECAME_REPORTER})}function a(e){switch(e.metric){case f.HTTP_REQUEST:(0===(t=e.value).responsecode||400<=t.responsecode||t.responsecode<100||600<=t.responsecode)&&n({errorcode:t.responsecode||p.default.CONNECTION_ERROR,url:t.url,terror:t.tresponse,servicelocation:t._serviceLocation})}var t}function o(e){var t=void 0;switch(e.error?e.error.code:0){case MediaError.MEDIA_ERR_NETWORK:t=p.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:t=p.default.CORRUPT_MEDIA_OTHER;break;default:return}n({errorcode:t})}function s(){d.on(h.MANIFEST_UPDATED,t,l),d.on(h.SERVICE_LOCATION_BLACKLIST_CHANGED,r,l),d.on(h.METRIC_ADDED,a,l),d.on(h.METRIC_UPDATED,a,l),d.on(h.PLAYBACK_ERROR,o,l),d.on(g.default.BECAME_REPORTING_PLAYER,i,l)}var l=void 0,u=void 0,d=(e=e||{}).eventBus,c=e.metricsModel,f=e.metricsConstants,h=e.events;return l={initialise:s,reset:function(){d.off(h.MANIFEST_UPDATED,t,l),d.off(h.SERVICE_LOCATION_BLACKLIST_CHANGED,r,l),d.off(h.METRIC_ADDED,a,l),d.off(h.METRIC_UPDATED,a,l),d.off(h.PLAYBACK_ERROR,o,l),d.off(g.default.BECAME_REPORTING_PLAYER,i,l)}},s(),l}Object.defineProperty(n,"__esModule",{value:!0});var p=r(e(136)),g=r(e(118));i.__dashjs_factory_name="DVBErrorsTranslator",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{118:118,136:136}],132:[function(e,t,n){"use strict";function r(){return{reconstructFullMetricName:function(e,t,n){var r=e;return t&&(r+="("+t,n&&n.length&&(r+=","+n),r+=")"),r},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(e<0)throw new Error("n must be positive");return e}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="HandlerHelpers",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{}],133:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var s=(e=e||{}).dashManifestModel,l=e.constants;return{getMetrics:function(i){var t=[];return i.Metrics_asArray&&i.Metrics_asArray.forEach(function(e){var r=new a.default,n=s.getIsDynamic(i);e.hasOwnProperty("metrics")&&(r.metrics=e.metrics,e.Range_asArray&&e.Range_asArray.forEach(function(e){var t=new o.default;t.starttime=function(e,t,n){var r,i,a=s.getMpd(e),o=0;return t?o=a.availabilityStartTime.getTime()/1e3:(r=this.getRegularPeriods(a)).length&&(o=r[0].start),i=o,n&&n.hasOwnProperty(l.START_TIME)&&(i+=n.starttime),i}(i,n,e),e.hasOwnProperty("duration")?t.duration=e.duration:t.duration=s.getDuration(i),t._useWallClockTime=n,r.Range.push(t)}),e.Reporting_asArray&&(e.Reporting_asArray.forEach(function(e){var t=new u.default;if(e.hasOwnProperty(l.SCHEME_ID_URI)){for(var n in t.schemeIdUri=e.schemeIdUri,e)e.hasOwnProperty(n)&&(t[n]=e[n]);r.Reporting.push(t)}}),t.push(r)))}),t}}}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(137)),o=r(e(138)),u=r(e(139));i.__dashjs_factory_name="ManifestParsing",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{137:137,138:138,139:139}],134:[function(e,t,n){"use strict";function r(){return{serialise:function n(e){var t=[],r=[],i=void 0,a=void 0;for(i in e)if(e.hasOwnProperty(i)&&0!==i.indexOf("_")){if(null!=(a=e[i])||(a=""),Array.isArray(a)){if(!a.length)continue;r=[],a.forEach(function(e){var t="Object"!==Object.prototype.toString.call(e).slice(8,-1);r.push(t?e:n(e))}),a=r.map(encodeURIComponent).join(",")}else"string"==typeof a?a=encodeURIComponent(a):a instanceof Date?a=a.toISOString():"number"==typeof a&&(a=Math.round(a));t.push(i+"="+a)}return t.join("&")}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="MetricSerialiser",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{}],135:[function(e,t,n){"use strict";function r(){function r(){i&&(o||(o=new t(n)),i.getRandomValues(o),s=0)}var e,i=window.crypto||window.msCrypto,t=Uint32Array,a=Math.pow(2,8*t.BYTES_PER_ELEMENT)-1,n=10,o=void 0,s=void 0;return e={random:function(e,t){var n=void 0;return e||(e=0),t||(t=1),i?(s===o.length&&r(),n=o[s]/a,s+=1):n=Math.random(),n*(t-e)+e}},r(),e}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="RNG",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{}],136:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};r.SSL_CONNECTION_FAILED_PREFIX="SSL",r.DNS_RESOLUTION_FAILED="C00",r.HOST_UNREACHABLE="C01",r.CONNECTION_REFUSED="C02",r.CONNECTION_ERROR="C03",r.CORRUPT_MEDIA_ISOBMFF="M00",r.CORRUPT_MEDIA_OTHER="M01",r.BASE_URL_CHANGED="F00",r.BECAME_REPORTER="S00",n.default=r,t.exports=n.default},{}],137:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.metrics="",this.Range=[],this.Reporting=[]},t.exports=n.default},{}],138:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},t.exports=n.default},{}],139:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.schemeIdUri="",this.value=""},t.exports=n.default},{}],140:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function i(e,t,n){var r=o.getBaseURLsFromElement(n);e[t]?s.areEqual(r,e[t].data.baseUrls)||(e[t].data.baseUrls=r,e[t].data.selectedIdx=u):e[t]=new d(r)}function t(e){!function(){if(!o||!o.hasOwnProperty("getBaseURLsFromElement")||!o.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}();var t=o.getBaseURLsFromElement(e);s.areEqual(t,a.data.baseUrls)||(a.data.baseUrls=t,a.data.selectedIdx=u),e&&e.Period_asArray&&e.Period_asArray.forEach(function(e,r){i(a.children,r,e),e.AdaptationSet_asArray&&e.AdaptationSet_asArray.forEach(function(e,n){i(a.children[r].children,n,e),e.Representation_asArray&&e.Representation_asArray.sort(o.getRepresentationSortFunction()).forEach(function(e,t){i(a.children[r].children[n].children,t,e)})})})}function e(){a=new d}var n,a=void 0,o=void 0,r=this.context,s=(0,l.default)(r).getInstance();return n={reset:e,update:function(e){t(e)},getForPath:function(e){var t=a,n=[t.data];return e&&e.forEach(function(e){(t=t.children[e])&&n.push(t.data)}),n.filter(function(e){return e.baseUrls.length})},invalidateSelectedIndexes:function(t){!function t(n,e){var r=e||a;n(r.data),r.children&&r.children.forEach(function(e){return t(n,e)})}(function(e){isNaN(e.selectedIdx)||t===e.baseUrls[e.selectedIdx].serviceLocation&&(e.selectedIdx=u)})},setConfig:function(e){e.dashManifestModel&&(o=e.dashManifestModel)}},e(),n}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(206)),a=r(e(48)),u=NaN,d=function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.data={baseUrls:t||null,selectedIdx:n||u},this.children=[]};i.__dashjs_factory_name="BaseURLTreeModel",n.default=a.default.getClassFactory(i),t.exports=n.default},{206:206,48:48}],141:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function i(s){var l;return!!s&&(l=!1,v.some(function(e){if(a=s,o=e,!isNaN(a.index)&&a.startTime===o.startTime&&a.adaptationIndex===o.adaptationIndex&&a.type===o.type||(r=s,i=e,isNaN(r.index)&&isNaN(i.index)&&r.quality===i.quality)||(n=e,(t=s).action===T.default.ACTION_COMPLETE&&t.action===n.action))return l=!0;var t,n,r,i,a,o}),l)}function s(e){return isNaN(e.duration)?.25:Math.min(e.duration/8,.5)}function a(n){v=v.filter(function(e){var t=s(e);return isNaN(e.startTime)||void 0!==n&&e.startTime>=n-t})}function o(n,r){r<=n+.5||(v=v.filter(function(e){var t=s(e);return isNaN(e.startTime)||e.startTime>=r-t||isNaN(e.duration)||e.startTime+e.duration<=n+t}))}function n(e,t){f.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t),f.addRequestsQueue(e.mediaType,y,v)}function t(e){e.sender===h&&(y.splice(y.indexOf(e.request),1),e.response&&!e.error&&v.push(e.request),n(e.request,e.error?"failed":A),c.trigger(_.default.FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this}))}function r(e){e.sender===h&&c.trigger(_.default.FRAGMENT_LOADING_PROGRESS,{request:e.request,response:e.response,error:e.error,sender:this})}function l(e){e.sender===h&&c.trigger(_.default.FRAGMENT_LOADING_ABANDONED,{streamProcessor:this.getStreamProcessor(),request:e.request,mediaType:e.mediaType})}function u(){v=[],y=[]}e=e||{};var d=this.context,c=(0,E.default)(d).getInstance(),f=e.metricsModel,h=e.fragmentLoader,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0;return p={setStreamProcessor:function(e){m=e},getStreamProcessor:function(){return m},getRequests:function(i){var e=i?i.state instanceof Array?i.state:[i.state]:[],a=[];return e.forEach(function(e){var t,n,r=function(e){var t=void 0;switch(e){case S:t=y;break;case A:t=v;break;default:t=[]}return t}(e);a=a.concat((t=r,(n=i).hasOwnProperty("time")?[function(e,t,n){for(var r=e.length-1;0<=r;r--){var i=e[r],a=i.startTime,o=a+i.duration;if(n=isNaN(n)?s(i):n,!isNaN(a)&&!isNaN(o)&&a<=t+n&&t-n<o||isNaN(a)&&isNaN(t))return i}return null}(t,n.time,n.threshold)]:t.filter(function(e){for(var t in n)if("state"!==t&&n.hasOwnProperty(t)&&e[t]!=n[t])return!1;return!0})))}),a},isFragmentLoaded:i,isFragmentLoadedOrPending:function(e){var t=!1,n=0,r=void 0;if(!(t=i(e)))for(n=0;n<y.length;n++)r=y[n],e.url===r.url&&e.startTime===r.startTime&&(t=!0);return t},removeExecutedRequestsBeforeTime:a,removeExecutedRequestsAfterTime:function(t){v=v.filter(function(e){return isNaN(e.startTime)||void 0!==t&&e.startTime+e.duration<t})},syncExecutedRequestsWithBufferedRange:function(e,t){if(e&&0!==e.length){for(var n=0,r=0,i=e.length;r<i;r++)o(n,e.start(r)),n=e.end(r);0<t&&o(n,t)}else a()},abortRequests:function(){h.abort(),y=[]},executeRequest:function(e){switch(e.action){case T.default.ACTION_COMPLETE:v.push(e),n(e,A),g.debug("executeRequest trigger STREAM_COMPLETED"),c.trigger(_.default.STREAM_COMPLETED,{request:e,fragmentModel:this});break;case T.default.ACTION_DOWNLOAD:n(e,S),y.push(e),t=e,c.trigger(_.default.FRAGMENT_LOADING_STARTED,{sender:p,request:t}),h.load(t);break;default:g.warn("Unknown request action.")}var t},reset:function(){c.off(_.default.LOADING_COMPLETED,t,this),c.off(_.default.LOADING_DATA_PROGRESS,r,this),c.off(_.default.LOADING_ABANDONED,l,this),h&&h.reset(),u()},addExecutedRequest:function(e){v.push(e)}},g=(0,b.default)(d).getInstance().getLogger(p),u(),c.on(_.default.LOADING_COMPLETED,t,p),c.on(_.default.LOADING_DATA_PROGRESS,r,p),c.on(_.default.LOADING_ABANDONED,l,p),p}Object.defineProperty(n,"__esModule",{value:!0});var E=r(e(47)),_=r(e(53)),a=r(e(48)),T=r(e(217)),b=r(e(46)),S="loading",A="executed";i.__dashjs_factory_name="FragmentModel";var o=a.default.getClassFactory(i);o.FRAGMENT_MODEL_LOADING=S,o.FRAGMENT_MODEL_EXECUTED=A,o.FRAGMENT_MODEL_CANCELED="canceled",o.FRAGMENT_MODEL_FAILED="failed",a.default.updateClassFactory(i.__dashjs_factory_name,o),n.default=o,t.exports=n.default},{217:217,46:46,47:47,48:48,53:53}],142:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){var e=this.context,t=(0,a.default)(e).getInstance(),n=void 0;return{getValue:function(){return n},setValue:function(e){(n=e)&&t.trigger(o.default.MANIFEST_LOADED,{data:e})}}}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(47)),o=r(e(53)),s=r(e(48));i.__dashjs_factory_name="ManifestModel",n.default=s.default.getSingletonFactory(i),t.exports=n.default},{47:47,48:48,53:53}],143:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){function i(e){var t=void 0;for(t=0;t<N.length;t++)if(N[t].rulename===e)return t;return-1}function e(){return U?f||3:f}function t(e,t){r(e,t);var n=new V.default;n.schemeIdUri=e,n.value=t,d.push(n)}function r(n,r){(0,Q.checkParameterType)(n,"string"),(0,Q.checkParameterType)(r,"string"),d.forEach(function(e,t){e.schemeIdUri===n&&e.value===r&&d.splice(t,1)})}function n(){return U}var a,o,s,l=void 0,u=void 0,d=void 0,c=void 0,f=void 0,h=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,E=void 0,_=void 0,T=void 0,b=void 0,S=void 0,A=void 0,R=void 0,w=void 0,I=void 0,D=void 0,M=void 0,C=void 0,O=void 0,P=void 0,N=void 0,L=void 0,k=void 0,x=void 0,F=void 0,U=void 0,B=void 0,G=void 0,j=void 0,K=void 0,Y=void 0,H={scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"http://time.akamai.com/?iso&ms"};return a={setABRStrategy:function(e){if(e!==z.default.ABR_STRATEGY_DYNAMIC&&e!==z.default.ABR_STRATEGY_BOLA&&e!==z.default.ABR_STRATEGY_THROUGHPUT)throw z.default.BAD_ARGUMENT_ERROR;M=e},getABRStrategy:function(){return M},setUseDefaultABRRules:function(e){(0,Q.checkParameterType)(e,"boolean"),C=e},getUseDefaultABRRules:function(){return C},getABRCustomRules:function(){return N},addABRCustomRule:function(e,t,n){if("string"!=typeof e||e!==X.default.ABANDON_FRAGMENT_RULES&&e!==X.default.QUALITY_SWITCH_RULES||"string"!=typeof t)throw z.default.BAD_ARGUMENT_ERROR;var r=i(t);-1===r?N.push({type:e,rulename:t,rule:n}):(N[r].type=e,N[r].rule=n)},removeABRCustomRule:function(e){if(e){var t=i(e);-1!==t&&N.splice(t,1)}else N=[]},setBandwidthSafetyFactor:function(e){(0,Q.checkParameterType)(e,"number"),A=e},getBandwidthSafetyFactor:function(){return A},setAbandonLoadTimeout:function(e){(0,Q.checkParameterType)(e,"number"),R=e},getAbandonLoadTimeout:function(){return R},setLastBitrateCachingInfo:function(e,t){if("boolean"!=typeof e||void 0!==t&&("number"!=typeof t||isNaN(t)))throw z.default.BAD_ARGUMENT_ERROR;v.enabled=e,void 0!==t&&(v.ttl=t)},getLastBitrateCachingInfo:function(){return v},setLastMediaSettingsCachingInfo:function(e,t){if("boolean"!=typeof e||void 0!==t&&("number"!=typeof t||isNaN(t)))throw z.default.BAD_ARGUMENT_ERROR;y.enabled=e,void 0!==t&&(y.ttl=t)},getLastMediaSettingsCachingInfo:function(){return y},setStableBufferTime:function(e){(0,Q.checkParameterType)(e,"number"),E=e},getStableBufferTime:function(){return n()?.6*e():isNaN(E)?P?20:12:E},setBufferTimeAtTopQuality:function(e){(0,Q.checkParameterType)(e,"number"),_=e},getBufferTimeAtTopQuality:function(){return _},setBufferTimeAtTopQualityLongForm:function(e){(0,Q.checkParameterType)(e,"number"),T=e},getBufferTimeAtTopQualityLongForm:function(){return T},setLongFormContentDurationThreshold:function(e){(0,Q.checkParameterType)(e,"number"),b=e},getLongFormContentDurationThreshold:function(){return b},setSegmentOverlapToleranceTime:function(e){(0,Q.checkParameterType)(e,"number"),S=e},getSegmentOverlapToleranceTime:function(){return S},getCacheLoadThresholdForType:function(e){return k[e]},setCacheLoadThresholdForType:function(e,t){(0,Q.checkParameterType)(t,"number"),(0,Q.checkIsVideoOrAudioType)(e),k[e]=t},setBufferToKeep:function(e){(0,Q.checkParameterType)(e,"number"),p=e},getBufferToKeep:function(){return p},setBufferAheadToKeep:function(e){(0,Q.checkParameterType)(e,"number"),g=e},getBufferAheadToKeep:function(){return g},setBufferPruningInterval:function(e){(0,Q.checkParameterType)(e,"number"),m=e},getBufferPruningInterval:function(){return m},setRetryAttemptsForType:function(e,t){if("number"!=typeof t||"string"!=typeof e||e!==W.HTTPRequest.MPD_TYPE&&e!==W.HTTPRequest.MEDIA_SEGMENT_TYPE)throw z.default.BAD_ARGUMENT_ERROR;w[e]=t},getRetryAttemptsForType:function(e){return n()?5*w[e]:w[e]},setRetryIntervalForType:function(e,t){(0,Q.checkParameterType)(t,"number"),I[e]=t},getRetryIntervalForType:function(e){return n()?I[e]/10:I[e]},setWallclockTimeUpdateInterval:function(e){(0,Q.checkParameterType)(e,"number"),D=e},getWallclockTimeUpdateInterval:function(){return D},setScheduleWhilePaused:function(e){(0,Q.checkParameterType)(e,"boolean"),h=e},getScheduleWhilePaused:function(){return h},getUseSuggestedPresentationDelay:function(){return u},setUseSuggestedPresentationDelay:function(e){(0,Q.checkParameterType)(e,"boolean"),u=e},setLiveDelayFragmentCount:function(e){(0,Q.checkParameterType)(e,"number"),c=e},getLiveDelayFragmentCount:function(){return c},getLiveDelay:e,setLiveDelay:function(e){void 0!==e&&(0,Q.checkParameterType)(e,"number"),f=e},setUseManifestDateHeaderTimeSource:function(e){(0,Q.checkParameterType)(e,"boolean"),l=e},getUseManifestDateHeaderTimeSource:function(){return l},addUTCTimingSource:t,removeUTCTimingSource:r,getUTCTimingSources:function(){return d},clearDefaultUTCTimingSources:function(){d=[]},restoreDefaultUTCTimingSources:function(){t(H.scheme,H.value)},setXHRWithCredentialsForType:function t(e,n){e?O[e]=!!n:Object.keys(O).forEach(function(e){t(e,n)})},getXHRWithCredentialsForType:function(e){var t=O[e];return void 0===t?O.default:t},setFastSwitchEnabled:function(e){(0,Q.checkParameterType)(e,"boolean"),P=e},getFastSwitchEnabled:function(){return P},setMovingAverageMethod:function(e){if(e!==z.default.MOVING_AVERAGE_SLIDING_WINDOW&&e!==z.default.MOVING_AVERAGE_EWMA)throw z.default.BAD_ARGUMENT_ERROR;L=e},getMovingAverageMethod:function(){return L},setJumpGaps:function(e){(0,Q.checkParameterType)(e,"boolean"),x=e},getJumpGaps:function(){return x},setSmallGapLimit:function(e){(0,Q.checkParameterType)(e,"number"),F=e},getSmallGapLimit:function(){return F},getLowLatencyEnabled:n,setLowLatencyEnabled:function(e){(0,Q.checkParameterType)(e,"boolean"),U=e},setCatchUpPlaybackRate:function(e){(0,Q.checkParameterType)(e,"number"),(0,Q.checkRange)(e,0,.5),Y=e},getCatchUpPlaybackRate:function(){return Y},setLowLatencyMinDrift:function(e){(0,Q.checkParameterType)(e,"number"),j=e},getLowLatencyMinDrift:function(){return j},setLowLatencyMaxDriftBeforeSeeking:function(e){(0,Q.checkParameterType)(e,"number"),K=e},getLowLatencyMaxDriftBeforeSeeking:function(){return K},setManifestUpdateRetryInterval:function(e){(0,Q.checkParameterType)(e,"number"),B=e},getManifestUpdateRetryInterval:function(){return B},setKeepProtectionMediaKeys:function(e){(0,Q.checkParameterType)(e,"boolean"),G=e},getKeepProtectionMediaKeys:function(){return G},getDefaultUtcTimingSource:function(){return H},reset:function(){}},h=l=!(u=!(d=[])),M=z.default.ABR_STRATEGY_DYNAMIC,v={enabled:!(P=!(C=!0)),ttl:36e4},y={enabled:!0,ttl:36e4},c=4,f=void 0,p=20,g=80,m=10,E=NaN,_=30,T=60,b=600,S=.2,A=.9,R=1e4,x=!(D=50),F=.8,O={default:!(B=100)},N=[],L=z.default.MOVING_AVERAGE_SLIDING_WINDOW,U=!1,j=.02,K=0,Y=.5,q(o={},W.HTTPRequest.MPD_TYPE,3),q(o,W.HTTPRequest.XLINK_EXPANSION_TYPE,1),q(o,W.HTTPRequest.MEDIA_SEGMENT_TYPE,3),q(o,W.HTTPRequest.INIT_SEGMENT_TYPE,3),q(o,W.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),q(o,W.HTTPRequest.INDEX_SEGMENT_TYPE,3),q(o,W.HTTPRequest.OTHER_TYPE,3),w=o,q(s={},W.HTTPRequest.MPD_TYPE,500),q(s,W.HTTPRequest.XLINK_EXPANSION_TYPE,500),q(s,W.HTTPRequest.MEDIA_SEGMENT_TYPE,1e3),q(s,W.HTTPRequest.INIT_SEGMENT_TYPE,1e3),q(s,W.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),q(s,W.HTTPRequest.INDEX_SEGMENT_TYPE,1e3),q(s,W.HTTPRequest.OTHER_TYPE,1e3),I=s,(k={})[z.default.VIDEO]=50,k[z.default.AUDIO]=5,G=!1,a}Object.defineProperty(n,"__esModule",{value:!0});var V=r(e(89)),a=r(e(48)),W=e(235),z=r(e(101)),X=r(e(179)),Q=e(208);i.__dashjs_factory_name="MediaPlayerModel",n.default=a.default.getSingletonFactory(i),t.exports=n.default},{101:101,179:179,208:208,235:235,48:48,89:89}],144:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function t(){o.trigger(R.default.METRICS_CHANGED)}function r(e){o.trigger(R.default.METRIC_CHANGED,{mediaType:e}),t()}function u(e,t,n){o.trigger(R.default.METRIC_UPDATED,{mediaType:e,metric:t,value:n}),r(e)}function c(e,t,n){o.trigger(R.default.METRIC_ADDED,{mediaType:e,metric:t,value:n}),r(e)}function i(e){var t=void 0;return s.hasOwnProperty(e)?t=s[e]:(t=new l.default,s[e]=t),t}function f(e,t,n){var r=i(e);r[t].push(n),r[t].length>a&&r[t].shift()}function m(e,t,n){f(e,t,n),c(e,t,n)}var e,a=1e3,n=this.context,o=(0,S.default)(n).getInstance(),s=void 0;return e={clearCurrentMetricsForType:function(e){delete s[e],r(e)},clearAllCurrentMetrics:function(){s={},t()},getReadOnlyMetricsFor:function(e){return s.hasOwnProperty(e)?s[e]:null},getMetricsFor:i,addHttpRequest:function e(t,n,r,i,a,o,s,l,u,d,c,f,h,p){var g=new y.HTTPRequest;a&&a!==i&&(e(t,null,r,i,null,null,s,l,null,null,null,f,null,null),g.actualurl=a),g.tcpid=n,g.type=r,g.url=i,g.range=s,g.trequest=l,g.tresponse=u,g.responsecode=c,g._tfinish=d,g._stream=t,g._mediaduration=f,g._responseHeaders=h,g._serviceLocation=o,p?p.forEach(function(e){var t,n,r,i,a;t=g,n=e.s,r=e.d,i=e.b,(a=new y.HTTPRequestTrace).s=n,a.d=r,a.b=i,t.trace.push(a),t.interval||(t.interval=0),t.interval+=r}):(delete g.interval,delete g.trace),m(t,v.default.HTTP_REQUEST,g)},addRepresentationSwitch:function(e,t,n,r,i){var a=new d.default;a.t=t,a.mt=n,a.to=r,i?a.lto=i:delete a.lto,m(e,v.default.TRACK_SWITCH,a)},addBufferLevel:function(e,t,n){var r=new p.default;r.t=t,r.level=n,m(e,v.default.BUFFER_LEVEL,r)},addBufferState:function(e,t,n){var r=new g.default;r.target=n,r.state=t,m(e,v.default.BUFFER_STATE,r)},addDVRInfo:function(e,t,n,r){var i=new E.default;i.time=t,i.range=r,i.manifestInfo=n,m(e,v.default.DVR_INFO,i)},addDroppedFrames:function(e,t){var n=new _.default,r=i(e).DroppedFrames;n.time=t.creationTime,n.droppedFrames=t.droppedVideoFrames,0<r.length&&r[r.length-1]==n||m(e,v.default.DROPPED_FRAMES,n)},addSchedulingInfo:function(e,t,n,r,i,a,o,s,l){var u=new b.default;u.mediaType=e,u.t=t,u.type=n,u.startTime=r,u.availabilityStartTime=i,u.duration=a,u.quality=o,u.range=s,u.state=l,m(e,v.default.SCHEDULING_INFO,u)},addRequestsQueue:function(e,t,n){var r=new A.default;r.loadingRequests=t,r.executedRequests=n,i(e).RequestsQueue=r,c(e,v.default.REQUESTS_QUEUE,r)},addManifestUpdate:function(e,t,n,r,i,a,o,s,l,u){var d=new T.ManifestUpdate;d.mediaType=e,d.type=t,d.requestTime=n,d.fetchTime=r,d.availabilityStartTime=i,d.presentationStartTime=a,d.clientTimeOffset=o,d.currentTime=s,d.buffered=l,d.latency=u,f(h.default.STREAM,v.default.MANIFEST_UPDATE,d),c(e,v.default.MANIFEST_UPDATE,d)},updateManifestUpdateInfo:function(e,t){if(e){for(var n in t)e[n]=t[n];u(e.mediaType,v.default.MANIFEST_UPDATE,e)}},addManifestUpdateStreamInfo:function(e,t,n,r,i){if(e){var a=new T.ManifestUpdateStreamInfo;a.id=t,a.index=n,a.start=r,a.duration=i,e.streamInfo.push(a),u(e.mediaType,v.default.MANIFEST_UPDATE_STREAM_INFO,e)}},addManifestUpdateRepresentationInfo:function(e,t,n,r,i,a,o,s){if(e){var l=new T.ManifestUpdateRepresentationInfo;l.id=t,l.index=n,l.streamIndex=r,l.mediaType=i,l.startNumber=o,l.fragmentInfoType=s,l.presentationTimeOffset=a,e.representationInfo.push(l),u(e.mediaType,v.default.MANIFEST_UPDATE_TRACK_INFO,e)}},addPlayList:function(e){var t=h.default.STREAM;e.trace&&Array.isArray(e.trace)?e.trace.forEach(function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel}):delete e.trace,m(t,v.default.PLAY_LIST,e)},addDVBErrors:function(e){m(h.default.STREAM,v.default.DVB_ERRORS,e)}},s={},e}Object.defineProperty(n,"__esModule",{value:!0});var h=r(e(101)),v=r(e(102)),l=r(e(223)),y=e(235),d=r(e(238)),p=r(e(231)),g=r(e(232)),E=r(e(233)),_=r(e(234)),T=e(236),b=r(e(240)),S=r(e(47)),A=r(e(239)),R=r(e(53)),a=r(e(48));i.__dashjs_factory_name="MetricsModel",n.default=a.default.getSingletonFactory(i),t.exports=n.default},{101:101,102:102,223:223,231:231,232:232,233:233,234:234,235:235,236:236,238:238,239:239,240:240,47:47,48:48,53:53}],145:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){var l=void 0;return{initialize:function(e){if(l=new u.default,!e)return null;var t=e.indexOf("#");if(-1!==t)for(var n=e.substr(t+1).split("&"),r=0,i=n.length;r<i;++r){var a=n[r],o=a.indexOf("=");if(-1!==o){var s=a.substring(0,o);l.hasOwnProperty(s)&&(l[s]=a.substr(o+1))}}},getURIFragmentData:function(){return l}}}Object.defineProperty(n,"__esModule",{value:!0});var u=r(e(230)),a=r(e(48));i.__dashjs_factory_name="URIFragmentModel",n.default=a.default.getSingletonFactory(i),t.exports=n.default},{230:230,48:48}],146:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function t(){c&&(c.playbackRate=f||1,c.removeEventListener("canplay",t))}function l(e){c&&(c.readyState<=2&&0<e?c.addEventListener("canplay",t):c.playbackRate=e)}function u(){return 0<h.length}function e(){if(c&&u()&&0===c.playbackRate){var e=document.createEvent("Event");e.initEvent("waiting",!0,!1),c.dispatchEvent(e)}}function d(){return c?c.buffered:null}var n=void 0,r=void 0,c=void 0,i=void 0,f=void 0,a="element is not video or audio DOM type!",o=this.context,s=(0,p.default)(o).getInstance(),h=[];return n={initialize:function(){s.on(g.default.PLAYBACK_PLAYING,e,this)},setCurrentTime:function(t,e){if(c){if(c.currentTime==t)return;try{t=e?function(e){var t=d(),n=e,r=9999999999;if(t)for(var i=0;i<t.length;i++){var a=t.start(i),o=t.end(i),s=Math.abs(a-e),l=Math.abs(o-e);if(a<=e&&e<=o)return e;s<r&&(r=s,n=a),l<r&&(r=l,n=o)}return n}(t):t,c.currentTime=t}catch(e){0===c.readyState&&e.code===e.INVALID_STATE_ERR&&setTimeout(function(){c.currentTime=t},400)}}},play:function(){if(c){c.autoplay=!0;var e=c.play();e&&e.catch&&"undefined"!=typeof Promise&&e.catch(function(e){"NotAllowedError"===e.name&&s.trigger(g.default.PLAYBACK_NOT_ALLOWED),r.warn("Caught pending play exception - continuing ("+e+")")})}},isPaused:function(){return c?c.paused:null},pause:function(){c&&(c.pause(),c.autoplay=!1)},isSeeking:function(){return c?c.seeking:null},getTime:function(){return c?c.currentTime:null},getPlaybackRate:function(){return c?c.playbackRate:null},setPlaybackRate:l,getPlayedRanges:function(){return c?c.played:null},getEnded:function(){return c?c.ended:null},setStallState:function(e,t){var n,r,i,a,o,s;n=e,t?(s=void 0,null===(o=n)||c.seeking||-1!==h.indexOf(o)||(h.push(o),c&&1===h.length&&((s=document.createEvent("Event")).initEvent("waiting",!0,!1),f=c.playbackRate,l(0),c.dispatchEvent(s)))):(r=n,i=h.indexOf(r),a=void 0,null!==r&&(-1!==i&&h.splice(i,1),c&&!1===u()&&0===c.playbackRate&&(l(f||1),c.paused||((a=document.createEvent("Event")).initEvent("playing",!0,!1),c.dispatchEvent(a)))))},getElement:function(){return c},setElement:function(e){if(!(null==e||e&&/^(VIDEO|AUDIO)$/i.test(e.nodeName)))throw a;(c=e)&&(c.preload="auto")},setSource:function(e){c&&(e?c.src=e:(c.removeAttribute("src"),c.load()))},getSource:function(){return c?c.src:null},getTTMLRenderingDiv:function(){return i},setTTMLRenderingDiv:function(e){(i=e).style.position="absolute",i.style.display="flex",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.top=0,i.style.left=0},getPlaybackQuality:function(){if(!c)return null;var e="webkitDroppedFrameCount"in c&&"webkitDecodedFrameCount"in c,t=null;return"getVideoPlaybackQuality"in c?t=c.getVideoPlaybackQuality():e&&(t={droppedVideoFrames:c.webkitDroppedFrameCount,totalVideoFrames:c.webkitDroppedFrameCount+c.webkitDecodedFrameCount,creationTime:new Date}),t},addEventListener:function(e,t){c&&c.addEventListener(e,t)},removeEventListener:function(e,t){c&&c.removeEventListener(e,t)},getReadyState:function(){return c?c.readyState:NaN},getBufferRange:d,getClientWidth:function(){return c?c.clientWidth:NaN},getClientHeight:function(){return c?c.clientHeight:NaN},getTextTracks:function(){return c?c.textTracks:[]},getTextTrack:function(e,t,n,r,i){if(c)for(var a=0;a<c.textTracks.length;a++)if(c.textTracks[a].kind===e&&(!t||c.textTracks[a].label==t)&&c.textTracks[a].language===n&&c.textTracks[a].isTTML===r&&c.textTracks[a].isEmbedded===i)return c.textTracks[a];return null},addTextTrack:function(e,t,n){return c?c.addTextTrack(e,t,n):null},appendChild:function(e){c&&(c.appendChild(e),void 0!==e.isTTML&&(c.textTracks[c.textTracks.length-1].isTTML=e.isTTML,c.textTracks[c.textTracks.length-1].isEmbedded=e.isEmbedded))},removeChild:function(e){c&&c.removeChild(e)},getVideoWidth:function(){return c?c.videoWidth:NaN},getVideoHeight:function(){return c?c.videoHeight:NaN},getVideoRelativeOffsetTop:function(){return c&&c.parentNode?c.getBoundingClientRect().top-c.parentNode.getBoundingClientRect().top:NaN},getVideoRelativeOffsetLeft:function(){return c&&c.parentNode?c.getBoundingClientRect().left-c.parentNode.getBoundingClientRect().left:NaN},reset:function(){s.off(g.default.PLAYBACK_PLAYING,e,this)}},r=(0,m.default)(o).getInstance().getLogger(n),n}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(48)),p=r(e(47)),g=r(e(53)),m=r(e(46));i.__dashjs_factory_name="VideoModel",n.default=a.default.getSingletonFactory(i),t.exports=n.default},{46:46,47:47,48:48,53:53}],147:[function(e,t,n){"use strict";function r(e){function g(t,e){t.reader.read().then(e).catch(function(e){t.onerror&&200===t.response.status&&t.onerror(e)})}function m(i,t){if(1<(i=i.filter(function(e){return e.bytes>t/4/i.length})).length){var e=(a=0,o=(i[i.length-1].ts-i[0].ts)/i.length,i.forEach(function(e,t){var n=i[t+1];if(n){var r=n.ts-e.ts;a+=r<o?r:0}}),{v:a});if("object"==typeof e)return e.v}var a,o;return null}var a=(e=e||{}).requestModifier,v=e.boxParser;return{load:function(p){var e=new Date,t=p.request,n=new Headers;t.range&&n.append("Range","bytes="+t.range),t.requestStartDate||(t.requestStartDate=e),a&&a.modifyRequestHeader({setRequestHeader:function(e,t){n.append(e,t)}});var r=void 0;"function"==typeof window.AbortController&&(r=new AbortController,p.abortController=r);var i={method:p.method,headers:n,credentials:p.withCredentials?"include":void 0,signal:r?r.signal:void 0};fetch(p.url,i).then(function(e){p.response||(p.response={}),p.response.status=e.status,p.response.statusText=e.statusText,p.response.responseURL=e.url,e.ok||p.onerror();var t="",n=!0,r=!1,i=void 0;try{for(var a,o=e.headers.keys()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t+=s+": "+e.headers.get(s)+"\n"}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}if(p.response.responseHeaders=t,!e.body)return e.arrayBuffer().then(function(e){var t={loaded:(p.response.response=e).byteLength,total:e.byteLength,stream:!1};p.progress(t),p.onload(),p.onend()});var l=parseInt(e.headers.get("Content-Length"),10),u=0,d=!1,c=new Uint8Array,f=0;p.reader=e.body.getReader();var h=[];g(p,function e(t){var n=t.value;if(t.done)return c&&(p.progress({loaded:u,total:isNaN(l)?u:l,lengthComputable:!0,time:m(h,u),stream:!0}),p.response.response=c.buffer),p.onload(),void p.onend();if(n&&0<n.length){c=function(e,t){if(0===e.length)return t;var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(c,n),u+=n.length,h.push({ts:Date.now(),bytes:n.length});var r=v.findLastTopIsoBoxCompleted(["moov","mdat"],c,f);if(r.found){var i=r.lastCompletedOffset+r.size,a=void 0;c=i===c.length?(a=c,new Uint8Array):(a=new Uint8Array(c.subarray(0,i)),c.subarray(i)),p.progress({data:a.buffer,lengthComputable:!1,noTrace:!0}),f=0}else f=r.lastCompletedOffset,d||(p.progress({lengthComputable:!1,noTrace:!0}),d=!0)}g(p,e)})}).catch(function(e){p.onerror&&p.onerror(e)})},abort:function(e){if(e.abortController)e.abortController.abort();else if(e.reader)try{e.reader.cancel()}catch(e){}},calculateDownloadedTime:m}}Object.defineProperty(n,"__esModule",{value:!0});var i,a=e(48),o=(i=a)&&i.__esModule?i:{default:i};r.__dashjs_factory_name="FetchLoader";var s=o.default.getClassFactory(r);n.default=s,t.exports=n.default},{48:48}],148:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){e=e||{};var t,n,r,E=this.context,_=e.errHandler,T=e.metricsModel,b=e.mediaPlayerModel,S=e.requestModifier,A=e.boxParser,R=e.useFetch||!1,w=void 0,I=void 0,D=void 0,M=void 0,C=void 0;return t={load:function(e){e.request&&function t(n,r){var i=n.request,a=[],o=!0,s=!0,l=new Date,u=l,d=0,c=void 0;if(!S||!T||!_)throw new Error("config object is not correct or missing");var e=function(e){s=!1,i.requestStartDate=l,i.requestEndDate=new Date,i.firstByteDate=i.firstByteDate||l,i.checkExistenceOnly||(T.addHttpRequest(i.mediaType,null,i.type,i.url,c.response?c.response.responseURL:null,i.serviceLocation||null,i.range||null,i.requestStartDate,i.firstByteDate,i.requestEndDate,c.response?c.response.status:null,i.duration,c.response&&c.response.getAllResponseHeaders?c.response.getAllResponseHeaders():c.response?c.response.responseHeaders:[],e?a:null),i.type===N.HTTPRequest.MPD_TYPE&&T.addManifestUpdate("stream",i.type,i.requestStartDate,i.requestEndDate))},f=function(){-1!==w.indexOf(c)&&(w.splice(w.indexOf(c),1),s&&(e(!1),0<r?function(){r--;var e={config:n};D.push(e),e.timeout=setTimeout(function(){-1!==D.indexOf(e)&&(D.splice(D.indexOf(e),1),t(n,r))},b.getRetryIntervalForType(i.type))}():(_.downloadError(M[i.type],i.url,i),_.error(new L.default(C[i.type],i.url+" is not available",{request:i,response:c.response})),n.error&&n.error(i,"error",c.response.statusText),n.complete&&n.complete(i,c.response.statusText))))},h=void 0;h=R&&window.fetch&&"arraybuffer"===i.responseType&&i.type===N.HTTPRequest.MEDIA_SEGMENT_TYPE?(0,P.default)(E).create({requestModifier:S,boxParser:A}):(0,O.default)(E).create({requestModifier:S,boxParser:A});var p=S.modifyRequestURL(i.url),g=i.checkExistenceOnly?N.HTTPRequest.HEAD:N.HTTPRequest.GET,m=b.getXHRWithCredentialsForType(i.type);c={url:p,method:g,withCredentials:m,request:i,onload:function(){200<=c.response.status&&c.response.status<=299&&(e(!0),n.success&&n.success(c.response.response,c.response.statusText,c.response.responseURL),n.complete&&n.complete(i,c.response.statusText))},onend:f,onerror:f,progress:function(e){var t=new Date;o&&(o=!1,(!e.lengthComputable||e.lengthComputable&&e.total!==e.loaded)&&(i.firstByteDate=t)),e.lengthComputable&&(i.bytesLoaded=e.loaded,i.bytesTotal=e.total),e.noTrace||(a.push({s:u,d:e.time?e.time:t.getTime()-u.getTime(),b:[e.loaded?e.loaded-d:0]}),u=t,d=e.loaded),n.progress&&e&&n.progress(e)},onabort:function(){n.abort&&n.abort(i)},loader:h};var v,y=(new Date).getTime();isNaN(i.delayLoadingTime)||y>=i.delayLoadingTime?(w.push(c),h.load(c)):(v={httpRequest:c},I.push(v),v.delayTimeout=setTimeout(function(){if(-1!==I.indexOf(v)){I.splice(I.indexOf(v),1);try{l=new Date,u=l,w.push(v.httpRequest),h.load(v.httpRequest)}catch(e){v.httpRequest.onerror()}}},i.delayLoadingTime-y))}(e,b.getRetryAttemptsForType(e.request.type))},abort:function(){D.forEach(function(e){clearTimeout(e.timeout),e.config.request&&e.config.abort&&e.config.abort(e.config.request)}),D=[],I.forEach(function(e){return clearTimeout(e.delayTimeout)}),I=[],w.forEach(function(e){e.onloadend=e.onerror=e.onprogress=void 0,e.loader.abort(e),e.onabort()}),w=[]}},w=[],I=[],D=[],i(n={},N.HTTPRequest.MPD_TYPE,s.default.DOWNLOAD_ERROR_ID_MANIFEST),i(n,N.HTTPRequest.XLINK_EXPANSION_TYPE,s.default.DOWNLOAD_ERROR_ID_XLINK),i(n,N.HTTPRequest.INIT_SEGMENT_TYPE,s.default.DOWNLOAD_ERROR_ID_INITIALIZATION),i(n,N.HTTPRequest.MEDIA_SEGMENT_TYPE,s.default.DOWNLOAD_ERROR_ID_CONTENT),i(n,N.HTTPRequest.INDEX_SEGMENT_TYPE,s.default.DOWNLOAD_ERROR_ID_CONTENT),i(n,N.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,s.default.DOWNLOAD_ERROR_ID_CONTENT),i(n,N.HTTPRequest.OTHER_TYPE,s.default.DOWNLOAD_ERROR_ID_CONTENT),M=n,i(r={},N.HTTPRequest.MPD_TYPE,s.default.DOWNLOAD_ERROR_ID_MANIFEST_CODE),i(r,N.HTTPRequest.XLINK_EXPANSION_TYPE,s.default.DOWNLOAD_ERROR_ID_XLINK_CODE),i(r,N.HTTPRequest.INIT_SEGMENT_TYPE,s.default.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),i(r,N.HTTPRequest.MEDIA_SEGMENT_TYPE,s.default.DOWNLOAD_ERROR_ID_CONTENT_CODE),i(r,N.HTTPRequest.INDEX_SEGMENT_TYPE,s.default.DOWNLOAD_ERROR_ID_CONTENT_CODE),i(r,N.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,s.default.DOWNLOAD_ERROR_ID_CONTENT_CODE),i(r,N.HTTPRequest.OTHER_TYPE,s.default.DOWNLOAD_ERROR_ID_CONTENT_CODE),C=r,t}Object.defineProperty(n,"__esModule",{value:!0});var O=r(e(149)),P=r(e(147)),N=e(235),o=r(e(48)),s=r(e(50)),L=r(e(215));a.__dashjs_factory_name="HTTPLoader";var l=o.default.getClassFactory(a);n.default=l,t.exports=n.default},{147:147,149:149,215:215,235:235,48:48,50:50}],149:[function(e,t,n){"use strict";function r(e){var i=(e=e||{}).requestModifier;return{load:function(e){var t=new Date,n=e.request,r=new XMLHttpRequest;r.open(e.method,e.url,!0),n.responseType&&(r.responseType=n.responseType),n.range&&r.setRequestHeader("Range","bytes="+n.range),n.requestStartDate||(n.requestStartDate=t),i&&(r=i.modifyRequestHeader(r)),r.withCredentials=e.withCredentials,r.onload=e.onload,r.onloadend=e.onend,r.onerror=e.onerror,r.onprogress=e.progress,r.onabort=e.onabort,r.send(),e.response=r},abort:function(e){var t=e.response;t.onloadend=t.onerror=t.onprogress=void 0,t.abort()}}}Object.defineProperty(n,"__esModule",{value:!0});var i,a=e(48),o=(i=a)&&i.__esModule?i:{default:i};r.__dashjs_factory_name="XHRLoader";var s=o.default.getClassFactory(r);n.default=s,t.exports=n.default},{48:48}],150:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),r=function(){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r)}return i(r,null,[{key:"findCencContentProtection",value:function(e){for(var t=null,n=0;n<e.length;++n){var r=e[n];"urn:mpeg:dash:mp4protection:2011"===r.schemeIdUri.toLowerCase()&&"cenc"===r.value.toLowerCase()&&(t=r)}return t}},{key:"getPSSHData",value:function(e){var t=8,n=new DataView(e),r=n.getUint8(t);return t+=20,0<r&&(t+=4+16*n.getUint32(t)),t+=4,e.slice(t)}},{key:"getPSSHForKeySystem",value:function(e,t){var n=r.parsePSSHList(t);return n.hasOwnProperty(e.uuid.toLowerCase())?n[e.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e,t){return"pssh"in e?t.decodeArray(e.pssh.__text).buffer:null}},{key:"parsePSSHList",value:function(e){if(null===e)return[];for(var t=new DataView(e.buffer||e),n={},r=0;;){var i,a=void 0,o=void 0,s=r;if(r>=t.buffer.byteLength)break;if(i=r+t.getUint32(r),r+=4,1886614376===t.getUint32(r))if(r+=4,0===(a=t.getUint8(r))||1===a){r++,r+=3,o="";var l=void 0,u=void 0;for(l=0;l<4;l++)o+=1===(u=t.getUint8(r+l).toString(16)).length?"0"+u:u;for(r+=4,o+="-",l=0;l<2;l++)o+=1===(u=t.getUint8(r+l).toString(16)).length?"0"+u:u;for(r+=2,o+="-",l=0;l<2;l++)o+=1===(u=t.getUint8(r+l).toString(16)).length?"0"+u:u;for(r+=2,o+="-",l=0;l<2;l++)o+=1===(u=t.getUint8(r+l).toString(16)).length?"0"+u:u;for(r+=2,o+="-",l=0;l<6;l++)o+=1===(u=t.getUint8(r+l).toString(16)).length?"0"+u:u;r+=6,o=o.toLowerCase(),t.getUint32(r),r+=4,n[o]=t.buffer.slice(s,i),r=i}else r=i;else r=i}return n}}]),r}();n.default=r,t.exports=n.default},{}],151:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];if("function"==typeof e[r[Object.keys(r)[0]]])return r}return null}var c=void 0,f=this.context;return c={createProtectionSystem:function(e){var t=null,n=(0,p.default)(f).getInstance();n.setConfig({debug:e.debug,BASE64:e.BASE64}),n.initialize();var r,i,a,o,s,l,u=(i=(r=e).debug,a=i.getLogger(c),o=r.eventBus,s=r.errHandler,(l=r.videoModel?r.videoModel.getElement():null)&&void 0===l.onencrypted||l&&void 0===l.mediaKeys?d(l,E)?(a.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),(0,m.default)(f).create({debug:i,eventBus:o,events:r.events,api:d(l,E)})):d(l,y)?(a.info("EME detected on this user agent! (ProtectionModel_01b)"),(0,v.default)(f).create({debug:i,eventBus:o,errHandler:s,events:r.events,api:d(l,y)})):(a.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(a.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),(0,g.default)(f).create({debug:i,eventBus:o,events:r.events})));return!t&&u&&(t=(0,h.default)(f).create({protectionModel:u,protectionKeyController:n,eventBus:e.eventBus,debug:e.debug,events:e.events,BASE64:e.BASE64,constants:e.constants}),e.capabilities.setEncryptedMediaSupported(!0)),t}}}Object.defineProperty(n,"__esModule",{value:!0});var h=r(e(153)),p=r(e(154)),a=r(e(152)),o=r(e(159)),g=r(e(161)),m=r(e(162)),v=r(e(160)),y=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],E=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];i.__dashjs_factory_name="Protection";var s=dashjs.FactoryMaker.getClassFactory(i);s.events=a.default,s.errors=o.default,dashjs.FactoryMaker.updateClassFactory(i.__dashjs_factory_name,s),n.default=s,t.exports=n.default},{152:152,153:153,154:154,159:159,160:160,161:161,162:162}],152:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(54),a=(r=i)&&r.__esModule?r:{default:r},o=new(function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=a,n=o,r=!0,s=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_SYSTEM_SELECTED="internalKeySystemSelected",this.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected"}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),t}());n.default=o,t.exports=n.default},{54:54}],153:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function d(e,t){var n=D.default.getPSSHForKeySystem(I,e),r=_(I);if(n){for(var i=S.getAllInitData(),a=0;a<i.length;a++)if(b.initDataEquals(n,i[a]))return void w.warn("DRM: Ignoring initData because we have already seen it!");try{S.createKeySession(n,r,u(I),t)}catch(e){A.trigger(R.KEY_SESSION_CREATED,{data:null,error:new P.default(O.default.KEY_SESSION_CREATED_ERROR_CODE,O.default.KEY_SESSION_CREATED_ERROR_MESSAGE+e.message)})}}else e?S.createKeySession(e,r,u(I),t):A.trigger(R.KEY_SESSION_CREATED,{data:null,error:new P.default(O.default.KEY_SESSION_CREATED_ERROR_CODE,O.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+I.systemString+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function c(e,t){S.loadKeySession(e,t,u(I))}function t(e){e?(S.setMediaElement(e),A.on(R.NEED_KEY,l,this)):null===e&&(S.setMediaElement(e),A.off(R.NEED_KEY,l,this))}function _(e){var t=null;if(e){var n=e.systemString;v&&(t=n in v?v[n]:null)}return t}function i(e){var t=_(e),n=[],r=[],i=t&&t.audioRobustness&&0<t.audioRobustness.length?t.audioRobustness:E,a=t&&t.videoRobustness&&0<t.videoRobustness.length?t.videoRobustness:E,o=u(e),s=t&&t.distinctiveIdentifier?t.distinctiveIdentifier:"optional",l=t&&t.persistentState?t.persistentState:"temporary"===o?"optional":"required";return m.forEach(function(e){e.type===h.AUDIO?n.push(new M.default(e.codec,i)):e.type===h.VIDEO&&r.push(new M.default(e.codec,a))}),new C.default(n,r,s,l,[o])}function u(e){var t=_(e);return t&&t.sessionType?t.sessionType:y}function s(n,s){var l=this,t=[],u=void 0;if(I){for(u=0;u<n.length;u++)if(I===n[u].ks){if("break"===function(){t.push({ks:n[u].ks,configs:[i(I)]});return A.on(R.KEY_SYSTEM_ACCESS_COMPLETE,function e(t){A.off(R.KEY_SYSTEM_ACCESS_COMPLETE,e,l),t.error?s||A.trigger(R.KEY_SYSTEM_SELECTED,{error:new P.default(O.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,O.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+t.error)}):(w.info("DRM: KeySystem Access Granted"),A.trigger(R.KEY_SYSTEM_SELECTED,{data:t.data}),n[u].sessionId?c(n[u].sessionId,n[u].initData):n[u].initData&&d(n[u].initData,n[u].cdmData))},l),S.requestKeySystemAccess(t),"break"}())break}}else if(void 0===I){var r;!function(){I=null,g.push(n);for(var e=0;e<n.length;e++)t.push({ks:n[e].ks,configs:[i(n[e].ks)]});var a=void 0,o=function e(t){A.off(R.KEY_SYSTEM_ACCESS_COMPLETE,e,l),t.error?(I=void 0,A.off(R.INTERNAL_KEY_SYSTEM_SELECTED,r,l),s||A.trigger(R.KEY_SYSTEM_SELECTED,{data:null,error:new P.default(O.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,O.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+t.error)})):(a=t.data,w.info("DRM: KeySystem Access Granted ("+a.keySystem.systemString+")!  Selecting key system..."),S.selectKeySystem(a))};r=function e(t){if(A.off(R.INTERNAL_KEY_SYSTEM_SELECTED,e,l),A.off(R.KEY_SYSTEM_ACCESS_COMPLETE,o,l),t.error)I=void 0,s||A.trigger(R.KEY_SYSTEM_SELECTED,{data:null,error:new P.default(O.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,O.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+t.error)});else{if(!S)return;I=S.getKeySystem(),A.trigger(R.KEY_SYSTEM_SELECTED,{data:a});var n=_(I);n&&n.serverCertificate&&0<n.serverCertificate.length&&S.setServerCertificate(f.decodeArray(n.serverCertificate).buffer);for(var r=0;r<g.length;r++)for(u=0;u<g[r].length;u++)if(I===g[r][u].ks){if(b.isClearKey(I)&&n&&n.hasOwnProperty("clearkeys")){var i={kids:Object.keys(n.clearkeys)};g[r][u].initData=(new TextEncoder).encode(JSON.stringify(i))}g[r][u].sessionId?c(g[r][u].sessionId,g[r][u].initData):null!==g[r][u].initData&&d(g[r][u].initData,g[r][u].cdmData);break}}},A.on(R.INTERNAL_KEY_SYSTEM_SELECTED,r,l),A.on(R.KEY_SYSTEM_ACCESS_COMPLETE,o,l),S.requestKeySystemAccess(t)}()}else g.push(n)}function T(e,t){A.trigger(R.LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function n(e){e.error?A.trigger(R.KEY_STATUSES_CHANGED,{data:null,error:e.error}):w.debug("DRM: key status = "+e.status)}function r(e){w.debug("DRM: onKeyMessage");var t=e.data;A.trigger(R.KEY_MESSAGE,{data:t});var n=t.messageType?t.messageType:"license-request",r=t.message,i=t.sessionToken,a=_(I),o=I?I.systemString:null,s=b.getLicenseServer(I,a,n),l={sessionToken:i,messageType:n};if(r&&0!==r.byteLength){if(!s)return w.debug("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+i.getSessionID()),void T(l);if(b.isClearKey(I)){var u=b.processClearKeyLicenseRequest(I,a,r);if(u)return w.debug("DRM: ClearKey license request handled by application!"),T(l),void S.updateKeySession(i,u)}var d=null;if(a&&a.serverURL){var c=a.serverURL;"string"==typeof c&&""!==c?d=c:"object"==typeof c&&c.hasOwnProperty(n)&&(d=c[n])}else a&&a.laURL&&""!==a.laURL?d=a.laURL:(d=I.getLicenseServerURLFromInitData(D.default.getPSSHData(i.initData)))||(d=e.data.laURL);if(d=s.getServerURLFromMessage(d,r,n)){var f={},h=!1,p=function(e){if(e)for(var t in e)"authorization"===t.toLowerCase()&&(h=!0),f[t]=e[t]};a&&p(a.httpRequestHeaders),p(I.getRequestHeadersFromMessage(r)),a&&"boolean"==typeof a.withCredentials&&(h=a.withCredentials);var g=function(e,t,n,r){var i=e.response?s.getErrorResponse(e.response,n,r):"NONE";T(t,new P.default(O.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,O.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+n+' update, XHR complete. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState+".  Response is "+i))},m=I.getLicenseRequestFromMessage(r),v=s.getHTTPMethod(n),y=s.getResponseType(o,n),E=a&&!isNaN(a.httpTimeout)?a.httpTimeout:8e3;!function e(t,n,r,i,a,o,s,l,u,d,c){var f=new XMLHttpRequest;f.open(r,t,!0),f.responseType=i,f.withCredentials=a,0<l&&(f.timeout=l);for(var h in n)f.setRequestHeader(h,n[h]);var p=function(){s--,setTimeout(function(){e(t,n,r,i,a,o,s,l,u,d,c)},1e3)};f.onload=function(){200===this.status||s<=0?u(this):(w.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+s),p())},f.ontimeout=f.onerror=function(){s<=0?c(this):(w.warn("License request network request failed . Retrying it... Pending retries: "+s),p())},f.onabort=function(){d(this)},f.send(o)}(d,f,v,y,h,m,3,E,function(e){if(S)if(200===e.status){var t=s.getLicenseMessage(e.response,o,n);null!==t?(T(l),S.updateKeySession(i,t)):g(e,l,o,n)}else g(e,l,o,n)},function(e){T(l,new P.default(O.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,O.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+o+' update, XHR aborted. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},function(e){T(l,new P.default(O.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,O.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+o+' update, XHR error. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))})}else T(l,new P.default(O.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,O.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))}else T(l,new P.default(O.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,O.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function l(e,t){if(w.debug("DRM: onNeedKey"),"cenc"===e.key.initDataType)if(0===m.length&&(w.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(t=void 0===t?1:t+1)<5))p.push(setTimeout(function(){l(e,t)},500));else{var n=e.key.initData;if(ArrayBuffer.isView(n)&&(n=n.buffer),I){var r=D.default.getPSSHForKeySystem(I,n);if(r)for(var i=S.getAllInitData(),a=0;a<i.length;a++)if(b.initDataEquals(r,i[a]))return void w.warn("DRM: Ignoring initData because we have already seen it!")}w.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(n)));var o=b.getSupportedKeySystems(n,v);0!==o.length?s(o,!1):w.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!")}else w.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType)}var a,b=(e=e||{}).protectionKeyController,S=e.protectionModel,A=e.eventBus,R=e.events,o=e.debug,f=e.BASE64,h=e.constants,p=[],w=void 0,g=void 0,m=void 0,v=void 0,y=void 0,E=void 0,I=void 0;return a={initializeForMedia:function(e){if(!e)throw new Error("mediaInfo can not be null or undefined");(function(){if(!(A&&A.hasOwnProperty("on")&&b&&b.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")})(),A.on(R.INTERNAL_KEY_MESSAGE,r,this),A.on(R.INTERNAL_KEY_STATUS_CHANGED,n,this),m.push(e);var t=b.getSupportedKeySystemsFromContentProtection(e.contentProtection);t&&0<t.length&&s(t,!0)},createKeySession:d,loadKeySession:c,removeKeySession:function(e){S.removeKeySession(e)},closeKeySession:function(e){S.closeKeySession(e)},setServerCertificate:function(e){S.setServerCertificate(e)},setMediaElement:t,setSessionType:function(e){y=e},setRobustnessLevel:function(e){E=e},setProtectionData:function(e){v=e,b.setProtectionData(e)},getSupportedKeySystemsFromContentProtection:function(e){return b.getSupportedKeySystemsFromContentProtection(e)},getKeySystems:function(){return b?b.getKeySystems():[]},stop:function(){S&&S.stop()},reset:function(){A.off(R.INTERNAL_KEY_MESSAGE,r,this),A.off(R.INTERNAL_KEY_STATUS_CHANGED,n,this),t(null),I=void 0,S&&(S.reset(),S=null),p.forEach(function(e){return clearTimeout(e)}),p=[],m=[]}},w=o.getLogger(a),g=[],m=[],y="temporary",E="",a}Object.defineProperty(n,"__esModule",{value:!0});var D=r(e(150)),M=r(e(172)),C=r(e(171)),O=r(e(159)),P=r(e(215));i.__dashjs_factory_name="ProtectionController",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{150:150,159:159,171:171,172:172,215:215}],154:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){var i=this.context,t=void 0,n=void 0,r=void 0,l=void 0,a=void 0,o=void 0,s=void 0;return t={initialize:function(){l=[];var e=void 0;e=(0,h.default)(i).getInstance({BASE64:a}),l.push(e),e=(0,f.default)(i).getInstance({BASE64:a}),l.push(e),e=(0,d.default)(i).getInstance({BASE64:a}),l.push(e),o=e,e=(0,c.default)(i).getInstance({BASE64:a,debug:n}),l.push(e),s=e},setProtectionData:function(e){for(var t=0;t<l.length;t++){var n=l[t];n.hasOwnProperty("init")&&n.init((r=n.systemString,i=void 0,i=null,e&&(i=r in e?e[r]:null),i))}var r,i},isClearKey:function(e){return e===o||e===s},initDataEquals:function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var n=new Uint8Array(e),r=new Uint8Array(t),i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0},getKeySystems:function(){return l},getKeySystemBySystemString:function(e){for(var t=0;t<l.length;t++)if(l[t].systemString===e)return l[t];return null},getSupportedKeySystemsFromContentProtection:function(e){var t=void 0,n=void 0,r=void 0,i=void 0,a=[];if(e)for(r=0;r<l.length;++r)for(n=l[r],i=0;i<e.length;++i)if((t=e[i]).schemeIdUri.toLowerCase()===n.schemeIdURI){var o=n.getInitData(t);o?a.push({ks:l[r],initData:o,cdmData:n.getCDMData(),sessionId:n.getSessionId(t)}):this.isClearKey(n)&&a.push({ks:n,initData:null})}return a},getSupportedKeySystems:function(e,t){for(var n=[],r=u.default.parsePSSHList(e),i=void 0,a=void 0,o=void 0,s=0;s<l.length;++s)a=(i=l[s]).systemString,o=!t||a in t,i.uuid in r&&o&&n.push({ks:i,initData:r[i.uuid],cdmData:i.getCDMData(),sessionId:i.getSessionId()});return n},getLicenseServer:function(e,t,n){if("license-release"===n||"individualization-request"===n)return null;var r=null;return t&&t.hasOwnProperty("drmtoday")?r=(0,p.default)(i).getInstance({BASE64:a}):e.systemString===y.default.WIDEVINE_KEYSTEM_STRING?r=(0,m.default)(i).getInstance():e.systemString===y.default.PLAYREADY_KEYSTEM_STRING?r=(0,g.default)(i).getInstance():e.systemString===y.default.CLEARKEY_KEYSTEM_STRING&&(r=(0,v.default)(i).getInstance()),r},processClearKeyLicenseRequest:function(e,t,n){try{return e.getClearKeysFromProtectionData(t,n)}catch(e){return r.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(e){e&&(e.debug&&(n=e.debug,r=n.getLogger(t)),e.BASE64&&(a=e.BASE64))}}}Object.defineProperty(n,"__esModule",{value:!0});var u=r(e(150)),d=r(e(155)),c=r(e(157)),f=r(e(158)),h=r(e(156)),p=r(e(164)),g=r(e(165)),m=r(e(166)),v=r(e(163)),y=r(e(103));i.__dashjs_factory_name="ProtectionKeyController",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{103:103,150:150,155:155,156:156,157:157,158:158,163:163,164:164,165:165,166:166}],155:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=(e=e||{}).BASE64;return{uuid:s,schemeIdURI:"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e",systemString:d,getInitData:function(e){return a.default.parseInitDataFromContentProtection(e,t)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(){return null},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),i=[],a=0;a<r.kids.length;a++){var o=r.kids[a],s=e.clearkeys&&e.clearkeys.hasOwnProperty(o)?e.clearkeys[o]:null;if(!s)throw new Error("DRM: ClearKey keyID ("+o+") is not known!");i.push(new l.default(o,s))}n=new u.default(i)}return n}}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(169)),u=r(e(167)),a=r(e(150)),o=r(e(103)),s="e2719d58-a985-b3c9-781a-b030af78d30e",d=o.default.CLEARKEY_KEYSTEM_STRING;i.__dashjs_factory_name="KeySystemClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{103:103,150:150,167:167,169:169}],156:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function d(){if(!c||!c.hasOwnProperty("decodeArray")||!c.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}var u="utf16",c=(e=e||{}).BASE64;return{uuid:o,schemeIdURI:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",systemString:s,getInitData:function(e){var t,n,r,i=new Uint8Array([112,115,115,104,0,0,0,0]),a=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),o=0,s=null,l=void 0,u=void 0;if(d(),"pssh"in e)return f.default.parseInitDataFromContentProtection(e,c);if("pro"in e)s=c.decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;s=c.decodeArray(e.prheader.__text)}return t=s.length,n=4+i.length+a.length+4+t,r=new ArrayBuffer(n),l=new Uint8Array(r),(u=new DataView(r)).setUint32(o,n),o+=4,l.set(i,o),o+=i.length,l.set(a,o),o+=a.length,u.setUint32(o,t),o+=4,l.set(s,o),o+=t,l.buffer},getRequestHeadersFromMessage:function(e){var t,n=void 0,r={},i=new DOMParser,a="utf16"===u?new Uint16Array(e):new Uint8Array(e);t=String.fromCharCode.apply(null,a);for(var o=(n=i.parseFromString(t,"application/xml")).getElementsByTagName("name"),s=n.getElementsByTagName("value"),l=0;l<o.length;l++)r[o[l].childNodes[0].nodeValue]=s[l].childNodes[0].nodeValue;return r.hasOwnProperty("Content")&&(r["Content-Type"]=r.Content,delete r.Content),r.hasOwnProperty("Content-Type")||(r["Content-Type"]="text/xml; charset="+u),r},getLicenseRequestFromMessage:function(e){var t=null,n=new DOMParser,r="utf16"===u?new Uint16Array(e):new Uint8Array(e);d();var i=String.fromCharCode.apply(null,r),a=n.parseFromString(i,"application/xml");if(a.getElementsByTagName("Challenge")[0]){var o=a.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;o&&(t=c.decode(o))}else if(a.getElementsByTagName("parsererror").length)return e;return t},getLicenseServerURLFromInitData:function(e){if(e)for(var t=new DataView(e),n=t.getUint16(4,!0),r=6,i=new DOMParser,a=0;a<n;a++){var o=t.getUint16(r,!0);r+=2;var s=t.getUint16(r,!0);if(r+=2,1===o){var l=e.slice(r,r+s),u=String.fromCharCode.apply(null,new Uint16Array(l)),d=i.parseFromString(u,"application/xml");if(d.getElementsByTagName("LA_URL")[0]){var c=d.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(c)return c}if(d.getElementsByTagName("LUI_URL")[0]){var f=d.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(f)return f}}else r+=s}return null},getCDMData:function(){var e=void 0,t=void 0,n=void 0,r=void 0;if(d(),l&&l.cdmData){for(e=[],r=0;r<l.cdmData.length;++r)e.push(l.cdmData.charCodeAt(r)),e.push(0);for(e=String.fromCharCode.apply(null,e),e=c.encode(e),t='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",e),n=[],r=0;r<t.length;++r)n.push(t.charCodeAt(r)),n.push(0);return new Uint8Array(n).buffer}return null},getSessionId:function(e){return l&&l.sessionId?l.sessionId:e&&e.sessionId?e.sessionId:null},setPlayReadyMessageFormat:function(e){if("utf8"!==e&&"utf16"!==e)throw new Error("Illegal PlayReady message format! -- "+e);u=e},init:function(e){e&&(l=e)}}}Object.defineProperty(n,"__esModule",{value:!0});var f=r(e(150)),a=r(e(103)),o="9a04f079-9840-4286-ab92-e65be0885f95",s=a.default.PLAYREADY_KEYSTEM_STRING,l=void 0;i.__dashjs_factory_name="KeySystemPlayReady",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{103:103,150:150}],157:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=void 0,n=e.BASE64,l=e.debug.getLogger(t);return{uuid:s,schemeIdURI:"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",systemString:c,getInitData:function(e){return a.default.parseInitDataFromContentProtection(e,n)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(){return null},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),i=[],a=0;a<r.kids.length;a++){var o=r.kids[a],s=e.clearkeys&&e.clearkeys.hasOwnProperty(o)?e.clearkeys[o]:null;if(!s)throw new Error("DRM: ClearKey keyID ("+o+") is not known!");i.push(new u.default(o,s))}n=new d.default(i),l.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return n}}}Object.defineProperty(n,"__esModule",{value:!0});var u=r(e(169)),d=r(e(167)),a=r(e(150)),o=r(e(103)),s="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",c=o.default.CLEARKEY_KEYSTEM_STRING;i.__dashjs_factory_name="KeySystemW3CClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{103:103,150:150,167:167,169:169}],158:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=null,n=(e=e||{}).BASE64;return{uuid:s,schemeIdURI:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",systemString:l,init:function(e){e&&(t=e)},getInitData:function(e){return a.default.parseInitDataFromContentProtection(e,n)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(e){return t&&t.sessionId?t.sessionId:e&&e.sessionId?e.sessionId:null}}}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(150)),o=r(e(103)),s="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",l=o.default.WIDEVINE_KEYSTEM_STRING;i.__dashjs_factory_name="KeySystemWidevine",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{103:103,150:150}],159:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(51),a=(r=i)&&r.__esModule?r:{default:r},o=new(function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=a,n=o,r=!0,s=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.MEDIA_KEYERR_CODE=100,this.MEDIA_KEYERR_UNKNOWN_CODE=101,this.MEDIA_KEYERR_CLIENT_CODE=102,this.MEDIA_KEYERR_SERVICE_CODE=103,this.MEDIA_KEYERR_OUTPUT_CODE=104,this.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,this.MEDIA_KEYERR_DOMAIN_CODE=106,this.MEDIA_KEY_MESSAGE_ERROR_CODE=107,this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,this.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,this.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,this.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,this.KEY_SESSION_CREATED_ERROR_CODE=113,this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,this.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",this.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",this.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",this.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",this.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",this.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",this.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",this.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",this.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",this.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",this.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --"}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),t}());n.default=o,t.exports=n.default},{51:51}],160:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){p&&r();for(var e=0;e<v.length;e++)n(v[e]);f.trigger(h.TEARDOWN_COMPLETE)}function n(t){try{p[s.cancelKeyRequest](c.systemString,t.sessionID)}catch(e){f.trigger(h.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.sessionID+") "+e.message})}}function o(e,t){if(t&&e){for(var n=e.length,r=0;r<n;r++)if(e[r].sessionID==t)return e[r];return null}return null}function r(){p.removeEventListener(s.keyerror,E),p.removeEventListener(s.needkey,E),p.removeEventListener(s.keymessage,E),p.removeEventListener(s.keyadded,E)}e=e||{};var i=this.context,f=e.eventBus,h=e.events,a=e.debug,s=e.api,l=e.errHandler,u=void 0,d=void 0,p=void 0,c=void 0,g=void 0,m=void 0,v=void 0,y=void 0,E=void 0;return u={getAllInitData:function(){for(var e=[],t=0;t<m.length;t++)e.push(m[t].initData);for(t=0;t<v.length;t++)e.push(v[t].initData);return e},requestKeySystemAccess:function(e){var t=p;t||(t=document.createElement("video"));for(var n=!1,r=0;r<e.length;r++)for(var i=e[r].ks.systemString,a=e[r].configs,o=null,s=0;s<a.length;s++){var l=a[s].videoCapabilities;if(l&&0!==l.length){o=[];for(var u=0;u<l.length;u++)""!==t.canPlayType(l[u].contentType,i)&&o.push(l[u])}if(o&&(!o||0!==o.length)){n=!0;var d=new A.default(null,o),c=g.getKeySystemBySystemString(i);f.trigger(h.KEY_SYSTEM_ACCESS_COMPLETE,{data:new R.default(c,d)});break}}n||f.trigger(h.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})},getKeySystem:function(){return c},selectKeySystem:function(e){c=e.keySystem,f.trigger(h.INTERNAL_KEY_SYSTEM_SELECTED)},setMediaElement:function(e){if(p!==e){if(p){r();for(var t=0;t<v.length;t++)n(v[t]);v=[]}(p=e)&&(p.addEventListener(s.keyerror,E),p.addEventListener(s.needkey,E),p.addEventListener(s.keymessage,E),p.addEventListener(s.keyadded,E),f.trigger(h.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(e){if(!c)throw new Error("Can not create sessions until you have selected a key system");if(y||0===v.length){var t={sessionID:null,initData:e,getSessionID:function(){return this.sessionID},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return m.push(t),p[s.generateKeyRequest](c.systemString,new Uint8Array(e)),t}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(e,t){var n=e.sessionID;if(g.isClearKey(c))for(var r=0;r<t.keyPairs.length;r++)p[s.addKey](c.systemString,t.keyPairs[r].key,t.keyPairs[r].keyID,n);else p[s.addKey](c.systemString,new Uint8Array(t),new Uint8Array(e.initData),n)},closeKeySession:n,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:t,reset:t},d=a.getLogger(u),c=p=null,m=[],v=[],g=(0,_.default)(i).getInstance(),E={handleEvent:function(e){var t=null;switch(e.type){case s.needkey:var n=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;f.trigger(h.NEED_KEY,{key:new T.default(n,"cenc")});break;case s.keyerror:if((t=o(v,e.sessionId))||(t=o(m,e.sessionId)),t){var r=w.default.MEDIA_KEYERR_CODE,i="";switch(e.errorCode.code){case 1:r=w.default.MEDIA_KEYERR_UNKNOWN_CODE,i+="MEDIA_KEYERR_UNKNOWN - "+w.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:r=w.default.MEDIA_KEYERR_CLIENT_CODE,i+="MEDIA_KEYERR_CLIENT - "+w.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:r=w.default.MEDIA_KEYERR_SERVICE_CODE,i+="MEDIA_KEYERR_SERVICE - "+w.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:r=w.default.MEDIA_KEYERR_OUTPUT_CODE,i+="MEDIA_KEYERR_OUTPUT - "+w.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:r=w.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,i+="MEDIA_KEYERR_HARDWARECHANGE - "+w.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:r=w.default.MEDIA_KEYERR_DOMAIN_CODE,i+="MEDIA_KEYERR_DOMAIN - "+w.default.MEDIA_KEYERR_DOMAIN_MESSAGE}i+="  System Code = "+e.systemCode,f.trigger(h.KEY_ERROR,{data:new b.default(r,i,t)})}else d.error("No session token found for key error");break;case s.keyadded:(t=o(v,e.sessionId))||(t=o(m,e.sessionId)),t?(d.debug("DRM: Key added."),f.trigger(h.KEY_ADDED,{data:t})):d.debug("No session token found for key added");break;case s.keymessage:if((y=null!==e.sessionId&&void 0!==e.sessionId)?!(t=o(v,e.sessionId))&&0<m.length&&(t=m.shift(),v.push(t),t.sessionID=e.sessionId,f.trigger(h.KEY_SESSION_CREATED,{data:t})):0<m.length&&(t=m.shift(),v.push(t),0!==m.length&&(l.mediaKeyMessageError(w.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE),l.error(new b.default(w.default.MEDIA_KEY_MESSAGE_ERROR_CODE,w.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE)))),t){var a=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;t.keyMessage=a,f.trigger(h.INTERNAL_KEY_MESSAGE,{data:new S.default(t,a,e.defaultURL)})}else d.warn("No session token found for key message")}}},u}Object.defineProperty(n,"__esModule",{value:!0});var _=r(e(154)),T=r(e(173)),b=r(e(215)),S=r(e(168)),A=r(e(171)),R=r(e(170)),w=r(e(159));i.__dashjs_factory_name="ProtectionModel_01b",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{154:154,159:159,168:168,170:170,171:171,173:173,215:215}],161:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function i(e){var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()}function o(e){for(var t=0;t<p.length;t++)if(p[t]===e){p.splice(t,1);break}}function a(e){var t=void 0,n=void 0;return e&&0<e.length&&(e[0]&&("string"==typeof e[0]?t=e[0]:n=e[0]),e[1]&&("string"==typeof e[1]?t=e[1]:n=e[1])),{status:t,keyId:n}}function s(t,e,n,r){var i={session:t,initData:e,sessionId:r,handleEvent:function(e){switch(e.type){case"keystatuseschange":l.trigger(u.KEY_STATUSES_CHANGED,{data:this}),e.target.keyStatuses.forEach(function(){var e=a(arguments);switch(e.status){case"expired":l.trigger(u.INTERNAL_KEY_STATUS_CHANGED,{error:new _.default(E.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,E.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)});break;default:l.trigger(u.INTERNAL_KEY_STATUS_CHANGED,e)}});break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;l.trigger(u.INTERNAL_KEY_MESSAGE,{data:new T.default(this,t,void 0,e.messageType)})}},getSessionID:function(){return t.sessionId},getExpirationTime:function(){return t.expiration},getKeyStatuses:function(){return t.keyStatuses},getUsable:function(){var e=!1;return t.keyStatuses.forEach(function(){"usable"===a(arguments).status&&(e=!0)}),e},getSessionType:function(){return n}};return t.addEventListener("keystatuseschange",i),t.addEventListener("message",i),t.closed.then(function(){o(i),d.debug("DRM: Session closed.  SessionID = "+i.getSessionID()),l.trigger(u.KEY_SESSION_CLOSED,{data:i.getSessionID()})}),p.push(i),i}e=e||{};var t=this.context,l=e.eventBus,u=e.events,n=e.debug,r=void 0,d=void 0,c=void 0,f=void 0,h=void 0,p=void 0,g=void 0,m=void 0;return r={getAllInitData:function(){for(var e=[],t=0;t<p.length;t++)p[t].initData&&e.push(p[t].initData);return e},requestKeySystemAccess:function(e){!function t(n,e){var r,i,a,o;void 0!==navigator.requestMediaKeySystemAccess&&"function"==typeof navigator.requestMediaKeySystemAccess?(i=n[r=e].ks,a=n[r].configs,(o=i.systemString)===S.default.PLAYREADY_KEYSTEM_STRING&&"required"===a[0].persistentState&&(o+=".recommendation"),navigator.requestMediaKeySystemAccess(o,a).then(function(e){var t="function"==typeof e.getConfiguration?e.getConfiguration():null,n=new b.default(i,t);n.mksa=e,l.trigger(u.KEY_SYSTEM_ACCESS_COMPLETE,{data:n})}).catch(function(e){++r<n.length?t(n,r):l.trigger(u.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! "+e.message})})):l.trigger(u.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Insecure origins are not allowed"})}(e,0)},getKeySystem:function(){return c},selectKeySystem:function(t){t.mksa.createMediaKeys().then(function(e){c=t.keySystem,h=e,f?f.setMediaKeys(h).then(function(){l.trigger(u.INTERNAL_KEY_SYSTEM_SELECTED)}):l.trigger(u.INTERNAL_KEY_SYSTEM_SELECTED)}).catch(function(){l.trigger(u.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+t.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})},setMediaElement:function(e){f!==e&&(f&&(f.removeEventListener("encrypted",g),f.setMediaKeys&&f.setMediaKeys(null)),(f=e)&&(f.addEventListener("encrypted",g),f.setMediaKeys&&h&&f.setMediaKeys(h)))},setServerCertificate:function(e){if(!c||!h)throw new Error("Can not set server certificate until you have selected a key system");h.setServerCertificate(e).then(function(){d.info("DRM: License server certificate successfully updated."),l.trigger(u.SERVER_CERTIFICATE_UPDATED)}).catch(function(e){l.trigger(u.SERVER_CERTIFICATE_UPDATED,{error:new _.default(E.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,E.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+e.name)})})},createKeySession:function(e,t,n){if(!c||!h)throw new Error("Can not create sessions until you have selected a key system");var r=h.createSession(n),i=s(r,e,n),a=this.getKeySystem().systemString===S.default.CLEARKEY_KEYSTEM_STRING&&t&&t.clearkeys?"keyids":"cenc";r.generateRequest(a,e).then(function(){d.debug("DRM: Session created.  SessionID = "+i.getSessionID()),l.trigger(u.KEY_SESSION_CREATED,{data:i})}).catch(function(e){o(i),l.trigger(u.KEY_SESSION_CREATED,{data:null,error:new _.default(E.default.KEY_SESSION_CREATED_ERROR_CODE,E.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+e.name)})})},updateKeySession:function(t,e){var n=t.session;m.isClearKey(c)&&(e=e.toJWK()),n.update(e).catch(function(e){l.trigger(u.KEY_ERROR,{data:new _.default(E.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+e.name,t)})})},loadKeySession:function(t,e,n){if(!c||!h)throw new Error("Can not load sessions until you have selected a key system");for(var r=0;r<p.length;r++)if(t===p[r].sessionId)return void d.warn("DRM: Ignoring session ID because we have already seen it!");var i=h.createSession(n),a=s(i,e,n,t);i.load(t).then(function(e){e?(d.debug("DRM: Session loaded.  SessionID = "+a.getSessionID()),l.trigger(u.KEY_SESSION_CREATED,{data:a})):(o(a),l.trigger(u.KEY_SESSION_CREATED,{data:null,error:new _.default(E.default.KEY_SESSION_CREATED_ERROR_CODE,E.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+t+")")}))}).catch(function(e){o(a),l.trigger(u.KEY_SESSION_CREATED,{data:null,error:new _.default(E.default.KEY_SESSION_CREATED_ERROR_CODE,E.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+t+")! "+e.name)})})},removeKeySession:function(t){t.session.remove().then(function(){d.debug("DRM: Session removed.  SessionID = "+t.getSessionID()),l.trigger(u.KEY_SESSION_REMOVED,{data:t.getSessionID()})},function(e){l.trigger(u.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+t.getSessionID()+"). "+e.name})})},closeKeySession:function(t){i(t).catch(function(e){o(t),l.trigger(u.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.getSessionID()+") "+e.name})})},stop:function(){for(var e=void 0,t=0;t<p.length;t++)(e=p[t]).getUsable()||i(e).catch(function(){o(e)})},reset:function(){var n=p.length,r=void 0;0!==n?function(){for(var t=function(e){o(e),0===p.length&&(f?(f.removeEventListener("encrypted",g),f.setMediaKeys(null).then(function(){l.trigger(u.TEARDOWN_COMPLETE)})):l.trigger(u.TEARDOWN_COMPLETE))},e=0;e<n;e++)!function(e){r.session.closed.then(function(){t(e)}),i(r).catch(function(){t(e)})}(r=p[e])}():l.trigger(u.TEARDOWN_COMPLETE)}},d=n.getLogger(r),h=f=c=null,p=[],m=(0,v.default)(t).getInstance(),g={handleEvent:function(e){switch(e.type){case"encrypted":if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;l.trigger(u.NEED_KEY,{key:new y.default(t,e.initDataType)})}}}},r}Object.defineProperty(n,"__esModule",{value:!0});var v=r(e(154)),y=r(e(173)),E=r(e(159)),_=r(e(215)),T=r(e(168)),b=r(e(170)),S=r(e(103));i.__dashjs_factory_name="ProtectionModel_21Jan2015",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{103:103,154:154,159:159,168:168,170:170,173:173,215:215}],162:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){try{for(var e=0;e<f.length;e++)n(f[e]);s&&s.removeEventListener(m.needkey,h),p.trigger(g.TEARDOWN_COMPLETE)}catch(e){p.trigger(g.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+e.message})}}function n(e){var t=e.session;t.removeEventListener(m.error,e),t.removeEventListener(m.message,e),t.removeEventListener(m.ready,e),t.removeEventListener(m.close,e);for(var n=0;n<f.length;n++)if(f[n]===e){f.splice(n,1);break}t[m.release]()}function r(){var e=null,t=function(){s.removeEventListener("loadedmetadata",e),s[m.setMediaKeys](d),p.trigger(g.VIDEO_ELEMENT_SELECTED)};1<=s.readyState?t():(e=t.bind(this),s.addEventListener("loadedmetadata",e))}e=e||{};var i=this.context,p=e.eventBus,g=e.events,a=e.debug,m=e.api,o=void 0,l=void 0,s=void 0,u=void 0,d=void 0,c=void 0,f=void 0,h=void 0,v=void 0;return o={getAllInitData:function(){for(var e=[],t=0;t<f.length;t++)e.push(f[t].initData);return e},requestKeySystemAccess:function(e){for(var t=!1,n=0;n<e.length;n++)for(var r=e[n].ks.systemString,i=e[n].configs,a=null,o=null,s=0;s<i.length;s++){var l=i[s].audioCapabilities,u=i[s].videoCapabilities;if(l&&0!==l.length){a=[];for(var d=0;d<l.length;d++)window[m.MediaKeys].isTypeSupported(r,l[d].contentType)&&a.push(l[d])}if(u&&0!==u.length){o=[];for(var c=0;c<u.length;c++)window[m.MediaKeys].isTypeSupported(r,u[c].contentType)&&o.push(u[c])}if(!(!a&&!o||a&&0===a.length||o&&0===o.length)){t=!0;var f=new S.default(a,o),h=v.getKeySystemBySystemString(r);p.trigger(g.KEY_SYSTEM_ACCESS_COMPLETE,{data:new A.default(h,f)});break}}t||p.trigger(g.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})},getKeySystem:function(){return u},selectKeySystem:function(e){try{d=e.mediaKeys=new window[m.MediaKeys](e.keySystem.systemString),u=e.keySystem,c=e,s&&r(),p.trigger(g.INTERNAL_KEY_SYSTEM_SELECTED)}catch(e){p.trigger(g.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+u.systemString+")! Could not create MediaKeys -- TODO"})}},setMediaElement:function(e){s!==e&&(s&&s.removeEventListener(m.needkey,h),(s=e)&&(s.addEventListener(m.needkey,h),d&&r()))},createKeySession:function(e,t,n,r){if(!u||!d||!c)throw new Error("Can not create sessions until you have selected a key system");var i=null;if(c.ksConfiguration.videoCapabilities&&0<c.ksConfiguration.videoCapabilities.length&&(i=c.ksConfiguration.videoCapabilities[0]),null===i&&c.ksConfiguration.audioCapabilities&&0<c.ksConfiguration.audioCapabilities.length&&(i=c.ksConfiguration.audioCapabilities[0]),null===i)throw new Error("Can not create sessions for unknown content types.");var a=i.contentType,o=d.createSession(a,new Uint8Array(e),r?new Uint8Array(r):null),s={session:o,initData:e,getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(e){switch(e.type){case m.error:p.trigger(g.KEY_ERROR,{data:new _.default(T.default.MEDIA_KEYERR_CODE,"KeyError",this)});break;case m.message:var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;p.trigger(g.INTERNAL_KEY_MESSAGE,{data:new b.default(this,t,e.destinationURL)});break;case m.ready:l.debug("DRM: Key added."),p.trigger(g.KEY_ADDED);break;case m.close:l.debug("DRM: Session closed.  SessionID = "+this.getSessionID()),p.trigger(g.KEY_SESSION_CLOSED,{data:this.getSessionID()})}}};o.addEventListener(m.error,s),o.addEventListener(m.message,s),o.addEventListener(m.ready,s),o.addEventListener(m.close,s),f.push(s),l.debug("DRM: Session created.  SessionID = "+s.getSessionID()),p.trigger(g.KEY_SESSION_CREATED,{data:s})},updateKeySession:function(e,t){var n=e.session;v.isClearKey(u)?n.update(new Uint8Array(t.toJWK())):n.update(new Uint8Array(t))},closeKeySession:n,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:t,reset:t},l=a.getLogger(o),c=d=u=s=null,f=[],v=(0,y.default)(i).getInstance(),h={handleEvent:function(e){switch(e.type){case m.needkey:if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;p.trigger(g.NEED_KEY,{key:new E.default(t,"cenc")})}}}},o}Object.defineProperty(n,"__esModule",{value:!0});var y=r(e(154)),E=r(e(173)),_=r(e(215)),T=r(e(159)),b=r(e(168)),S=r(e(171)),A=r(e(170));i.__dashjs_factory_name="ProtectionModel_3Feb2014",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{154:154,159:159,168:168,170:170,171:171,173:173,215:215}],163:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return{getServerURLFromMessage:function(e,t){var n=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t)));e+="/?";for(var r=0;r<n.kids.length;r++)e+=n.kids[r]+"&";return e.substring(0,e.length-1)},getHTTPMethod:function(){return"GET"},getResponseType:function(){return"json"},getLicenseMessage:function(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],n=0;n<e.keys.length;n++){var r=e.keys[n],i=r.kid.replace(/=/g,""),a=r.k.replace(/=/g,"");t.push(new o.default(i,a))}return new s.default(t)},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}Object.defineProperty(n,"__esModule",{value:!0});var o=r(e(169)),s=r(e(167));i.__dashjs_factory_name="ClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{167:167,169:169}],164:[function(e,t,n){"use strict";function r(e){var n=(e=e||{}).BASE64,r={};return r[o.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(e){return n.decodeArray(e.license)},getErrorResponse:function(e){return e}},r[o.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}},{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(e){return r[e].responseType},getLicenseMessage:function(e,t){return function(){if(!n||!n.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),r[t].getLicenseMessage(e)},getErrorResponse:function(e,t){return r[t].getErrorResponse(e)}}}Object.defineProperty(n,"__esModule",{value:!0});var i,a=e(103),o=(i=a)&&i.__esModule?i:{default:i};r.__dashjs_factory_name="DRMToday",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{103:103}],165:[function(e,t,n){"use strict";function r(){function g(e){var t=String.fromCharCode.apply(null,new Uint8Array(e));return decodeURIComponent(escape(t))}var m="http://schemas.xmlsoap.org/soap/envelope/";return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return function(e){if(window.DOMParser){var t=g(e),n=(new window.DOMParser).parseFromString(t,"text/xml"),r=n?n.getElementsByTagNameNS(m,"Envelope")[0]:null,i=r?r.getElementsByTagNameNS(m,"Body")[0]:null;if(i&&i.getElementsByTagNameNS(m,"Fault")[0])return null}return e}.call(this,e)},getErrorResponse:function(e){return function(e){var t="",n="",r="",i=-1,a=-1;if(window.DOMParser){var o=g(e),s=(new window.DOMParser).parseFromString(o,"text/xml"),l=s?s.getElementsByTagNameNS(m,"Envelope")[0]:null,u=l?l.getElementsByTagNameNS(m,"Body")[0]:null,d=u?u.getElementsByTagNameNS(m,"Fault")[0]:null,c=d?d.getElementsByTagName("detail")[0]:null,f=c?c.getElementsByTagName("Exception")[0]:null,h=null;if(null===d)return o;t=(h=d.getElementsByTagName("faultstring")[0].firstChild)?h.nodeValue:null,null!==f&&(n=(h=f.getElementsByTagName("StatusCode")[0])?h.firstChild.nodeValue:null,i=(r=(h=f.getElementsByTagName("Message")[0])?h.firstChild.nodeValue:null)?r.lastIndexOf("[")+1:-1,a=r?r.indexOf("]"):-1,r=r?r.substring(i,a):"")}var p="code: "+n+", name: "+t;return r&&(p+=", message: "+r),p}.call(this,e)}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="PlayReady",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{}],166:[function(e,t,n){"use strict";function r(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="Widevine",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{}],167:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=function(){function n(e,t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t&&"persistent"!==t&&"temporary"!==t)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=e,this.type=t}return r(n,[{key:"toJWK",value:function(){var e=void 0,t=this.keyPairs.length,n={keys:[]};for(e=0;e<t;e++){var r={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};n.keys.push(r)}this.type&&(n.type=this.type);var i=JSON.stringify(n),a=i.length,o=new ArrayBuffer(a),s=new Uint8Array(o);for(e=0;e<a;e++)s[e]=i.charCodeAt(e);return o}}]),n}();n.default=i,t.exports=n.default},{}],168:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n,r,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.sessionToken=t,this.message=n,this.defaultURL=r,this.messageType=i||"license-request"},t.exports=n.default},{}],169:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.keyID=t,this.key=n},t.exports=n.default},{}],170:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.keySystem=t,this.ksConfiguration=n},t.exports=n.default},{}],171:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n,r,i,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.initDataTypes=["cenc"],t&&t.length&&(this.audioCapabilities=t),n&&n.length&&(this.videoCapabilities=n),this.distinctiveIdentifier=r,this.persistentState=i,this.sessionTypes=a},t.exports=n.default},{}],172:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.contentType=t,this.robustness=n},t.exports=n.default},{}],173:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.initData=t,this.initDataType=n},t.exports=n.default},{}],174:[function(e,t,n){"use strict";function r(){var o=[],s=0,l=0;return{push:function(e,t){var n=t&&t.droppedVideoFrames?t.droppedVideoFrames:0,r=t&&t.totalVideoFrames?t.totalVideoFrames:0,i=n-s;s=n;var a=r-l;l=r,isNaN(e)||(o[e]?(o[e].droppedVideoFrames+=i,o[e].totalVideoFrames+=a):o[e]={droppedVideoFrames:i,totalVideoFrames:a})},getFrameHistory:function(){return o},reset:function(e){o=[],s=e.droppedVideoFrames,l=e.totalVideoFrames}}}Object.defineProperty(n,"__esModule",{value:!0});var i,a=e(48),o=(i=a)&&i.__esModule?i:{default:i};r.__dashjs_factory_name="DroppedFramesHistory";var s=o.default.getClassFactory(r);n.default=s,t.exports=n.default},{48:48}],175:[function(e,t,n){"use strict";function r(e){function t(){return l?l.mediaInfo:null}var n=(e=e||{}).abrController,r=e.switchHistory,i=e.droppedFramesHistory,a=e.currentRequest,o=e.useBufferOccupancyABR,s=e.streamProcessor?e.streamProcessor.getScheduleController():null,l=e.streamProcessor?e.streamProcessor.getRepresentationInfo():null;return{getMediaType:function(){var e=t();return e?e.type:null},getMediaInfo:t,getDroppedFramesHistory:function(){return i},getCurrentRequest:function(){return a},getSwitchHistory:function(){return r},getStreamInfo:function(){var e=t();return e?e.streamInfo:null},getScheduleController:function(){return s},getAbrController:function(){return n},getRepresentationInfo:function(){return l},useBufferOccupancyABR:function(){return o}}}Object.defineProperty(n,"__esModule",{value:!0});var i,a=e(48),o=(i=a)&&i.__esModule?i:{default:i};r.__dashjs_factory_name="RulesContext",n.default=o.default.getClassFactory(r),t.exports=n.default},{48:48}],176:[function(e,t,n){"use strict";function r(e,t,n){var r,i;return(r=n)!==(i=s.DEFAULT)&&r!==s.STRONG&&r!==s.WEAK||(i=r),{quality:void 0===e?-1:e,reason:void 0===t?null:t,priority:i}}Object.defineProperty(n,"__esModule",{value:!0});var i,a=e(48),o=(i=a)&&i.__esModule?i:{default:i},s={DEFAULT:.5,STRONG:1,WEAK:0};r.__dashjs_factory_name="SwitchRequest";var l=o.default.getClassFactory(r);l.NO_CHANGE=-1,l.PRIORITY=s,o.default.updateClassFactory(r.__dashjs_factory_name,l),n.default=l,t.exports=n.default},{48:48}],177:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){var o=[],s=[];return{push:function(e){e.newValue===l.default.NO_CHANGE&&(e.newValue=e.oldValue),o[e.oldValue]||(o[e.oldValue]={noDrops:0,drops:0,dropSize:0});var t=e.newValue-e.oldValue,n=t<0?1:0,r=n?-t:0,i=n?0:1;if(o[e.oldValue].drops+=n,o[e.oldValue].dropSize+=r,o[e.oldValue].noDrops+=i,s.push({idx:e.oldValue,noDrop:i,drop:n,dropSize:r}),8<s.length){var a=s.shift();o[a.idx].drops-=a.drop,o[a.idx].dropSize-=a.dropSize,o[a.idx].noDrops-=a.noDrop}},getSwitchRequests:function(){return o},reset:function(){o=[],s=[]}}}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(48)),l=r(e(176));i.__dashjs_factory_name="SwitchRequestHistory";var o=a.default.getClassFactory(i);n.default=o,t.exports=n.default},{176:176,48:48}],178:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function c(e,t,n,r){var i=Math.pow(.5,n/r.fast);e.fastEstimate=(1-i)*t+i*e.fastEstimate;var a=Math.pow(.5,n/r.slow);e.slowEstimate=(1-a)*t+a*e.slowEstimate,e.totalWeight+=n}function n(e,t,n){return p.getMovingAverageMethod()!==_.default.MOVING_AVERAGE_SLIDING_WINDOW?function(e,t){var n=e?E.throughputHalfLife:E.latencyHalfLife,r=e?v[t]:y[t];if(!r||r.totalWeight<=0)return NaN;var i=r.fastEstimate/(1-Math.pow(.5,r.totalWeight/n.fast)),a=r.slowEstimate/(1-Math.pow(.5,r.totalWeight/n.slow));return e?Math.min(i,a):Math.max(i,a)}(e,t):(a=function(e,t,n){var r=void 0,i=void 0;if(i=e?(r=g[t],n?s:l):(r=m[t],u),r){if(i>=r.length)i=r.length;else if(e)for(var a=1;a<i;++a){var o=r[a]/r[a-1];if((h<=o||o<=1/d)&&(i+=1)===r.length)break}}else i=0;return i}(r=e,i=t,n),o=(r?g:m)[i],0!==a&&o&&0!==o.length?(o=o.slice(-a)).reduce(function(e,t){return e+t})/o.length:NaN);var r,i,a,o}function r(e,t){return n(!0,e,t)}function f(e){g[e]=g[e]||[],m[e]=m[e]||[],v[e]=v[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0},y[e]=y[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function t(){g={},m={},v={},y={}}var s=3,l=4,u=4,d=1.3,h=1.3,p=(e=e||{}).mediaPlayerModel,g=void 0,m=void 0,v=void 0,y=void 0,E=void 0,i={push:function(e,t,n){if(t.trace&&t.trace.length){var r,i=t.tresponse.getTime()-t.trequest.getTime()||1,a=t._tfinish.getTime()-t.tresponse.getTime()||1,o=t.trace.reduce(function(e,t){return e+t.b[0]},0);r=p.getLowLatencyEnabled()?t.trace.reduce(function(e,t){return e+t.d},0):n?a:i+a;var s=Math.round(8*o/r);if(f(e),d=a,(u=e)===_.default.VIDEO?d<p.getCacheLoadThresholdForType(_.default.VIDEO):u===_.default.AUDIO?d<p.getCacheLoadThresholdForType(_.default.AUDIO):void 0){if(0<g[e].length&&!g[e].hasCachedEntries)return;g[e].hasCachedEntries=!0}else g[e]&&g[e].hasCachedEntries&&(delete g[l=e],delete m[l],delete v[l],delete y[l],f(l));g[e].push(s),20<g[e].length&&g[e].shift(),m[e].push(i),20<m[e].length&&m[e].shift(),c(v[e],s,.001*a,E.throughputHalfLife),c(y[e],i,1,E.latencyHalfLife)}var l,u,d},getAverageThroughput:r,getSafeAverageThroughput:function(e,t){var n=r(e,t);return isNaN(n)||(n*=p.getBandwidthSafetyFactor()),n},getAverageLatency:function(e){return n(!1,e)},reset:t};return E={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},t(),i}Object.defineProperty(n,"__esModule",{value:!0});var _=r(e(101)),a=r(e(48));i.__dashjs_factory_name="ThroughputHistory",n.default=a.default.getClassFactory(i),t.exports=n.default},{101:101,48:48}],179:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function n(e){return e.filter(function(e){return e.quality>g.default.NO_CHANGE})}function r(e){var t={},n=void 0,r=void 0,i=void 0,a=void 0,o=void 0;if(0!==e.length){for(t[g.default.PRIORITY.STRONG]=g.default.NO_CHANGE,t[g.default.PRIORITY.WEAK]=g.default.NO_CHANGE,t[g.default.PRIORITY.DEFAULT]=g.default.NO_CHANGE,n=0,r=e.length;n<r;n+=1)(i=e[n]).quality!==g.default.NO_CHANGE&&(t[i.priority]=t[i.priority]>g.default.NO_CHANGE?Math.min(t[i.priority],i.quality):i.quality);return t[g.default.PRIORITY.WEAK]!==g.default.NO_CHANGE&&(a=t[g.default.PRIORITY.WEAK]),t[g.default.PRIORITY.DEFAULT]!==g.default.NO_CHANGE&&(a=t[g.default.PRIORITY.DEFAULT]),t[g.default.PRIORITY.STRONG]!==g.default.NO_CHANGE&&(a=t[g.default.PRIORITY.STRONG]),a!==g.default.NO_CHANGE&&(o=a),(0,g.default)(s).create(o)}}e=e||{};var s=this.context,t=e.mediaPlayerModel,i=e.metricsModel,a=e.dashMetrics,o=void 0,l=void 0;return{initialize:function(){o=[],l=[],t.getUseDefaultABRRules()&&(o.push((0,p.default)(s).create({metricsModel:i,dashMetrics:a,mediaPlayerModel:t})),o.push((0,u.default)(s).create({metricsModel:i,dashMetrics:a})),o.push((0,d.default)(s).create({metricsModel:i,dashMetrics:a})),o.push((0,h.default)(s).create()),o.push((0,f.default)(s).create()),l.push((0,c.default)(s).create({metricsModel:i,dashMetrics:a,mediaPlayerModel:t}))),t.getABRCustomRules().forEach(function(e){e.type===m&&o.push(e.rule(s).create()),e.type===v&&l.push(e.rule(s).create())})},reset:function(){[o,l].forEach(function(e){e&&e.length&&e.forEach(function(e){return e.reset&&e.reset()})}),o=[],l=[]},getMaxQuality:function(t){return r(n(o.map(function(e){return e.getMaxIndex(t)})))||(0,g.default)(s).create()},shouldAbandonFragment:function(t){return r(n(l.map(function(e){return e.shouldAbandon(t)})))||(0,g.default)(s).create()}}}Object.defineProperty(n,"__esModule",{value:!0});var u=r(e(185)),d=r(e(183)),c=r(e(180)),f=r(e(182)),h=r(e(184)),p=r(e(181)),a=r(e(48)),g=r(e(176)),m="qualitySwitchRules",v="abandonFragmentRules";i.__dashjs_factory_name="ABRRulesCollection";var o=a.default.getClassFactory(i);o.QUALITY_SWITCH_RULES=m,o.ABANDON_FRAGMENT_RULES=v,a.default.updateSingletonFactory(i.__dashjs_factory_name,o),n.default=o,t.exports=n.default},{176:176,180:180,181:181,182:182,183:183,184:184,185:185,48:48}],180:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function A(e){function t(){T={},b={},S=[]}e=e||{};var m=this.context,v=e.mediaPlayerModel,y=e.metricsModel,E=e.dashMetrics,n=void 0,_=void 0,T=void 0,b=void 0,S=void 0;return n={shouldAbandon:function(e){var t=(0,R.default)(m).create(R.default.NO_CHANGE,{name:A.__dashjs_factory_name});if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getCurrentRequest")&&e.hasOwnProperty("getRepresentationInfo")&&e.hasOwnProperty("getAbrController")))return t;var n,r,i,a,o=e.getMediaInfo(),s=e.getMediaType(),l=e.getCurrentRequest();if(!isNaN(l.index)){i=s,a=l.index,T[i]=T[i]||{},T[i][a]=T[i][a]||{};var u=v.getStableBufferTime();if(E.getCurrentBufferLevel(y.getReadOnlyMetricsFor(s))>u)return t;var d=T[s][l.index];if(null===d||null===l.firstByteDate||b.hasOwnProperty(d.id))return t;if(void 0===d.firstByteTime&&(S[s]=[],d.firstByteTime=l.firstByteDate.getTime(),d.segmentDuration=l.duration,d.bytesTotal=l.bytesTotal,d.id=l.index),d.bytesLoaded=l.bytesLoaded,d.elapsedTime=(new Date).getTime()-d.firstByteTime,0<d.bytesLoaded&&0<d.elapsedTime&&(n=s,r=Math.round(8*d.bytesLoaded/d.elapsedTime),S[n]=S[n]||[],S[n].push(r)),5<=S[s].length&&500<d.elapsedTime&&d.bytesLoaded<d.bytesTotal){var c=S[s].reduce(function(e,t){return e+t},0);if(d.measuredBandwidthInKbps=Math.round(c/S[s].length),d.estimatedTimeOfDownload=+(8*d.bytesTotal/d.measuredBandwidthInKbps/1e3).toFixed(2),d.estimatedTimeOfDownload<1.8*d.segmentDuration||0===e.getRepresentationInfo().quality)return t;if(!b.hasOwnProperty(d.id)){var f=e.getAbrController(),h=d.bytesTotal-d.bytesLoaded,p=f.getBitrateList(o),g=f.getQualityForBitrate(o,d.measuredBandwidthInKbps*v.getBandwidthSafetyFactor());h>d.bytesTotal*p[g].bitrate/p[f.getQualityFor(s,o.streamInfo)].bitrate&&(t.quality=g,t.reason.throughput=d.measuredBandwidthInKbps,t.reason.fragmentID=d.id,b[d.id]=d,_.debug("( ",s,"frag id",d.id,") is asking to abandon and switch to quality to ",g," measured bandwidth was",d.measuredBandwidthInKbps),delete T[s][d.id])}}else d.bytesLoaded===d.bytesTotal&&delete T[s][d.id]}return t},reset:t},_=(0,a.default)(m).getInstance().getLogger(n),t(),n}Object.defineProperty(n,"__esModule",{value:!0});var R=r(e(176)),i=r(e(48)),a=r(e(46));A.__dashjs_factory_name="AbandonRequestsRule",n.default=i.default.getClassFactory(A),t.exports=n.default},{176:176,46:46,48:48}],181:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function o(e,t,r){var n=r.reduce(function(e,t,n){return t>r[e]?n:e},0);if(0===n)return null;var i=Math.max(e,10+2*t.length),a=(r[n]-1)/(i/10-1);return{gp:a,Vp:10/a}}function S(e){var t={},n=e.getMediaInfo().bitrateList.map(function(e){return e.bandwidth}),r=n.map(function(e){return Math.log(e)});r=r.map(function(e){return e-r[0]+1});var i=c.getStableBufferTime(),a=o(i,n,r);return a?(t.state=1,t.bitrates=n,t.utilities=r,t.stableBufferTime=i,t.Vp=a.Vp,t.gp=a.gp,t.lastQuality=0,A(t)):t.state=0,t}function A(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN}function R(e,t){var n=c.getStableBufferTime();if(e.stableBufferTime!==n){var r=o(n,e.bitrates,e.utilities);if(r.Vp!==e.Vp||r.gp!==e.gp){var i=M.getCurrentBufferLevel(C.getReadOnlyMetricsFor(t)),a=i+e.placeholderBuffer;a-=10,a*=r.Vp/e.Vp,a+=10,e.stableBufferTime=n,e.Vp=r.Vp,e.gp=r.gp,e.placeholderBuffer=Math.max(0,a-i)}}}function w(e,t){return e.Vp*(e.utilities[t]+e.gp)}function I(e,t){for(var n=e.bitrates[t],r=e.utilities[t],i=0,a=t-1;0<=a;--a)if(e.utilities[a]<e.utilities[t]){var o=e.bitrates[a],s=e.utilities[a],l=e.Vp*(e.gp+(n*s-o*r)/(n-o));i=Math.max(i,l)}return i}function t(){for(var e in P)P.hasOwnProperty(e)&&2===P[e].state&&(P[e].placeholderBuffer=0)}function n(){for(var e in P)if(P.hasOwnProperty(e)){var t=P[e];0!==t.state&&(t.state=1,A(t))}}function r(){}function i(e){if(e&&e.chunk&&e.chunk.mediaInfo){var t=P[e.chunk.mediaInfo.type];if(t&&0!==t.state){var n=e.chunk.start;isNaN(t.mostAdvancedSegmentStart)||n>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=n,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=n,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,s(t,e.chunk.mediaInfo.type)}}}function a(e){if(e&&e.metric===p.default.HTTP_REQUEST&&e.value&&e.value.type===g.HTTPRequest.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length){var t=P[e.mediaType];t&&0!==t.state&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),s(t,e.mediaType))}}function s(e,t){if(!isNaN(e.lastSegmentStart)&&!isNaN(e.lastSegmentRequestTimeMs)&&!isNaN(e.placeholderBuffer)){if(e.placeholderBuffer*=.99,!isNaN(e.lastSegmentFinishTimeMs)){var n=M.getCurrentBufferLevel(C.getReadOnlyMetricsFor(t))+.001*(e.lastSegmentFinishTimeMs-e.lastSegmentRequestTimeMs),r=w(e,e.lastQuality),i=Math.max(0,r-n);e.placeholderBuffer=Math.min(i,e.placeholderBuffer)}e.lastSegmentWasReplacement&&!isNaN(e.lastSegmentDurationS)&&(e.placeholderBuffer+=e.lastSegmentDurationS),e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN}}function l(e){if(e){var t=P[e.mediaType];t&&0!==t.state&&(t.abrQuality=e.newQuality)}}function u(e){if(e){var t=P[e.mediaType];if(t&&0!==t.state){var n,r=M.getCurrentBufferLevel(C.getReadOnlyMetricsFor(e.mediaType));n=0<t.abrQuality?I(t,t.abrQuality):10;var i=Math.max(0,n-r);t.placeholderBuffer=Math.min(t.placeholderBuffer,i)}}}function d(){P={}}e=e||{};var D=this.context,M=e.dashMetrics,C=e.metricsModel,c=e.mediaPlayerModel,f=(0,m.default)(D).getInstance(),h=void 0,O=void 0,P=void 0;return h={getMaxIndex:function(e){var t=e.getMediaInfo(),n=e.getMediaType(),r=C.getReadOnlyMetricsFor(n),i=e.getScheduleController(),a=e.getStreamInfo(),o=e.getAbrController(),s=o.getThroughputHistory(),l=a?a.id:null,u=a&&a.manifestInfo&&a.manifestInfo.isDynamic,d=e.useBufferOccupancyABR(),c=(0,N.default)(D).create();if(c.reason=c.reason||{},!d)return c;i.setTimeToLoadDelay(0);var f,h,p,g=(h=(f=e).getMediaType(),(p=P[h])?0!==p.state&&R(p,h):(p=S(f),P[h]=p),p);if(0===g.state)return c;var m=M.getCurrentBufferLevel(r),v=s.getAverageThroughput(n,u),y=s.getSafeAverageThroughput(n,u),E=s.getAverageLatency(n),_=void 0;if(c.reason.state=g.state,c.reason.throughput=v,c.reason.latency=E,isNaN(v))return c;switch(g.state){case 1:_=o.getQualityForBitrate(t,y,E),c.quality=_,c.reason.throughput=y,g.placeholderBuffer=Math.max(0,I(g,_)-m),g.lastQuality=_,!isNaN(g.lastSegmentDurationS)&&m>=g.lastSegmentDurationS&&(g.state=2);break;case 2:(function(e,t){var n=Date.now();if(isNaN(e.lastSegmentFinishTimeMs)){if(!isNaN(e.lastCallTimeMs)){var r=.001*(n-e.lastCallTimeMs);e.placeholderBuffer+=Math.max(0,r)}}else r=.001*(n-e.lastSegmentFinishTimeMs),e.placeholderBuffer+=Math.max(0,r);e.lastCallTimeMs=n,e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN,R(e,t)})(g,n),_=function(e,t){for(var n=e.bitrates.length,r=NaN,i=NaN,a=0;a<n;++a){var o=(e.Vp*(e.utilities[a]+e.gp)-t)/e.bitrates[a];(isNaN(i)||i<=o)&&(i=o,r=a)}return r}(g,m+g.placeholderBuffer);var T=o.getQualityForBitrate(t,y,E);_>g.lastQuality&&T<_&&(_=Math.max(T,g.lastQuality));var b=Math.max(0,m+g.placeholderBuffer-w(g,_));b<=g.placeholderBuffer?(g.placeholderBuffer-=b,b=0):(b-=g.placeholderBuffer,g.placeholderBuffer=0,_<o.getTopQualityIndexFor(n,l)?i.setTimeToLoadDelay(1e3*b):b=0),c.quality=_,c.reason.throughput=v,c.reason.latency=E,c.reason.bufferLevel=m,c.reason.placeholderBuffer=g.placeholderBuffer,c.reason.delay=b,g.lastQuality=_;break;default:O.debug("BOLA ABR rule invoked in bad state."),c.quality=o.getQualityForBitrate(t,y,E),c.reason.state=g.state,c.reason.throughput=y,c.reason.latency=E,g.state=1,A(g)}return c},reset:function(){d(),f.off(v.default.BUFFER_EMPTY,t,h),f.off(v.default.PLAYBACK_SEEKING,n,h),f.off(v.default.PERIOD_SWITCH_STARTED,r,h),f.off(v.default.MEDIA_FRAGMENT_LOADED,i,h),f.off(v.default.METRIC_ADDED,a,h),f.off(v.default.QUALITY_CHANGE_REQUESTED,l,h),f.off(v.default.FRAGMENT_LOADING_ABANDONED,u,h)}},O=(0,y.default)(D).getInstance().getLogger(h),d(),f.on(v.default.BUFFER_EMPTY,t,h),f.on(v.default.PLAYBACK_SEEKING,n,h),f.on(v.default.PERIOD_SWITCH_STARTED,r,h),f.on(v.default.MEDIA_FRAGMENT_LOADED,i,h),f.on(v.default.METRIC_ADDED,a,h),f.on(v.default.QUALITY_CHANGE_REQUESTED,l,h),f.on(v.default.FRAGMENT_LOADING_ABANDONED,u,h),h}Object.defineProperty(n,"__esModule",{value:!0});var p=r(e(102)),N=r(e(176)),a=r(e(48)),g=e(235),m=r(e(47)),v=r(e(53)),y=r(e(46));i.__dashjs_factory_name="BolaRule",n.default=a.default.getClassFactory(i),t.exports=n.default},{102:102,176:176,235:235,46:46,47:47,48:48,53:53}],182:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){var s=this.context,e=void 0,l=void 0;return e={getMaxIndex:function(e){var t=e.getDroppedFramesHistory();if(t){for(var n=t.getFrameHistory(),r=0,i=0,a=u.default.NO_CHANGE,o=1;o<n.length;o++)if(n[o]&&(r=n[o].droppedVideoFrames,375<(i=n[o].totalVideoFrames)&&.15<r/i)){a=o-1,l.debug("index: "+a+" Dropped Frames: "+r+" Total Frames: "+i);break}return(0,u.default)(s).create(a,{droppedFrames:r})}return(0,u.default)(s).create()}},l=(0,o.default)(s).getInstance().getLogger(e),e}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(48)),u=r(e(176)),o=r(e(46));i.__dashjs_factory_name="DroppedFramesRule",n.default=a.default.getClassFactory(i),t.exports=n.default},{176:176,46:46,48:48}],183:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){y={}}function n(){t()}e=e||{};var h=.5,p=this.context,r=(0,a.default)(p).getInstance(),g=e.metricsModel,m=e.dashMetrics,i=void 0,v=void 0,y=void 0;return i={getMaxIndex:function(e){var t=(0,_.default)(p).create();if(!e||!e.hasOwnProperty("getMediaType"))return t;!function(){if(!(g&&g.hasOwnProperty("getReadOnlyMetricsFor")&&m&&m.hasOwnProperty("getCurrentBufferLevel")))throw new Error(T.default.MISSING_CONFIG_ERROR)}();var n=e.getMediaType(),r=g.getReadOnlyMetricsFor(n),i=0<r.BufferState.length?r.BufferState[r.BufferState.length-1]:null,a=e.getRepresentationInfo().fragmentDuration;if(!i||!function(e,t){y[e]=y[e]||{};var n=!1;return y[e].firstBufferLoadedEvent?n=!0:t&&t.state===E.default.BUFFER_LOADED&&(y[e].firstBufferLoadedEvent=!0,n=!0),n}(n,i)||!a)return t;if(i.state===E.default.BUFFER_EMPTY)v.debug("Switch to index 0; buffer is empty."),t.quality=0,t.reason="InsufficientBufferRule: Buffer is empty";else{var o=e.getMediaInfo(),s=e.getAbrController(),l=s.getThroughputHistory(),u=m.getCurrentBufferLevel(r),d=l.getAverageThroughput(n),c=l.getAverageLatency(n),f=d*(u/a)*h;t.quality=s.getQualityForBitrate(o,f,c),t.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return t},reset:function(){t(),r.off(o.default.PLAYBACK_SEEKING,n,i)}},v=(0,l.default)(p).getInstance().getLogger(i),t(),r.on(o.default.PLAYBACK_SEEKING,n,i),i}Object.defineProperty(n,"__esModule",{value:!0});var E=r(e(107)),a=r(e(47)),o=r(e(53)),s=r(e(48)),l=r(e(46)),_=r(e(176)),T=r(e(101));i.__dashjs_factory_name="InsufficientBufferRule",n.default=s.default.getClassFactory(i),t.exports=n.default},{101:101,107:107,176:176,46:46,47:47,48:48,53:53}],184:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){var l=this.context,e=void 0,u=void 0;return e={getMaxIndex:function(e){for(var t=e?e.getSwitchHistory():null,n=t?t.getSwitchRequests():[],r=0,i=0,a=0,o=(0,d.default)(l).create(),s=0;s<n.length;s++)if(void 0!==n[s]&&(r+=n[s].drops,i+=n[s].noDrops,a+=n[s].dropSize,6<=r+i&&.075<r/i)){o.quality=0<s&&0<n[s].drops?s-1:s,o.reason={index:o.quality,drops:r,noDrops:i,dropSize:a},u.debug("Switch history rule index: "+o.quality+" samples: "+(r+i)+" drops: "+r);break}return o}},u=(0,o.default)(l).getInstance().getLogger(e),e}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(48)),o=r(e(46)),d=r(e(176));i.__dashjs_factory_name="SwitchHistoryRule",n.default=a.default.getClassFactory(i),t.exports=n.default},{176:176,46:46,48:48}],185:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){e=e||{};var p=this.context,g=e.metricsModel,t=void 0,m=void 0;return t={getMaxIndex:function(e){var t=(0,E.default)(p).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("useBufferOccupancyABR")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("getScheduleController")))return t;!function(){if(!g||!g.hasOwnProperty("getReadOnlyMetricsFor"))throw new Error(_.default.MISSING_CONFIG_ERROR)}();var n=e.getMediaInfo(),r=e.getMediaType(),i=g.getReadOnlyMetricsFor(r),a=e.getScheduleController(),o=e.getAbrController(),s=e.getStreamInfo(),l=s&&s.manifestInfo?s.manifestInfo.isDynamic:null,u=o.getThroughputHistory(),d=u.getSafeAverageThroughput(r,l),c=u.getAverageLatency(r),f=0<i.BufferState.length?i.BufferState[i.BufferState.length-1]:null,h=e.useBufferOccupancyABR();return!i||isNaN(d)||!f||h||o.getAbandonmentStateFor(r)!==y.default.ABANDON_LOAD&&(f.state===v.default.BUFFER_LOADED||l)&&(t.quality=o.getQualityForBitrate(n,d,c),a.setTimeToLoadDelay(0),m.debug("requesting switch to index: ",t.quality,"type: ",r,"Average throughput",Math.round(d),"kbps"),t.reason={throughput:d,latency:c}),t},reset:function(){}},m=(0,o.default)(p).getInstance().getLogger(t),t}Object.defineProperty(n,"__esModule",{value:!0});var v=r(e(107)),y=r(e(104)),a=r(e(48)),o=r(e(46)),E=r(e(176)),_=r(e(101));i.__dashjs_factory_name="ThroughputRule",n.default=a.default.getClassFactory(i),t.exports=n.default},{101:101,104:104,107:107,176:176,46:46,48:48}],186:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function n(e,t){var n=NaN;if(!e)return n;var r=e.getType(),i=e.getRepresentationInfo();if(r===f.default.FRAGMENTED_TEXT)n=d.isTextEnabled()?i.fragmentDuration:0;else if(r===f.default.AUDIO&&t){var a=s.getCurrentBufferLevel(l.getReadOnlyMetricsFor(f.default.VIDEO));n=isNaN(i.fragmentDuration)?a:Math.max(a,i.fragmentDuration)}else{var o=i.mediaInfo.streamInfo;if(c.isPlayingAtTopQuality(o))n=o.manifestInfo.duration>=u.getLongFormContentDurationThreshold()?u.getBufferTimeAtTopQualityLongForm():u.getBufferTimeAtTopQuality();else n=u.getStableBufferTime()}return n}var s=(e=e||{}).dashMetrics,l=e.metricsModel,u=e.mediaPlayerModel,d=e.textController,c=e.abrController;return{execute:function(e,t){return!e||s.getCurrentBufferLevel(l.getReadOnlyMetricsFor(e.getType()))<n(e,t)},getBufferTarget:n}}Object.defineProperty(n,"__esModule",{value:!0});var f=r(e(101)),a=r(e(48));i.__dashjs_factory_name="BufferLevelRule",n.default=a.default.getClassFactory(i),t.exports=n.default},{101:101,48:48}],187:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){e=e||{};var t=this.context,p=e.adapter,g=e.textController,m=e.playbackController,n=void 0,v=void 0;return n={execute:function(e,t,n){if(!e)return null;var r=e.getRepresentationInfo(),i=e.getType(),a=!isNaN(t),o=e.getBufferController(),s=m.getNormalizedTime(),l=a?t:p.getIndexHandlerTime(e),u=!1,d=void 0;if(isNaN(l)||i===y.default.FRAGMENTED_TEXT&&!g.isTextEnabled())return null;if(o){var c=o.getRangeAt(l),f=o.getRangeAt(s),h=o.getBuffer().hasDiscontinuitiesAfter(s);null===c&&null===f||a||((!c||f&&f.start!=c.start&&f.end!=c.end)&&(h&&i!==y.default.FRAGMENTED_TEXT&&(e.getFragmentModel().removeExecutedRequestsAfterTime(f.end),u=!0),c=f),l!==c.end&&(v.debug("Prior to making a request for time, NextFragmentRequestRule is aligning index handler's currentTime with bufferedRange.end for",i,".",l,"was changed to",c.end),l=c.end))}if(n)l=n.startTime+n.duration/2,d=p.getFragmentRequest(e,r,l,{timeThreshold:0,ignoreIsFinished:!0});else for(d=p.getFragmentRequest(e,r,l,{keepIdx:!a&&!u});d&&d.action!==E.default.ACTION_COMPLETE&&e.getFragmentModel().isFragmentLoaded(d);)d=p.getFragmentRequest(e,r);return d}},v=(0,a.default)(t).getInstance().getLogger(n),n}Object.defineProperty(n,"__esModule",{value:!0});var y=r(e(101)),a=r(e(46)),o=r(e(48)),E=r(e(217));i.__dashjs_factory_name="NextFragmentRequestRule",n.default=o.default.getClassFactory(i),t.exports=n.default},{101:101,217:217,46:46,48:48}],188:[function(e,t,n){"use strict";function r(){function G(e){for(var t="",n=0;n<e.length;++n)t+=e[n].uchar;return t.length-t.replace(/^\s+/,"").length}function r(e){return"red"===e?"rgb(255, 0, 0)":"green"===e?"rgb(0, 255, 0)":"blue"===e?"rgb(0, 0, 255)":"cyan"===e?"rgb(0, 255, 255)":"magenta"===e?"rgb(255, 0, 255)":"yellow"===e?"rgb(255, 255, 0)":"white"===e?"rgb(255, 255, 255)":"black"===e?"rgb(0, 0, 0)":e}function j(e,t){var n=e.videoHeight/15;return t?"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(t.foreground?r(t.foreground):"rgb(255, 255, 255)")+"; font-style: "+(t.italics?"italic":"normal")+"; text-decoration: "+(t.underline?"underline":"none")+"; white-space: pre; background-color: "+(t.background?r(t.background):"transparent")+";":"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}var K=0;return{createHTMLCaptionsFromScreen:function(e,t,n,r){var i=null,a=!1,o=-1,s={start:t,end:n,spans:[]},l="style_cea608_white_black",u={},d={},c=[],f=void 0,h=void 0;for(f=0;f<15;++f){var p=r.rows[f],g="",m=null;if(!1===p.isEmpty()){var v=G(p.chars);null===i&&(i={x:v,y1:f,y2:f+1,p:[]}),v!==o&&a&&(i.p.push(s),s={start:t,end:n,spans:[]},i.y2=f,i.name="region_"+i.x+"_"+i.y1+"_"+i.y2,!1===u.hasOwnProperty(i.name)?(c.push(i),u[i.name]=i):u[i.name].p.contat(i.p),i={x:v,y1:f,y2:f+1,p:[]});for(var y=0;y<p.chars.length;++y){var E=p.chars[y],_=E.penState;if(null===m||!_.equals(m)){0<g.trim().length&&(s.spans.push({name:l,line:g,row:f}),g="");var T="style_cea608_"+_.foreground+"_"+_.background;_.underline&&(T+="_underline"),_.italics&&(T+="_italics"),d.hasOwnProperty(T)||(d[T]=JSON.parse(JSON.stringify(_))),m=_,l=T}g+=E.uchar}0<g.trim().length&&s.spans.push({name:l,line:g,row:f}),a=!0,o=v}else a=!1,o=-1,i&&(i.p.push(s),s={start:t,end:n,spans:[]},i.y2=f,i.name="region_"+i.x+"_"+i.y1+"_"+i.y2,!1===u.hasOwnProperty(i.name)?(c.push(i),u[i.name]=i):u[i.name].p.contat(i.p),i=null)}i&&(i.p.push(s),i.y2=f+1,i.name="region_"+i.x+"_"+i.y1+"_"+i.y2,!1===u.hasOwnProperty(i.name)?(c.push(i),u[i.name]=i):u[i.name].p.contat(i.p),i=null);var b,S=[];for(f=0;f<c.length;++f){var A=c[f],R="sub_cea608_"+K++,w=document.createElement("div");w.id=R;var I="left: "+3.125*(b=A).x+"%; top: "+6.66*b.y1+"%; width: "+(100-3.125*b.x)+"%; height: "+6.66*Math.max(b.y2-1-b.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;";w.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+I;var D=document.createElement("div");D.className="paragraph bodyStyle",D.style.cssText=j(e);var M=document.createElement("div");M.className="cueUniWrapper",M.style.cssText="unicode-bidi: normal; direction: ltr;";for(var C=0;C<A.p.length;++C){var O=A.p[C],P=0;for(h=0;h<O.spans.length;++h){var N=O.spans[h];if(0<N.line.length){if(0!==h&&P!=N.row){var L=document.createElement("br");L.className="lineBreak",M.appendChild(L)}var k=!1;P===N.row&&(k=!0),P=N.row;var x=d[N.name],F=document.createElement("span");F.className="spanPadding "+N.name+" customSpanColor",F.style.cssText=j(e,x),0!==h&&k?h===O.spans.length-1?F.textContent=N.line.replace(/\s+$/g,""):F.textContent=N.line:1<O.spans.length&&h<O.spans.length-1&&N.row===O.spans[h+1].row?F.textContent=N.line.replace(/^\s+/g,""):F.textContent=N.line.trim(),M.appendChild(F)}}}D.appendChild(M),w.appendChild(D);var U={bodyStyle:["%",90]};for(var B in d)d.hasOwnProperty(B)&&(U[B]=["%",90]);S.push({type:"html",start:t,end:n,cueHTMLElement:w,cueID:R,cellResolution:[32,15],isFromCEA608:!0,fontSize:U,lineHeight:{},linePadding:{}})}return S}}}Object.defineProperty(n,"__esModule",{value:!0});var i,a=e(48),o=(i=a)&&i.__esModule?i:{default:i};r.__dashjs_factory_name="EmbeddedTextHtmlRender",n.default=o.default.getSingletonFactory(r),t.exports=n.default},{48:48}],189:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){p=e}function n(e){e.sender.getStreamProcessor()===d&&(m.extract(d.getStreamInfo().id,e.sender.getCurrentRepresentation().id)||a.trigger(E.default.TIMED_TEXT_REQUESTED,{index:0,sender:e.sender}))}function r(e){e.fragmentModel===d.getFragmentModel()&&e.chunk.bytes&&(m.save(e.chunk),g.append(e.chunk),a.trigger(E.default.STREAM_COMPLETED,{request:e.request,fragmentModel:e.fragmentModel}))}e=e||{};var i=this.context,a=(0,y.default)(i).getInstance(),o=(0,b.default)(i).getInstance(),s=e.errHandler,l=e.type,u=e.mimeType,d=e.streamProcessor,c=void 0,f=void 0,h=void 0,p=void 0,g=void 0,m=void 0;return c={getBufferControllerType:function(){return R},initialize:function(e){t(e),m=(0,_.default)(i).getInstance()},createBuffer:function(t){try{if(g=(0,T.default)(i).create(p,t),!h){var e=g.getBuffer();e.hasOwnProperty(v.default.INITIALIZE)&&e.initialize(u,d),h=!0}return g}catch(e){if(t.isText||-1!==t.codec.indexOf('codecs="stpp')||-1!==t.codec.indexOf('codecs="wvtt'))try{g=o.getTextSourceBuffer()}catch(e){s.mediaSourceError("Error creating "+l+" source buffer."),s.error(new S.default(A.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,A.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+l+" : "+e.message))}else s.mediaSourceError("Error creating "+l+" source buffer."),s.error(new S.default(A.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,A.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+l))}},getType:function(){return l},getStreamProcessor:function(){return d},setSeekStartTime:function(){},getBuffer:function(){return g},getBufferLevel:function(){return 0},setMediaSource:t,getMediaSource:function(){return p},getIsBufferingCompleted:function(){return f},getIsPruningInProgress:function(){return!1},dischargePreBuffer:function(){},switchInitData:function(e,t){m.extract(e,t)||a.trigger(E.default.TIMED_TEXT_REQUESTED,{index:0,sender:c})},getRangeAt:function(){return null},reset:function(e){a.off(E.default.DATA_UPDATE_COMPLETED,n,c),a.off(E.default.INIT_FRAGMENT_LOADED,r,c),!e&&g&&(g.abort(),g.reset(),g=null)},updateTimestampOffset:function(e){g.timestampOffset===e||isNaN(e)||(g.timestampOffset=e)}},p=null,f=h=!1,a.on(E.default.DATA_UPDATE_COMPLETED,n,c),a.on(E.default.INIT_FRAGMENT_LOADED,r,c),c}Object.defineProperty(n,"__esModule",{value:!0});var v=r(e(101)),y=r(e(47)),E=r(e(53)),a=r(e(48)),_=r(e(203)),T=r(e(97)),b=r(e(191)),S=r(e(215)),A=r(e(50)),R="NotFragmentedTextBufferController";i.__dashjs_factory_name=R,n.default=a.default.getClassFactory(i),t.exports=n.default},{101:101,191:191,203:203,215:215,47:47,48:48,50:50,53:53,97:97}],190:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function n(){return i.getBuffer()}e=e||{};var t,r=this.context,i=void 0;return t={getBufferControllerType:function(){return i.getBufferControllerType()},initialize:function(e,t){return i.initialize(e,t)},createBuffer:function(e){return i.createBuffer(e)},getType:function(){return i.getType()},getStreamProcessor:function(){i.getStreamProcessor()},setSeekStartTime:function(e){i.setSeekStartTime(e)},getBuffer:n,setBuffer:function(e){i.setBuffer(e)},getBufferLevel:function(){return i.getBufferLevel()},setMediaSource:function(e){i.setMediaSource(e)},getMediaSource:function(){return i.getMediaSource()},getIsBufferingCompleted:function(){return i.getIsBufferingCompleted()},getIsPruningInProgress:function(){return i.getIsPruningInProgress()},dischargePreBuffer:function(){return i.dischargePreBuffer()},switchInitData:function(e,t){i.switchInitData(e,t)},getRangeAt:function(e){return i.getRangeAt(e)},reset:function(e){i.reset(e)},updateTimestampOffset:function(e){var t=n();t.timestampOffset===e||isNaN(e)||(t.timestampOffset=e)}},i=e.type===a.default.FRAGMENTED_TEXT?(0,s.default)(r).create({type:e.type,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,manifestModel:e.manifestModel,errHandler:e.errHandler,streamController:e.streamController,mediaController:e.mediaController,adapter:e.adapter,textController:e.textController,abrController:e.abrController,playbackController:e.playbackController,streamProcessor:e.streamProcessor}):(0,l.default)(r).create({type:e.type,mimeType:e.mimeType,errHandler:e.errHandler,streamProcessor:e.streamProcessor}),t}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(101)),o=r(e(48)),s=r(e(107)),l=r(e(189));i.__dashjs_factory_name="TextBufferController",n.default=o.default.getClassFactory(i),t.exports=n.default},{101:101,107:107,189:189,48:48}],191:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){var n=this,t=e.tracks,r=e.index;t.some(function(e,t){if(e.lang===f)return n.setTextTrack(t),r=t,!0}),y||this.setTextTrack(-1),v=r,c.trigger(I.default.TEXT_TRACKS_ADDED,{enabled:i(),index:r,tracks:t})}function i(){var e=!0;return E&&!_&&(e=!1),e}function t(){E=!1}var n=this.context,r=void 0,h=void 0,a=void 0,o=void 0,s=void 0,p=void 0,l=void 0,g=void 0,m=void 0,u=void 0,d=void 0,c=void 0,f=void 0,v=void 0,y=void 0,E=void 0,_=void 0;return r={setConfig:function(e){e&&(e.errHandler&&(a=e.errHandler),e.dashManifestModel&&(o=e.dashManifestModel),e.manifestModel&&(s=e.manifestModel),e.mediaController&&(p=e.mediaController),e.videoModel&&(l=e.videoModel),e.streamController&&(g=e.streamController),e.textTracks&&(m=e.textTracks),e.vttParser&&(u=e.vttParser),e.ttmlParser&&(d=e.ttmlParser),h.setConfig({errHandler:a,dashManifestModel:o,manifestModel:s,mediaController:p,videoModel:l,streamController:g,textTracks:m,vttParser:u,ttmlParser:d}))},getTextSourceBuffer:function(){return h},getAllTracksAreDisabled:function(){return E},addEmbeddedTrack:function(e){h.addEmbeddedTrack(e)},getTextDefaultLanguage:function(){return f},setTextDefaultLanguage:function(e){(0,D.checkParameterType)(e,"string"),f=e},setTextDefaultEnabled:function(e){(0,D.checkParameterType)(e,"boolean"),(y=e)||this.setTextTrack(-1)},getTextDefaultEnabled:function(){return y},enableText:function(e){(0,D.checkParameterType)(e,"boolean"),i()!==e&&(e&&this.setTextTrack(v),e||(v=this.getCurrentTrackIdx(),this.setTextTrack(-1)))},isTextEnabled:i,setTextTrack:function(e){var t=h.getConfig(),n=t.fragmentModel,r=t.fragmentedTracks,i=t.videoModel,a=void 0,o=void 0;E=-1===e;var s=m.getCurrentTrackIdx();if(s!==e){m.setModeForTrackIdx(s,T.default.TEXT_HIDDEN),m.setCurrentTrackIdx(e),m.setModeForTrackIdx(e,T.default.TEXT_SHOWING);var l=m.getCurrentTrackInfo();if(l&&l.isFragmented&&!l.isEmbedded)for(var u=0;u<r.length;u++){var d=r[u];if(l.lang===d.lang&&l.index===d.index&&(d.id?l.id===d.id:l.id===d.index))if(d!==p.getCurrentTrackFor(T.default.FRAGMENTED_TEXT,g.getActiveStreamInfo()))n.abortRequests(),n.removeExecutedRequestsBeforeTime(),h.remove(),m.deleteCuesFromTrackIdx(s),p.setTrack(d),h.setCurrentFragmentedTrackIdx(u);else if(-1===s){for(var c=g.getActiveStreamProcessors(),f=0;f<c.length;f++)if(c[f].getType()===T.default.FRAGMENTED_TEXT){o=c[f];break}o.getIndexHandler().setCurrentTime(i.getTime()),o.getScheduleController().start()}}else if(l&&!l.isFragmented){for(c=g.getActiveStreamProcessors(),u=0;u<c.length;u++)if(c[u].getType()===T.default.TEXT){a=(o=c[u]).getMediaInfoArr();break}if(o&&a)for(u=0;u<a.length;u++)if(a[u].index===l.index&&a[u].lang===l.lang){o.selectMediaInfo(a[u]);break}}}},getCurrentTrackIdx:function(){return m.getCurrentTrackIdx()},enableForcedTextStreaming:function(e){(0,D.checkParameterType)(e,"boolean"),_=e},reset:function(){t(),h.resetEmbedded(),h.reset()}},v=-1,_=!(y=!(f="")),m=(0,S.default)(n).getInstance(),u=(0,A.default)(n).getInstance(),d=(0,R.default)(n).getInstance(),h=(0,b.default)(n).getInstance(),c=(0,w.default)(n).getInstance(),m.initialize(),c.on(I.default.TEXT_TRACKS_QUEUE_INITIALIZED,e,r),t(),r}Object.defineProperty(n,"__esModule",{value:!0});var T=r(e(101)),a=r(e(48)),b=r(e(192)),S=r(e(193)),A=r(e(211)),R=r(e(209)),w=r(e(47)),I=r(e(53)),D=e(208);i.__dashjs_factory_name="TextController",n.default=a.default.getSingletonFactory(i),t.exports=n.default},{101:101,192:192,193:193,208:208,209:209,211:211,47:47,48:48,53:53}],192:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){z=NaN,Q=V=null,W=!(g=[]),p=[],H=null}function n(e){var t=e.chunk;t.mediaInfo.embeddedCaptions&&i(t.bytes,t)}function r(){J=[],(q=(0,T.default)(o).getInstance()).setConfig({videoModel:X}),q.initialize(),j=(0,y.default)(o).getInstance(),!1,ne=[],te=[],l=!(ee=Z=null),re=($=0,b.default)(o).getInstance();var e=m.getActiveStreamProcessors();for(var t in e)if("video"===e[t].getType()){ie=e[t].getRepresentationInfo().MSETimeOffset;break}s.on(A.default.VIDEO_CHUNK_RECEIVED,n,this)}function a(e){Z=e}function U(e,t){var n,r,i,a,o=new v.default,s={subtitle:"subtitles",caption:"captions"};o.captionData=e,o.lang=t.lang,o.labels=t.labels,o.id=t.id?t.id:t.index,o.index=t.index,o.isTTML=(a=!1,t.codec&&0<=t.codec.search(ae.default.STPP)&&(a=!0),t.mimeType&&0<=t.mimeType.search(ae.default.TTML)&&(a=!0),a),o.defaultTrack=(r=t,i=!1,1<J.length&&r.isEmbedded?i=r.id&&r.id===ae.default.CC1:1===J.length?r.id&&"string"==typeof r.id&&"CC"===r.id.substring(0,2)&&(i=!0):0===J.length&&(i=r.index===p[0].index),i),o.isFragmented=!d.getIsTextTrack(t.mimeType),o.isEmbedded=!!t.isEmbedded,o.kind=(n=0<t.roles.length?s[t.roles[0]]:s.caption)===s.caption||n===s.subtitle?n:s.caption,o.roles=t.roles,o.accessibility=t.accessibility;var l=(p?p.length:0)+J.length;q.addTextTrack(o,l)}function i(e,t){var n=void 0,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,l=void 0,u=t.mediaInfo,d=u.type,c=u.mimeType,f=u.codec||c;if(f){if(d===ae.default.FRAGMENTED_TEXT)if(W)if(r=(s=j.getSamplesInfo(e)).sampleList,null===Q&&0<r.length&&(Q=r[0].cts-t.start*z),0<=f.search(ae.default.STPP))for(H=null!==H?H:B(f),i=0;i<r.length;i++){var h=(b=r[i]).cts,p=h-Q;this.buffered.add(p/z,(p+b.duration)/z);var g=new DataView(e,b.offset,b.subSizes[0]);l=se.default.Utils.dataViewToString(g,ae.default.UTF8);var m=[],v=b.offset+b.subSizes[0];for(a=1;a<b.subSizes.length;a++){var y=new Uint8Array(e,v,b.subSizes[a]),E=String.fromCharCode.apply(null,y);m.push(E),v+=b.subSizes[a]}try{var _=Y.getValue().ttmlTimeIsRelative?h/z:0;n=H.parse(l,_,h/z,(h+b.duration)/z,m),q.addCaptions(Z,Q/z,n)}catch(e){V.removeExecutedRequestsBeforeTime(),this.remove(),G.error("TTML parser error: "+e.message)}}else{var T=[];for(i=0;i<r.length;i++){var b;(b=r[i]).cts-=Q,this.buffered.add(b.cts/z,(b.cts+b.duration)/z);var S=e.slice(b.offset,b.offset+b.size),A=se.default.parseBuffer(S);for(a=0;a<A.boxes.length;a++){var R=A.boxes[a];if(G.debug("VTT box1: "+R.type),"vtte"!==R.type&&"vttc"===R.type)for(G.debug("VTT vttc boxes.length = "+R.boxes.length),o=0;o<R.boxes.length;o++){var w=R.boxes[o];if(G.debug("VTT box2: "+w.type),"payl"===w.type){var I=w.cue_text;G.debug("VTT cue_text = "+I);var D=b.cts/z,M=(b.cts+b.duration)/z;T.push({start:D,end:M,data:I,styles:{}}),G.debug("VTT "+D+"-"+M+" : "+I)}}}}0<T.length&&q.addCaptions(Z,0,T)}else W=!0,z=j.getMediaTimescaleFromMoov(e);else if(d===ae.default.TEXT){g=new DataView(e,0,e.byteLength);l=se.default.Utils.dataViewToString(g,ae.default.UTF8);try{n=B(f).parse(l,0),q.addCaptions(q.getCurrentTrackIdx(),0,n)}catch(e){K.timedTextError(e,"parse",l),K.error(new ue.default(de.default.TIMED_TEXT_ERROR_ID_PARSE_CODE,de.default.TIMED_TEXT_ERROR_MESSAGE_PARSE+e.message,l))}}else if(d===ae.default.VIDEO)if(t.segmentType===oe.HTTPRequest.INIT_SEGMENT_TYPE){if(0===$)for($=j.getMediaTimescaleFromMoov(e),i=0;i<J.length;i++)U(null,J[i])}else{if(0===$)return void G.warn("CEA-608: No timescale for embeddedTextTrack yet");var C=function(e,i){return function(e,t,n){var r=null;(r=X.getTTMLRenderingDiv()?re.createHTMLCaptionsFromScreen(X.getElement(),e,t,n):[{start:e,end:t,data:n.getDisplayText(),styles:{}}])&&q.addCaptions(i,0,r)}},O=(s=j.getSamplesInfo(e)).lastSequenceNumber;if(!ne[0]&&!ne[1]){var P=void 0,N=void 0;for(i=0;i<J.length;i++){if(J[i].id===ae.default.CC1?N=q.getTrackIdxForId(ae.default.CC1):J[i].id===ae.default.CC3&&(N=q.getTrackIdxForId(ae.default.CC3)),-1===N)return void G.warn("CEA-608: data before track is ready.");P=C(0,N),ne[i]=new le.default.Cea608Parser(i+1,{newCue:P},null)}}if($&&-1==te.indexOf(O)){if(null!==ee&&O!==ee+s.numSequences)for(i=0;i<ne.length;i++)ne[i]&&ne[i].reset();for(var L=function(e,t){if(0===t.length)return null;for(var n={splits:[],fields:[[],[]]},r=new DataView(e),i=0;i<t.length;i++)for(var a=t[i],o=le.default.findCea608Nalus(r,a.offset,a.size),s=null,l=0,u=0;u<o.length;u++)for(var d=le.default.extractCea608DataFromRange(r,o[u]),c=0;c<2;c++)0<d[c].length&&(a.cts!==s?l=0:l+=1,n.fields[c].push([a.cts+ie*$,d[c],l]),s=a.cts);return n.fields.forEach(function(e){e.sort(function(e,t){return e[0]===t[0]?e[2]-t[2]:e[0]-t[0]})}),n}(e,s.sampleList),k=0;k<ne.length;k++){var x=L.fields[k],F=ne[k];if(F)for(i=0;i<x.length;i++)F.addData(x[i][0]/$,x[i][1])}ee=O,te.push(O)}}}else G.error("No text type defined")}function B(e){var t=void 0;return 0<=e.search(ae.default.VTT)?t=f:(0<=e.search(ae.default.TTML)||0<=e.search(ae.default.STPP))&&(t=h),t}var o=this.context,s=(0,S.default)(o).getInstance(),l=!1,u=void 0,G=void 0,j=void 0,K=void 0,d=void 0,Y=void 0,c=void 0,H=void 0,f=void 0,h=void 0,p=void 0,q=void 0,V=void 0,W=void 0,z=void 0,g=void 0,X=void 0,m=void 0,Q=void 0,Z=void 0,J=void 0,$=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0;return u={initialize:function(e,t){l||r(),q.setConfig({videoModel:X}),q.initialize(),j||(j=(0,y.default)(o).getInstance()),function(e,t){var n=!d.getIsTextTrack(e);if(t){if(p=p.concat(t.getMediaInfoArr()),n){V=t.getFragmentModel(),u.buffered=(0,E.default)(o).create(),g=c.getTracksFor(ae.default.FRAGMENTED_TEXT,m.getActiveStreamInfo());for(var r=c.getCurrentTrackFor(ae.default.FRAGMENTED_TEXT,m.getActiveStreamInfo()),i=0;i<g.length;i++)if(g[i]===r){a(i);break}}for(var i=0;i<p.length;i++)U(null,p[i])}}(e,t)},append:i,abort:function(){q.deleteAllTextTracks(),V=j=null,p=[],W=!1,g=[]},addEmbeddedTrack:function(e){if(l||r(),e)if(e.id===ae.default.CC1||e.id===ae.default.CC3){for(var t=0;t<J.length;t++)if(J[t].id===e.id)return;J.push(e)}else G.warn("Embedded track "+e.id+" not supported!")},resetEmbedded:function(){s.off(A.default.VIDEO_CHUNK_RECEIVED,n,this),q&&q.deleteAllTextTracks(),l=!1,J=[],ne=[null,null],te=[],ee=null},setConfig:function(e){e&&(e.errHandler&&(K=e.errHandler),e.dashManifestModel&&(d=e.dashManifestModel),e.manifestModel&&(Y=e.manifestModel),e.mediaController&&(c=e.mediaController),e.videoModel&&(X=e.videoModel),e.streamController&&(m=e.streamController),e.textTracks&&(q=e.textTracks),e.vttParser&&(f=e.vttParser),e.ttmlParser&&(h=e.ttmlParser))},getConfig:function(){return{fragmentModel:V,fragmentedTracks:g,videoModel:X}},setCurrentFragmentedTrackIdx:a,remove:function(e,t){void 0===e&&e===t&&(e=this.buffered.start(0),t=this.buffered.end(this.buffered.length-1)),this.buffered.remove(e,t)},reset:function(){e(),q=X=m=null}},G=(0,_.default)(o).getInstance().getLogger(u),e(),u}Object.defineProperty(n,"__esModule",{value:!0});var ae=r(e(101)),oe=e(235),v=r(e(227)),y=r(e(197)),E=r(e(199)),a=r(e(48)),_=r(e(46)),T=r(e(193)),b=r(e(188)),se=r(e(6)),le=r(e(2)),S=r(e(47)),A=r(e(53)),ue=r(e(215)),de=r(e(50));i.__dashjs_factory_name="TextSourceBuffer",n.default=a.default.getSingletonFactory(i),t.exports=n.default},{101:101,188:188,193:193,197:197,199:199,2:2,215:215,227:227,235:235,46:46,47:47,48:48,50:50,53:53,6:6}],193:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function l(e){var t=m[e].kind,n=void 0!==m[e].id?m[e].id:m[e].lang,r=m[e].lang,i=m[e].isTTML,a=m[e].isEmbedded,o=T.addTextTrack(t,n,r);return o.isEmbedded=a,o.isTTML=i,o}function n(e,t){var n=T.getClientWidth(),r=T.getClientHeight(),i=T.getVideoWidth(),a=T.getVideoHeight(),o=T.getVideoRelativeOffsetTop(),s=T.getVideoRelativeOffsetLeft(),l=i/a,u=!1;e.isFromCEA608&&(l=3.5/3,u=!0);var d=function(e,t,n,r,i,a){var o=0,s=0;n/r<e/t?o=(s=t)/r*n:s=(o=e)/n*r;var l,u,d=0,c=0;return i<o/s?d=(c=s)*i:c=(d=o)/i,l=(e-d)/2,u=(t-c)/2,a?{x:l+.1*d,y:u+.1*c,w:.8*d,h:.8*c}:{x:l,y:u,w:d,h:c}}.call(this,n,r,i,a,l,u),c=d.w,f=d.h,h=d.x,p=d.y;if(c!=A||f!=R||h!=b||p!=S||t){if(b=h+s,S=p+o,A=c,R=f,w){var g=w.style;g.left=b+"px",g.top=S+"px",g.width=A+"px",g.height=R+"px",g.zIndex=I&&document[I]||D?M:null,_.trigger(C.default.CAPTION_CONTAINER_RESIZE,{})}var m=e.activeCues;if(m)for(var v=m.length,y=0;y<v;++y){var E=m[y];E.scaleCue(E)}}}function u(e){var t=A,n=R,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0;if(e.cellResolution){var l=[t/e.cellResolution[0],n/e.cellResolution[1]];if(e.linePadding)for(r in e.linePadding)if(e.linePadding.hasOwnProperty(r)){i=(e.linePadding[r]*l[0]).toString();for(var u=document.getElementsByClassName("spanPadding"),d=0;d<u.length;d++)u[d].style.cssText=u[d].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i),u[d].style.cssText=u[d].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}if(e.fontSize){for(r in e.fontSize)if(e.fontSize.hasOwnProperty(r)){"%"===e.fontSize[r][0]?a=e.fontSize[r][1]/100:"c"===e.fontSize[r][0]&&(a=e.fontSize[r][1]),i=(a*l[1]).toString(),s="defaultFontSize"!==r?document.getElementsByClassName(r):document.getElementsByClassName("paragraph");for(var c=0;c<s.length;c++)s[c].style.cssText=s[c].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}if(e.lineHeight)for(r in e.lineHeight)if(e.lineHeight.hasOwnProperty(r)){"%"===e.lineHeight[r][0]?o=e.lineHeight[r][1]/100:"c"===e.fontSize[r][0]&&(o=e.lineHeight[r][1]),i=(o*l[1]).toString(),s=document.getElementsByClassName(r);for(var f=0;f<s.length;f++)s[f].style.cssText=s[f].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}}}if(e.isd){var h=document.getElementById(e.cueID);h&&w.removeChild(h),p(e)}}function p(a){if(w){var e=document.createElement("div");w.appendChild(e),o=(0,O.renderHTML)(a.isd,e,function(e){var t=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,n=/^#(.*)$/;if(t.test(e)){var r=t.exec(e),i=parseInt(r[4],10)-1;return"data:image/png;base64,"+btoa(a.images[i])}if(n.test(e)){i=(r=n.exec(e))[1];return"data:image/png;base64,"+a.embeddedImages[i]}return null},w.clientHeight,w.clientWidth,!1,function(e){h.info("renderCaption :",e)},o,!0),e.id=a.cueID,_.trigger(C.default.CAPTION_RENDERED,{captionDiv:e,currentTrackIdx:y})}}function d(e){return 0<=e&&m[e]?T.getTextTrack(m[e].kind,m[e].id,m[e].lang,m[e].isTTML,m[e].isEmbedded):null}function c(e){if(e!==y){var t=d(y=e);(function(e){r.call(this),e&&"html"===e.renderingType?function(){var e=document.getElementById("native-cue-style");if(!e){(e=document.createElement("style")).id="native-cue-style",document.head.appendChild(e);var t=e.sheet,n=T.getElement();try{n&&(n.id?t.insertRule("#"+n.id+"::cue {background: transparent}",0):0!==n.classList.length?t.insertRule("."+n.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0))}catch(e){h.info(""+e.message)}}}.call(this):function(){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}.call(this)}).call(this,t),i&&(clearInterval(i),i=null),t&&"html"===t.renderingType&&(n.call(this,t,!0),i=setInterval(n.bind(this,t),500))}}function f(e){if(e.cues)for(var t=e.cues,n=t.length-1;0<=n;n--)e.removeCue(t[n])}function r(){if(w)for(;w.firstChild;)w.removeChild(w.firstChild)}var e=this.context,_=(0,a.default)(e).getInstance(),t=void 0,h=void 0,g=void 0,T=void 0,m=void 0,v=void 0,y=void 0,b=void 0,S=void 0,A=void 0,R=void 0,w=void 0,i=void 0,I=void 0,D=void 0,o=void 0,M=void 0;return t={initialize:function(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(g=window.VTTCue||window.TextTrackCue,m=[],v=[],D=!(y=-1),M=2147483647,o=i=w=null,void(R=A=S=b=0)!==document.fullscreenElement?I="fullscreenElement":void 0!==document.webkitIsFullScreen?I="webkitIsFullScreen":document.msFullscreenElement?I="msFullscreenElement":document.mozFullScreen&&(I="mozFullScreen"))},displayCConTop:function(e){D=e,w&&!document[I]&&(w.style.zIndex=e?M:null)},addTextTrack:function(e,t){if(m.length!==t){if(m.push(e),m.length===t){m.sort(function(e,t){return e.index-t.index}),w=T.getTTMLRenderingDiv();for(var n=-1,r=0;r<m.length;r++){var i=l.call(this,r);v.push(i),m[r].defaultTrack&&(i.default=!0,n=r);var a=d(r);a&&(a.mode=E.default.TEXT_SHOWING,w&&(m[r].isTTML||m[r].isEmbedded)?a.renderingType="html":a.renderingType="default"),this.addCaptions(r,0,m[r].captionData),_.trigger(C.default.TEXT_TRACK_ADDED)}if(c.call(this,n),0<=n)for(var o=0;o<m.length;o++){var s=d(o);s&&(s.mode=o===n?E.default.TEXT_SHOWING:E.default.TEXT_HIDDEN)}_.trigger(C.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:y,tracks:m})}}else h.error("Trying to add too many tracks.")},addCaptions:function(e,t,n){var r=d(e),i=this;if(r&&n&&0!==n.length)for(var a=0;a<n.length;a++){var o=void 0,s=n[a];r.cellResolution=s.cellResolution,r.isFromCEA608=s.isFromCEA608,"html"===s.type&&w?((o=new g(s.start-t,s.end-t,"")).cueHTMLElement=s.cueHTMLElement,o.isd=s.isd,o.images=s.images,o.embeddedImages=s.embeddedImages,o.cueID=s.cueID,o.scaleCue=u.bind(i),o.cellResolution=s.cellResolution,o.lineHeight=s.lineHeight,o.linePadding=s.linePadding,o.fontSize=s.fontSize,w.style.left=b+"px",w.style.top=S+"px",w.style.width=A+"px",w.style.height=R+"px",o.onenter=function(){r.mode===E.default.TEXT_SHOWING&&(this.isd?(p(this),h.debug("Cue enter id:"+this.cueID)):(w.appendChild(this.cueHTMLElement),u.call(i,this),_.trigger(C.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:y})))},o.onexit=function(){if(w)for(var e=w.childNodes,t=0;t<e.length;++t)e[t].id===this.cueID&&(h.debug("Cue exit id:"+e[t].id),w.removeChild(e[t]))}):s.data&&(o=new g(s.start-t,s.end-t,s.data),s.styles&&(void 0!==s.styles.align&&"align"in o&&(o.align=s.styles.align),void 0!==s.styles.line&&"line"in o&&(o.line=s.styles.line),void 0!==s.styles.position&&"position"in o&&(o.position=s.styles.position),void 0!==s.styles.size&&"size"in o&&(o.size=s.styles.size)),o.onenter=function(){r.mode===E.default.TEXT_SHOWING&&_.trigger(C.default.CAPTION_RENDERED,{currentTrackIdx:y})});try{o?r.addCue(o):h.error("impossible to display subtitles.")}catch(e){throw f(r),r.addCue(o),e}}},getCurrentTrackIdx:function(){return y},setCurrentTrackIdx:c,getTrackIdxForId:function(e){for(var t=-1,n=0;n<m.length;n++)if(m[n].id===e){t=n;break}return t},getCurrentTrackInfo:function(){return m[y]},setModeForTrackIdx:function(e,t){var n=d(e);n&&n.mode!==t&&(n.mode=t)},deleteCuesFromTrackIdx:function(e){var t=d(e);t&&f(t)},deleteAllTextTracks:function(){for(var e=v?v.length:0,t=0;t<e;t++){var n=d(t);n&&(f.call(this,n),n.mode="disabled")}v=[],m=[],i&&(clearInterval(i),i=null),y=-1,r.call(this)},deleteTextTrack:function(e){T.removeChild(v[e]),v.splice(e,1)},setConfig:function(e){e&&e.videoModel&&(T=e.videoModel)}},h=(0,s.default)(e).getInstance().getLogger(t),t}Object.defineProperty(n,"__esModule",{value:!0});var E=r(e(101)),a=r(e(47)),C=r(e(53)),o=r(e(48)),s=r(e(46)),O=e(41);i.__dashjs_factory_name="TextTracks",n.default=o.default.getSingletonFactory(i),t.exports=n.default},{101:101,41:41,46:46,47:47,48:48,53:53}],194:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){d&&d.reset()}var n,r=this.context,d=void 0;return n={get:function(e,t){var n=d.getCurrentTrack();if(!n||n.segmentDuration<=0||null==e)return null;var r,i,a,o=Math.floor(e/n.segmentDuration),s=e%n.segmentDuration,l=Math.floor(s*n.tilesHor*n.tilesVert/n.segmentDuration),u=new c.default;return u.width=Math.floor(n.widthPerTile),u.height=Math.floor(n.heightPerTile),u.x=Math.floor(l%n.tilesHor)*n.widthPerTile,u.y=Math.floor(l/n.tilesHor)*n.heightPerTile,"readThumbnail"in n?n.readThumbnail(e,function(e){u.url=e,t&&t(u)}):(u.url=(i=o+(r=n).startNumber,a=(0,f.replaceTokenForTemplate)(r.templateUrl,"Number",i),a=(0,f.replaceTokenForTemplate)(a,"Time",(i-1)*r.segmentDuration),a=(0,f.replaceTokenForTemplate)(a,"Bandwidth",r.bandwidth),(0,f.unescapeDollarsInTemplate)(a)),t&&t(u),u)},setTrackByIndex:function(e){d.setTrackByIndex(e)},getCurrentTrackIndex:function(){return d.getCurrentTrackIndex()},getBitrateList:function(){var n=0;return d.getTracks().map(function(e){var t=new l.default;return t.mediaType=o.default.IMAGE,t.qualityIndex=n++,t.bitrate=e.bitrate,t.width=e.width,t.height=e.height,t})},reset:t},t(),d=(0,s.default)(r).create({dashManifestModel:e.dashManifestModel,adapter:e.adapter,baseURLController:e.baseURLController,stream:e.stream,timelineConverter:e.timelineConverter}),n}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(48)),o=r(e(101)),c=r(e(228)),s=r(e(195)),l=r(e(214)),f=e(77);i.__dashjs_factory_name="ThumbnailController",n.default=a.default.getClassFactory(i),t.exports=n.default},{101:101,195:195,214:214,228:228,48:48,77:77}],195:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){n(),v=(0,I.default)(a).create({}),E=(0,w.default)(a).getInstance(),(y=(0,R.default)(a).getInstance()).setConfig({baseURLController:s,metricsModel:c,mediaPlayerModel:f,errHandler:h}),function(){if(u&&l&&o){var e=u.getStreamInfo();if(e){var t=o.getMediaInfoForType(e,_.default.IMAGE);if(t){var n=o.getDataForMedia(t);if(n){var r=l.getRepresentationsForAdaptation(n);r&&0<r.length&&r.forEach(function(e){e.segmentInfoType===T.default.SEGMENT_TEMPLATE&&0<e.segmentDuration&&e.media&&i(e),e.segmentInfoType===T.default.SEGMENT_BASE&&i(e,!0)}),0<g.length&&(g.sort(function(e,t){return e.bitrate-t.bitrate}),m=g.length-1)}}}}}()}function i(e,t){var n,r,i=new b.default;i.id=e.id,i.bitrate=e.bandwidth,i.width=e.width,i.height=e.height,i.tilesHor=1,i.tilesVert=1,e.essentialProperties&&e.essentialProperties.forEach(function(e){if(0<=D.indexOf(e.schemeIdUri)&&e.value){var t=e.value.split("x");2!==t.length||isNaN(t[0])||isNaN(t[1])||(i.tilesHor=parseInt(t[0],10),i.tilesVert=parseInt(t[1],10))}}),t?y.loadSegments(e,_.default.IMAGE,e.indexRange,{},function(e,r){var o=[];e=function(e,t){var n,r=[],i=0,a=void 0,o=void 0,s=void 0;for(a=0,n=e.length;a<n;a++)o=e[a],s=(0,A.getTimeBasedSegment)(d,l.getIsDynamic(),t,o.startTime,o.duration,o.timescale,o.media,o.mediaRange,i),r.push(s),s=null,i++;return r}(e,r),i.segmentDuration=e[0].duration,i.readThumbnail=function(t,a){var n=null;o.some(function(e){if(e.start<=t&&e.end>t)return n=e.url,!0}),n?a(n):e.some(function(i){if(i.mediaStartTime<=t&&i.mediaStartTime+i.duration>t){var e=s.resolve(r.path);return v.load({method:"get",url:e.url,request:{range:i.mediaRange,responseType:"arraybuffer"},onload:function(e){var t=E.getSamplesInfo(e.target.response),n=new Blob([e.target.response.slice(t.sampleList[0].offset,t.sampleList[0].offset+t.sampleList[0].size)],{type:"image/jpeg"}),r=window.URL.createObjectURL(n);o.push({start:i.mediaStartTime,end:i.mediaStartTime+i.duration,url:r}),a&&a(r)}}),!0}})}}):(i.startNumber=e.startNumber,i.segmentDuration=e.segmentDuration,i.timescale=e.timescale,i.templateUrl=(n=e,(r=p.isRelative(n.media)?p.resolve(n.media,s.resolve(n.path).url):n.media)?(0,A.replaceIDForTemplate)(r,n.id):"")),0<i.tilesHor&&0<i.tilesVert&&(i.widthPerTile=i.width/i.tilesHor,i.heightPerTile=i.height/i.tilesVert,g.push(i))}function n(){g=[],m=-1}var r,a=this.context,l=e.dashManifestModel,o=e.adapter,s=e.baseURLController,u=e.stream,d=e.timelineConverter,c=e.metricsModel,f=e.mediaPlayerModel,h=e.errHandler,p=(0,S.default)(a).getInstance(),g=void 0,m=void 0,v=void 0,y=void 0,E=void 0;return r={initialize:t,getTracks:function(){return g},reset:n,setTrackByIndex:function(e){g&&0!==g.length&&(e>=g.length&&(e=g.length-1),m=e)},getCurrentTrack:function(){return m<0?null:g[m]},getCurrentTrackIndex:function(){return m}},t(),r}Object.defineProperty(n,"__esModule",{value:!0});var _=r(e(101)),T=r(e(60)),a=r(e(48)),b=r(e(229)),S=r(e(210)),A=e(77),R=r(e(58)),w=r(e(197)),I=r(e(149)),D=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];n.THUMBNAILS_SCHEME_ID_URIS=D,i.__dashjs_factory_name="ThumbnailTracks",n.default=a.default.getClassFactory(i)},{101:101,149:149,197:197,210:210,229:229,48:48,58:58,60:60,77:77}],196:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function i(){r.reset()}var e,t=this.context,a=(0,d.default)(t).getInstance(),n=void 0,r=void 0,o=void 0,s=void 0,l=void 0;return e={chooseSelectorFromManifest:function(e){(function(){if(!n||!n.hasOwnProperty("getIsDVB"))throw new Error(m.default.MISSING_CONFIG_ERROR)})(),l=n.getIsDVB(e)?s:o},select:function(e){if(e){var t=e.baseUrls,n=e.selectedIdx;if(!isNaN(n))return t[n];var r=l.select(t);return r?(e.selectedIdx=t.indexOf(r),r):(a.trigger(c.default.URL_RESOLUTION_FAILED,{error:new g.default(u.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,u.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(l===o&&i()))}},reset:i,setConfig:function(e){e.selector&&(l=e.selector),e.dashManifestModel&&(n=e.dashManifestModel)}},r=(0,f.default)(t).create({updateEventName:c.default.SERVICE_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:c.default.SERVICE_LOCATION_BLACKLIST_ADD}),o=(0,p.default)(t).create({blacklistController:r}),s=(0,h.default)(t).create({blacklistController:r}),l=o,e}Object.defineProperty(n,"__esModule",{value:!0});var u=r(e(50)),d=r(e(47)),c=r(e(53)),f=r(e(106)),h=r(e(213)),p=r(e(212)),a=r(e(48)),g=r(e(215)),m=r(e(101));i.__dashjs_factory_name="BaseURLSelector",n.default=a.default.getClassFactory(i),t.exports=n.default},{101:101,106:106,212:212,213:213,215:215,47:47,48:48,50:50,53:53}],197:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function N(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var t=l.default.parseBuffer(e),n=(0,s.default)(r).create();return n.setData(t),n}var a=void 0,e=void 0,r=this.context;return e={parse:N,findLastTopIsoBoxCompleted:function(e,t,n){if(void 0===n&&(n=0),!t||n+8>=t.byteLength)return new f.default(0,!1);for(var r=t instanceof ArrayBuffer?new Uint8Array(t):t,i=void 0,a=0;n<r.byteLength;){var o=(d=r)[(c=n)+3]>>>0|d[c+2]<<8>>>0|d[c+1]<<16>>>0|d[c]<<24>>>0,s=(l=r,u=n+4,String.fromCharCode(l[u++])+String.fromCharCode(l[u++])+String.fromCharCode(l[u++])+String.fromCharCode(l[u]));if(0===o)break;n+o<=r.byteLength&&(0<=e.indexOf(s)?i=new f.default(n,!0,o):a=n+o),n+=o}var l,u,d,c;return i||new f.default(a,!1)},getMediaTimescaleFromMoov:function(e){var t=N(e),n=t?t.getBox("mdhd"):void 0;return n?n.timescale:NaN},getSamplesInfo:function(e){if(!e||0===e.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var t,n,r=N(e),i=r.getBoxes("moof"),a=r.getBoxes("mfhd"),o=void 0,s=void 0,l=void 0,u=void 0,d=void 0,c=void 0,f=void 0,h=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,E=void 0;n=r.getBoxes("moof").length,t=a[a.length-1].sequence_number,d=[];var _=-1,T=-1;for(g=s=0;g<i.length;g++){var b=i[g],S=b.getChildBoxes("traf");for(h=0;h<S.length;h++){var A=S[h],R=A.getChildBox("tfhd"),w=A.getChildBox("tfdt");u=w.baseMediaDecodeTime;var I=A.getChildBoxes("trun"),D=A.getChildBoxes("subs");for(p=0;p<I.length;p++){var M=I[p];for(s=M.sample_count,y=(R.base_data_offset||0)+(M.data_offset||0),f=0;f<s;f++){o=void 0!==(c=M.samples[f]).sample_duration?c.sample_duration:R.default_sample_duration,l=void 0!==c.sample_size?c.sample_size:R.default_sample_size;var C={dts:u,cts:u+(void 0!==c.sample_composition_time_offset?c.sample_composition_time_offset:0),duration:o,offset:b.offset+y,size:l,subSizes:[l]};if(D)for(m=0;m<D.length;m++){var O=D[m];if(_<O.entry_count-1&&T<f&&(_++,T+=O.entries[_].sample_delta),f==T){C.subSizes=[];var P=O.entries[_];for(v=0;v<P.subsample_count;v++)C.subSizes.push(P.subsamples[v].subsample_size)}}d.push(C),y+=l,u+=o}}E=u-w.baseMediaDecodeTime}}return{sampleList:d,lastSequenceNumber:t,totalDuration:E,numSequences:n}},findInitRange:function(e){var t=null,n=N(e);if(!n)return t;var r=n.getBox("ftyp"),i=n.getBox("moov");return a.debug("Searching for initialization."),i&&i.isComplete&&(t=(r?r.offset:i.offset)+"-"+(i.offset+i.size-1),a.debug("Found the initialization.  Range: "+t)),t}},a=(0,o.default)(r).getInstance().getLogger(e),e}Object.defineProperty(n,"__esModule",{value:!0});var o=r(e(46)),s=r(e(204)),a=r(e(48)),l=r(e(6)),f=r(e(220));i.__dashjs_factory_name="BoxParser",n.default=a.default.getSingletonFactory(i),t.exports=n.default},{204:204,220:220,46:46,48:48,6:6}],198:[function(e,t,n){"use strict";function r(){var e,t=void 0;return t=!(e={supportsMediaSource:function(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t},supportsEncryptedMedia:function(){return t},supportsCodec:function(e){return!!("MediaSource"in window&&MediaSource.isTypeSupported(e))||!!("WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(e))},setEncryptedMediaSupported:function(e){t=e}}),e}Object.defineProperty(n,"__esModule",{value:!0});var i,a=e(48),o=(i=a)&&i.__esModule?i:{default:i};r.__dashjs_factory_name="Capabilities",n.default=o.default.getSingletonFactory(r),t.exports=n.default},{48:48}],199:[function(e,t,n){"use strict";function r(){return{customTimeRangeArray:[],length:0,add:function(e,t){var n=0;for(n=0;n<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:e,end:t}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(e,t){for(var n=0;n<this.customTimeRangeArray.length;n++)if(e<=this.customTimeRangeArray[n].start&&t>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else{if(e>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:t,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=e;break}e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=e:t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=t)}this.length=this.customTimeRangeArray.length},mergeRanges:function(e,t){var n=this.customTimeRangeArray[e],r=this.customTimeRangeArray[t];return n.start<=r.start&&r.start<=n.end&&n.end<=r.end?(n.end=r.end,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&r.end<=n.end?(n.start=r.start,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&n.end<=r.end?(this.customTimeRangeArray.splice(e,1),!0):n.start<=r.start&&r.start<=n.end&&r.end<=n.end&&(this.customTimeRangeArray.splice(t,1),!0)},start:function(e){return(0,s.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].start},end:function(e){return(0,s.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].end}}}Object.defineProperty(n,"__esModule",{value:!0});var i,a=e(48),o=(i=a)&&i.__esModule?i:{default:i},s=e(208);r.__dashjs_factory_name="CustomTimeRanges",n.default=o.default.getClassFactory(r),t.exports=n.default},{208:208,48:48}],200:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function n(e){if(void 0!==a)return a;a=!1;var t=void 0;try{"undefined"!=typeof window&&(t=window[e])}catch(e){return u.warn("DOMStorage access denied: "+e.message),a}if(!t||e!==g&&"sessionStorage"!==e)return a;try{t.setItem("1","1"),t.removeItem("1"),a=!0}catch(e){u.warn("DOMStorage is supported, but cannot be used: "+e.message)}return a}function r(){return 6e5*Math.round((new Date).getTime()/6e5)}function o(e,t){return n(e)&&l["get"+t+"CachingInfo"]().enabled}function s(){if(!l||!l.hasOwnProperty("getLastMediaSettingsCachingInfo"))throw new Error(c.default.MISSING_CONFIG_ERROR)}e=e||{};var t=this.context,l=e.mediaPlayerModel,i=void 0,u=void 0,a=void 0;return i={getSavedBitrateSettings:function(e){var t=NaN;if(s(),o(g,m)){var n=h.replace(/\?/,e);try{var r=JSON.parse(localStorage.getItem(n))||{},i=(new Date).getTime()-parseInt(r.timestamp,10)>=l.getLastMediaSettingsCachingInfo().ttl||!1,a=parseFloat(r.bitrate);isNaN(a)||i?i&&localStorage.removeItem(n):(t=a,u.debug("Last saved bitrate for "+e+" was "+a))}catch(e){return null}}return t},setSavedBitrateSettings:function(e,t){if(o(g,m)&&t){var n=h.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({bitrate:t.toFixed(3),timestamp:r()}))}catch(e){u.error(e.message)}}},getSavedMediaSettings:function(e){if(s(),!o(g,v))return null;var t=null,n=p.replace(/\?/,e);try{var r=JSON.parse(localStorage.getItem(n))||{},i=(new Date).getTime()-parseInt(r.timestamp,10)>=l.getLastMediaSettingsCachingInfo().ttl||!1;t=r.settings,i&&(localStorage.removeItem(n),t=null)}catch(e){return null}return t},setSavedMediaSettings:function(e,t){if(o(g,v)){var n=p.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({settings:t,timestamp:r()}))}catch(e){u.error(e.message)}}}},u=(0,d.default)(t).getInstance().getLogger(i),n(g)&&f.forEach(function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(e){u.error(e.message)}}}),i}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(48)),d=r(e(46)),c=r(e(101)),f=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],h="dashjs_?_bitrate",p="dashjs_?_settings",g="localStorage",m="LastBitrate",v="LastMediaSettings";i.__dashjs_factory_name="DOMStorage";var o=a.default.getSingletonFactory(i);n.default=o,t.exports=n.default},{101:101,46:46,48:48}],201:[function(e,t,n){"use strict";function r(e){function i(e,t){var n=!0,r=0;if(void 0===t&&(t=!1),r=16777215<e.tag?(s.getUint32(l)!==e.tag&&(n=!1),4):65535<e.tag?(256*s.getUint16(l)+s.getUint8(l+2)!==e.tag&&(n=!1),3):255<e.tag?(s.getUint16(l)!==e.tag&&(n=!1),2):(s.getUint8(l)!==e.tag&&(n=!1),1),!n&&e.required&&!t)throw new Error("required tag not found");return n&&(l+=r),n}function a(e){var t=1,n=128,r=-1,i=0,a=s.getUint8(l),o=0;for(o=0;o<8;o+=1){if((a&n)===n){i=void 0===e?a&~n:a,r=o;break}n>>=1}for(o=0;o<r;o+=1,t+=1)i=i<<8|255&s.getUint8(l+t);return l+=t,i}e=e||{};var n=void 0,s=new DataView(e.data),l=0;return n={getPos:function(){return l},setPos:function(e){l=e},consumeTag:i,consumeTagAndSize:function(e,t){var n=i(e,t);return n&&a(),n},parseTag:function(e){var t;return i(e),t=a(),n[e.parse](t)},skipOverElement:function(e,t){var n=i(e,t),r=void 0;return n&&(r=a(),l+=r),n},getMatroskaCodedNum:a,getMatroskaFloat:function(e){var t=void 0;switch(e){case 4:t=s.getFloat32(l),l+=4;break;case 8:t=s.getFloat64(l),l+=8}return t},getMatroskaUint:function(e){for(var t=0,n=0;n<e;n+=1)t<<=8,t|=255&s.getUint8(l+n);return l+=e,t},moreData:function(){return l<s.byteLength}}}Object.defineProperty(n,"__esModule",{value:!0});var i,a=e(48),o=(i=a)&&i.__esModule?i:{default:i};r.__dashjs_factory_name="EBMLParser",n.default=o.default.getClassFactory(r),t.exports=n.default},{48:48}],202:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){var e=this.context,i=(0,a.default)(e).getInstance();return{capabilityError:function(e){i.trigger(o.default.ERROR,{error:"capability",event:e})},downloadError:function(e,t,n){i.trigger(o.default.ERROR,{error:"download",event:{id:e,url:t,request:n}})},manifestError:function(e,t,n,r){i.trigger(o.default.ERROR,{error:"manifestError",event:{message:e,id:t,manifest:n,event:r}})},timedTextError:function(e,t,n){i.trigger(o.default.ERROR,{error:"cc",event:{message:e,id:t,cc:n}})},mediaSourceError:function(e){i.trigger(o.default.ERROR,{error:"mediasource",event:e})},mediaKeySessionError:function(e){i.trigger(o.default.ERROR,{error:"key_session",event:e})},mediaKeyMessageError:function(e){i.trigger(o.default.ERROR,{error:"key_message",event:e})},error:function(e){i.trigger(o.default.ERROR,{error:e})}}}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(47)),o=r(e(53)),s=r(e(48));i.__dashjs_factory_name="ErrorHandler",n.default=s.default.getSingletonFactory(i),t.exports=n.default},{47:47,48:48,53:53}],203:[function(e,t,n){"use strict";function r(){var r={};return{save:function(e){var t=e.streamId,n=e.representationId;r[t]=r[t]||{},r[t][n]=e},extract:function(e,t){return r&&r[e]&&r[e][t]?r[e][t]:null},reset:function(){r={}}}}Object.defineProperty(n,"__esModule",{value:!0});var i,a=e(48),o=(i=a)&&i.__esModule?i:{default:i};r.__dashjs_factory_name="InitCache",n.default=o.default.getSingletonFactory(r),t.exports=n.default},{48:48}],204:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function t(e){var t=[];if(!e||!s||"function"!=typeof s.fetchAll)return t;for(var n=s.fetchAll(e),r=void 0,i=0,a=n.length;i<a;i++)(r=o(n[i]))&&t.push(r);return t}function o(e){if(!e)return null;var t=new a.default(e);return e.hasOwnProperty("_incomplete")&&(t.isComplete=!e._incomplete),t}var s=void 0;return{getBox:function(e){return e&&s&&s.boxes&&0!==s.boxes.length&&"function"==typeof s.fetch?o(s.fetch(e)):null},getBoxes:t,setData:function(e){s=e},getLastBox:function(){if(!s||!s.boxes||!s.boxes.length)return null;var e=t(s.boxes[s.boxes.length-1].type);return 0<e.length?e[e.length-1]:null}}}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(219)),o=r(e(48));i.__dashjs_factory_name="IsoFile",n.default=o.default.getClassFactory(i),t.exports=n.default},{219:219,48:48}],205:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var r=(e=e||{}).timelineConverter,i=e.streamProcessor;return{getLiveEdge:function(){!function(){if(!(r&&r.hasOwnProperty("getExpectedLiveEdge")&&i&&i.hasOwnProperty("getRepresentationInfo")))throw new Error(o.default.MISSING_CONFIG_ERROR)}();var e=i.getRepresentationInfo(),t=e.DVRWindow?e.DVRWindow.end:0,n=t;return e.useCalculatedLiveEdgeTime&&(n=r.getExpectedLiveEdge(),r.setClientTimeOffset(n-t)),n},reset:function(){i=r=null}}}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(48)),o=r(e(101));i.__dashjs_factory_name="LiveEdgeFinder",n.default=a.default.getClassFactory(i),t.exports=n.default},{101:101,48:48}],206:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return{areEqual:function(e,t){return(0,o.default)(e,t)}}}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(48)),o=r(e(7));i.__dashjs_factory_name="ObjectUtils",n.default=a.default.getSingletonFactory(i),t.exports=n.default},{48:48,7:7}],207:[function(e,t,n){"use strict";function r(){return{modifyRequestURL:function(e){return e},modifyRequestHeader:function(e){return e}}}Object.defineProperty(n,"__esModule",{value:!0});var i,a=e(48),o=(i=a)&&i.__esModule?i:{default:i};r.__dashjs_factory_name="RequestModifier",n.default=o.default.getSingletonFactory(r),t.exports=n.default},{48:48}],208:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.checkParameterType=function(e,t){if(typeof e!==t)throw a.default.BAD_ARGUMENT_ERROR},n.checkInteger=function(e){if(null===e||isNaN(e)||e%1!=0)throw a.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"},n.checkRange=function(e,t,n){if(e<t||n<e)throw a.default.BAD_ARGUMENT_ERROR+" : argument out of range"},n.checkIsVideoOrAudioType=function(e){if("string"!=typeof e||e!==a.default.AUDIO&&e!==a.default.VIDEO)throw a.default.BAD_ARGUMENT_ERROR};var r,i=e(101),a=(r=i)&&r.__esModule?r:{default:r}},{101:101}],209:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){var e=this.context,E=(0,s.default)(e).getInstance(),t=void 0,_=void 0,T=0;return t={parse:function(e,t,n,r,i){var a="",o=[],s=void 0,l=void 0,u=void 0,d={},c={},f="",h="",p={onOpenTag:function(e,t,n){if("image"===t&&"http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===e){if(!n[" imagetype"]||"PNG"!==n[" imagetype"].value)return void _.warn("smpte-tt imagetype != PNG. Discarded");f=n["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){f&&(c[f]=h.trim()),f=h=""},onText:function(e){f&&(h+=e)}};if(!e)throw a="no ttml data to parse",new Error(a);d.data=e,E.trigger(b.default.TTML_TO_PARSE,d);var g=(0,S.fromXML)(d.data,function(e){a=e},p);E.trigger(b.default.TTML_PARSED,{ttmlString:d.data,ttmlDoc:g});var m,v=g.getMediaTimeEvents();for(u=0;u<v.length;u++){var y=(0,S.generateISD)(g,v[u],function(e){a=e});y.contents.some(function(e){return e.contents.length})&&(s=v[u]+t<n?n:v[u]+t)<(l=v[u+1]+t>r?r:v[u+1]+t)&&o.push({start:s,end:l,type:"html",cueID:(m="cue_TTML_"+T,T++,m),isd:y,images:i,embeddedImages:c})}if(""!==a)throw _.error(a),new Error(a);return o}},_=(0,o.default)(e).getInstance().getLogger(t),t}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(48)),o=r(e(46)),s=r(e(47)),b=r(e(53)),S=e(41);i.__dashjs_factory_name="TTMLParser",n.default=a.default.getSingletonFactory(i),t.exports=n.default},{41:41,46:46,47:47,48:48,53:53}],210:[function(e,t,n){"use strict";function r(){function i(e){var t=e.indexOf("/"),n=e.lastIndexOf("/");return-1!==t?n===t+1?e:(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),e.substring(0,n+1)):""}function a(e){var t=e.match(c);return t?t[1]:""}function o(e){var t=e.match(r);return t?t[0]:""}function s(e){return!r.test(e)}function l(e){return s(e)&&"/"===e.charAt(0)}function u(e){return 0===e.indexOf("//")}var n=void 0,r=/^[a-z][a-z0-9+\-.]*:/i,t=/^https?:\/\//i,d=/^https:\/\//i,c=/^([a-z][a-z0-9+\-.]*:\/\/[^\/]+)\/?/i,e=function(t,e){try{return new window.URL(t,e).toString()}catch(e){return t}},f=function(e,t){var n=i;if(!t)return e;if(!s(e))return e;l(e)&&(n=a),u(e)&&(n=o);var r=n(t);return[r,e].join("/"!==r.charAt(r.length-1)&&"/"!==e.charAt(0)?"/":"")};return function(){try{new window.URL("x","http://y"),n=e}catch(e){}finally{n=n||f}}(),{parseBaseUrl:i,parseOrigin:a,parseScheme:o,isRelative:s,isPathAbsolute:l,isSchemeRelative:u,isHTTPURL:function(e){return t.test(e)},isHTTPS:function(e){return d.test(e)},resolve:function(e,t){return n(e,t)}}}Object.defineProperty(n,"__esModule",{value:!0});var i,a=e(48),o=(i=a)&&i.__esModule?i:{default:i};r.__dashjs_factory_name="URLUtils",n.default=o.default.getSingletonFactory(r),t.exports=n.default},{48:48}],211:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function p(e){var t=e.split(":"),n=t.length-1;return e=60*parseInt(t[n-1],10)+parseFloat(t[n]),2===n&&(e+=3600*parseInt(t[0],10)),e}function g(e,t){for(var n,r=t,i="",a="";""!==e[r]&&r<e.length;)r++;if(1<(n=r-t))for(var o=0;o<n;o++){if((a=e[t+o]).match(y)){i="";break}i+=a,o!==n-1&&(i+="\n")}else(a=e[t]).match(y)||(i=a);return i}var e=this.context,t=void 0,m=void 0,v=void 0,y=void 0,E=void 0,_=void 0;return t={parse:function(e){var t,n,r,i=[],a=void 0;if(!e)return i;t=(e=e.split(v)).length,a=-1;for(var o=0;o<t;o++){var s=e[o];if(0<s.length&&"WEBVTT"!==s&&s.match(y)){var l=(r=n=void 0,n=s.split(y),(r=n[1].split(_)).shift(),n[1]=r[0],r.shift(),{cuePoints:n,styles:function(e){var n={};return e.forEach(function(e){if(1<e.split(/:/).length){var t=e.split(/:/)[1];t&&-1!=t.search(/%/)&&(t=parseInt(t.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(n.align=t),(e.match(/line/)||e.match(/L/))&&(n.line=t),(e.match(/position/)||e.match(/P/))&&(n.position=t),(e.match(/size/)||e.match(/S/))&&(n.size=t)}}),n}(r)}),u=l.cuePoints,d=l.styles,c=g(e,o+1),f=p(u[0].replace(E,"")),h=p(u[1].replace(E,""));!isNaN(f)&&!isNaN(h)&&a<=f&&f<h?""!==c?(a=f,i.push({start:f,end:h,data:c,styles:d})):m.error("Skipping cue due to empty/malformed cue text"):m.error("Skipping cue due to incorrect cue timing")}}return i}},m=(0,o.default)(e).getInstance().getLogger(t),v=/(?:\r\n|\r|\n)/gm,y=/-->/,E=/(^[\s]+|[\s]+$)/g,_=/\s\b/g,t}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(48)),o=r(e(46));i.__dashjs_factory_name="VTTParser",n.default=a.default.getSingletonFactory(i),t.exports=n.default},{46:46,48:48}],212:[function(e,t,n){"use strict";function r(e){var r=(e=e||{}).blacklistController;return{select:function(e){var n=0,t=void 0;return e&&e.some(function(e,t){return n=t,!r.contains(e.serviceLocation)})&&(t=e[n]),t}}}Object.defineProperty(n,"__esModule",{value:!0});var i,a=e(48),o=(i=a)&&i.__esModule?i:{default:i};r.__dashjs_factory_name="BasicSelector",n.default=o.default.getClassFactory(r),t.exports=n.default},{48:48}],213:[function(e,t,n){"use strict";function r(e){var n=(e=e||{}).blacklistController;return{select:function(e){return e&&function(e){var t=0,n=[],r=0,i=void 0,a=void 0;if((a=e.sort(function(e,t){var n=e.dvb_priority-t.dvb_priority;return isNaN(n)?0:n}).filter(function(e,t,n){return!t||n[0].dvb_priority&&e.dvb_priority&&n[0].dvb_priority===e.dvb_priority})).length)return 1<a.length&&(a.forEach(function(e){t+=e.dvb_weight,n.push(t)}),i=Math.floor(Math.random()*(t-1)),n.every(function(e,t){return r=t,!(i<e)})),a[r]}((t=[],e.filter(function(e){return!n.contains(e.serviceLocation)||(e.dvb_priority&&t.push(e.dvb_priority),!1)}).filter(function(e){return!t.length||!e.dvb_priority||-1===t.indexOf(e.dvb_priority)})));var t}}}Object.defineProperty(n,"__esModule",{value:!0});var i,a=e(48),o=(i=a)&&i.__esModule?i:{default:i};r.__dashjs_factory_name="DVBSelector",n.default=o.default.getClassFactory(r),t.exports=n.default},{48:48}],214:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN},t.exports=n.default},{}],215:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n,r){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.code=t||null,this.message=n||null,this.data=r||null},t.exports=n.default},{}],216:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},t.exports=n.default},{}],217:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.action=e.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null};r.ACTION_DOWNLOAD="download",r.ACTION_COMPLETE="complete",n.default=r,t.exports=n.default},{}],218:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(217),a=(r=i)&&r.__esModule?r:{default:r},o=function(e){function t(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=a,n=o,r=!0,s=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.url=e||null,this.checkForExistenceOnly=!0}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),t}();n.default=o,t.exports=n.default},{217:217}],219:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=function(){function a(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.offset=e._offset,this.type=e.type,this.size=e.size,this.boxes=[],e.boxes)for(var t=0;t<e.boxes.length;t++)this.boxes.push(new a(e.boxes[t]));switch(this.isComplete=!0,e.type){case"sidx":if(this.timescale=e.timescale,this.earliest_presentation_time=e.earliest_presentation_time,this.first_offset=e.first_offset,this.references=e.references,e.references){this.references=[];for(t=0;t<e.references.length;t++){var n={reference_type:e.references[t].reference_type,referenced_size:e.references[t].referenced_size,subsegment_duration:e.references[t].subsegment_duration};this.references.push(n)}}break;case"emsg":this.id=e.id,this.value=e.value,this.timescale=e.timescale,this.scheme_id_uri=e.scheme_id_uri,this.presentation_time_delta=1===e.version?e.presentation_time:e.presentation_time_delta,this.event_duration=e.event_duration,this.message_data=e.message_data;break;case"mdhd":this.timescale=e.timescale;break;case"mfhd":this.sequence_number=e.sequence_number;break;case"subs":this.entry_count=e.entry_count,this.entries=e.entries;break;case"tfhd":this.base_data_offset=e.base_data_offset,this.sample_description_index=e.sample_description_index,this.default_sample_duration=e.default_sample_duration,this.default_sample_size=e.default_sample_size,this.default_sample_flags=e.default_sample_flags,this.flags=e.flags;break;case"tfdt":this.version=e.version,this.baseMediaDecodeTime=e.baseMediaDecodeTime,this.flags=e.flags;break;case"trun":if(this.sample_count=e.sample_count,this.first_sample_flags=e.first_sample_flags,this.data_offset=e.data_offset,this.flags=e.flags,this.samples=e.samples,e.samples){this.samples=[];t=0;for(var r=e.samples.length;t<r;t++){var i={sample_size:e.samples[t].sample_size,sample_duration:e.samples[t].sample_duration,sample_composition_time_offset:e.samples[t].sample_composition_time_offset};this.samples.push(i)}}}}return r(a,[{key:"getChildBox",value:function(e){for(var t=0;t<this.boxes.length;t++)if(this.boxes[t].type===e)return this.boxes[t]}},{key:"getChildBoxes",value:function(e){for(var t=[],n=0;n<this.boxes.length;n++)this.boxes[n].type===e&&t.push(this.boxes[n]);return t}}]),a}();n.default=i,t.exports=n.default},{}],220:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n,r){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.lastCompletedOffset=t,this.found=n,this.size=r},t.exports=n.default},{}],221:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.DVRWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null},t.exports=n.default},{}],222:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null}return r(e,[{key:"isMediaInfoEqual",value:function(e){if(!e)return!1;var t=this.id===e.id,n=this.viewpoint===e.viewpoint,r=this.lang===e.lang,i=this.roles.toString()===e.roles.toString(),a=this.accessibility.toString()===e.accessibility.toString(),o=this.audioChannelConfiguration.toString()===e.audioChannelConfiguration.toString();return t&&n&&r&&i&&a&&o}}]),e}();n.default=i,t.exports=n.default},{}],223:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},t.exports=n.default},{}],224:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},t.exports=n.default},{}],225:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},t.exports=n.default},{}],226:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(101)),a=r(e(217)),o=function(e){function n(e,t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=a,n=o,r=!0,s=u=void 0}}(Object.getPrototypeOf(n.prototype),"constructor",this).call(this),this.url=e||null,this.type=t||null,this.mediaType=i.default.STREAM,this.responseType=""}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.default),n}();n.default=o,t.exports=n.default},{101:101,217:217}],227:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.captionData=null,this.label=null,this.lang=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1},t.exports=n.default},{}],228:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},t.exports=n.default},{}],229:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""},t.exports=n.default},{}],230:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null},t.exports=n.default},{}],231:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.t=null,this.level=null},t.exports=n.default},{}],232:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(107),a=(r=i)&&r.__esModule?r:{default:r};n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.target=null,this.state=a.default.BUFFER_EMPTY},t.exports=n.default},{107:107}],233:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.time=null,this.range=null,this.manifestInfo=null},t.exports=n.default},{}],234:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.time=null,this.droppedFrames=null},t.exports=n.default},{}],235:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null};i.GET="GET",i.HEAD="HEAD",i.MPD_TYPE="MPD",i.XLINK_EXPANSION_TYPE="XLinkExpansion",i.INIT_SEGMENT_TYPE="InitializationSegment",i.INDEX_SEGMENT_TYPE="IndexSegment",i.MEDIA_SEGMENT_TYPE="MediaSegment",i.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",i.OTHER_TYPE="other",n.HTTPRequest=i,n.HTTPRequestTrace=function e(){r(this,e),this.s=null,this.d=null,this.b=[]}},{}],236:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});n.ManifestUpdate=function e(){r(this,e),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},n.ManifestUpdateStreamInfo=function e(){r(this,e),this.id=null,this.index=null,this.start=null,this.duration=null},n.ManifestUpdateRepresentationInfo=function e(){r(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null}},{}],237:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function e(){r(this,e),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};i.INITIAL_PLAYOUT_START_REASON="initial_playout",i.SEEK_START_REASON="seek",i.RESUME_FROM_PAUSE_START_REASON="resume",i.METRICS_COLLECTION_START_REASON="metrics_collection_start";var a=function e(){r(this,e),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};a.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",a.REBUFFERING_REASON="rebuffering",a.USER_REQUEST_STOP_REASON="user_request",a.END_OF_PERIOD_STOP_REASON="end_of_period",a.END_OF_CONTENT_STOP_REASON="end_of_content",a.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",a.FAILURE_STOP_REASON="failure",n.PlayList=i,n.PlayListTrace=a},{}],238:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.t=null,this.mt=null,this.to=null,this.lto=null},t.exports=n.default},{}],239:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.loadingRequests=[],this.executedRequests=[]},t.exports=n.default},{}],240:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},t.exports=n.default},{}]},{},[4]);